/* sabre-spark - v2.2.0 - 2017-4-25 DO NOT MODIFY THIS FILE DIRECTLY OR YOU WILL NOT BE ABLE TO UPDATE YOUR VERSION OF SPARK. */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(t.Spark||(t.Spark={})).Menu=e()}}(function(){return function e(t,n,r){function o(l,s){if(!n[l]){if(!t[l]){var a="function"==typeof require&&require;if(!s&&a)return a(l,!0);if(i)return i(l,!0);var u=new Error("Cannot find module '"+l+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[l]={exports:{}};t[l][0].call(c.exports,function(e){var n=t[l][1][e];return o(n||e)},c,c.exports,e,t,n,r)}return n[l].exports}for(var i="function"==typeof require&&require,l=0;l<r.length;l++)o(r[l]);return o}({1:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../helpers/util/each"),i=function(e){return e&&e.__esModule?e:{default:e}}(o),l=function(){},s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),n.elRequired&&!t||(this.setParams(this.defaults||{},!0),this.setParams(n),(this._cacheElements||l).call(this,t,n),(this._parseParams||l).call(this))}return e.prototype.remove=function(e){return this._removeEventListeners&&this._removeEventListeners(),!e&&this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.unsetParams(this.defaults),this},e.prototype.update=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._removeEventListeners&&this._removeEventListeners(),(this._cacheElements||l).call(this,e||this.el,t),(this._parseParams||l).call(this),this._addEventListeners&&this._addEventListeners(),this},e.prototype.setParams=function(e,t){var n=this;return(0,i.default)(e,function(e,r){(-1!==n._whitelistedParams.indexOf(e)||t)&&(n[e]=r)}),this},e.prototype.unsetParams=function(e,t){return e=e instanceof Array?e:Object.keys(e),t=t||this,(0,i.default)(e,function(e){delete t[e]}),this},e}();s.prototype._whitelistedParams=[],s.prototype.defaults={},n.default=s,t.exports=n.default},{"../helpers/util/each":16}],2:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=e("./base"),a=r(s),u=e("../helpers/animation/height"),c=r(u),f=e("../helpers/css/transform"),d=r(f),p=e("../helpers/dom/add-class"),h=r(p),m=e("../helpers/dom/remove-class"),g=r(m),_=e("../helpers/dom/has-class"),v=r(_),y=e("../helpers/traversal/has-parent"),b=r(y),E=e("../helpers/traversal/get-parent"),L=r(E),k=e("../helpers/traversal/get-parents"),x=r(k),C=e("../helpers/traversal/get-child"),w=r(C),A=e("../helpers/manipulation/wrap-element"),M=r(A),P=function(){},S=function(e){function t(n){var r,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,t),l.elRequired=!0,(r=i(this,e.call(this,n,l)))?(r._bindEventListenerCallbacks(),r._addEventListeners(),r._checkAnimation(),i(r)):i(r)}return l(t,e),t.prototype._cacheElements=function(e){this.el=e,this.toggleEl=this.el.querySelector(".spark-menu__toggle")},t.prototype._bindEventListenerCallbacks=function(){this._onClickBound=this._onClick.bind(this),this._onFocusBound=this._onFocus.bind(this),this._onBlurBound=this._onBlur.bind(this)},t.prototype._addEventListeners=function(){this.el.addEventListener("click",this._onClickBound),this.el.addEventListener("focus",this._onFocusBound,!0),this.el.addEventListener("blur",this._onBlurBound,!0)},t.prototype._removeEventListeners=function(){this.el.removeEventListener("click",this._onClickBound),this.el.removeEventListener("focus",this._onFocusBound),this.el.removeEventListener("blur",this._onBlurBound)},t.prototype._toggleItem=function(e){(0,v.default)(e,"open")?this._closeItem(e):this._openItem(e)},t.prototype._checkAnimation=function(){this.el.querySelector(".spark-menu__list-next")&&(this.cachedList=this.cachedList||[],this._createMenuAnimationWrapper(),this._animateListChange())},t.prototype._createMenuAnimationWrapper=function(){if(!this.wrapperEl){var e=document.createElement("div");(0,h.default)(e,"spark-menu__animation-wrapper"),(0,M.default)(this.el.querySelector(".spark-menu__list"),e),this.wrapperEl=e}},t.prototype._animateListChange=function(e){e&&(0,h.default)(this.wrapperEl,"no-animate"),this.wrapperEl.setAttribute("style",(0,d.default)("translateX","-"+100*this.cachedList.length+"%")),e&&setTimeout(function(){(0,g.default)(this.wrapperEl,"no-animate")}.bind(this),1)},t.prototype._appendList=function(e,t){this._createMenuAnimationWrapper();var n=e.cloneNode(!0);(0,h.default)(n,"nestedList"),n.setAttribute("data-nested-list-id",n.getAttribute("id")),n.removeAttribute("id"),this.wrapperEl&&(this.wrapperEl.appendChild(n),this.cachedList.push(n),this._animateListChange(t))},t.prototype._removeLastList=function(){if(this.cachedList.length){var e=this.cachedList.pop();this.wrapperEl&&this._animateListChange(),window.setTimeout(function(){e.parentNode.removeChild(e)},250)}},t.prototype._removeAllCachedLists=function(){if(this.cachedList)for(;this.cachedList.length;)this._removeLastList()},t.prototype._getNextList=function(e){return e.querySelector(".spark-menu__list-next")?document.querySelector(e.querySelector(".spark-menu__list-next").getAttribute("data-menu")):null},t.prototype._openItem=function(e){(0,v.default)(e,"open")||((0,c.default)({el:e,toggleEl:".spark-menu__list"}),(0,h.default)(e,"open"))},t.prototype._closeItem=function(e){(0,v.default)(e,"open")&&((0,c.default)({el:e,toggleEl:".spark-menu__list",toggleValue:"none",action:"collapse"}),(0,g.default)(e,"open"))},t.prototype._activateItem=function(e){if(!(0,v.default)(e,"active")){var t=(0,x.default)(e,".spark-menu__list",this.el);this._deactivateItems(t[t.length-1]),this._deactivateItemSiblings(e),(0,h.default)(e,"active"),this._activateItemParents(e,this.el)}},t.prototype._activateItemParents=function(e,t){for(var n=(0,x.default)(e.parentNode,'[class*="list-item"]',t),r=0,o=n.length;r<o;r++)this._openItem(n[r]),(0,h.default)(n[r],"child-active")},t.prototype._deactivateItems=function(e){for(var t=e.querySelectorAll('[class*="list-item"].active'),n=0,r=t.length;n<r;n++)(0,g.default)(t.item(n),"active")},t.prototype._deactivateItemSiblings=function(e){for(var t=e.parentNode.querySelectorAll('[class*="list-item"].child-active'),n=0,r=t.length;n<r;n++)(0,g.default)(t[n],"child-active"),(0,g.default)(t[n],"open")},t.prototype._openActiveParents=function(){var e=this.el.querySelector(".active");if(e)for(var t,n,r=(0,x.default)(e,".spark-menu__list-item",this.el),o=r.length-1;o>=0;o--)t=(0,w.default)(r[o],".spark-menu__list-links"),t&&t.querySelector(".spark-menu__list-next")?(n=this._getNextList(r[o]))&&!this._cachedListContainsID(n.getAttribute("id"))&&this._appendList(n,!0):(0,h.default)(r[o],"open")},t.prototype._cachedListContainsID=function(e){for(var t=this.cachedList.length;t--;)if(this.cachedList[t].getAttribute("data-nested-list-id")===e)return!0;return!1},t.prototype._onClick=function(e){if(!(0,L.default)(e.target,"form",this.el)){if(e.target===this.toggleEl||(0,b.default)(e.target,this.toggleEl))return(this.onToggle||P)(e,this);var t=(0,L.default)(e.target,".spark-menu__list-expand",this.el),n=(0,L.default)(e.target,".spark-menu__list-item",this.el);if(n&&!(0,L.default)(e.target,".spark-menu__ignore",this.el)){if(t)return this._toggleItem(n);if(n&&!(0,b.default)(e.target,document.querySelector(".spark-header--visible"))){var r=this._getNextList(n);if(r&&(0,v.default)(e.target,"spark-menu__list-next"))return this._activateItem(n),void this._appendList(r);if((0,L.default)(e.target,".spark-menu__list-back",n)&&(0,v.default)(e.target,"spark-menu__list-back"))return void this._removeLastList()}this._activateItem(n)}}},t.prototype._onFocus=function(e){for(var t=e.target,n=t;t&&(t=(0,L.default)(n.parentNode,".spark-menu__list-item",this.el))&&t!==n;)(0,h.default)(t,"has-focus"),n=t},t.prototype._onBlur=function(e){for(var t=e.target,n=t;t&&(t=(0,L.default)(n.parentNode,".spark-menu__list-item",this.el))&&t!==n;)(0,g.default)(t,"has-focus"),n=t},t}(a.default);S.prototype._whitelistedParams=["onToggle"],S.prototype.defaults={cachedList:null,el:null,toggleEl:null,wrapperEl:null,onToggle:null,_onClickBound:null,_onFocusBound:null,_onBlurBound:null},n.default=S,t.exports=n.default},{"../helpers/animation/height":3,"../helpers/css/transform":4,"../helpers/dom/add-class":5,"../helpers/dom/has-class":6,"../helpers/dom/remove-class":8,"../helpers/manipulation/wrap-element":10,"../helpers/traversal/get-child":11,"../helpers/traversal/get-parent":12,"../helpers/traversal/get-parents":13,"../helpers/traversal/has-parent":14,"./base":1}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){switch(t){case"overflow":case"visibility":return"visible"===n?"hidden":"visible";default:return"block"===n||"inline-block"===n?"none":"block"}}function i(e){e.toggleClassName?(0,g.default)(e.el,e.toggleClassName,!e.collapse):e.toggleEl.style[e.toggleProperty]="",e.el.style.height="",e.toggleEl.style.height="",e.toggleEl.style.marginBottom="",e.toggleEl.style.marginTop="",(0,d.default)(e.el,e.heightAnimationClass),(0,d.default)(e.toggleEl,e.heightAnimationClass),e.onComplete();var t=v.els.indexOf(e.el);v.els.splice(t,1),v.completeCallbacks.splice(t,1)}function l(e){function t(){var t=(0,a.default)(n),o=void 0,h=void 0;r?(u?(0,d.default)(n,u):s.style[f]=m,h=(0,a.default)(s,p),o=0):(o=(0,a.default)(s,p),h=0),n.style.height=L+"px",s.style.height=h+"px",s.style.marginBottom="0px",s.style.marginTop="0px",(0,c.default)(n,l),(0,c.default)(s,l),v.els.push(n),setTimeout(function(){n.style.height=t+"px",s.style.height=o+"px",v.completeCallbacks.push(setTimeout(function(){i({el:n,toggleEl:s,onComplete:e.onComplete||_,collapse:r,toggleProperty:f,toggleClassName:u,toggleValue:y,heightAnimationClass:l})},void 0!==e.animationDuration?e.animationDuration:201))},0)}e=e||{};var n=e.el;if(n){var r=e.action&&"collapse"===e.action,l=e.heightAnimationClass||"spark-animate-height",s="string"==typeof e.toggleEl?n.querySelector(e.toggleEl):e.toggleEl;if(s&&!(0,h.default)(n,"spark-no-animate")){var u=e.toggleClass,f=e.toggleProperty||"display",p=window.getComputedStyle(s),m=p[f],y=e.toggleValue||o(f,m),b=v.els.indexOf(n);if(-1!==b){var E=v.completeCallbacks[b];E&&clearTimeout(E),i({el:n,toggleEl:s,onComplete:e.onComplete||_,collapse:r,toggleProperty:f,toggleClassName:u,toggleValue:y,heightAnimationClass:l})}var L=(0,a.default)(n);u?(0,g.default)(n,u,!r):s.style[f]=y,r?setTimeout(t,0):t()}}}Object.defineProperty(n,"__esModule",{value:!0});var s=e("../dom/outer-height"),a=r(s),u=e("../dom/add-class"),c=r(u),f=e("../dom/remove-class"),d=r(f),p=e("../dom/has-class"),h=r(p),m=e("../dom/toggle-class"),g=r(m),_=function(){},v={els:[],completeCallbacks:[]};n.default=l,t.exports=n.default},{"../dom/add-class":5,"../dom/has-class":6,"../dom/outer-height":7,"../dom/remove-class":8,"../dom/toggle-class":9}],4:[function(e,t,n){"use strict";function r(e,t){var n="";return(0,l.default)(s,function(r){if("object"===(void 0===t?"undefined":o(t))){n+=r+"transform: ";for(var i in t)n+=i+"("+t[i]+"); "}else n+=r+"transform: "+e+"("+t+"); "}),n}Object.defineProperty(n,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("../util/each"),l=function(e){return e&&e.__esModule?e:{default:e}}(i),s=["-webkit-","-moz-","-o-","-ms-",""];n.default=r,t.exports=n.default},{"../util/each":16}],5:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(t=2===arguments.length&&"string"==typeof t?(0,l.default)(t).split(u):t instanceof Array?t:Array.prototype.slice.call(arguments,1),1===t.length&&e.classList)return t[0]&&e.classList.add(t[0]),e;for(var n=[],r=0,o=t.length,i=void 0,s="string"==typeof e.className?e.className:e.getAttribute?e.getAttribute("class"):"";r<o;r++)(i=t[r])&&!(0,a.default)(s,i)&&n.push(i);return n.length&&("string"==typeof e.className?e.className=(0,l.default)((s+" "+n.join(" ")).replace(c," ")):e.setAttribute&&e.setAttribute("class",(0,l.default)((s+" "+n.join(" ")).replace(c," ")))),e}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../util/trim"),l=r(i),s=e("./has-class"),a=r(s),u=/\s+/,c=/\s{2,}/g;n.default=o,t.exports=n.default},{"../util/trim":17,"./has-class":6}],6:[function(e,t,n){"use strict";function r(e,t){return-1!==(" "+("object"===(void 0===e?"undefined":o(e))?e.className||e.getAttribute&&e.getAttribute("class")||"":e||"").replace(/[\t\r\n\f]/g," ")+" ").indexOf(" "+t+" ")}Object.defineProperty(n,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.default=r,t.exports=n.default},{}],7:[function(e,t,n){"use strict";function r(e,t){t=t||window.getComputedStyle(e);var n=e.clientHeight;return(0,i.default)(l,function(e){n+=parseInt(t[e]||0,10)}),n}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../util/each"),i=function(e){return e&&e.__esModule?e:{default:e}}(o),l=["marginTop","marginBottom","borderTop","borderBottom"];n.default=r,t.exports=n.default},{"../util/each":16}],8:[function(e,t,n){"use strict";function r(e,t){if(t=2===arguments.length&&"string"==typeof t?(0,i.default)(t).split(l):t instanceof Array?t:Array.prototype.slice.call(arguments,1),1===t.length&&e.classList)return t[0]&&e.classList.remove(t[0]),e;for(var n=" "+("string"==typeof e.className?e.className:e.getAttribute?e.getAttribute("class"):"")+" ",r=n,o=void 0,a=void 0,u=0,c=t.length;u<c;u++)o=t[u],-1!==(a=o?r.indexOf(" "+o+" "):-1)&&(a+=1,r=r.slice(0,a)+r.slice(a+o.length));return n!==r&&("string"==typeof e.className?e.className=(0,i.default)(r.replace(s," ")):e.setAttribute&&e.setAttribute("class",(0,i.default)(r.replace(s," ")))),e}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../util/trim"),i=function(e){return e&&e.__esModule?e:{default:e}}(o),l=/\s+/,s=/\s{2,}/g;n.default=r,t.exports=n.default},{"../util/trim":17}],9:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){if(e){if(!(e instanceof NodeList||e instanceof Array)){var r=void 0;return void 0!==n?(n="function"==typeof n?n.call(null,e):n,r=n?"add":"remove"):r=(0,l.default)(e,t)?"remove":"add",("add"===r?a.default:c.default)(e,t)}for(var i=0,s=e.length;i<s;i++)o(e[i],t,n)}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./has-class"),l=r(i),s=e("./add-class"),a=r(s),u=e("./remove-class"),c=r(u);n.default=o,t.exports=n.default},{"./add-class":5,"./has-class":6,"./remove-class":8}],10:[function(e,t,n){"use strict";function r(e,t){return t=t||document.createElement("div"),e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t.appendChild(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,t.exports=n.default},{}],11:[function(e,t,n){"use strict";function r(e,t){for(var n=0,r=e.children.length;n<r;n++)if((0,i.default)(e.children[n],t))return e.children[n];return null}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./matches"),i=function(e){return e&&e.__esModule?e:{default:e}}(o);n.default=r,t.exports=n.default},{"./matches":15}],12:[function(e,t,n){"use strict";function r(e,t,n){for(n=n instanceof Array?n:[n||document.body];e;){if((0,i.default)(e,t))return e;if(-1!==n.indexOf(e))return!1;e=e.parentNode}return!1}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./matches"),i=function(e){return e&&e.__esModule?e:{default:e}}(o);n.default=r,t.exports=n.default},{"./matches":15}],13:[function(e,t,n){"use strict";function r(e,t,n){for(var r=[];e=(0,i.default)(e.parentNode,t,n);)r.push(e);return r}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./get-parent"),i=function(e){return e&&e.__esModule?e:{default:e}}(o);n.default=r,t.exports=n.default},{"./get-parent":12}],14:[function(e,t,n){"use strict";function r(e,t){for(var n=e.parentNode;n;){if(n===t)return!0;n=n.parentNode}return!1}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,t.exports=n.default},{}],15:[function(e,t,n){"use strict";function r(e,t){if(o)return o.call(e,t);for(var n=e.parentNode?e.parentNode.querySelectorAll(t):[],r=0;r<n.length;r++)if(n[r]===e)return!0;return!1}Object.defineProperty(n,"__esModule",{value:!0});var o="undefined"!=typeof Element&&(Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector);n.default=r,t.exports=n.default},{}],16:[function(e,t,n){"use strict";function r(e,t){if(e){if("function"!=typeof t)throw new Error("Cannot invoke `each` without a callback!");var n=0,r=e.length;if(void 0===r)for(n in e)"prototype"!==n&&e.hasOwnProperty(n)&&t(n,e[n]);else for(;n<r;n++)t(e[n])}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,t.exports=n.default},{}],17:[function(e,t,n){"use strict";function r(e){return e.replace(o,"")}Object.defineProperty(n,"__esModule",{value:!0});var o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;n.default=r,t.exports=n.default},{}]},{},[2])(2)});