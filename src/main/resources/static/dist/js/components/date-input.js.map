{"version":3,"sources":["js/dist/components/node_modules/browser-pack/_prelude.js","js/dist/components/js/dist/components/base.js","js/dist/components/js/dist/components/date-input.js","js/dist/components/js/dist/components/date-select.js","js/dist/components/js/dist/components/date-typeahead.js","js/dist/components/js/dist/components/select-input.js","js/dist/components/js/dist/components/typeahead.js","js/dist/components/js/dist/helpers/animation/height.js","js/dist/components/js/dist/helpers/date/date.js","js/dist/components/js/dist/helpers/date/parse-format.js","js/dist/components/js/dist/helpers/dom/add-class.js","js/dist/components/js/dist/helpers/dom/has-class.js","js/dist/components/js/dist/helpers/dom/make-element.js","js/dist/components/js/dist/helpers/dom/outer-height.js","js/dist/components/js/dist/helpers/dom/parse-attribute.js","js/dist/components/js/dist/helpers/dom/remove-class.js","js/dist/components/js/dist/helpers/dom/toggle-class.js","js/dist/components/js/dist/helpers/dom/trigger-event.js","js/dist/components/js/dist/helpers/manipulation/append-children.js","js/dist/components/js/dist/helpers/manipulation/copy-attributes.js","js/dist/components/js/dist/helpers/util/each.js","js/dist/components/js/dist/helpers/util/mixin.js","js/dist/components/js/dist/helpers/util/pad.js","js/dist/components/js/dist/helpers/util/trim.js","js/dist/components/js/dist/mixins/messaging.js","js/dist/components/js/dist/mixins/validation.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACniCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"date-input.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _each = require('../helpers/util/each');\n\nvar _each2 = _interopRequireDefault(_each);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } /**\n                                                                                                                                                           * # Base Component\n                                                                                                                                                           * The base class for Spark JS components. This class should never be\n                                                                                                                                                           * instantiated directly.\n                                                                                                                                                           *\n                                                                                                                                                           * @param {Element} el\n                                                                                                                                                           * @param {Object} params\n                                                                                                                                                           *\n                                                                                                                                                           * @module components/base.js\n                                                                                                                                                           */\n\nvar noop = function noop() {};\n\nvar Base = function () {\n\n  /**\n   * Set parameters and cache elements.\n   */\n  function Base(el) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Base);\n\n    if (params.elRequired && !el) {\n      return;\n    }\n\n    this.setParams(this.defaults || {}, true);\n    this.setParams(params);\n    (this._cacheElements || noop).call(this, el, params);\n    (this._parseParams || noop).call(this);\n  }\n\n  /**\n   * Remove the component from the DOM and prepare for garbage collection by dereferencing values.\n   * @param {Boolean} leaveElement Leave the element intact.\n   */\n\n\n  Base.prototype.remove = function remove(leaveElement) {\n\n    if (this._removeEventListeners) {\n      this._removeEventListeners();\n    }\n\n    if (!leaveElement && this.el && this.el.parentNode) {\n      this.el.parentNode.removeChild(this.el);\n    }\n\n    this.unsetParams(this.defaults);\n\n    return this;\n  };\n\n  /**\n   * Update the component to use a new element or reparse from\n   * the existing element.\n   * @param {Element} el Optional\n   * @param {Object} params Optional\n   */\n\n\n  Base.prototype.update = function update(el) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\n    if (this._removeEventListeners) {\n      this._removeEventListeners();\n    }\n\n    (this._cacheElements || noop).call(this, el || this.el, params);\n    (this._parseParams || noop).call(this);\n\n    if (this._addEventListeners) {\n      this._addEventListeners();\n    }\n\n    return this;\n  };\n\n  /**\n   * Set a hash of parameters if they're whitelisted or we're told to force the set.\n   * This is used to set initial values as well as set passed parameters.\n   * @param {Object} params\n   * @param {Boolean} force Force setting even if the param is not whitelisted.\n   */\n\n\n  Base.prototype.setParams = function setParams(params, force) {\n    var _this = this;\n\n    (0, _each2.default)(params, function (k, v) {\n      if (_this._whitelistedParams.indexOf(k) !== -1 || force) {\n        _this[k] = v;\n      }\n    });\n\n    return this;\n  };\n\n  /**\n   * Unset all parameters.\n   * @param {Array|Object} keys\n   * @param {Object} scope The object to unset the params from. Defaults to `this`.\n   */\n\n\n  Base.prototype.unsetParams = function unsetParams(keys, scope) {\n\n    keys = keys instanceof Array ? keys : Object.keys(keys);\n    scope = scope || this;\n    (0, _each2.default)(keys, function (k) {\n      delete scope[k];\n    });\n\n    return this;\n  };\n\n  return Base;\n}();\n\n/**\n * Whitelisted parameters which can be set on construction.\n * @type {Array}\n */\n\n\nBase.prototype._whitelistedParams = [];\n\n/**\n * Default values for internal properties we will be setting.\n * These are set on each construction so we don't leak properties\n * into the prototype chain.\n * @type {Object}\n */\nBase.prototype.defaults = {};\n\nexports.default = Base;\nmodule.exports = exports['default'];\n//# sourceMappingURL=base.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _base = require('./base');\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _dateTypeahead = require('./date-typeahead');\n\nvar _dateTypeahead2 = _interopRequireDefault(_dateTypeahead);\n\nvar _dateSelect = require('./date-select');\n\nvar _dateSelect2 = _interopRequireDefault(_dateSelect);\n\nvar _parseFormat = require('../helpers/date/parse-format');\n\nvar _parseFormat2 = _interopRequireDefault(_parseFormat);\n\nvar _pad = require('../helpers/util/pad');\n\nvar _pad2 = _interopRequireDefault(_pad);\n\nvar _toggleClass = require('../helpers/dom/toggle-class');\n\nvar _toggleClass2 = _interopRequireDefault(_toggleClass);\n\nvar _removeClass = require('../helpers/dom/remove-class');\n\nvar _removeClass2 = _interopRequireDefault(_removeClass);\n\nvar _addClass = require('../helpers/dom/add-class');\n\nvar _addClass2 = _interopRequireDefault(_addClass);\n\nvar _hasClass = require('../helpers/dom/has-class');\n\nvar _hasClass2 = _interopRequireDefault(_hasClass);\n\nvar _appendChildren = require('../helpers/manipulation/append-children');\n\nvar _appendChildren2 = _interopRequireDefault(_appendChildren);\n\nvar _triggerEvent = require('../helpers/dom/trigger-event');\n\nvar _triggerEvent2 = _interopRequireDefault(_triggerEvent);\n\nvar _copyAttributes = require('../helpers/manipulation/copy-attributes');\n\nvar _copyAttributes2 = _interopRequireDefault(_copyAttributes);\n\nvar _date = require('../helpers/date/date');\n\nvar _date2 = _interopRequireDefault(_date);\n\nvar _each = require('../helpers/util/each');\n\nvar _each2 = _interopRequireDefault(_each);\n\nvar _parseAttribute = require('../helpers/dom/parse-attribute');\n\nvar _mixin = require('../helpers/util/mixin');\n\nvar _mixin2 = _interopRequireDefault(_mixin);\n\nvar _messaging = require('../mixins/messaging');\n\nvar _messaging2 = _interopRequireDefault(_messaging);\n\nvar _makeElement = require('../helpers/dom/make-element');\n\nvar _makeElement2 = _interopRequireDefault(_makeElement);\n\nvar _validation = require('../mixins/validation');\n\nvar _validation2 = _interopRequireDefault(_validation);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * # DateInput\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * A date input container.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @example\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * new DateInput(el, {\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *   // Optional. Callback for when the input value changes.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *   onChange(value, inputInstance) {}\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * });\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @module components/date-input.js\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar domDateFormat = 'YYYY-MM-DD';\nvar parsedDomFormat = (0, _parseFormat2.default)(domDateFormat);\nvar noop = function noop() {};\n\nvar DateInput = function (_Base) {\n  _inherits(DateInput, _Base);\n\n  /**\n   * DateInput constructor.\n   * @param {Element} el\n   * @param {Object} params\n   */\n  function DateInput(el) {\n    var _this;\n\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, DateInput);\n\n    params.elRequired = true;\n\n    if (!(_this = _possibleConstructorReturn(this, _Base.call(this, el, params)), _this)) {\n      return _possibleConstructorReturn(_this);\n    }\n\n    _this._bindEventListenerCallbacks();\n    _this._convertLabel();\n    _this._initializeInputs();\n    _this._updateClass();\n    _this._addEventListeners();\n    return _possibleConstructorReturn(_this);\n  }\n\n  /**\n   * Show the input by adding the active state and setting character counts (if necessary).\n   */\n\n\n  DateInput.prototype.show = function show() {\n\n    if (!this.isActive) {\n      this._runTypeaheads();\n      this.isActive = true;\n      this._updateClass();\n    }\n\n    return this;\n  };\n\n  /**\n   * Hide the input by removing the active state.\n   */\n\n\n  DateInput.prototype.hide = function hide() {\n    if (!this.isActive) return this;\n    this.isActive = false;\n    this._updateClass();\n    return this;\n  };\n\n  /**\n   * Augment default remove call w/ helper cleanup.\n   * @param {Boolean} leaveElement Leave the element intact.\n   */\n\n\n  DateInput.prototype.remove = function remove(leaveElement) {\n\n    this._removeTypeaheads(leaveElement);\n    this._removeSelects(leaveElement);\n    this._removeInputPieces();\n\n    _Base.prototype.remove.call(this, leaveElement);\n\n    return this;\n  };\n\n  /**\n   * Given an object with day, month and year, set the value of the input.\n   * @param {Object} values\n   */\n\n\n  DateInput.prototype.setValue = function setValue(values) {\n\n    values = values || {\n      day: '',\n      month: '',\n      year: ''\n    };\n    var i = void 0;\n    var hadValue = void 0;\n\n    for (i in this.typeaheads) {\n      if (values[i] !== undefined) {\n        this.typeaheads[i].setValue(values[i]);\n        hadValue = hadValue || (values[i] ? true : false);\n      }\n    }\n\n    for (i in this.selects) {\n      if (values[i] !== undefined) {\n        this.selects[i].setValue(values[i]);\n        hadValue = hadValue || (values[i] ? true : false);\n      }\n    }\n\n    if (!this.isActive && hadValue) {\n      this.isActive = true;\n    }\n\n    this._padTypeaheads();\n    this._updateClass();\n    this.updateInput();\n\n    return this;\n  };\n\n  /**\n   * Get the value of the input.\n   * @return {String}\n   */\n\n\n  DateInput.prototype.getValue = function getValue() {\n    return this.inputEl.value;\n  };\n\n  /**\n   * Clear the values.\n   */\n\n\n  DateInput.prototype.clearValue = function clearValue() {\n\n    (0, _each2.default)(this.isTypeahead ? this.typeaheads : this.selects, function (k, v) {\n      v.clearValue();\n    });\n\n    this.inputEl.value = '';\n\n    return this;\n  };\n\n  /**\n   * Set/reset error state\n   * @param {Boolean} true: set error state, false: reset\n   */\n\n\n  DateInput.prototype.setErrorState = function setErrorState(opt) {\n    if (opt) {\n      this.el.setAttribute('data-error', '');\n    } else {\n      this.el.removeAttribute('data-error');\n    }\n  };\n\n  /**\n   * Enable the inputs\n   */\n\n\n  DateInput.prototype.enable = function enable() {\n\n    (0, _each2.default)(this.isTypeahead ? this.typeaheads : this.selects, function (k, v) {\n      v.enable();\n    });\n\n    this.inputEl.removeAttribute('disabled');\n\n    (0, _toggleClass2.default)(this.el, 'disabled', false);\n\n    return this;\n  };\n\n  /**\n   * Clear the values.\n   */\n\n\n  DateInput.prototype.disable = function disable() {\n\n    (0, _each2.default)(this.isTypeahead ? this.typeaheads : this.selects, function (k, v) {\n      v.disable();\n    });\n\n    this.inputEl.setAttribute('disabled', '');\n\n    (0, _toggleClass2.default)(this.el, 'disabled', true);\n\n    return this;\n  };\n\n  /**\n   * Update the input values to match the typeaheads.\n   */\n\n\n  DateInput.prototype.updateInput = function updateInput() {\n\n    var inputs = void 0;\n\n    if (this.isTypeahead && this.typeaheads) {\n      inputs = this.typeaheads;\n    } else if (this.isSelect) {\n      inputs = this.selects;\n    }\n\n    if (inputs) {\n\n      var day = inputs.day && inputs.day.getValue(true) || 0;\n      var month = inputs.month && inputs.month.getValue(true) || 0;\n      var year = inputs.year && inputs.year.getValue(true) || 0;\n\n      var val = this.inputEl.value;\n\n      this.inputEl.value = [day, month, year].indexOf(0) === -1 ? (0, _pad2.default)(year, 4) + '-' + (0, _pad2.default)(month, 2) + '-' + (0, _pad2.default)(day, 2) : '';\n\n      if (val !== this.inputEl.value) {\n        this._pauseInputChange = true;\n        (0, _triggerEvent2.default)(this.inputEl, 'change');\n        (this.onChange || noop)(this.inputEl.value, this);\n        this._pauseInputChange = false;\n      }\n    }\n\n    return this;\n  };\n\n  /**\n   * Get current typing value\n   *\n   */\n\n\n  DateInput.prototype.getTypingValue = function getTypingValue() {\n\n    var inputs = void 0;\n    var result = '';\n\n    if (this.isTypeahead && this.typeaheads) {\n      inputs = this.typeaheads;\n    } else if (this.isSelect) {\n      inputs = this.selects;\n    }\n\n    if (inputs) {\n\n      var day = inputs.day && inputs.day.getValue(true);\n      var month = inputs.month && inputs.month.getValue(true);\n      var year = inputs.year && inputs.year.getValue(true);\n\n      result = month.toString() + day.toString() + year.toString();\n    }\n\n    return result;\n  };\n\n  /**\n   * Move the focus to a typeahead element.\n   * @param {Number} i\n   * @param {String} character Optional A character to add\n   */\n\n\n  DateInput.prototype.focus = function focus(i, character) {\n\n    if (!this.isActive || !this.inFocus) {\n      return this;\n    }\n\n    var index = this.typeaheadEls.indexOf(this.inFocus.typeahead.el);\n    var sib = this.typeaheadEls[index + i];\n    var typeahead = void 0;\n\n    // If we were passed a character to prepend, find the typeahead for this element\n    if (character) {\n      typeahead = this._getTypeaheadByElement(sib);\n      if (typeahead) {\n        typeahead.typeahead.addCharacterAtIndex(character, 0);\n      }\n    }\n\n    if (!sib) {\n      return false;\n    }\n\n    var sibInput = sib.querySelector('input');\n\n    if (sibInput) {\n      sibInput.focus();\n\n      // If we have a typeahead (because we needed to prepend a character), move the caret.\n      if (typeahead) {\n        typeahead.typeahead.moveCaret(1);\n      }\n    }\n\n    return this;\n  };\n\n  /**\n   * Move the focus to the next element.\n   * @param {String} character Optional A character to add\n   */\n\n\n  DateInput.prototype.focusNext = function focusNext(character) {\n\n    if (this.focus(1, character)) {\n      if (this.inFocus && !character) this.inFocus.typeahead.moveCaretToStart();\n    }\n\n    return this;\n  };\n\n  /**\n   * Move the focus to the next element.\n   * @param {String} character Optional A character to add\n   */\n\n\n  DateInput.prototype.focusPrevious = function focusPrevious(character) {\n\n    if (this.focus(-1, character)) {\n      if (this.inFocus) this.inFocus.typeahead.moveCaretToEnd();\n    }\n\n    return this;\n  };\n\n  /**\n   * Do we have any values?\n   * @return {Boolean}\n   */\n\n\n  DateInput.prototype.hasPartialValue = function hasPartialValue() {\n\n    var i = void 0;\n\n    for (i in this.typeaheads) {\n      if (this.typeaheads[i].getValue()) {\n        return true;\n      }\n    }\n\n    for (i in this.selects) {\n      if (this.selects[i].getValue()) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  /**\n   * Resize the elements, to account for any changed display property.\n   * @param {Element} el Optional\n   */\n\n\n  DateInput.prototype.update = function update(el) {\n\n    if (el) {\n\n      this._removeTypeaheads();\n      this._removeSelects();\n      this._removeInputPieces();\n\n      this._removeEventListeners();\n\n      this._cacheElements(el);\n      this._convertLabel();\n      this._initializeInputs();\n      this._updateClass();\n\n      this._addEventListeners();\n    } else {\n      this._runTypeaheads();\n    }\n\n    return this;\n  };\n\n  /**\n   * Store a reference to the needed elements.\n   * @param {Element} el\n   */\n\n\n  DateInput.prototype._cacheElements = function _cacheElements(el) {\n\n    this.el = el;\n\n    this.inputEl = this.el.querySelector('[type=\"date\"]');\n\n    if (!this.inputEl) {\n      throw new Error('No <input type=\"date\"> element present in date input container!', this.el);\n    }\n\n    this.toggleEl = this.el.querySelector('.spark-date__toggle');\n\n    this.messageEl = this.el.querySelector('.spark-input__message') || (0, _makeElement2.default)('<span class=\"spark-input__message\"></span>');\n  };\n\n  /**\n   * Parse parameters from the elements.\n   */\n\n\n  DateInput.prototype._parseParams = function _parseParams() {\n\n    this.isActive = this.isActive !== null ? this.isActive : this.inputEl.value ? true : false;\n    this.isSelect = this.isSelect !== null ? this.isSelect : (0, _hasClass2.default)(this.el, 'spark-date--select') ? true : false;\n    this.isTypeahead = this.isTypeahead !== null ? this.isTypeahead : !this.isSelect ? true : false;\n    this.format = this.format !== null ? this.format : (0, _parseAttribute.string)(this.inputEl, 'data-format', 'MM-DD-YYYY');\n    this.textFormat = this.textFormat !== null ? this.textFormat : (0, _parseAttribute.string)(this.inputEl, 'data-text-format', 'MM DD YYYY');\n    this.showDateAsText = this.showDateAsText !== null ? this.showDateAsText : (0, _parseAttribute.boolean)(this.inputEl, 'data-show-date-as-text', false);\n\n    this.parsedFormat = (0, _parseFormat2.default)(this.format);\n    this.parsedTextFormat = (0, _parseFormat2.default)(this.textFormat);\n    this.min = this.min !== null ? this.min : this.inputEl.getAttribute('min');\n    this.max = this.max !== null ? this.max : this.inputEl.getAttribute('max');\n    this.min = this.min && parsedDomFormat.getValues(this.min);\n    this.max = this.max && parsedDomFormat.getValues(this.max);\n  };\n\n  /**\n   * Setup the proper inputs. This could mean creating a typeahead, or creating selects.\n   */\n\n\n  DateInput.prototype._initializeInputs = function _initializeInputs() {\n\n    if (this.isTypeahead) {\n      this._initializeInputPieces();\n      this._runTypeaheads();\n    } else if (this.isSelect) {\n      (0, _removeClass2.default)(this.el, 'spark-input');\n      this._initializeInputPieces();\n    }\n  };\n\n  /**\n   * Replace the date input with a group of typeaheads or select inputs.\n   * Keep the date input around and store the typeahead data in there in an ISO date format.\n   */\n\n\n  DateInput.prototype._initializeInputPieces = function _initializeInputPieces() {\n\n    // Hide the original element. This will be updated as the typeahead values change\n    this.inputEl.style.display = 'none';\n\n    var els = [];\n    var label = void 0;\n\n    // Create a new typeahead for each part of the parsed format. Also add placeholder elements.\n    this.parsedFormat.parts.forEach(function (part) {\n      // Something weird with Node that makes us have to specify what `this` is here.\n      (this.isTypeahead ? this._initializeTypeaheadPiece : this._initializeSelectPiece).call(this, els, part);\n    }.bind(this));\n\n    // Create a holder for all the pieces\n    this.piecesEl = document.createElement('span');\n    this.piecesEl.className = this.isTypeahead ? 'spark-input__fields' : 'spark-select-group';\n\n    // Add all the necessary elements\n    (0, _appendChildren2.default)(this.piecesEl, els);\n\n    // If this is a select group, move the label element.\n    if (this.isSelect && (label = this.el.querySelector('.spark-label'))) {\n      this.piecesEl.appendChild(label);\n    }\n\n    // Add the pieces holder\n    this.el.insertBefore(this.piecesEl, this.inputEl);\n\n    // Set the value\n    if (this.inputEl.value) {\n      this.setValue(parsedDomFormat.getValues(this.inputEl.value));\n      this.isActive = true;\n    }\n  };\n\n  /**\n   * Remove the input pieces.\n   */\n\n\n  DateInput.prototype._removeInputPieces = function _removeInputPieces() {\n\n    this.inputEl.style.display = '';\n\n    // Remove elements we inserted into the DOM\n    if (this.piecesEl) {\n      this.piecesEl.parentNode.removeChild(this.piecesEl);\n    }\n  };\n\n  /**\n   * Remove typeaheads.\n   * @param {Boolean} leaveElement Leave the element intact.\n   */\n\n\n  DateInput.prototype._removeTypeaheads = function _removeTypeaheads(leaveElement) {\n\n    // Remove typeaheads\n    if (this.typeaheads) {\n      for (var i in this.typeaheads) {\n        this.typeaheads[i].remove(leaveElement);\n      }\n    }\n  };\n\n  /**\n   * Remove selects.\n   * @param {Boolean} leaveElement Leave the element intact.\n   */\n\n\n  DateInput.prototype._removeSelects = function _removeSelects(leaveElement) {\n\n    var label = void 0;\n\n    // Remove selects\n    if (this.selects) {\n\n      for (var i in this.selects) {\n        this.selects[i].remove(leaveElement);\n      }\n\n      // If this is a select group, move the label element.\n      if (label = this.piecesEl.querySelector('.spark-label')) {\n        this.el.appendChild(label);\n      }\n\n      (0, _addClass2.default)(this.el, 'spark-input');\n    }\n  };\n\n  /**\n   * Create a typeahead or placeholder piece.\n   * @param {Array} els\n   * @param {Object} part\n   */\n\n\n  DateInput.prototype._initializeTypeaheadPiece = function _initializeTypeaheadPiece(els, part) {\n\n    this.typeaheads = this.typeaheads || {};\n    this.typeaheadEls = this.typeaheadEls || [];\n\n    var el = void 0;\n\n    switch (part.name) {\n      case 'day':\n      case 'month':\n      case 'year':\n        this.typeaheads[part.name] = new _dateTypeahead2.default({\n          type: part.name,\n          len: part.length,\n          placeholder: part.value,\n          onFocus: this._onTypeaheadFocusBound,\n          onBlur: this._onTypeaheadBlurBound,\n          onChange: this._onPieceChangeBound,\n          onInput: this._onTypeaheadInputBound,\n          onBackspace: this._onTypeaheadBackspaceBound,\n          onEnd: this._onTypeaheadEndBound\n        });\n        el = this.typeaheads[part.name].typeahead.el;\n        this.typeaheadEls.push(el);\n        break;\n      default:\n        el = document.createElement('span');\n        el.innerHTML = part.value;\n        el.className = 'spark-input__divider';\n        break;\n    }\n\n    els.push(el);\n  };\n\n  /**\n   * Replace the date input with three date dropdowns. Keep the date input around and store the\n   * select data in there.\n   */\n\n\n  DateInput.prototype._initializeSelectPiece = function _initializeSelectPiece(els, part) {\n\n    this.selects = this.selects || {};\n    this.selectEls = this.selectEls || [];\n\n    if (['day', 'month', 'year'].indexOf(part.name) === -1) {\n      return;\n    }\n\n    var el = void 0;\n\n    switch (part.name) {\n      case 'day':\n      case 'month':\n        this.selects[part.name] = new _dateSelect2.default({\n          type: part.name,\n          onChange: this._onPieceChangeBound\n        });\n        el = this.selects[part.name].select.el;\n        break;\n      case 'year':\n        {\n          var minYear = this.inputEl.min ? parsedDomFormat.getValues(this.inputEl.min).year : null;\n          var maxYear = this.inputEl.max ? parsedDomFormat.getValues(this.inputEl.max).year : null;\n\n          this.selects[part.name] = new _dateSelect2.default({\n            min: minYear,\n            max: maxYear,\n            type: part.name,\n            onChange: this._onPieceChangeBound\n          });\n          el = this.selects[part.name].select.el;\n          break;\n        }\n    }\n\n    els.push(el);\n    this.selectEls.push(el);\n  };\n\n  /**\n   * If our element is a label, convert it to a div so that\n   * we are semantically correct. Can't have more than one\n   * input inside of a label!\n   */\n\n\n  DateInput.prototype._convertLabel = function _convertLabel() {\n\n    if (this.isTypeahead || this.el.nodeName.toLowerCase() !== 'label') {\n      return;\n    }\n\n    var newEl = document.createElement('fieldset');\n\n    (0, _copyAttributes2.default)(this.el, newEl);\n    (0, _appendChildren2.default)(newEl, this.el.children);\n\n    if (this.el.parentNode) {\n      this.el.parentNode.replaceChild(newEl, this.el);\n    }\n\n    this.el = newEl;\n  };\n\n  /**\n   * Validate the date values.\n   */\n\n\n  DateInput.prototype._validate = function _validate() {\n\n    if (this.isTypeahead) {\n      this._validateTypeaheads();\n    } else if (this.isSelect) {\n      this._validateSelects();\n    }\n  };\n\n  /**\n   * Validate the typeahead values.\n   */\n\n\n  DateInput.prototype._validateTypeaheads = function _validateTypeaheads() {\n\n    if (!this.typeaheads) {\n      return;\n    }\n\n    var month = this.typeaheads.month ? this.typeaheads.month.getValue(true) : null;\n    var year = this.typeaheads.year ? this.typeaheads.year.getValue(true) : null;\n\n    var maxDay = month && new Date(year !== null ? year : new Date().getFullYear(), month, 0).getDate() || this._getMaxDaysInMonth(month);\n    var day = this.typeaheads.day ? this.typeaheads.day.getValue(true) : null;\n\n    if (maxDay < day) {\n      this.typeaheads.day.setValue(maxDay);\n      this.updateInput();\n    }\n  };\n\n  /**\n   * Validate the boundaries of the typeahead values relative to the min and max values.\n   */\n\n\n  DateInput.prototype._validateTypeaheadBounds = function _validateTypeaheadBounds() {\n\n    var year = this.typeaheads.year ? this.typeaheads.year.getValue(true) : null;\n    var month = this.typeaheads.month ? this.typeaheads.month.getValue(true) : null;\n    var day = this.typeaheads.day ? this.typeaheads.day.getValue(true) : null;\n\n    if (!year || !month || !day) {\n      return;\n    }\n\n    var date = new Date(year, month - 1, day);\n    var set = '';\n\n    if (this.min && date < new Date(this.min.year, this.min.month - 1, this.min.day)) {\n      set = 'min';\n    } else if (this.max && date > new Date(this.max.year, this.max.month - 1, this.max.day)) {\n      set = 'max';\n    }\n\n    if (set) {\n      this.typeaheads.year.setValue((0, _pad2.default)(this[set].year, this.typeaheads.year.typeahead.format.length));\n      this.typeaheads.month.setValue((0, _pad2.default)(this[set].month, this.typeaheads.month.typeahead.format.length));\n      this.typeaheads.day.setValue((0, _pad2.default)(this[set].day, this.typeaheads.day.typeahead.format.length));\n      this.updateInput();\n    }\n  };\n\n  /**\n   * Pad the typeahead input values.\n   */\n\n\n  DateInput.prototype._padTypeaheads = function _padTypeaheads() {\n\n    if (this._pauseInputChange) return;\n\n    this._pauseInputChange = true;\n\n    for (var i in this.typeaheads) {\n      this._padTypeahead(this.typeaheads[i]);\n    }\n\n    this._pauseInputChange = false;\n  };\n\n  /**\n   * Pad the typeahead input values.\n   * @param {Typeahead} typeahead\n   */\n\n\n  DateInput.prototype._padTypeahead = function _padTypeahead(typeahead) {\n\n    var value = typeahead.getValue();\n\n    if (value) {\n      var padded = (0, _pad2.default)(value, typeahead.typeahead.format.length);\n      if (value !== padded) typeahead.setValue((0, _pad2.default)(value, typeahead.typeahead.format.length));\n    }\n  };\n\n  /**\n   * Do any of the typeaheads have a value?\n   * @return {Boolean}\n   */\n\n\n  DateInput.prototype._hasTypeaheadValue = function _hasTypeaheadValue() {\n\n    for (var i in this.typeaheads) {\n      if (this.typeaheads[i].getValue(true)) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  /**\n   * Validate select input values.\n   */\n\n\n  DateInput.prototype._validateSelects = function _validateSelects() {\n\n    if (!this.selects) {\n      return;\n    }\n\n    var month = this.selects.month ? this.selects.month.getValue(true) : null;\n    var year = this.selects.year ? this.selects.year.getValue(true) : null;\n\n    var maxDay = month && new Date(year !== null ? year : new Date().getFullYear(), month, 0).getDate() || this._getMaxDaysInMonth(month);\n    var day = this.selects.day ? this.selects.day.getValue(true) : null;\n\n    this.selects.day.setOptions({\n      max: maxDay\n    });\n    if (maxDay < day) {\n      this.selects.day.setValue(maxDay);\n    }\n\n    this.updateInput();\n  };\n\n  /**\n   * Get the maximum number of days for a given month.\n   * @param {Number} month The month's number. 1-12.\n   * @return {Number} The maximum number of days. 28-31.\n   */\n\n\n  DateInput.prototype._getMaxDaysInMonth = function _getMaxDaysInMonth(month) {\n    if (month === 2) return 29;else if ([4, 6, 9, 11].indexOf(month) !== -1) return 30;\n    return 31;\n  };\n\n  /**\n   * Create bound versions of event listener callbacks and store them.\n   * Otherwise we can't unbind from these events later because them.\n   */\n\n\n  DateInput.prototype._bindEventListenerCallbacks = function _bindEventListenerCallbacks() {\n    this._onTypeaheadBlurBound = this._onTypeaheadBlur.bind(this);\n    this._onTypeaheadInputBound = this._onTypeaheadInput.bind(this);\n    this._onTypeaheadFocusBound = this._onTypeaheadFocus.bind(this);\n    this._onPieceChangeBound = this._onPieceChange.bind(this);\n    this._onTypeaheadBackspaceBound = this._onTypeaheadBackspace.bind(this);\n    this._onTypeaheadEndBound = this._onTypeaheadEnd.bind(this);\n    this._onInputChangeBound = this._onInputChange.bind(this);\n    this._onVisibleChildrenBound = this._onVisibleChildren.bind(this);\n  };\n\n  /**\n   * Add event listeners.\n   */\n\n\n  DateInput.prototype._addEventListeners = function _addEventListeners() {\n    this.el.addEventListener('click', this._onClickBound);\n    this.inputEl.addEventListener('change', this._onInputChangeBound);\n    document.addEventListener('spark.visible-children', this._onVisibleChildrenBound, true);\n  };\n\n  /**\n   * Remove event listeners.\n   */\n\n\n  DateInput.prototype._removeEventListeners = function _removeEventListeners() {\n    this.el.removeEventListener('click', this._onClickBound);\n    this.inputEl.removeEventListener('change', this._onInputChangeBound);\n    document.removeEventListener('spark.visible-children', this._onVisibleChildrenBound, true);\n  };\n\n  /**\n   * Handle the spark.visible-children event\n   * @param {Object} e\n   */\n\n\n  DateInput.prototype._onVisibleChildren = function _onVisibleChildren(e) {\n    if (e.target.contains(this.el)) {\n      window.setTimeout(function () {\n        this.update();\n      }.bind(this), 0);\n    }\n  };\n\n  /**\n   * Run all typeaheads so they have placeholder values.\n   */\n\n\n  DateInput.prototype._runTypeaheads = function _runTypeaheads() {\n\n    // Make sure we don't get into an infinite loop. Even though the logic\n    // in the typeaheads should be stopping this from happening, there is\n    // something in Safari where the focus and blur events fire in different\n    // order than other browsers so those failsafes do not work.\n    if (this.runningTypeaheads) {\n      return;\n    }\n\n    this.runningTypeaheads = true;\n\n    if (this.inFocus) {\n      this.inFocus.pause();\n    }\n\n    for (var i in this.typeaheads) {\n      if (this.typeaheads[i] !== this.inFocus) {\n        this.typeaheads[i].run();\n      }\n    }\n\n    if (this.inFocus) {\n      this.inFocus.resume();\n      this.inFocus.run();\n    }\n\n    this.runningTypeaheads = false;\n  };\n\n  /**\n   * Update the active and focus classes.\n   */\n\n\n  DateInput.prototype._updateClass = function _updateClass() {\n    (0, _toggleClass2.default)(this.el, 'active', this.isActive);\n    (0, _toggleClass2.default)(this.el, 'has-partial-value', this.hasPartialValue());\n    (0, _toggleClass2.default)(this.el, 'focus', this.inFocus ? true : false);\n  };\n\n  /**\n   * Get the typeahead that corresponds to the given element.\n   * @param {Element} el\n   * @return {Object}\n   */\n\n\n  DateInput.prototype._getTypeaheadByElement = function _getTypeaheadByElement(el) {\n    for (var i in this.typeaheads) {\n      if (this.typeaheads[i].typeahead.el === el) {\n        return this.typeaheads[i];\n      }\n    }\n  };\n\n  /**\n   * Show the date as text.\n   */\n\n\n  DateInput.prototype._showDateText = function _showDateText() {\n\n    var text = this._getDateText();\n\n    if (!text || !this.showDateAsText) {\n      return;\n    }\n\n    if (!this.dateTextEl) {\n      this._createDateTextEl();\n    }\n\n    this.dateTextEl.innerHTML = text;\n    this.dateTextEl.style.display = '';\n  };\n\n  /**\n   * Hide the date as text.\n   */\n\n\n  DateInput.prototype._hideDateText = function _hideDateText() {\n\n    if (!this.showDateAsText || !this.dateTextEl) {\n      return;\n    }\n\n    this.dateTextEl.style.display = 'none';\n  };\n\n  /**\n   * Create the date text element.\n   */\n\n\n  DateInput.prototype._createDateTextEl = function _createDateTextEl() {\n\n    var el = document.createElement('div');\n    el.className = 'spark-input__overlay';\n    el.style.display = 'none';\n\n    this.el.appendChild(el);\n    this.dateTextEl = el;\n  };\n\n  /**\n   * Get the date as text.\n   */\n\n\n  DateInput.prototype._getDateText = function _getDateText() {\n\n    var parts = this.parsedTextFormat.parts;\n    var i = 0;\n    var len = parts.length;\n    var str = '';\n    var isValid = true;\n    var val;\n\n    for (; i < len; i++) {\n\n      val = this.typeaheads[parts[i].name] && this.typeaheads[parts[i].name].getValue();\n\n      switch (parts[i].name) {\n        case 'month':\n          str += _date2.default.getMonthNameShort(val);\n          if (!val) {\n            isValid = false;\n            break;\n          }\n          break;\n        case 'day':\n        case 'year':\n          str += val;\n          if (!val) {\n            isValid = false;\n            break;\n          }\n          break;\n        default:\n          str += parts[i].value;\n          break;\n      }\n    }\n\n    return isValid ? str : false;\n  };\n\n  /**\n   * When the value of a typeahead or select changes, validate.\n   * @param {Number} val\n   * @param {Object} typeahead\n   */\n\n\n  DateInput.prototype._onPieceChange = function _onPieceChange() {\n\n    this._validate();\n\n    if (this.isTypeahead && this.showDateAsText && !this._hasFocus) {\n\n      if (this._showTextTimer) {\n        clearTimeout(this._showTextTimer);\n      }\n\n      this._showTextTimer = setTimeout(function () {\n        this._showDateText();\n      }.bind(this), 0);\n    }\n  };\n\n  /**\n   * When the typeahead gains focus.\n   * @param {Number} val\n   * @param {Object} typeahead\n   */\n\n\n  DateInput.prototype._onTypeaheadFocus = function _onTypeaheadFocus(val, typeahead) {\n\n    if (this.runningTypeaheads) return;\n\n    this._hideDateText();\n\n    if (!this._hasFocus) {\n      this._hasFocus = true;\n      (this.onFocus || noop)(this.inputEl.value, this);\n    }\n\n    (0, _triggerEvent2.default)(this.inputEl, 'focus');\n    this.inFocus = typeahead;\n    this.show();\n    this._updateClass();\n\n    if (this._blurTimer) {\n      clearTimeout(this._blurTimer);\n      this._blurTimer = null;\n    }\n  };\n\n  /**\n   * When the typeahead loses focus, make sure numbers are padded properly.\n   * @param {Number} val\n   * @param {Object} typeahead\n   */\n\n\n  DateInput.prototype._onTypeaheadBlur = function _onTypeaheadBlur(val, typeahead) {\n\n    if (this.runningTypeaheads) return;\n\n    this.inFocus = null;\n\n    this._padTypeahead(typeahead);\n    this.updateInput();\n    this._updateClass();\n\n    if (!this.inputEl.value && !this._hasTypeaheadValue()) {\n      this.hide();\n    } else {\n      this._validateTypeaheadBounds();\n    }\n\n    this._blurTimer = setTimeout(function () {\n      this._hasFocus = false;\n      (this.onBlur || noop)(this.inputEl.value, this);\n      this._showDateText();\n    }.bind(this), 1);\n  };\n\n  /**\n   * `input` event callback for typeahead\n   */\n\n\n  DateInput.prototype._onTypeaheadInput = function _onTypeaheadInput() {\n    (this.onInput || noop)(this.getTypingValue(), this);\n  };\n\n  /**\n   * When the typeahead fires a backspace event, move back to the previous input.\n   * @param {Number} val\n   * @param {Object} typeahead\n   */\n\n\n  DateInput.prototype._onTypeaheadBackspace = function _onTypeaheadBackspace() {\n    this.focusPrevious();\n  };\n\n  /**\n   * When the typeahead is at its maximum length and the caret is at the end,\n   * focus on the next input field.\n   * @param {Object} typeahead\n   * @param {String} character Optional\n   */\n\n\n  DateInput.prototype._onTypeaheadEnd = function _onTypeaheadEnd(typeahead, character) {\n    this.focusNext(character);\n  };\n\n  /**\n   * When the input that corresponds to this instance changes. Allows us to listen\n   * and respond to changes made by other components (Calendar Popover, for example).\n   * @param {Object} e\n   */\n\n\n  DateInput.prototype._onInputChange = function _onInputChange(e) {\n\n    if (this.isTypeahead) {\n      this.isActive = e.target.value ? true : false;\n      this._updateClass();\n    }\n\n    if (this._pauseInputChange) return;\n    this.setValue(parsedDomFormat.getValues(e.target.value));\n    (this.onChange || noop)(this.inputEl.value, this);\n  };\n\n  /**\n   * When the input group is clicked, focus on the first typeahead\n   * if we don't already have focus.\n   * @todo : we should still replace the label on typeaheads and use this,\n   * but we need a way to focus on the closest element to a click.\n   * @param {Object} e\n   */\n\n\n  DateInput.prototype._onClick = function _onClick() /*e*/{\n\n    /*if (this.isTypeahead || this.inFocus || this.isActive || getParent(e.target, '.spark-input__addon')) {\n      return;\n    }\n     let input = this.typeaheadEls[0].querySelector('input');\n     if (input) {\n      input.focus();\n    }*/\n  };\n\n  return DateInput;\n}(_base2.default);\n\n/**\n * Whitelisted parameters which can be set on construction.\n * @type {Array}\n */\n\n\nDateInput.prototype._whitelistedParams = ['validate', 'onValidate', 'onChange', 'onInput', 'onFocus', 'onBlur', 'isTypeahead', 'isSelect', 'format', 'textFormat', 'showDateAsText', 'min', 'max'];\n\n/**\n * Default values for internal properties we will be setting.\n * These are set on each construction so we don't leak properties\n * into the prototype chain.\n * @type {Object}\n */\nDateInput.prototype.defaults = {\n  el: null,\n  inputEl: null,\n  messageEl: null,\n  piecesEl: null,\n  toggleEl: null,\n  inFocus: null,\n  isActive: null,\n  isSelect: null,\n  isTypeahead: null,\n  typeaheads: null,\n  typeaheadEls: null,\n  selects: null,\n  selectEls: null,\n  format: null,\n  parsedFormat: null,\n  showDateAsText: null,\n  textFormat: null,\n  runningTypeaheads: false,\n  onValidate: null,\n  onChange: null,\n  onInput: null,\n  onFocus: null,\n  onBlur: null,\n  _hasFocus: false,\n  _pauseInputChange: false,\n  _onClickBound: null,\n  _onPieceChangeBound: null,\n  _onTypeaheadFocusBound: null,\n  _onTypeaheadBlurBound: null,\n  _onTypeaheadInputBound: null,\n  _onTypeaheadBackspaceBound: null,\n  _onTypeaheadEndBound: null,\n  _onInputChangeBound: null\n};\n\n(0, _mixin2.default)(DateInput.prototype, _messaging2.default, _validation2.default);\n\nexports.default = DateInput;\nmodule.exports = exports['default'];\n//# sourceMappingURL=date-input.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _base = require('./base');\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _selectInput = require('./select-input');\n\nvar _selectInput2 = _interopRequireDefault(_selectInput);\n\nvar _date = require('../helpers/date/date');\n\nvar _date2 = _interopRequireDefault(_date);\n\nvar _parseAttribute = require('../helpers/dom/parse-attribute');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * # DateSelect\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Create a select list of days, months or years.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @example\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * new DateSelect(el);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @module components/date-select.js\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar noop = function noop() {};\n\nfunction createDefaultElement() {\n  var el = document.createElement('span');\n  el.className = 'spark-select';\n  el.innerHTML = '<select class=\"spark-select__input\"></select><span class=\"spark-label\"></span>';\n  return el;\n}\n\nvar DateSelect = function (_BaseComponent) {\n  _inherits(DateSelect, _BaseComponent);\n\n  /**\n   * DateSelect constructor\n   * @param {Element} el Optional\n   * @param {Object} params Optional\n   */\n  function DateSelect(el) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, DateSelect);\n\n    // If the first argument is a plain object, create a default element\n    // since the user MUST provide additional params but the element\n    // is optional. Doing it this way to keep the arity the same\n    // as other components.\n    if (!(el instanceof HTMLElement)) {\n      params = el || {};\n      el = createDefaultElement();\n    }\n\n    var _this = _possibleConstructorReturn(this, _BaseComponent.call(this, el, params));\n\n    _this._bindEventListenerCallbacks();\n    _this._createSelect(el);\n    return _this;\n  }\n\n  /**\n   * Get the value.\n   * @param {Boolean} asInt Get the value as a parsed integer.\n   * @return {Mixed}\n   */\n\n\n  DateSelect.prototype.getValue = function getValue(asInt) {\n    return asInt ? parseInt(this.select.getValue(), 10) : this.select.getValue();\n  };\n\n  /**\n   * Set the value.\n   * @param {Mixed} val\n   */\n\n\n  DateSelect.prototype.setValue = function setValue(val) {\n    return this.select.setValue(val);\n  };\n\n  /**\n   * Clear the value.\n   */\n\n\n  DateSelect.prototype.clearValue = function clearValue() {\n    return this.select.clearValue();\n  };\n\n  /**\n   * Enable the input.\n   */\n\n\n  DateSelect.prototype.enable = function enable() {\n    return this.select.enable();\n  };\n\n  /**\n   * Disable the input.\n   */\n\n\n  DateSelect.prototype.disable = function disable() {\n    return this.select.disable();\n  };\n\n  /**\n   * Update the date select's options.\n   * @param {Object|Array} params\n   */\n\n\n  DateSelect.prototype.setOptions = function setOptions(params) {\n\n    params = params || {};\n\n    this.min = params.min || this.min;\n    this.max = params.max || this.max;\n    this.monthNames = params.monthNames || this.monthNames;\n    this.numericMonth = params.numericMonth || this.numericMonth;\n\n    if (this.type === 'year') {\n      if (params.min && !params.max) {\n        this.max = this.min + 100;\n      } else if (params.max && !params.min) {\n        this.min = this.max - 100;\n      }\n    }\n\n    var i = this.min ? this.min - 1 : 0;\n    var len = this.max || this.monthNames.length;\n    var opts = [{}];\n\n    for (; i < len; i++) {\n      opts.push({\n        value: i + 1,\n        text: this.monthNames ? this.monthNames[i] : i + 1\n      });\n    }\n\n    this.select.setOptions(opts);\n\n    return this;\n  };\n\n  /**\n   * Set the label text for the select input.\n   * @param {String} text Optional\n   */\n\n\n  DateSelect.prototype.setLabel = function setLabel(text) {\n    this.select.setLabel(text !== undefined ? text : this._getTypeText());\n    return this;\n  };\n\n  /**\n   * Create a select input helper.\n   * @param {Object} el\n   */\n\n\n  DateSelect.prototype._createSelect = function _createSelect(el) {\n\n    this.select = new _selectInput2.default(el, {\n      onChange: this._onSelectChangeBound,\n      onFocus: this._onSelectFocusBound,\n      onBlur: this._onSelectBlurBound\n    });\n\n    this.setOptions();\n    this.setLabel();\n  };\n\n  /**\n   * Cache elements.\n   * @param {Element} el\n   */\n\n\n  DateSelect.prototype._cacheElements = function _cacheElements(el) {\n    this.el = el;\n    this.selectEl = this.el.querySelector('select');\n  };\n\n  /**\n   * Parse parameters from the elements.\n   */\n\n\n  DateSelect.prototype._parseParams = function _parseParams() {\n\n    this.type = this.type !== null ? this.type : (0, _parseAttribute.string)(this.selectEl, 'data-type', 'day');\n\n    if (this.type === 'year') {\n      var date = new Date();\n      this.min = this.min !== null ? this.min : (0, _parseAttribute.number)(this.selectEl, 'min', date.getFullYear() - 100);\n      this.max = this.max !== null ? this.max : (0, _parseAttribute.number)(this.selectEl, 'max', (this.min || date.getFullYear()) + 100);\n    } else if (this.type === 'month') {\n\n      this.monthNames = this.monthNames !== null ? this.monthNames : (0, _parseAttribute.string)(this.selectEl, 'data-month-names', null);\n      this.numericMonth = this.numericMonth !== null ? this.numericMonth : (0, _parseAttribute.boolean)(this.selectEl, 'data-numeric-month', false);\n      this.min = this.min !== null ? this.min : (0, _parseAttribute.number)(this.selectEl, 'min', null);\n      this.max = this.max !== null ? this.max : (0, _parseAttribute.number)(this.selectEl, 'max', null);\n\n      // No monthNames yet and no min or max\n      if (!this.monthNames && !this.numericMonth && !this.min && !this.max) {\n        this.monthNames = this._getDefaultMonthNames();\n      } else if (!this.min && !this.max) {\n        this.min = 1;\n        this.max = 12;\n      }\n\n      if (typeof this.monthNames === 'string') {\n        this.monthNames = this.monthNames.split(',');\n      }\n    } else {\n      this.min = this.min !== null ? this.min : (0, _parseAttribute.number)(this.selectEl, 'min', 1);\n      this.max = this.max !== null ? this.max : (0, _parseAttribute.number)(this.selectEl, 'max', 31);\n    }\n  };\n\n  /**\n   * Make a list of month options.\n   * @return {Array}\n   */\n\n\n  DateSelect.prototype._getDefaultMonthNames = function _getDefaultMonthNames() {\n    return _date2.default.getMonthNamesShort();\n  };\n\n  /**\n   * Get the text for this type of date select.\n   * @return {String}\n   */\n\n\n  DateSelect.prototype._getTypeText = function _getTypeText() {\n    return this.type.charAt(0).toUpperCase() + this.type.slice(1);\n  };\n\n  /**\n   * Create bound versions of event listener callbacks and store them.\n   * Otherwise we can't unbind from these events later because the\n   * function signatures won't match.\n   */\n\n\n  DateSelect.prototype._bindEventListenerCallbacks = function _bindEventListenerCallbacks() {\n    this._onSelectChangeBound = this._onSelectChange.bind(this);\n    this._onSelectFocusBound = this._onSelectFocus.bind(this);\n    this._onSelectBlurBound = this._onSelectBlur.bind(this);\n  };\n\n  /**\n   * When the select changes, run the callback.\n   * @param {String} val The value of the input\n   */\n\n\n  DateSelect.prototype._onSelectChange = function _onSelectChange(val) {\n    (this.onChange || noop)(val, this);\n  };\n\n  /**\n   * When the select changes, run the callback.\n   * @param {String} val The value of the input\n   */\n\n\n  DateSelect.prototype._onSelectFocus = function _onSelectFocus(val) {\n    (this.onFocus || noop)(val, this);\n  };\n\n  /**\n   * When the select changes, run the callback.\n   * @param {String} val The value of the input\n   */\n\n\n  DateSelect.prototype._onSelectBlur = function _onSelectBlur(val) {\n    (this.onBlur || noop)(val, this);\n  };\n\n  return DateSelect;\n}(_base2.default);\n\n/**\n * Whitelisted parameters which can be set on construction.\n * @type {Array}\n */\n\n\nDateSelect.prototype._whitelistedParams = ['type', 'monthNames', 'numericMonth', 'min', 'max', 'onChange', 'onFocus', 'onBlur'];\n\n/**\n * Default values for internal properties we will be setting.\n * These are set on each construction so we don't leak properties\n * into the prototype chain.\n * @type {Object}\n */\nDateSelect.prototype.defaults = {\n  el: null,\n  selectEl: null,\n  type: null,\n  monthNames: null,\n  min: null,\n  max: null,\n  select: null,\n  numericMonth: null,\n  onChange: null,\n  onFocus: null,\n  onBlur: null,\n  _onChangeBound: null,\n  _onFocusBound: null,\n  _onBlurBound: null\n};\n\nexports.default = DateSelect;\nmodule.exports = exports['default'];\n//# sourceMappingURL=date-select.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _base = require('./base');\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _typeahead = require('./typeahead');\n\nvar _typeahead2 = _interopRequireDefault(_typeahead);\n\nvar _parseAttribute = require('../helpers/dom/parse-attribute');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * # DateTypeahead\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Listen to an input element and format it as the user types.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @example\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * new DateTypeahead(el);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @module components/date-typeahead.js\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar noop = function noop() {};\n\nfunction createDefaultElement() {\n  var el = document.createElement('span');\n  el.className = 'spark-input';\n  return el;\n}\n\nvar DateTypeahead = function (_BaseComponent) {\n  _inherits(DateTypeahead, _BaseComponent);\n\n  /**\n   * DateTypeahead constructor\n   * @param {Element} el Optional\n   * @param {Object} params Optional\n   */\n  function DateTypeahead(el) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, DateTypeahead);\n\n    // If only one arg passed, assume it was a parameters\n    // object since the user MUST provide those but the element\n    // is optional. Doing it this way to keep the arity the same\n    // as other components.\n    if (arguments.length < 2) {\n      params = el || {};\n      el = createDefaultElement();\n    }\n\n    var _this = _possibleConstructorReturn(this, _BaseComponent.call(this, el, params));\n\n    _this._bindEventListenerCallbacks();\n    _this._createTypeahead(el, params);\n    return _this;\n  }\n\n  /**\n   * Get the value.\n   * @param {Boolean} asInt Get the value as a parsed integer.\n   * @return {Mixed}\n   */\n\n\n  DateTypeahead.prototype.getValue = function getValue(asInt) {\n    return this.typeahead.getValue(asInt);\n  };\n\n  /**\n   * Set the value.\n   * @param {Mixed} val\n   */\n\n\n  DateTypeahead.prototype.setValue = function setValue(val) {\n    return this.typeahead.setValue(val);\n  };\n\n  /**\n   * Clear the value.\n   */\n\n\n  DateTypeahead.prototype.clearValue = function clearValue() {\n    return this.typeahead.clearValue();\n  };\n\n  /**\n   * Enable the input.\n   */\n\n\n  DateTypeahead.prototype.enable = function enable() {\n    return this.typeahead.enable();\n  };\n\n  /**\n   * Disable the input.\n   */\n\n\n  DateTypeahead.prototype.disable = function disable() {\n    return this.typeahead.disable();\n  };\n\n  /**\n   * Run the typeahead calculations.\n   */\n\n\n  DateTypeahead.prototype.run = function run() {\n    return this.typeahead.run();\n  };\n\n  /**\n   * Pause the typeahead events.\n   */\n\n\n  DateTypeahead.prototype.pause = function pause() {\n    return this.typeahead.pause();\n  };\n\n  /**\n   * Reseume typeahead events.\n   */\n\n\n  DateTypeahead.prototype.resume = function resume() {\n    return this.typeahead.resume();\n  };\n\n  /**\n   * Augment default remove call w/ helper cleanup.\n   * @param {Boolean} leaveElement Leave the element intact.\n   */\n\n\n  DateTypeahead.prototype.remove = function remove(leaveElement) {\n    this.typeahead.remove(leaveElement);\n    _BaseComponent.prototype.remove.call(this, leaveElement);\n    return this;\n  };\n\n  /**\n   * Cache elements.\n   * @param {Element} el\n   */\n\n\n  DateTypeahead.prototype._cacheElements = function _cacheElements(el) {\n    this.el = el;\n  };\n\n  /**\n   * Parse parameters from the elements.\n   */\n\n\n  DateTypeahead.prototype._parseParams = function _parseParams() {\n\n    this.type = this.type !== null ? this.type : (0, _parseAttribute.string)(this.el, 'data-type', 'day');\n    this.format = this.format !== null ? this.format : (0, _parseAttribute.string)(this.el, 'data-format', null);\n    this.placeholder = this.placeholder !== null ? this.placeholder : (0, _parseAttribute.string)(this.el, 'data-placeholder', null);\n    this.len = this.len !== null ? this.len : (0, _parseAttribute.number)(this.el, 'length', null);\n\n    if (!this.placeholder) {\n      throw new Error('You must provide a placeholder value for a DateTypeahead.');\n    }\n\n    if (this.len !== null) {\n      this.format = this._lengthToFormat(this.len);\n    }\n\n    if (!this.format) {\n      throw new Error('You must provide a format value for a DateTypeahead.');\n    }\n  };\n\n  /**\n   * Create a typeahead with the given format.\n   * @param {Object} el\n   */\n\n\n  DateTypeahead.prototype._createTypeahead = function _createTypeahead(el) {\n\n    this.typeahead = new _typeahead2.default(el, {\n      placeholder: this.placeholder,\n      format: this.format,\n      matchPlaceholderSize: true,\n      onChange: this._onTypeaheadChangeBound,\n      onInput: this._onTypeaheadInputBound,\n      onFocus: this._onTypeaheadFocusBound,\n      onBlur: this._onTypeaheadBlurBound,\n      onBackspace: this._onTypeaheadBackspaceBound,\n      onEnd: this._onTypeaheadEndBound\n    });\n\n    // Ensure we have an ARIA label\n    var input = el.querySelector('input');\n    if (input && !input.getAttribute('aria-label')) {\n      input.setAttribute('aria-label', this.type);\n    }\n  };\n\n  /**\n   * Create bound versions of event listener callbacks and store them.\n   * Otherwise we can't unbind from these events later because the\n   * function signatures won't match.\n   */\n\n\n  DateTypeahead.prototype._bindEventListenerCallbacks = function _bindEventListenerCallbacks() {\n    this._onTypeaheadChangeBound = this._onTypeaheadChange.bind(this);\n    this._onTypeaheadInputBound = this._onTypeaheadInput.bind(this);\n    this._onTypeaheadFocusBound = this._onTypeaheadFocus.bind(this);\n    this._onTypeaheadBlurBound = this._onTypeaheadBlur.bind(this);\n    this._onTypeaheadBackspaceBound = this._onTypeaheadBackspace.bind(this);\n    this._onTypeaheadEndBound = this._onTypeaheadEnd.bind(this);\n  };\n\n  /**\n   * Take a length and return a format string with that many digits.\n   * @param {Number} length\n   * @return {String}\n   */\n\n\n  DateTypeahead.prototype._lengthToFormat = function _lengthToFormat(length) {\n\n    var i = 0;\n    var ret = '';\n\n    for (; i < length; i++) {\n      ret += '\\\\d';\n    }\n\n    return ret;\n  };\n\n  /**\n   * Check to see if an input value is valid.\n   * @param {Mixed} val\n   * @param {Boolean} allowEmpty All the value to be empty instead of 0.\n   */\n\n\n  DateTypeahead.prototype._checkValidity = function _checkValidity(val, allowEmpty) {\n\n    val = parseInt(val, 10);\n\n    var origVal = val;\n    var isNumber = !isNaN(val);\n\n    // If we were passed an empty string or something, don't try to validate.\n    // Treat zeros as a non-entry for days and months.\n    if (isNumber) {\n\n      if (this.type === 'year') {\n        val = val === 0 ? allowEmpty ? '' : 0 : Math.max(val, 0);\n      } else if (this.type === 'month') {\n        val = val ? Math.min(Math.max(val, 1), 12) : allowEmpty ? '' : 0;\n      } else {\n        val = val ? Math.min(Math.max(val, 1), 31) : allowEmpty ? '' : 0;\n      }\n    }\n\n    // Need to make sure we aren't looping forever on these updates.\n    if (isNumber && val !== origVal) {\n      this.typeahead.setValue(val + '');\n      return false;\n    }\n\n    return true;\n  };\n\n  /**\n   * When the typeahead changes, make sure the value is valid. This\n   * is very basic validation. More complex validation like the number\n   * of days in a specific month should be handled by the callback.\n   * And run our callback.\n   * @param {String} val The value of the input\n   * @param {String} oldVal The previous value\n   */\n\n\n  DateTypeahead.prototype._onTypeaheadChange = function _onTypeaheadChange(val) {\n    if (this._checkValidity(val)) {\n      (this.onChange || noop)(val, this);\n    }\n  };\n\n  /**\n   * Callback for `input` event\n   * @param {String} val The value of the input\n   * @param {String} oldVal The previous value\n   *\n   */\n\n\n  DateTypeahead.prototype._onTypeaheadInput = function _onTypeaheadInput(val) {\n    (this.onInput || noop)(val, this);\n  };\n\n  /**\n   * When the typeahead gains focus, let anyone who is interested know.\n   * @param {String} val\n   */\n\n\n  DateTypeahead.prototype._onTypeaheadFocus = function _onTypeaheadFocus(val) {\n    (this.onFocus || noop)(val, this);\n  };\n\n  /**\n   * When the typeahead loses focus, let anyone who is interested know.\n   * @param {String} val\n   */\n\n\n  DateTypeahead.prototype._onTypeaheadBlur = function _onTypeaheadBlur(val) {\n    this._checkValidity(val, true);\n    (this.onBlur || noop)(val, this);\n  };\n\n  /**\n   * When the typeahead fires a backspace event because it's empty and\n   * the user is hitting backspace, let anyone who is interested know.\n   * @param {String} val\n   */\n\n\n  DateTypeahead.prototype._onTypeaheadBackspace = function _onTypeaheadBackspace(val) {\n    (this.onBackspace || noop)(val, this);\n  };\n\n  /**\n   * When the typeahead is full and at its end, let anyone who is interested know.\n   * @param {Object} typeahead\n   * @param {String} character Optional The character to pass to the next input.\n   */\n\n\n  DateTypeahead.prototype._onTypeaheadEnd = function _onTypeaheadEnd(typeahead, character) {\n    (this.onEnd || noop)(this, character);\n  };\n\n  return DateTypeahead;\n}(_base2.default);\n\n/**\n * Whitelisted parameters which can be set on construction.\n * @type {Array}\n */\n\n\nDateTypeahead.prototype._whitelistedParams = ['type', 'format', 'placeholder', 'len', 'onChange', 'onInput', 'onFocus', 'onBlur', 'onBackspace', 'onEnd'];\n\n/**\n * Default values for internal properties we will be setting.\n * These are set on each construction so we don't leak properties\n * into the prototype chain.\n * @type {Object}\n */\nDateTypeahead.prototype.defaults = {\n  el: null,\n  type: null,\n  typeahead: null,\n  format: null,\n  placeholder: null,\n  len: null,\n  onChange: null,\n  onInput: null,\n  onFocus: null,\n  onBlur: null,\n  onBackspace: null,\n  onEnd: null,\n  _onTypeaheadChangeBound: null,\n  _onTypeaheadInputBound: null,\n  _onTypeaheadFocusBound: null,\n  _onTypeaheadBlurBound: null,\n  _onTypeaheadBackspaceBound: null,\n  _onTypeaheadEndBound: null\n};\n\nexports.default = DateTypeahead;\nmodule.exports = exports['default'];\n//# sourceMappingURL=date-typeahead.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _base = require('./base');\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _toggleClass = require('../helpers/dom/toggle-class');\n\nvar _toggleClass2 = _interopRequireDefault(_toggleClass);\n\nvar _mixin = require('../helpers/util/mixin');\n\nvar _mixin2 = _interopRequireDefault(_mixin);\n\nvar _messaging = require('../mixins/messaging');\n\nvar _messaging2 = _interopRequireDefault(_messaging);\n\nvar _validation = require('../mixins/validation');\n\nvar _validation2 = _interopRequireDefault(_validation);\n\nvar _makeElement = require('../helpers/dom/make-element');\n\nvar _makeElement2 = _interopRequireDefault(_makeElement);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * # SelectInput\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * A select input container.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @example\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * new SelectInput(el);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @module components/select-input.js\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar noop = function noop() {};\n\nvar SelectInput = function (_BaseComponent) {\n  _inherits(SelectInput, _BaseComponent);\n\n  /**\n   * SelectInput constructor.\n   * @param {Element} el\n   * @param {Object} params\n   */\n  function SelectInput(el) {\n    var _this;\n\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, SelectInput);\n\n    params.elRequired = true;\n\n    if (!(_this = _possibleConstructorReturn(this, _BaseComponent.call(this, el, params)), _this)) {\n      return _possibleConstructorReturn(_this);\n    }\n\n    _this._bindEventListenerCallbacks();\n    _this._addEventListeners();\n    return _possibleConstructorReturn(_this);\n  }\n\n  /**\n   * Get the value.\n   * @return {String}\n   */\n\n\n  SelectInput.prototype.getValue = function getValue() {\n    return this.selectEl.value;\n  };\n\n  /**\n   * Set the value.\n   * @param {String|Number} val\n   */\n\n\n  SelectInput.prototype.setValue = function setValue(val) {\n\n    // Cast to a string for comparison\n    val = val + '';\n\n    var i = 0;\n    var len = this.selectEl.children.length;\n\n    for (; i < len; i++) {\n      if (this.selectEl.children[i].value === val) {\n        this.selectEl.children[i].selected = true;\n        this._updateClass();\n        (this.onChange || noop)(val, this);\n        return this;\n      }\n    }\n\n    return this;\n  };\n\n  /**\n   * Clear the selected value.\n   */\n\n\n  SelectInput.prototype.clearValue = function clearValue() {\n\n    var i = 0;\n    var len = this.selectEl.children.length;\n\n    for (; i < len; i++) {\n      if (this.selectEl.children[i].selected === true) {\n        this.selectEl.children[i].selected = false;\n        this._updateClass();\n        (this.onChange || noop)('', this);\n        return this;\n      }\n    }\n\n    return this;\n  };\n\n  /**\n   * Set the options.\n   * @param {Array} opts\n   */\n\n\n  SelectInput.prototype.setOptions = function setOptions(opts) {\n\n    var i = 0;\n    var len = opts.length;\n    var str = '';\n\n    // Store the index of the currently selected option so we can set\n    // it when we're all done.\n    var curIndex = this.selectEl.selectedIndex;\n\n    for (; i < len; i++) {\n      str += '<option ' + (opts[i].value !== undefined ? 'value=\"' + (opts[i].value || '') + '\"' : '') + '>' + (opts[i].text || '') + '</option>';\n    }\n\n    this.selectEl.innerHTML = str;\n    this.selectEl.selectedIndex = Math.min(len - 1, curIndex);\n\n    return this;\n  };\n\n  /**\n   * Set the value of the label.\n   * @param {String} text\n   */\n\n\n  SelectInput.prototype.setLabel = function setLabel(text) {\n    if (!this.labelEl) return this;\n    this.labelEl.innerHTML = text;\n    return this;\n  };\n\n  /**\n   * Disable entry into the input.\n   */\n\n\n  SelectInput.prototype.disable = function disable() {\n    this.selectEl.setAttribute('disabled', '');\n    return this;\n  };\n\n  /**\n   * Enable entry into the input.\n   */\n\n\n  SelectInput.prototype.enable = function enable() {\n    this.selectEl.removeAttribute('disabled');\n    return this;\n  };\n\n  /**\n   * Store a reference to the needed elements.\n   * @param {Element} el\n   */\n\n\n  SelectInput.prototype._cacheElements = function _cacheElements(el) {\n\n    this.el = el;\n    this.selectEl = this.el.querySelector('select');\n    this.labelEl = this.el.querySelector('.spark-label');\n\n    this.messageEl = this.el.querySelector('.spark-select__message') || (0, _makeElement2.default)('<span class=\"spark-select__message\"></span>');\n\n    if (!this.selectEl) {\n      throw new Error('A <select> element must be present!', this.el);\n    }\n\n    this._updateClass();\n  };\n\n  /**\n   * Create bound versions of event listener callbacks and store them.\n   * Otherwise we can't unbind from these events later because the\n   * function signatures won't match.\n   */\n\n\n  SelectInput.prototype._bindEventListenerCallbacks = function _bindEventListenerCallbacks() {\n    this._onFocusBound = this._onFocus.bind(this);\n    this._onBlurBound = this._onBlur.bind(this);\n    this._onInputBound = this._onInput.bind(this);\n  };\n\n  /**\n   * Add event listeners for focus, blur and input.\n   */\n\n\n  SelectInput.prototype._addEventListeners = function _addEventListeners() {\n    this.selectEl.addEventListener('focus', this._onFocusBound);\n    this.selectEl.addEventListener('blur', this._onBlurBound);\n    this.selectEl.addEventListener('input', this._onInputBound);\n  };\n\n  /**\n   * Remove event listeners for focus, blur and input.\n   */\n\n\n  SelectInput.prototype._removeEventListeners = function _removeEventListeners() {\n    this.selectEl.removeEventListener('focus', this._onFocusBound);\n    this.selectEl.removeEventListener('blur', this._onBlurBound);\n    this.selectEl.removeEventListener('input', this._onInputBound);\n  };\n\n  /**\n   * Update the active class.\n   */\n\n\n  SelectInput.prototype._updateClass = function _updateClass() {\n    this.hasValue = this.selectEl.value ? true : false;\n    (0, _toggleClass2.default)(this.el, 'has-value', this.hasValue);\n    (0, _toggleClass2.default)(this.el, 'active', this.isActive);\n  };\n\n  /**\n   * When the input element gains focus.\n   * @param {Object} e\n   */\n\n\n  SelectInput.prototype._onFocus = function _onFocus() {\n    this.isActive = true;\n    this._updateClass();\n    var value = this.getValue();\n    (this.onFocus || noop)(value, this);\n  };\n\n  /**\n   * When the input element loses focus.\n   * @param {Object} e\n   */\n\n\n  SelectInput.prototype._onBlur = function _onBlur() {\n    this.isActive = false;\n    this._updateClass();\n    var value = this.getValue();\n    (this.onBlur || noop)(value, this);\n  };\n\n  /**\n   * When the value is about to change, run the validation, set the characters count\n   * and resize if we're a textarea.\n   * @param {Object} e\n   */\n\n\n  SelectInput.prototype._onInput = function _onInput() {\n\n    this._updateClass();\n\n    var value = this.getValue();\n\n    if (value !== this.previousValue) {\n      this.previousValue = value;\n      (this.onChange || noop)(value, this);\n    }\n  };\n\n  return SelectInput;\n}(_base2.default);\n\n/**\n * Whitelisted parameters which can be set on construction.\n * @type {Array}\n */\n\n\nSelectInput.prototype._whitelistedParams = ['validate', 'onValidate', 'onChange', 'onFocus', 'onBlur'];\n\n/**\n * Default values for internal properties we will be setting.\n * These are set on each construction so we don't leak properties\n * into the prototype chain.\n * @type {Object}\n */\nSelectInput.prototype.defaults = {\n  el: null,\n  messageEl: null,\n  selectEl: null,\n  labelEl: null,\n  hasValue: false,\n  isActive: false,\n  onChange: null,\n  onFocus: null,\n  onBlur: null,\n  previousValue: null,\n  _onFocusBound: null,\n  _onBlurBound: null,\n  _onInputBound: null\n};\n\n(0, _mixin2.default)(SelectInput.prototype, _messaging2.default, _validation2.default);\n\nexports.default = SelectInput;\nmodule.exports = exports['default'];\n//# sourceMappingURL=select-input.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _base = require('./base');\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _triggerEvent = require('../helpers/dom/trigger-event');\n\nvar _triggerEvent2 = _interopRequireDefault(_triggerEvent);\n\nvar _parseAttribute = require('../helpers/dom/parse-attribute');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * # Typeahead\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Listen to an input element and format it as the user types.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @example\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * new Typeahead(el);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @module components/typeahead.js\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar noop = function noop() {};\n\nvar Typeahead = function (_BaseComponent) {\n  _inherits(Typeahead, _BaseComponent);\n\n  /**\n   * Typeahead constructor\n   * @param {Element} el\n   * @param {Object} params\n   */\n  function Typeahead(el) {\n    var _this;\n\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Typeahead);\n\n    params.elRequired = true;\n\n    if (!(_this = _possibleConstructorReturn(this, _BaseComponent.call(this, el, params)), _this)) {\n      return _possibleConstructorReturn(_this);\n    }\n\n    _this._maintainFocus(function () {\n      this._parseParams();\n      this._bindEventListenerCallbacks();\n      this._addEventListeners();\n    });\n    return _possibleConstructorReturn(_this);\n  }\n\n  /**\n   * Run the formatting.\n   * @param {Number} cursorIndex\n   */\n\n\n  Typeahead.prototype.run = function run(cursorIndex) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\n    if (this.isRunning) return this;\n\n    this.isRunning = true;\n\n    var oldVal = this.inputEl.value;\n    var val = '';\n    var placeholder = '';\n    var i = 0;\n    var len = this.format.length;\n    var skipCount = 0;\n    var valDone = false;\n\n    for (; i < len; i++) {\n\n      // Add numbers\n      if (this.format[i] === '\\\\d') {\n\n        if (this.characters[i - skipCount]) {\n          val += this.characters[i - skipCount];\n        } else {\n          valDone = true;\n        }\n\n        placeholder += valDone ? this.placeholder[i] : '&nbsp;';\n      }\n      // Placeholder characters\n      else {\n\n          if (!valDone) {\n            val += this.format[i];\n          }\n\n          placeholder += this.format[i];\n\n          skipCount++;\n        }\n    }\n\n    if (this.isFocused) {\n      cursorIndex = cursorIndex === undefined ? this._getCaretEnd() : cursorIndex;\n    }\n\n    // If there are no characters, set the cursorIndex to be the last placeholder entry.\n    if (this.isFocused && !this.characters.length) {\n      cursorIndex = val.length;\n    }\n\n    // No characters and we shouldn't use just placeholder values\n    if (!this.characters.length && params.notOnlyPlaceholders) {\n      val = '';\n    }\n\n    this.inputEl.value = val;\n    this.placeholderEl.innerHTML = placeholder;\n\n    this._updateWidth();\n\n    if (this.isFocused) {\n      this._setCaretPositionTranslated(cursorIndex);\n    }\n\n    if (val !== oldVal) {\n      (0, _triggerEvent2.default)(this.inputEl, 'input');\n    }\n\n    this.isRunning = false;\n\n    if (val !== oldVal) {\n      (this.onChange || noop)(val, oldVal, this);\n    }\n\n    if (!this._atEnd && this.isFocused && this.characters.length === this.maxLength && this._caretIsAtEnd()) {\n      this._atEnd = true;\n      (this.onEnd || noop)(this);\n    } else {\n      this._atEnd = false;\n    }\n\n    return this;\n  };\n\n  /**\n   * Add a character to the characters array at a given index.\n   * @param {String} character\n   * @param {Number} start\n   * @param {Number} end\n   * @param {Boolean} skipCheck\n   */\n\n\n  Typeahead.prototype.addCharacterAtIndex = function addCharacterAtIndex(character, start, end, skipCheck) {\n\n    // Don't add at an index beyond what we can support.\n    if (this.maxLength && start >= this.maxLength) {\n      return this;\n    }\n\n    if (!skipCheck) {\n\n      var re;\n\n      // Try to build a regex for this format character.\n      try {\n        re = new RegExp(this.format[start]);\n      } catch (e) {\n        //\n      }\n\n      if (!re || !re.exec(character)) {\n        return this;\n      }\n    }\n\n    this.characters.splice(start, end - start, character);\n\n    // If we've added at an index that pushes the length beyond what we support,\n    // remove the trailing characters.\n    if (this.maxLength && this.characters.length > this.maxLength) {\n      this.characters.splice(this.maxLength, this.characters.length);\n    }\n\n    this.run(start + 1);\n\n    return this;\n  };\n\n  /**\n   * Add a character at the position of the caret.\n   * @param {String} character\n   */\n\n\n  Typeahead.prototype.addCharacterAtCaret = function addCharacterAtCaret(character) {\n\n    var pos = this._getCaretStart();\n    var re;\n\n    // If we're beyond the bounds of the format, stop.\n    if (this.format[pos] === undefined) {\n      (this.onEnd || noop)(this, character);\n      return this;\n    }\n\n    // Try to build a regex for this format character.\n    try {\n      re = new RegExp(this.format[pos]);\n    } catch (e) {}\n    //\n\n\n    // We couldn't build a regex (so it's invalid) or the regex failed (so it's invalid)\n    if (!re || !re.exec(character)) {\n      if (this._moveCaret('right')) {\n        this.addCharacterAtCaret(character);\n      }\n      return this;\n    }\n\n    this.addCharacterAtIndex(character, this._getCaretStartTranslated(), this._getCaretEndTranslated(), true);\n\n    return this;\n  };\n\n  /**\n   * Remove a character from the character array by index.\n   * @param {Number} index\n   * @param {Number} length Optional\n   * @param {Number} offset Optional\n   */\n\n\n  Typeahead.prototype.removeCharacterAtIndex = function removeCharacterAtIndex(index, length, offset) {\n\n    // Don't want a negative splice length or else we start\n    // removing characters from the end.\n    if (index + offset < 0) {\n      return this;\n    }\n\n    length = length !== undefined ? length : 1;\n    this.characters.splice(index + offset, length);\n    this.run(index + (offset || 1));\n\n    return this;\n  };\n\n  /**\n   * Remove the character at the caret.\n   * @param {Number} offset Optional An offset from the current position.\n   */\n\n\n  Typeahead.prototype.removeCharacterAtCaret = function removeCharacterAtCaret(offset) {\n\n    var start = this._getCaretStartTranslated();\n    var end = this._getCaretEndTranslated();\n    var length = 1;\n    var tmp;\n\n    if (start !== end) {\n\n      // If the end is less than the start, the user dragged from right to left.\n      // Just swap them to make it easier to handle.\n      if (end < start) {\n        tmp = start;\n        start = end;\n        end = tmp;\n      }\n\n      // The length of characters removed\n      length = end - start;\n\n      // Bump the start position @todo: haven't thought through why this is, but it's needed.\n      start++;\n    }\n\n    this.removeCharacterAtIndex(start, length, offset);\n\n    return this;\n  };\n\n  /**\n   * Remove the character in the current range.\n   */\n\n\n  Typeahead.prototype.removeCharactersInRange = function removeCharactersInRange() {\n    this.removeCharacterAtIndex(this._getCaretStartTranslated(), this._getCaretEndTranslated());\n    return this;\n  };\n\n  /**\n   * Set the value of the typeahead. Maintain the position of the caret.\n   * @param {String} value\n   */\n\n\n  Typeahead.prototype.setValue = function setValue(value) {\n\n    this.settingValue = true;\n    this.pause();\n\n    this.characters = (value + '').split('');\n    this.run();\n\n    if (this.isFocused) this._setCaretPosition(this._getCaretStart());\n\n    this.resume();\n    this.settingValue = false;\n\n    return this;\n  };\n\n  /**\n   * Get the value of the typeahead.\n   * @param {Boolean} asInt Get the value as a parsed integer.\n   * @return {String|Number}\n   */\n\n\n  Typeahead.prototype.getValue = function getValue(asInt) {\n    return asInt && this.inputEl.value ? parseInt(this.inputEl.value, 10) : this.inputEl.value;\n  };\n\n  /**\n   * Clear the selected value.\n   */\n\n\n  Typeahead.prototype.clearValue = function clearValue() {\n    this.pause();\n    this.characters = [];\n    this.run(0, { notOnlyPlaceholders: true });\n    return this.resume();\n  };\n\n  /**\n   * Take the date values from the inputs and set them as dates on the calendar.\n   */\n\n\n  Typeahead.prototype.updateValue = function updateValue() {\n    return this.setValue(this.inputEl.value);\n  };\n\n  /**\n   * Move the caret position.\n   * @param {Number} pos\n   */\n\n\n  Typeahead.prototype.moveCaret = function moveCaret(pos) {\n    this._setCaretPositionTranslated(pos);\n    return this;\n  };\n\n  /**\n   * Move the caret to the end of the input.\n   */\n\n\n  Typeahead.prototype.moveCaretToEnd = function moveCaretToEnd() {\n    return this.moveCaret(this.characters.length);\n  };\n\n  /**\n   * Move the caret to the start of the input.\n   */\n\n\n  Typeahead.prototype.moveCaretToStart = function moveCaretToStart() {\n    return this.moveCaret(0);\n  };\n\n  /**\n   * Pause events.\n   */\n\n\n  Typeahead.prototype.pause = function pause() {\n    this.pauseBlurFocus++;\n    return this;\n  };\n\n  /**\n   * Resume events.\n   */\n\n\n  Typeahead.prototype.resume = function resume() {\n    this.pauseBlurFocus--;\n    return this;\n  };\n\n  /**\n   * Disable entry into the input.\n   */\n\n\n  Typeahead.prototype.disable = function disable() {\n    this.inputEl.setAttribute('disabled', '');\n    return this;\n  };\n\n  /**\n   * Enable entry into the input.\n   */\n\n\n  Typeahead.prototype.enable = function enable() {\n    this.inputEl.removeAttribute('disabled');\n    return this;\n  };\n\n  /**\n   * Clear the value.\n   * Changed to clearValue in v2.0.0.\n   */\n\n\n  Typeahead.prototype.clear = function clear() {\n    return this.clearValue();\n  };\n\n  /**\n   * Augment default remove call w/ helper cleanup.\n   * @param {Boolean} leaveElement Leave the element intact.\n   */\n\n\n  Typeahead.prototype.remove = function remove(leaveElement) {\n    _BaseComponent.prototype.remove.call(this, leaveElement);\n    return this;\n  };\n\n  /**\n   * Store a reference to the needed elements.\n   * @param {Object} el\n   */\n\n\n  Typeahead.prototype._cacheElements = function _cacheElements(el) {\n    this.el = el;\n    this.inputEl = this.el.querySelector('[type=\"text\"], [type=\"email\"], [type=\"phone\"], textarea') || this._createDefaultInputElement();\n    this.placeholderEl = this.el.querySelector('.spark-input__placeholder') || this._createDefaultPlaceholderElement();\n  };\n\n  /**\n   * Parse parameters from the elements.\n   */\n\n\n  Typeahead.prototype._parseParams = function _parseParams() {\n\n    // Store the value characters\n    this.characters = this._parseCharacters(this.inputEl.value);\n\n    // Store format\n    this.format = this._parseFormat(this.format ? this.format : this.inputEl.getAttribute('data-typeahead-format'));\n\n    // Store the original placeholder\n    this.placeholder = this.placeholder ? this.placeholder : this.inputEl.getAttribute('placeholder').split('');\n\n    // Get the total number of characters we can have\n    this.maxLength = this._getCharactersAllowedCount(this.format);\n\n    this.matchPlaceholderSize = this.matchPlaceholderSize !== null ? this.matchPlaceholderSize : (0, _parseAttribute.boolean)(this.inputEl, 'data-match-placeholder-size', false);\n  };\n\n  /**\n   * Parse the format string into an array.\n   * @param  {String} format\n   * @return {Array}\n   */\n\n\n  Typeahead.prototype._parseFormat = function _parseFormat(format) {\n\n    var i = 0;\n    var len = format.length;\n    var arr = [];\n    var lastWasEscape = false;\n\n    for (; i < len; i++) {\n      if (format[i] === '\\\\' && !lastWasEscape) {\n        lastWasEscape = true;\n      } else {\n        arr.push((lastWasEscape ? '\\\\' : '') + format[i]);\n        lastWasEscape = false;\n      }\n    }\n\n    return arr;\n  };\n\n  /**\n   * Parse the characters string into an array, ignoring characters which don't\n   * match the format requirements.\n   * @param {String} characters\n   * @return {Array}\n   */\n\n\n  Typeahead.prototype._parseCharacters = function _parseCharacters(characters) {\n\n    var chars = characters.split('');\n    var i = 0;\n    var len = characters.length;\n    var regexes = [];\n    var arr = [];\n\n    for (; i < len; i++) {\n\n      // Try to build a regex for this format character.\n      try {\n        // Make sure this format starts with an escape character.\n        regexes[i] = this.format[i][0] === '\\\\' ? new RegExp(this.format[i]) : null;\n      } catch (e) {}\n      //\n\n\n      // If we were able to create a regex and our char passes, add it to the array\n      // of characters to return.\n      if (regexes[i] && regexes[i].exec(chars[i])) {\n        arr.push(chars[i]);\n      }\n    }\n\n    return arr;\n  };\n\n  /**\n   * Create the default input element.\n   * @return {Element}\n   */\n\n\n  Typeahead.prototype._createDefaultInputElement = function _createDefaultInputElement() {\n\n    var el = document.createElement('input');\n    el.className = 'spark-input__field';\n    el.setAttribute('data-typeahead', '');\n    el.setAttribute('type', 'tel');\n\n    this.el.appendChild(el);\n\n    return el;\n  };\n\n  /**\n   * Create the default input element.\n   * @return {Element}\n   */\n\n\n  Typeahead.prototype._createDefaultPlaceholderElement = function _createDefaultPlaceholderElement() {\n    var el = document.createElement('span');\n    el.className = 'spark-input__placeholder';\n    this.el.appendChild(el);\n    return el;\n  };\n\n  /**\n   * Get the maximum number of characters allowed.\n   * @param {Array} format\n   * @return {Number}\n   */\n\n\n  Typeahead.prototype._getCharactersAllowedCount = function _getCharactersAllowedCount(format) {\n\n    var i = 0;\n    var len = format.length;\n    var allowed = 0;\n\n    for (; i < len; i++) {\n      if (format[i] === '\\\\d') {\n        allowed++;\n      }\n    }\n\n    return allowed;\n  };\n\n  /**\n   * Create bound versions of event listener callbacks and store them.\n   * Otherwise we can't unbind from these events later because the\n   * function signatures won't match.\n   */\n\n\n  Typeahead.prototype._bindEventListenerCallbacks = function _bindEventListenerCallbacks() {\n    this._onKeydownBound = this._onKeydown.bind(this);\n    this._onInputBound = this._onInput.bind(this);\n    this._onFocusBound = this._onFocus.bind(this);\n    this._onBlurBound = this._onBlur.bind(this);\n    this._onPlaceholderClickBound = this._onPlaceholderClick.bind(this);\n  };\n\n  /**\n   * Add event listeners to keypress and keydown.\n   */\n\n\n  Typeahead.prototype._addEventListeners = function _addEventListeners() {\n    this.inputEl.addEventListener('keydown', this._onKeydownBound, false);\n    this.inputEl.addEventListener('input', this._onInputBound, false);\n    this.inputEl.addEventListener('focus', this._onFocusBound, false);\n    this.placeholderEl.addEventListener('click', this._onPlaceholderClickBound, false);\n  };\n\n  /**\n   * Add event listeners to keypress and keydown.\n   */\n\n\n  Typeahead.prototype._removeEventListeners = function _removeEventListeners() {\n\n    this.inputEl.removeEventListener('keydown', this._onKeydownBound);\n    this.inputEl.removeEventListener('input', this._onInputBound);\n    this.inputEl.removeEventListener('focus', this._onFocusBound);\n    this.placeholderEl.removeEventListener('click', this._onPlaceholderClickBound);\n\n    window.removeEventListener('blur', this._onBlurBound);\n    this.inputEl.removeEventListener('blur', this._onBlurBound);\n  };\n\n  /**\n   * Get the position of the caret in the element.\n   * @return {Number} The index\n   */\n\n\n  Typeahead.prototype._getCaretStart = function _getCaretStart() {\n\n    return this._maintainFocus(function () {\n\n      var caretPosition;\n\n      // IE support\n      if (document.selection) {\n        this.inputEl.focus();\n        var sel = document.selection.createRange();\n        sel.moveStart('character', -this.inputEl.value.length);\n        caretPosition = sel.text.length;\n      } else if (this.inputEl.selectionStart || this.inputEl.selectionStart === 0) {\n        caretPosition = this.inputEl.selectionStart;\n      }\n\n      return caretPosition;\n    });\n  };\n\n  /**\n   * Get the end position of the caret in the element.\n   * @return {Number} The index\n   */\n\n\n  Typeahead.prototype._getCaretEnd = function _getCaretEnd() {\n\n    return this._maintainFocus(function () {\n\n      var caretPosition;\n\n      // IE support\n      if (document.selection) {\n        this.inputEl.focus();\n        var sel = document.selection.createRange();\n        sel.moveStart('character', -this.inputEl.value.length);\n        caretPosition = sel.text.length;\n      } else if (this.inputEl.selectionEnd || this.inputEl.selectionEnd === 0) {\n        caretPosition = this.inputEl.selectionEnd;\n      }\n\n      return caretPosition;\n    });\n  };\n\n  /**\n   * Is the caret at the end of the input?\n   * @return {Boolean}\n   */\n\n\n  Typeahead.prototype._caretIsAtEnd = function _caretIsAtEnd() {\n    return this._getCaretStart() === this.maxLength;\n  };\n\n  /**\n   * Set the position of the caret in the element.\n   * @return {Number} The index\n   */\n\n\n  Typeahead.prototype._setCaretPosition = function _setCaretPosition(pos) {\n\n    return this._maintainFocus(function () {\n\n      // IE support\n      if (document.selection) {\n        this.inputEl.focus();\n        var sel = document.selection.createRange();\n        sel.moveStart('character', -this.inputEl.value.length);\n        sel.moveStart('character', pos);\n        sel.moveEnd('character', 0);\n        sel.select();\n      } else if (this.inputEl.selectionStart || this.inputEl.selectionStart === 0) {\n        this.inputEl.selectionStart = pos;\n        this.inputEl.selectionEnd = pos;\n      }\n    });\n  };\n\n  /**\n   * Get the position of the caret translated to the corresponding index in the\n   * characters array. This means ignoring format characters.\n   * @param {Number} pos\n   * @return {Number}\n   */\n\n\n  Typeahead.prototype._getCaretPositionTranslated = function _getCaretPositionTranslated(pos) {\n\n    var i = 0;\n    var skipCount = 0;\n\n    for (; i < pos; i++) {\n\n      // Count non-numbers as a skip.\n      // @todo: this needs to work with more than numbers.\n      if (this.format[i] !== '\\\\d') {\n        skipCount++;\n      }\n    }\n\n    return pos - skipCount;\n  };\n\n  /**\n   * Get the starting position of the caret translated.\n   * @return {Number}\n   */\n\n\n  Typeahead.prototype._getCaretStartTranslated = function _getCaretStartTranslated() {\n    return this._getCaretPositionTranslated(this._getCaretStart());\n  };\n\n  /**\n   * Get the ending position of the caret translated.\n   * @return {Number}\n   */\n\n\n  Typeahead.prototype._getCaretEndTranslated = function _getCaretEndTranslated() {\n    return this._getCaretPositionTranslated(this._getCaretEnd());\n  };\n\n  /**\n   * Set the position of the caret translated to the corresponding index in the\n   * characters array. This means ignoring format characters.\n   * @param {Number} pos\n   */\n\n\n  Typeahead.prototype._setCaretPositionTranslated = function _setCaretPositionTranslated(pos) {\n\n    var i = 0;\n    var skipCount = 0;\n\n    for (; i < pos + skipCount; i++) {\n\n      // Count non-numbers as a skip.\n      // @todo: this needs to work with more than numbers.\n      if (this.format[i] !== undefined && this.format[i] !== '\\\\d') {\n        skipCount++;\n      }\n    }\n\n    this._setCaretPosition(pos + skipCount);\n  };\n\n  /**\n   * Move the caret position\n   * @param  {String} direction The direction of the movement\n   * @return {Boolean}           Was the caret actually moved?\n   */\n\n\n  Typeahead.prototype._moveCaret = function _moveCaret(direction) {\n\n    var curPos = this._getCaretStart();\n\n    if (direction === 'left') {\n      this._setCaretPosition(curPos - 1);\n    } else if (direction === 'right') {\n      this._setCaretPosition(curPos + 1);\n    }\n\n    return curPos !== this._getCaretStart();\n  };\n\n  /**\n   * Empty the input when we only have placeholders.\n   */\n\n\n  Typeahead.prototype._emptyWhenOnlyPlaceholders = function _emptyWhenOnlyPlaceholders() {\n    if (!this.characters.length) {\n      this.clear();\n    }\n  };\n\n  /**\n   * Run a callback function that may change the focus of the document, but\n   * make sure focus goes back to where it needs to be. Also, set the state\n   * so that blur/focus events don't fire from this instance.\n   * @param {Function} callback\n   */\n\n\n  Typeahead.prototype._maintainFocus = function _maintainFocus(callback) {\n\n    this.pause();\n\n    var originalActiveElement = document.activeElement;\n\n    //For IE\n    if (!originalActiveElement) {\n      originalActiveElement = document.body;\n    }\n\n    var output = (callback || noop).call(this);\n\n    // If we didn't have focus, go back to focusing on the original\n    if (originalActiveElement !== this.inputEl) {\n      this.inputEl.blur();\n      originalActiveElement.focus();\n    }\n\n    this.resume();\n\n    return output;\n  };\n\n  /**\n   * Update the width of the typeahead. If we should be matching the width\n   * of the placeholder, do so. Otherwise, take no action.\n   */\n\n\n  Typeahead.prototype._updateWidth = function _updateWidth() {\n\n    if (this.matchPlaceholderSize) {\n      this.placeholderEl.style.width = 'auto';\n      // Add 2px to account for caret width in IE...\n      this.inputEl.style.width = 'auto';\n      this.inputEl.style.width = this.placeholderEl.offsetWidth + 2 + 'px';\n      this.placeholderEl.style.width = '';\n    }\n  };\n\n  /**\n   * Listen for delete and arrows.\n   * @param  {Object} e\n   */\n\n\n  Typeahead.prototype._onKeydown = function _onKeydown(e) {\n\n    var code = e.keyCode || e.which;\n\n    if (code === this.pasteCode && (e.metaKey || e.ctrlKey)) {\n      return;\n    }\n\n    if (code === this.actionCodes.BACKSPACE) {\n      this.removeCharacterAtCaret(-1);\n      this._onBackspace();\n      e.preventDefault();\n    } else if (code === this.actionCodes.DELETE) {\n      this.removeCharacterAtCaret(0);\n      e.preventDefault();\n    } else if (code === this.actionCodes.LEFT) {\n      if (!this._getCaretStart()) {\n        (this.onBackspace || noop)();\n      }\n    } else if (code === this.actionCodes.RIGHT) {\n      if (this._getCaretStart() === this.characters.length) {\n        (this.onEnd || noop)();\n      }\n    } else {\n      if (this.ignoreCodes.indexOf(code) === -1) {\n        e.preventDefault();\n        this.addCharacterAtCaret(String.fromCharCode(code));\n      }\n    }\n  };\n\n  /**\n   * When the input event fires, validate. This happens\n   * with a copy+paste.\n   * @param {Object} e\n   */\n\n\n  Typeahead.prototype._onInput = function _onInput(e) {\n    e.preventDefault();\n    this.characters = this._parseCharacters(this.inputEl.value);\n    this.run();\n    (this.onInput || noop)(this.getValue(), this);\n  };\n\n  /**\n   * When we focus, run the formatting.\n   * @param {Object} e\n   */\n\n\n  Typeahead.prototype._onFocus = function _onFocus() {\n\n    window.removeEventListener('blur', this._onBlurBound);\n    window.addEventListener('blur', this._onBlurBound, false);\n    this.inputEl.removeEventListener('blur', this._onBlurBound);\n    this.inputEl.addEventListener('blur', this._onBlurBound, false);\n\n    if (this.isFocused || this.pauseBlurFocus || this.isRunning) return;\n\n    this.run();\n    (this.onFocus || noop)(this.getValue(), this);\n    this.isFocused = true;\n    this._oldVal = this.inputEl.value;\n  };\n\n  /**\n   * When we blur, if we have no characters, remove the placeholders.\n   * @param {Object} e\n   */\n\n\n  Typeahead.prototype._onBlur = function _onBlur() {\n\n    window.removeEventListener('blur', this._onBlurBound);\n    this.inputEl.removeEventListener('blur', this._onBlurBound);\n\n    this.isFocused = false;\n\n    if (this.pauseBlurFocus || this.isRunning) return;\n\n    this._emptyWhenOnlyPlaceholders();\n\n    if (this._oldVal !== this.inputEl.value) {\n      (0, _triggerEvent2.default)(this.inputEl, 'change');\n    }\n\n    (this.onBlur || noop)(this.getValue(), this);\n  };\n\n  /**\n   * When the placeholder receives a click event, focus on the input. This happens in IE10 for some\n   * reason that I cannot fully fathom, but it has something to do with the explicit width being\n   * set on an empty element.\n   * @param {Object} e\n   */\n\n\n  Typeahead.prototype._onPlaceholderClick = function _onPlaceholderClick(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.inputEl.focus();\n  };\n\n  /**\n   * When we backspace, if we have no characters left let listeners know.\n   * @param {Object} e\n   */\n\n\n  Typeahead.prototype._onBackspace = function _onBackspace() {\n    if (!this._getCaretStart()) (this.onBackspace || noop)();\n  };\n\n  return Typeahead;\n}(_base2.default);\n\n/**\n * Whitelisted parameters which can be set on construction.\n * @type {Array}\n */\n\n\nTypeahead.prototype._whitelistedParams = ['format', 'placeholder', 'matchPlaceholderSize', 'onChange', 'onFocus', 'onBlur', 'onInput', 'onBackspace', 'onEnd'];\n\n/**\n * Default values for internal properties we will be setting.\n * These are set on each construction so we don't leak properties\n * into the prototype chain.\n * @type {Object}\n */\nTypeahead.prototype.defaults = {\n  el: null,\n  inputEl: null,\n  placeholderEl: null,\n  placeholder: null,\n  characters: null,\n  format: null,\n  ignoreCodes: [9, // Tab\n  16, // Shift\n  17, // Ctrl\n  18, // Alt\n  20, // CAPS\n  91, // Meta\n  93, // Alt\n  112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123 // F1-F12\n  ],\n  actionCodes: {\n    BACKSPACE: 8,\n    DELETE: 46,\n    LEFT: 37,\n    RIGHT: 39\n  },\n  pasteCode: 86, // v\n  pauseBlurFocus: 0,\n  matchPlaceholderSize: null,\n  maxLength: null,\n  isFocused: false,\n  isRunning: false,\n  onChange: null,\n  onFocus: null,\n  onBlur: null,\n  onInput: null,\n  onBackspace: null,\n  onEnd: null,\n  _atEnd: false,\n  _oldVal: null,\n  _onInputBound: null,\n  _onKeydownBound: null,\n  _onFocusBound: null,\n  _onBlurBound: null,\n  _onPlaceholderClickBound: null\n};\n\nexports.default = Typeahead;\nmodule.exports = exports['default'];\n//# sourceMappingURL=typeahead.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _outerHeight = require('../dom/outer-height');\n\nvar _outerHeight2 = _interopRequireDefault(_outerHeight);\n\nvar _addClass = require('../dom/add-class');\n\nvar _addClass2 = _interopRequireDefault(_addClass);\n\nvar _removeClass = require('../dom/remove-class');\n\nvar _removeClass2 = _interopRequireDefault(_removeClass);\n\nvar _hasClass = require('../dom/has-class');\n\nvar _hasClass2 = _interopRequireDefault(_hasClass);\n\nvar _toggleClass = require('../dom/toggle-class');\n\nvar _toggleClass2 = _interopRequireDefault(_toggleClass);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar noop = function noop() {}; /**\n                                * # Animate Height\n                                * Animate the height of an element since we can't do this w/ pure CSS. Sigh.\n                                *\n                                * @example\n                                * animateHeight({\n                                *   el: ...,\n                                *   toggleEl: ...,\n                                *   // Optional params\n                                *   action: 'collapse'|'expand',\n                                *   heightAnimationClass: 'spark-animate-height',\n                                *   opacityAnimationClass: 'spark-animate-opacity',\n                                *   toggleProperty: 'display'|'overflow'|'visibility',\n                                *   toggleValue: 'block'|'none'|'visible'|'hidden',\n                                *   animationDuration: 250\n                                * });\n                                *\n                                * @module helpers/animation/height.js\n                                */\n\nvar runningAnimations = {\n  els: [],\n  completeCallbacks: []\n};\n\n/**\n * Get the inverse toggle value\n * @param  {String} property\n * @param  {String} originalValue\n * @return {String}\n */\nfunction getInverseToggleValue(el, property, originalValue) {\n\n  // Get the value to toggle to for the given property\n  switch (property) {\n    case 'overflow':\n    case 'visibility':\n      return originalValue === 'visible' ? 'hidden' : 'visible';\n    default:\n      return originalValue === 'block' || originalValue === 'inline-block' ? 'none' : 'block';\n  }\n}\n\n/**\n * When an animation is complete, clean up and run the callback.\n * @param  {Object} params\n */\nfunction onComplete(params) {\n\n  // Reset toggle el visibility\n  if (params.toggleClassName) {\n    (0, _toggleClass2.default)(params.el, params.toggleClassName, !params.collapse);\n  } else {\n    params.toggleEl.style[params.toggleProperty] = '';\n  }\n\n  // Remove the height property\n  params.el.style.height = '';\n  params.toggleEl.style.height = '';\n  params.toggleEl.style.marginBottom = '';\n  params.toggleEl.style.marginTop = '';\n\n  // Remove the spark-animate-height class so the transitions no longer apply\n  (0, _removeClass2.default)(params.el, params.heightAnimationClass);\n  (0, _removeClass2.default)(params.toggleEl, params.heightAnimationClass);\n\n  // Run the callback\n  params.onComplete();\n\n  // Remove the element and callback from their respective arrays\n  var runningIndex = runningAnimations.els.indexOf(params.el);\n  runningAnimations.els.splice(runningIndex, 1);\n  runningAnimations.completeCallbacks.splice(runningIndex, 1);\n}\n\n/**\n * @param {Object} params\n */\nfunction animateHeight(params) {\n\n  params = params || {};\n\n  var el = params.el;\n\n  if (!el) {\n    return;\n  }\n\n  var collapse = params.action && params.action === 'collapse';\n  var heightAnimationClass = params.heightAnimationClass || 'spark-animate-height';\n\n  // Allow for elements to be passed or selector strings\n  var toggleEl = typeof params.toggleEl === 'string' ? el.querySelector(params.toggleEl) : params.toggleEl;\n\n  // No element to be switching with toggling so we can't determine the desired height to animate to.\n  if (!toggleEl || (0, _hasClass2.default)(el, 'spark-no-animate')) {\n    return;\n  }\n\n  var toggleClassName = params.toggleClass;\n\n  // The style property to use when toggling visibility\n  var toggleProperty = params.toggleProperty || 'display';\n  var toggleStyles = window.getComputedStyle(toggleEl);\n  var originalToggleValue = toggleStyles[toggleProperty];\n  var toggleValue = params.toggleValue || getInverseToggleValue(toggleProperty, originalToggleValue);\n\n  // If we are already animating, stop now.\n  var runningIndex = runningAnimations.els.indexOf(el);\n  if (runningIndex !== -1) {\n\n    var completeCallback = runningAnimations.completeCallbacks[runningIndex];\n    if (completeCallback) {\n      clearTimeout(completeCallback);\n    }\n\n    onComplete({\n      el: el,\n      toggleEl: toggleEl,\n      onComplete: params.onComplete || noop,\n      collapse: collapse,\n      toggleProperty: toggleProperty,\n      toggleClassName: toggleClassName,\n      toggleValue: toggleValue,\n      heightAnimationClass: heightAnimationClass\n    });\n  }\n\n  // Store the current height\n  var originalHeight = (0, _outerHeight2.default)(el);\n\n  // Toggle the visible property\n  if (toggleClassName) {\n    (0, _toggleClass2.default)(el, toggleClassName, !collapse);\n  } else {\n    toggleEl.style[toggleProperty] = toggleValue;\n  }\n\n  // When measuring the size for a collapse, we have to wait a tic for it to be\n  // accurate. Not sure why. Ugh.\n  if (collapse) {\n    setTimeout(runAnimation, 0);\n  } else {\n    runAnimation();\n  }\n\n  function runAnimation() {\n\n    // Now that the toggle el is taking up space, get the new height which we will be animating to\n    var targetElHeight = (0, _outerHeight2.default)(el);\n\n    // We need to store the original and target toggle element heights. They differ depending on\n    // whether we are going to expand or collapse.\n    var targetToggleElHeight = void 0;\n    var originalToggleElHeight = void 0;\n\n    // If we are collapsing, reset the toggle style and set it when we're done. Set the height so\n    // that we can animate down to 0 or up to the target height.\n    if (collapse) {\n\n      if (toggleClassName) {\n        (0, _removeClass2.default)(el, toggleClassName);\n      } else {\n        toggleEl.style[toggleProperty] = originalToggleValue;\n      }\n\n      originalToggleElHeight = (0, _outerHeight2.default)(toggleEl, toggleStyles);\n      targetToggleElHeight = 0;\n    } else {\n      targetToggleElHeight = (0, _outerHeight2.default)(toggleEl, toggleStyles);\n      originalToggleElHeight = 0;\n    }\n\n    // Set the original height\n    el.style.height = originalHeight + 'px';\n    toggleEl.style.height = originalToggleElHeight + 'px';\n    toggleEl.style.marginBottom = '0px';\n    toggleEl.style.marginTop = '0px';\n\n    // Add the spark-animate-height class which will setup the transition-property and duration\n    (0, _addClass2.default)(el, heightAnimationClass);\n    (0, _addClass2.default)(toggleEl, heightAnimationClass);\n\n    runningAnimations.els.push(el);\n\n    // We need to wait a tick to toggle the height or else the animation class won't function\n    setTimeout(function () {\n\n      // Set the height to the target height\n      el.style.height = targetElHeight + 'px';\n      toggleEl.style.height = targetToggleElHeight + 'px';\n\n      // Remove inline styles after the animation is complete\n      runningAnimations.completeCallbacks.push(setTimeout(function () {\n        onComplete({\n          el: el,\n          toggleEl: toggleEl,\n          onComplete: params.onComplete || noop,\n          collapse: collapse,\n          toggleProperty: toggleProperty,\n          toggleClassName: toggleClassName,\n          toggleValue: toggleValue,\n          heightAnimationClass: heightAnimationClass\n        });\n      }, params.animationDuration !== undefined ? params.animationDuration : 201));\n    }, 0);\n  }\n}\n\nexports.default = animateHeight;\nmodule.exports = exports['default'];\n//# sourceMappingURL=height.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Date helper\n * General helpers for working with dates.\n *\n * @module helpers/date/date.js\n */\n\nvar monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\nvar monthNamesShort = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'June', 'July', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];\nvar dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\nvar dayNamesShort = ['Sun', 'Mon', 'Tues', 'Wed', 'Thur', 'Fri', 'Sat'];\nvar adjustedDayNames = [];\nvar adjustedDayNamesShort = [];\nvar weekStartsOn = 0;\n\nvar dateHelper = {\n\n  /**\n   * Transform a date into an object of date values.\n   * @param {Date} date\n   * @return {Object}\n   */\n  create: function create(date) {\n\n    date = date instanceof Date ? date : new Date(date.year, date.month - 1, date.day);\n\n    var inst = Object.create(dateHelper);\n    inst._date = date;\n    inst._cache = {};\n\n    return inst;\n  },\n\n  /**\n   * Get a year.\n   * @return {Number}\n   */\n  get year() {\n    this._instanceCheck('year');\n    return this._date.getFullYear();\n  },\n\n  /**\n   * Set a year.\n   * @param {Number} y\n   */\n  set year(y) {\n    this._instanceCheck('year');\n    this._clearCache();\n    return this._date.setFullYear(y);\n  },\n\n  /**\n   * Get a month.\n   * @return {Number} 1-12\n   */\n  get month() {\n    this._instanceCheck('month');\n    return this._date.getMonth() + 1;\n  },\n\n  /**\n   * Set a month.\n   * @param {Number} m 1-12\n   */\n  set month(m) {\n    this._instanceCheck('month');\n    this._clearCache();\n    return this._date.setMonth(m - 1);\n  },\n\n  /**\n   * Get a day.\n   * @return {Number} 1-31\n   */\n  get day() {\n    this._instanceCheck('day');\n    return this._date.getDate();\n  },\n\n  /**\n   * Set a day.\n   * @param {Number} d 1-31\n   */\n  set day(d) {\n    this._instanceCheck('day');\n    this._clearCache();\n    return this._date.setDate(d);\n  },\n\n  /**\n   * Sets the day, month and year values at once.\n   * @param {Object} params\n   */\n  set: function set(params) {\n    params = params || {};\n    this.year = params.year || this.year;\n    this.month = params.month || this.month;\n    this.day = params.day || this.day;\n  },\n\n  /**\n   * Get the full name of the month.\n   * @param {Number} num\n   * @return {String}\n   */\n  getMonthName: function getMonthName(num) {\n    return monthNames[num - 1];\n  },\n\n  /**\n   * Get the month name.\n   * @return {String}\n   */\n  get monthName() {\n    this._instanceCheck('monthName');\n    return dateHelper.getMonthName(this.month);\n  },\n\n  /**\n   * Get the list of month names.\n   * @return {Array}\n   */\n  getMonthNames: function getMonthNames() {\n    return monthNames;\n  },\n\n  /**\n   * Get the short name of the month.\n   * @param {Number} num\n   * @return {String}\n   */\n  getMonthNameShort: function getMonthNameShort(num) {\n    return monthNamesShort[num - 1];\n  },\n\n  /**\n   * Get the month name.\n   * @return {String}\n   */\n  get monthNameShort() {\n    this._instanceCheck('monthName');\n    return dateHelper.getMonthNameShort(this.month);\n  },\n\n  /**\n   * Get the list of short month names.\n   * @return {Array}\n   */\n  getMonthNamesShort: function getMonthNamesShort() {\n    return monthNamesShort;\n  },\n\n  /**\n   * Set the month names.\n   * @param {Array} names\n   */\n  setMonthNames: function setMonthNames(names) {\n    if (names.length === 12) monthNames = names;\n  },\n\n  /**\n   * Set the short month names.\n   * @param {Array} names\n   */\n  setMonthNamesShort: function setMonthNamesShort(names) {\n    if (names.length === 12) monthNamesShort = names;\n  },\n\n  /**\n   * Get the day of the week for a given day.\n   * @param {Object} date\n   * @return {Number} 1-7\n   */\n  getDayOfWeek: function getDayOfWeek(date) {\n    var day = (date instanceof Date ? date : new Date(date.year, date.month - 1, date.day)).getDay() - weekStartsOn;\n    return (day < 0 ? 7 - Math.abs(day) : day) + 1;\n  },\n\n  /**\n   * Get the day of the week.\n   * @return {Number}\n   */\n  get dayOfWeek() {\n    return dateHelper.getDayOfWeek(this._date);\n  },\n\n  /**\n   * Get the full name of a day of the week.\n   * @param {Number} num\n   * @return {String}\n   */\n  getDayName: function getDayName(num) {\n    return dayNames[num - 1 + weekStartsOn] || dayNames[dayNames.length - num - 1 + weekStartsOn];\n  },\n\n  /**\n   * Get the day name.\n   * @return {String}\n   */\n  get dayName() {\n    this._instanceCheck('dayName');\n    return dateHelper.getDayName(this.dayOfWeek);\n  },\n\n  /**\n   * Get the full name of the days of the week.\n   * @return {Array}\n   */\n  getDayNames: function getDayNames() {\n    return adjustedDayNames.length ? adjustedDayNames : dayNames;\n  },\n\n  /**\n   * Get the short name of the day.\n   * @param {Number} num\n   * @return {String}\n   */\n  getDayNameShort: function getDayNameShort(num) {\n    return dayNamesShort[num - 1 + weekStartsOn] || dayNames[dayNames.length - num - 1 + weekStartsOn];\n  },\n\n  /**\n   * Get the short day name.\n   * @return {String}\n   */\n  get dayNameShort() {\n    this._instanceCheck('dayNameShort');\n    return dateHelper.getDayNameShort(this.dayOfWeek);\n  },\n\n  /**\n   * Get the full name of the days of the week.\n   * @return {Array}\n   */\n  getDayNamesShort: function getDayNamesShort() {\n    return adjustedDayNamesShort.length ? adjustedDayNamesShort : dayNamesShort;\n  },\n\n  /**\n   * Set the day names.\n   * @param {Array} names\n   */\n  setDayNames: function setDayNames(names) {\n    if (names.length === 7) dayNames = names;\n  },\n\n  /**\n   * Set the short day names.\n   * @param {Array} names\n   */\n  setDayNamesShort: function setDayNamesShort(names) {\n    if (names.length === 7) dayNamesShort = names;\n  },\n\n  /**\n   * Get the index of the first day of the week.\n   * @return {Number}\n   */\n  getWeekStartsOn: function getWeekStartsOn() {\n    return weekStartsOn;\n  },\n\n  /**\n   * Set the index of the first day of the week.\n   * @param {Number} index\n   * @return {String}\n   */\n  setWeekStartsOn: function setWeekStartsOn(number) {\n\n    weekStartsOn = number;\n\n    if (number) {\n      adjustedDayNames = dayNames.slice(weekStartsOn);\n      adjustedDayNames = adjustedDayNames.concat(dayNames.slice(0, weekStartsOn));\n      adjustedDayNamesShort = dayNamesShort.slice(weekStartsOn);\n      adjustedDayNamesShort = adjustedDayNamesShort.concat(dayNamesShort.slice(0, weekStartsOn));\n    } else {\n      adjustedDayNames = [];\n      adjustedDayNamesShort = [];\n    }\n  },\n\n  /**\n   * Get the current date.\n   * @return {Object}\n   */\n  now: function now() {\n    return dateHelper.create(new Date());\n  },\n\n  /**\n   * Get the next year after the given date.\n   * This obviously isn't very complicated, but it exists\n   * for parity with how we get the week, day and month.\n   * @param {Object} date\n   * @return {Object}\n   */\n  getNextYear: function getNextYear(date) {\n    return dateHelper.create(new Date(date.year + 1, date.month - 1, date.day));\n  },\n\n  /**\n   * Get the year following this.\n   * @return {Object}\n   */\n  get nextYear() {\n    this._instanceCheck('nextYear');\n    return this._cache.nextYear || (this._cache.nextYear = dateHelper.getNextYear(this));\n  },\n\n  /**\n   * Get the first day of the week for a given date.\n   * @param {Object} date\n   * @return {Object}\n   */\n  getWeekStart: function getWeekStart(date) {\n    var inst = dateHelper.create(new Date(date.year, date.month - 1, date.day - dateHelper.getDayOfWeek(date) + 1));\n    inst.weekStartsOn = weekStartsOn;\n    return inst;\n  },\n\n  /**\n   * Get the start of the week for this date.\n   * @return {Object}\n   */\n  get weekStart() {\n    this._instanceCheck('weekStart');\n    return this._cache.weekStart && this._cache.weekStart.weekStartsOn === weekStartsOn ? this._cache.weekStart : this._cache.weekStart = dateHelper.getWeekStart(this);\n  },\n\n  /**\n   * Get the first day of the month for a given date.\n   * @param {Object} date\n   * @return {Object}\n   */\n  getMonthStart: function getMonthStart(date) {\n    var inst = dateHelper.create(new Date(date.year, date.month - 1, 1));\n    return inst;\n  },\n\n  /**\n   * Get the start of the month for this date.\n   * @return {Object}\n   */\n  get monthStart() {\n    this._instanceCheck('monthStart');\n    return this._cache.monthStart || (this._cache.monthStart = dateHelper.getMonthStart(this));\n  },\n\n  /**\n   * Get the next week after the given date.\n   * @param {Object} date\n   * @return {Object}\n   */\n  getNextWeek: function getNextWeek(date) {\n    var start = dateHelper.getWeekStart(date);\n    return dateHelper.create(new Date(start.year, start.month - 1, start.day + 7));\n  },\n\n  /**\n   * Get the week following this.\n   * @return {Object}\n   */\n  get nextWeek() {\n    this._instanceCheck('nextWeek');\n    return this._cache.nextWeek || (this._cache.nextWeek = dateHelper.getNextWeek(this));\n  },\n\n  /**\n   * Get the next day after the given date.\n   * @param {Object} date\n   * @return {Object}\n   */\n  getNextDay: function getNextDay(date) {\n    return dateHelper.create(new Date(date.year, date.month - 1, date.day + 1));\n  },\n\n  /**\n   * Get the day following this.\n   * @return {Object}\n   */\n  get nextDay() {\n    this._instanceCheck('nextDay');\n    return this._cache.nextDay || (this._cache.nextDay = dateHelper.getNextDay(this));\n  },\n\n  /**\n   * Get the next month after the given date.\n   * @param {Object} date\n   * @return {Object}\n   */\n  getNextMonth: function getNextMonth(date) {\n    // Date() has a *bug/feature* if last day of month is 31 when calculating the next month.\n    // Need to account for that so that it doesn't round up the date/month.\n\n    if (date.day === 31 && date.month !== 1 && date.month !== 7 && date.month !== 12) {\n      // Adjust for months ending in 31 followed by months ending in 30\n      return dateHelper.create(new Date(date.year, date.month, date.day - 1));\n    } else if (date.day > 28 && date.month === 1) {\n      // fix for last day of February\n      return dateHelper.create(new Date(date.year, date.month + 1, 0));\n    } else {\n      return dateHelper.create(new Date(date.year, date.month, date.day));\n    }\n  },\n\n  /**\n   * Get the month following this.\n   * @return {Object}\n   */\n  get nextMonth() {\n    this._instanceCheck('nextMonth');\n    return this._cache.nextMonth || (this._cache.nextMonth = dateHelper.getNextMonth(this));\n  },\n\n  /**\n   * Get the previous year after the given date.\n   * This obviously isn't very complicated, but it exists\n   * for parity with how we get the week, day and month.\n   * @param {Object} date\n   * @return {Object}\n   */\n  getPreviousYear: function getPreviousYear(date) {\n    return dateHelper.create(new Date(date.year - 1, date.month - 1, date.day));\n  },\n\n  /**\n   * Get the year preceding this.\n   * @return {Object}\n   */\n  get previousYear() {\n    this._instanceCheck('previousYear');\n    return this._cache.previousYear || (this._cache.previousYear = dateHelper.getPreviousYear(this));\n  },\n\n  /**\n   * Get the previous week after the given date.\n   * @param {Object} date\n   * @return {Object}\n   */\n  getPreviousWeek: function getPreviousWeek(date) {\n    var start = dateHelper.getWeekStart(date);\n    var inst = dateHelper.create(new Date(start.year, start.month - 1, start.day - 7));\n    inst.weekStartsOn = weekStartsOn;\n    return inst;\n  },\n\n  /**\n   * Get the week preceding this.\n   * @return {Object}\n   */\n  get previousWeek() {\n    this._instanceCheck('previousWeek');\n    return this._cache.previousWeek || (this._cache.previousWeek = dateHelper.getPreviousWeek(this));\n  },\n\n  /**\n   * Get the previous day after the given date.\n   * @param {Object} date\n   * @return {Object}\n   */\n  getPreviousDay: function getPreviousDay(date) {\n    return dateHelper.create(new Date(date.year, date.month - 1, date.day - 1));\n  },\n\n  /**\n   * Get the day preceding this.\n   * @return {Object}\n   */\n  get previousDay() {\n    this._instanceCheck('previousDay');\n    return this._cache.previousDay || (this._cache.previousDay = dateHelper.getPreviousDay(this));\n  },\n\n  /**\n   * Get the previous month after the given date.\n   * @param {Object} date\n   * @return {Object}\n   */\n  getPreviousMonth: function getPreviousMonth(date) {\n    // Date() has a *bug/feature* if last day of month is 31 when calculating the previous month.\n    // Need to account for that so that it doesn't round up the date/month.\n\n    if (date.day === 31 && date.month !== 1 && date.month !== 3 && date.month !== 8) {\n      // Adjust for months ending in 31 that follow months ending in 30\n      return dateHelper.create(new Date(date.year, date.month - 2, date.day - 1));\n    } else if (date.day > 28 && date.month === 3) {\n      // Adjust for last day of February\n      return dateHelper.create(new Date(date.year, date.month - 1, 0));\n    } else {\n      return dateHelper.create(new Date(date.year, date.month - 2, date.day));\n    }\n  },\n\n  /**\n   * Get the month preceding this.\n   * @return {Object}\n   */\n  get previousMonth() {\n    this._instanceCheck('previousMonth');\n    return this._cache.previousMonth || (this._cache.previousMonth = dateHelper.getPreviousMonth(this));\n  },\n\n  /**\n   * Get the last day of the month.\n   * @param {Object} date\n   * @return {Object}\n   */\n  getMonthEnd: function getMonthEnd(date) {\n    return dateHelper.create(new Date(date.year, date.month, 0));\n  },\n\n  /**\n   * Get the last day of the month.\n   * @return {Object}\n   */\n  get monthEnd() {\n    this._instanceCheck('monthEnd');\n    return this._cache.monthEnd || (this._cache.monthEnd = dateHelper.getMonthEnd(this));\n  },\n\n  /**\n   * Does a given day equal another? Or is it present in a list of others?\n   * @param {Object} date\n   * @param {Object|Array} compare\n   * @param {Boolean} full Return a successful match only if all matches are found.\n   * @return {Boolean}\n   */\n  equal: function equal(date, compare, full) {\n    return this.equalDay(date, compare, full);\n  },\n\n  /**\n   * Does a given day equal another? Or is it present in a list of others?\n   * @param {Object} date\n   * @param {Object|Array} compare\n   * @param {Boolean} full Return a successful match only if all matches are found.\n   * @return {Boolean}\n   */\n  equalDay: function equalDay(date, compare, full) {\n\n    var args = this._checkComparisonArgs(date, compare, full);\n    date = args[0];\n    compare = args[1];\n    full = args[2];\n\n    var i = 0;\n    var len = compare.length;\n    var matches = 0;\n\n    for (; i < len; i++) {\n      if (compare[i] && date.year === compare[i].year && date.month === compare[i].month && date.day === compare[i].day) matches++;\n    }\n\n    return full ? matches === len : !!matches;\n  },\n\n  /**\n   * Is a week equal to another?\n   * @param {Object} date\n   * @param {Object|Array} compare\n   * @param {Boolean} full Return a successful match only if all matches are found.\n   * @return {Boolean}\n   */\n  equalWeek: function equalWeek(date, compare, full) {\n\n    var args = this._checkComparisonArgs(date, compare, full);\n    date = args[0];\n    compare = args[1];\n    full = args[2];\n\n    var i = 0;\n    var len = compare.length;\n    var matches = 0;\n\n    for (; i < len; i++) {\n      if (!compare[i] || !date.weekStart.equalDay(compare[i].weekStart)) continue;else matches++;\n    }\n\n    return full ? matches === len : !!matches;\n  },\n\n  /**\n   * Is a month equal to another?\n   * @param {Object} date\n   * @param {Object|Array} compare\n   * @param {Boolean} full Return a successful match only if all matches are found.\n   * @return {Boolean}\n   */\n  equalMonth: function equalMonth(date, compare, full) {\n\n    var args = this._checkComparisonArgs(date, compare, full);\n    date = args[0];\n    compare = args[1];\n    full = args[2];\n\n    var i = 0;\n    var len = compare.length;\n    var matches = 0;\n\n    for (; i < len; i++) {\n      if (!compare[i] || date.year !== compare[i].year || date.year === compare[i].year && date.month !== compare[i].month) continue;else matches++;\n    }\n\n    return full ? matches === len : !!matches;\n  },\n\n  /**\n   * Is a year equal to another?\n   * @param {Object} date\n   * @param {Object|Array} compare\n   * @param {Boolean} full Return a successful match only if all matches are found.\n   * @return {Boolean}\n   */\n  equalYear: function equalYear(date, compare, full) {\n\n    var args = this._checkComparisonArgs(date, compare, full);\n    date = args[0];\n    compare = args[1];\n    full = args[2];\n\n    var i = 0;\n    var len = compare.length;\n    var matches = 0;\n\n    for (; i < len; i++) {\n      if (!compare[i] || date.year !== compare[i].year) continue;else matches++;\n    }\n\n    return full ? matches === len : !!matches;\n  },\n\n  /**\n   * Is a date before another?\n   * @param {Object} date\n   * @param {Object|Array} compare\n   * @param {Boolean} full Return a successful match only if all matches are found.\n   * @return {Boolean}\n   */\n  before: function before(date, compare, full) {\n    return this.beforeDay(date, compare, full);\n  },\n\n  /**\n   * Is a given date before another?\n   * @param {Object} date\n   * @param {Object|Array} compare\n   * @param {Boolean} full Return a successful match only if all matches are found.\n   * @return {Boolean}\n   */\n  beforeDay: function beforeDay(date, compare, full) {\n\n    var args = this._checkComparisonArgs(date, compare, full);\n    date = args[0];\n    compare = args[1];\n    full = args[2];\n\n    var i = 0;\n    var len = compare.length;\n    var matches = 0;\n\n    for (; i < len; i++) {\n      if (!compare[i] || date._date >= compare[i]._date) continue;else matches++;\n    }\n\n    return full ? matches === len : !!matches;\n  },\n\n  /**\n   * Is a week before another?\n   * @param {Object} date\n   * @param {Object|Array} compare\n   * @param {Boolean} full Return a successful match only if all matches are found.\n   * @return {Boolean}\n   */\n  beforeWeek: function beforeWeek(date, compare, full) {\n\n    var args = this._checkComparisonArgs(date, compare, full);\n    date = args[0];\n    compare = args[1];\n    full = args[2];\n\n    var i = 0;\n    var len = compare.length;\n    var matches = 0;\n\n    for (; i < len; i++) {\n      if (!compare[i] || !date.weekStart.beforeDay(compare[i].weekStart)) continue;else matches++;\n    }\n\n    return full ? matches === len : !!matches;\n  },\n\n  /**\n   * Is a month before another?\n   * @param {Object} date\n   * @param {Object|Array} compare\n   * @param {Boolean} full Return a successful match only if all matches are found.\n   * @return {Boolean}\n   */\n  beforeMonth: function beforeMonth(date, compare, full) {\n\n    var args = this._checkComparisonArgs(date, compare, full);\n    date = args[0];\n    compare = args[1];\n    full = args[2];\n\n    var i = 0;\n    var len = compare.length;\n    var matches = 0;\n\n    for (; i < len; i++) {\n      if (!compare[i] || date.year > compare[i].year || date.year === compare[i].year && date.month >= compare[i].month) continue;else matches++;\n    }\n\n    return full ? matches === len : !!matches;\n  },\n\n  /**\n   * Is a year before another?\n   * @param {Object} date\n   * @param {Object|Array} compare\n   * @param {Boolean} full Return a successful match only if all matches are found.\n   * @return {Boolean}\n   */\n  beforeYear: function beforeYear(date, compare, full) {\n\n    var args = this._checkComparisonArgs(date, compare, full);\n    date = args[0];\n    compare = args[1];\n    full = args[2];\n\n    var i = 0;\n    var len = compare.length;\n    var matches = 0;\n\n    for (; i < len; i++) {\n      if (!compare[i] || date.year >= compare[i].year) continue;else matches++;\n    }\n\n    return full ? matches === len : !!matches;\n  },\n\n  /**\n   * Is a date after another?\n   * @param {Object} date\n   * @param {Object|Array} compare\n   * @param {Boolean} full Return a successful match only if all matches are found.\n   * @return {Boolean}\n   */\n  after: function after(date, compare, full) {\n    return this.afterDay(date, compare, full);\n  },\n\n  /**\n   * Is a given date after another?\n   * @param {Object} date\n   * @param {Object|Array} compare\n   * @param {Boolean} full Return a successful match only if all matches are found.\n   * @return {Boolean}\n   */\n  afterDay: function afterDay(date, compare, full) {\n\n    var args = this._checkComparisonArgs(date, compare, full);\n    date = args[0];\n    compare = args[1];\n    full = args[2];\n\n    var i = 0;\n    var len = compare.length;\n    var matches = 0;\n\n    for (; i < len; i++) {\n      if (!compare[i] || date._date <= compare[i]._date) continue;else matches++;\n    }\n\n    return full ? matches === len : !!matches;\n  },\n\n  /**\n   * Is a week after another?\n   * @param {Object} date\n   * @param {Object|Array} compare\n   * @param {Boolean} full Return a successful match only if all matches are found.\n   * @return {Boolean}\n   */\n  afterWeek: function afterWeek(date, compare, full) {\n\n    var args = this._checkComparisonArgs(date, compare, full);\n    date = args[0];\n    compare = args[1];\n    full = args[2];\n\n    var i = 0;\n    var len = compare.length;\n    var matches = 0;\n\n    for (; i < len; i++) {\n      if (!compare[i] || !date.weekStart.afterDay(compare[i].weekStart)) continue;else matches++;\n    }\n\n    return full ? matches === len : !!matches;\n  },\n\n  /**\n   * Is a month after another?\n   * @param {Object} date\n   * @param {Object|Array} compare\n   * @param {Boolean} full Return a successful match only if all matches are found.\n   * @return {Boolean}\n   */\n  afterMonth: function afterMonth(date, compare, full) {\n\n    var args = this._checkComparisonArgs(date, compare, full);\n    date = args[0];\n    compare = args[1];\n    full = args[2];\n\n    var i = 0;\n    var len = compare.length;\n    var matches = 0;\n\n    for (; i < len; i++) {\n      if (!compare[i] || date.year < compare[i].year || date.year === compare[i].year && date.month <= compare[i].month) continue;else matches++;\n    }\n\n    return full ? matches === len : !!matches;\n  },\n\n  /**\n   * Is a year after another?\n   * @param {Object} date\n   * @param {Object|Array} compare\n   * @param {Boolean} full Return a successful match only if all matches are found.\n   * @return {Boolean}\n   */\n  afterYear: function afterYear(date, compare, full) {\n\n    var args = this._checkComparisonArgs(date, compare, full);\n    date = args[0];\n    compare = args[1];\n    full = args[2];\n\n    var i = 0;\n    var len = compare.length;\n    var matches = 0;\n\n    for (; i < len; i++) {\n      if (!compare[i] || date.year <= compare[i].year) continue;else matches++;\n    }\n\n    return full ? matches === len : !!matches;\n  },\n\n  /**\n   * Get the earliest date in an array.\n   * @return {Object}\n   */\n  earliest: function earliest(arr) {\n\n    var i = 0;\n    var len = arr.length;\n    var e = void 0;\n\n    for (; i < len; i++) {\n      if (!e || arr[i].before(e)) e = arr[i];\n    }\n\n    return e;\n  },\n\n  /**\n   * Get the latest date in an array.\n   * @return {Object}\n   */\n  latest: function latest(arr) {\n\n    var i = 0;\n    var len = arr.length;\n    var l = void 0;\n\n    for (; i < len; i++) {\n      if (!l || arr[i].after(l)) l = arr[i];\n    }\n\n    return l;\n  },\n\n  /**\n   * Clone a date instance.\n   * @param {Object} date\n   * @return {Object}\n   */\n  clone: function clone(date) {\n\n    // If we weren't passed a date, use this instance.\n    if (!date && this._date && this._date instanceof Date && dateHelper.isPrototypeOf(this)) {\n      date = this;\n    }\n\n    // No date, can't clone.\n    if (!date) {\n      throw new Error('Must pass a date to clone or call on an instance.');\n    }\n\n    return dateHelper.create(new Date(date._date.valueOf()));\n  },\n\n  /**\n   * If a comparison function is called on an instance, properly\n   * assign the vars.\n   * @param {Object} date\n   * @param {Object|Array} compare\n   * @param {Boolean} full\n   */\n  _checkComparisonArgs: function _checkComparisonArgs(date, compare, full) {\n\n    if (compare === undefined || typeof compare === 'boolean') {\n\n      if (!dateHelper.isPrototypeOf(this)) {\n        throw new Error('Cannot compare only one date!');\n      }\n\n      full = compare;\n      compare = date;\n      date = this;\n    }\n\n    compare = compare instanceof Array ? compare : [compare];\n\n    return [date, compare, full];\n  },\n\n  /**\n   * Check to see if we have an instance of the date object.\n   * @param  {String} prop\n   */\n  _instanceCheck: function _instanceCheck(prop) {\n    if (!this._date || !(this._date instanceof Date) || !dateHelper.isPrototypeOf(this)) throw new Error('Cannot access the property \"' + prop + '\" of the date helper with creating an instance!');\n  },\n\n  /**\n   * Clear the cache.\n   */\n  _clearCache: function _clearCache() {\n    this._instanceCheck('clearCache');\n    this._cache = {};\n  }\n};\n\nexports.default = dateHelper;\nmodule.exports = exports['default'];\n//# sourceMappingURL=date.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _pad = require('../util/pad');\n\nvar _pad2 = _interopRequireDefault(_pad);\n\nvar _date = require('./date');\n\nvar _date2 = _interopRequireDefault(_date);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Map characters to their special meanings.\n * @type {Object}\n */\n/**\n * # Parse Date Format\n * Given a date format string, break it down into pieces.\n *\n * @example\n * parseDateFormat('MM-DD-YYYY');\n *\n * @module helpers/date/parse-format.js\n */\n\nvar map = {\n  d: 'day',\n  m: 'month',\n  y: 'year',\n  '-': 'divider',\n  '/': 'divider',\n  ' ': 'space'\n};\n\n/**\n * Given a format and a string, get the day, month and year values from that string.\n * @param {Object} format\n * @return {Function}\n */\nfunction getValues(format) {\n\n  return function (value) {\n\n    var i = 0;\n    var index = 0;\n    var len = format.length;\n    var values = {};\n\n    // Loop through all format pieces\n    for (; i < len; i++) {\n\n      // Only worry about date values\n      if (['day', 'month', 'year'].indexOf(format[i].name) !== -1) {\n\n        // If the passed value doesn't contain a format piece, it's invalid.\n        if (value.length < index + format[i].length) return;\n\n        values[format[i].name] = parseInt(value.substr(index, format[i].length), 10);\n      }\n      index += format[i].length;\n    }\n\n    return _date2.default.create(values);\n  };\n}\n\n/**\n * Create a formatted date string given an object of values.\n * @param {Object} format\n * @return {Function}\n */\nfunction getString(format) {\n\n  /**\n   * @param {Object} vals\n   * @return {String}\n   */\n  return function (vals) {\n\n    var i = 0;\n    var len = format.length;\n    var str = '';\n\n    for (; i < len; i++) {\n\n      // Numbers\n      if (vals[format[i].name]) {\n        str += (0, _pad2.default)(vals[format[i].name], format[i].length);\n      }\n      // Dividers\n      else {\n          str += format[i].value;\n        }\n    }\n\n    return str;\n  };\n}\n\n/**\n * @param {String} format\n * @return {Object}\n */\nfunction parseDateFormat(format) {\n\n  var f = format.toLowerCase();\n  var i = 0;\n  var len = f.length;\n\n  var obj = {\n    parts: []\n  };\n\n  for (; i < len; i++) {\n\n    // If there is a matching character mapping and the last part was of the same name, increment its length\n    // and add to its content.\n    if (map[f[i]] && obj.parts.length && obj.parts[obj.parts.length - 1].name === map[f[i]]) {\n      obj.parts[obj.parts.length - 1].length++;\n      obj.parts[obj.parts.length - 1].value += format[i];\n      continue;\n    }\n\n    obj.parts.push({\n      name: map[f[i]] ? map[f[i]] : '',\n      value: format[i],\n      length: 1\n    });\n  }\n\n  // Add a way to convert the parsed date into a regex-ish string that works with the Typeahead implementation.\n  obj.getValues = getValues(obj.parts);\n  obj.getString = getString(obj.parts);\n\n  return obj;\n}\n\nexports.default = parseDateFormat;\nmodule.exports = exports['default'];\n//# sourceMappingURL=parse-format.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _trim = require('../util/trim');\n\nvar _trim2 = _interopRequireDefault(_trim);\n\nvar _hasClass = require('./has-class');\n\nvar _hasClass2 = _interopRequireDefault(_hasClass);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * # Add Class\n * Add a class on an element.\n *\n * @param {Element|Array} el An element or array of elements to update.\n * @param {String} name\n * @return {Element}\n *\n * @module helpers/dom/add-class.js\n */\n\nvar ws = /\\s+/;\nvar cleanup = /\\s{2,}/g;\n\nfunction addClass(el, name) {\n\n  if (arguments.length === 2 && typeof name === 'string') {\n    name = (0, _trim2.default)(name).split(ws);\n  } else {\n    name = name instanceof Array ? name : Array.prototype.slice.call(arguments, 1);\n  }\n\n  // optimize for best, most common case\n  if (name.length === 1 && el.classList) {\n    if (name[0]) {\n      el.classList.add(name[0]);\n    }\n    return el;\n  }\n\n  var toAdd = [];\n  var i = 0;\n  var l = name.length;\n  var item = void 0;\n  var clsName = typeof el.className === 'string' ? el.className : el.getAttribute ? el.getAttribute('class') : '';\n\n  // see if we have anything to add\n  for (; i < l; i++) {\n    item = name[i];\n    if (item && !(0, _hasClass2.default)(clsName, item)) {\n      toAdd.push(item);\n    }\n  }\n\n  if (toAdd.length) {\n    if (typeof el.className === 'string') {\n      el.className = (0, _trim2.default)((clsName + ' ' + toAdd.join(' ')).replace(cleanup, ' '));\n    } else if (el.setAttribute) {\n      el.setAttribute('class', (0, _trim2.default)((clsName + ' ' + toAdd.join(' ')).replace(cleanup, ' ')));\n    }\n  }\n\n  return el;\n}\n\nexports.default = addClass;\nmodule.exports = exports['default'];\n//# sourceMappingURL=add-class.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/**\n * # Has Class\n * See if an element has a class.\n *\n * @param {Element|String} el\n * @param {String} name\n * @return {Boolean}\n *\n * @module helpers/dom/has-class.js\n */\nfunction hasClass(el, name) {\n  var cName = ((typeof el === 'undefined' ? 'undefined' : _typeof(el)) === 'object' ? el.className || el.getAttribute && el.getAttribute('class') || '' : el || '').replace(/[\\t\\r\\n\\f]/g, ' ');\n  return (' ' + cName + ' ').indexOf(' ' + name + ' ') !== -1;\n}\n\nexports.default = hasClass;\nmodule.exports = exports['default'];\n//# sourceMappingURL=has-class.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (html) {\n\n  if (!html) {\n    throw new Error('Cannot create element with no HTML!');\n  }\n\n  var el = document.createElement('div');\n  el.innerHTML = html;\n  var el2 = el.children[0];\n  el2.parentNode.removeChild(el2);\n  return el2;\n};\n\nmodule.exports = exports['default']; /**\n                                      * # Make Element\n                                      * Make en element using a string of HTML.\n                                      *\n                                      * @example\n                                      * makeElement('<div></div>');\n                                      *\n                                      * @module helpers/make-element.js\n                                      *\n                                      * @param {String} html\n                                      * @return {Element}\n                                      */\n//# sourceMappingURL=make-element.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _each = require('../util/each');\n\nvar _each2 = _interopRequireDefault(_each);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar props = ['marginTop', 'marginBottom', 'borderTop', 'borderBottom']; /**\n                                                                         * # Outer Height\n                                                                         * Get the outer height of an element (including margin and border)\n                                                                         *\n                                                                         * @param {Element} el\n                                                                         * @param {Object} styles Optional Already have computed styles? Pass them in.\n                                                                         *\n                                                                         * @example\n                                                                         * outerHeight(el, computedStyles);\n                                                                         *\n                                                                         * @module helpers/outer-height.js\n                                                                         */\n\n\nfunction outerHeight(el, styles) {\n\n  styles = styles || window.getComputedStyle(el);\n\n  var height = el.clientHeight;\n\n  (0, _each2.default)(props, function (prop) {\n    height += parseInt(styles[prop] || 0, 10);\n  });\n\n  return height;\n}\n\nexports.default = outerHeight;\nmodule.exports = exports['default'];\n//# sourceMappingURL=outer-height.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Parse DOM attributes\n * Given an element and an attribute name, parse that attribute\n * if it exists or return a default.\n *\n * @module helpers/dom/parse-attribute.js\n */\n\n/**\n * Get the boolean value of an attribute on an element,\n * falling back to the default value.\n * @param  {Element} el\n * @param  {String} name\n * @param  {Boolean} def\n * @return {Boolean}\n */\nfunction boolean(el, name, def) {\n  var val = el.getAttribute(name);\n  if (val === null) return def;\n  return val === 'true' || val === '' ? true : false;\n}\n\n/**\n * Get the numeric value of an attribute on an element,\n * falling back to the default value.\n * @param  {Element} el\n * @param  {String} name\n * @param  {Boolean} def\n * @return {Boolean}\n */\nfunction number(el, name, def) {\n  var val = el.getAttribute(name);\n  if (val === null) return def;\n  return parseInt(val, 10);\n}\n\n/**\n * Get the boolean value of an attribute on an element,\n * falling back to the default value.\n * @param  {Element} el\n * @param  {String} name\n * @param  {Boolean} def\n * @return {Boolean}\n */\nfunction string(el, name, def) {\n  var val = el.getAttribute(name);\n  if (val === null) return def;\n  return val;\n}\n\nexports.boolean = boolean;\nexports.number = number;\nexports.string = string;\n//# sourceMappingURL=parse-attribute.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _trim = require('../util/trim');\n\nvar _trim2 = _interopRequireDefault(_trim);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ws = /\\s+/; /**\n                 * # Remove Class\n                 * Remove a class on an element.\n                 *\n                 * @param {Element|Array} el An element or array of elements to update.\n                 * @param {String} name\n                 * @return {Element}\n                 *\n                 * @module helpers/dom/remove-class.js\n                 */\n\nvar cleanup = /\\s{2,}/g;\n\nfunction removeClass(el, name) {\n\n  if (arguments.length === 2 && typeof name === 'string') {\n    name = (0, _trim2.default)(name).split(ws);\n  } else {\n    name = name instanceof Array ? name : Array.prototype.slice.call(arguments, 1);\n  }\n\n  // optimize for best, most common case\n  if (name.length === 1 && el.classList) {\n    if (name[0]) el.classList.remove(name[0]);\n    return el;\n  }\n\n  // store two copies\n  var clsName = ' ' + (typeof el.className === 'string' ? el.className : el.getAttribute ? el.getAttribute('class') : '') + ' ';\n  var result = clsName;\n  var current = void 0;\n  var start = void 0;\n  for (var i = 0, l = name.length; i < l; i++) {\n    current = name[i];\n    start = current ? result.indexOf(' ' + current + ' ') : -1;\n    if (start !== -1) {\n      start += 1;\n      result = result.slice(0, start) + result.slice(start + current.length);\n    }\n  }\n\n  // only write if modified\n  if (clsName !== result) {\n    if (typeof el.className === 'string') {\n      el.className = (0, _trim2.default)(result.replace(cleanup, ' '));\n    } else if (el.setAttribute) {\n      el.setAttribute('class', (0, _trim2.default)(result.replace(cleanup, ' ')));\n    }\n  }\n\n  return el;\n}\n\nexports.default = removeClass;\nmodule.exports = exports['default'];\n//# sourceMappingURL=remove-class.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _hasClass = require('./has-class');\n\nvar _hasClass2 = _interopRequireDefault(_hasClass);\n\nvar _addClass = require('./add-class');\n\nvar _addClass2 = _interopRequireDefault(_addClass);\n\nvar _removeClass = require('./remove-class');\n\nvar _removeClass2 = _interopRequireDefault(_removeClass);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction toggleClass(el, name, enable) {\n\n  if (!el) {\n    return;\n  }\n\n  // If we're passed an array, toggle the class on each.\n  if (el instanceof NodeList || el instanceof Array) {\n\n    for (var i = 0, len = el.length; i < len; i++) {\n      toggleClass(el[i], name, enable);\n    }\n\n    return;\n  }\n\n  var action = void 0;\n  if (enable !== undefined) {\n    enable = typeof enable === 'function' ? enable.call(null, el) : enable;\n    action = enable ? 'add' : 'remove';\n  } else {\n    action = (0, _hasClass2.default)(el, name) ? 'remove' : 'add';\n  }\n\n  return (action === 'add' ? _addClass2.default : _removeClass2.default)(el, name);\n} /**\n   * # Toggle Class\n   * Toggle a class on an element given a condition.\n   *\n   * @param {Element|Array} el An element or array of elements to update.\n   * @param {String} name\n   * @param {Boolean} enable\n   * @return {Element}\n   *\n   * @module  helpers/dom/toggle-class.js\n   */\n\nexports.default = toggleClass;\nmodule.exports = exports['default'];\n//# sourceMappingURL=toggle-class.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Trigger Event\n * Trigger a DOM event on an element.\n *\n * @param {Element} el\n * @param {String} name\n *\n * @module helpers/dom/trigger-event.js\n */\nfunction triggerEvent(el, name) {\n\n  var event = void 0;\n\n  if (document.createEvent) {\n    event = document.createEvent('HTMLEvents');\n    event.initEvent(name, true, true);\n    event.eventName = name;\n    el.dispatchEvent(event);\n  } else {\n    event = document.createEventObject();\n    event.eventType = name;\n    event.eventName = name;\n    el.fireEvent('on' + event.eventType, event);\n  }\n}\n\nexports.default = triggerEvent;\nmodule.exports = exports['default'];\n//# sourceMappingURL=trigger-event.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _each = require('../util/each');\n\nvar _each2 = _interopRequireDefault(_each);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction appendChildren(el, children, empty) {\n\n  empty = empty === undefined ? false : empty;\n\n  if (empty) {\n    el.textContent = '';\n  }\n\n  var domList = children instanceof window.HTMLCollection;\n\n  if (domList) {\n    while (children.length) {\n      el.appendChild(children[0]);\n    }\n  } else {\n    (0, _each2.default)(children, function (c) {\n      if (c) {\n        el.appendChild(c);\n      }\n    });\n  }\n} /**\n   * # Append Children\n   * Append an array of children to a node.\n   *\n   * @param {Element} el\n   * @param {Array} children\n   * @param {Boolean} empty Empty the node before adding children?\n   *\n   * @module helpers/manipulation/append-children.js\n   */\n\nexports.default = appendChildren;\nmodule.exports = exports['default'];\n//# sourceMappingURL=append-children.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _each = require('../util/each');\n\nvar _each2 = _interopRequireDefault(_each);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction copyAttributes(a, b) {\n  (0, _each2.default)(a.attributes, function (attr) {\n    b.setAttribute(attr.name, attr.value);\n  });\n} /**\n   * # Copy Attributes\n   * Copy all of the attributes from one element to another.\n   *\n   * @param {Element} a\n   * @param {Element} b\n   *\n   * @module helpers/manipulation/copy-attributes.js\n   */\n\nexports.default = copyAttributes;\nmodule.exports = exports['default'];\n//# sourceMappingURL=copy-attributes.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Each\n * Apply a callback function to a list of any kind: Array, NodeList, HTMLCollection or Object.\n *\n * @param {Array|NodeList|HTMLCollection|Object} list\n * @param {Function} cb\n *\n * @example\n * each([], callback);\n * each(el.children, callback);\n * each(el.childNodes, callback);\n * each({}, callback);\n *\n * @module helpers/util/each.js\n */\nfunction each(list, cb) {\n\n  if (!list) {\n    return;\n  }\n\n  if (typeof cb !== 'function') {\n    throw new Error('Cannot invoke `each` without a callback!');\n  }\n\n  var i = 0;\n  var len = list.length;\n\n  // Object\n  if (len === undefined) {\n    for (i in list) {\n      if (i !== 'prototype' && list.hasOwnProperty(i)) {\n        cb(i, list[i]);\n      }\n    }\n  }\n  // Array-like\n  else {\n      for (; i < len; i++) {\n        cb(list[i]);\n      }\n    }\n}\n\nexports.default = each;\nmodule.exports = exports['default'];\n//# sourceMappingURL=each.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (proto) {\n  for (var _len = arguments.length, mixins = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    mixins[_key - 1] = arguments[_key];\n  }\n\n  (0, _each2.default)(mixins, function (mixin) {\n    for (var i in mixin) {\n      if (mixin.hasOwnProperty(i) && !proto[i]) proto[i] = mixin[i];\n    }\n  });\n};\n\nvar _each = require('./each');\n\nvar _each2 = _interopRequireDefault(_each);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * # Mixin\n * Apply a mixin, or mixins, to an Object\n *\n * @example\n * mixin(proto, mix, mix2)\n *\n * @module helpers/util/mixin.js\n */\nmodule.exports = exports['default'];\n//# sourceMappingURL=mixin.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Pad\n * Pad a number with leading zeros\n *\n * @param {Number} n\n * @param {Number} w\n * @param {String} c Optional String to pad with\n *\n * @example\n * pad(4, 2);\n *\n * @module helpers/util/pad.js\n */\nfunction pad(n, w, c) {\n  c = c || '0';\n  n = n + '';\n  return n.length >= w ? n : new Array(w - n.length + 1).join(c) + n;\n}\n\nexports.default = pad;\nmodule.exports = exports['default'];\n//# sourceMappingURL=pad.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Trim\n * Trim whitespace on a string.\n *\n * @param {String} str\n *\n * @module helpers/util/trim.js\n */\n\nvar trimRE = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;\n\nfunction trim(str) {\n  return str.replace(trimRE, '');\n}\n\nexports.default = trim;\nmodule.exports = exports['default'];\n//# sourceMappingURL=trim.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _height = require('../helpers/animation/height');\n\nvar _height2 = _interopRequireDefault(_height);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n\n  /**\n   * Set the error state.\n   * @param {String} message Optional\n   */\n  setError: function setError(message) {\n\n    // Animate down\n    if (!this._isMessageVisible()) {\n      this._showMessage();\n    }\n\n    this.clearWarning();\n    this.clearSuccess();\n\n    this.el.setAttribute('data-error', true);\n\n    if (message) {\n      this.setMessage(message);\n    }\n\n    return this;\n  },\n\n\n  /**\n   * Set the error state.\n   */\n  clearError: function clearError() {\n    this.el.removeAttribute('data-error', true);\n    return this;\n  },\n\n\n  /**\n   * Set the warning state.\n   * @param {String} message Optional\n   */\n  setWarning: function setWarning(message) {\n\n    // Animate down\n    if (!this._isMessageVisible()) {\n      this._showMessage();\n    }\n\n    this.clearError();\n    this.clearSuccess();\n\n    this.el.setAttribute('data-warning', true);\n\n    if (message) {\n      this.setMessage(message);\n    }\n\n    return this;\n  },\n\n\n  /**\n   * Set the error state.\n   */\n  clearWarning: function clearWarning() {\n    this.el.removeAttribute('data-warning', true);\n    return this;\n  },\n\n\n  /**\n   * Set the success state.\n   * @param {String} message Optional\n   */\n  setSuccess: function setSuccess(message) {\n\n    // Animate down\n    if (!this._isMessageVisible()) {\n      this._showMessage();\n    }\n\n    this.clearError();\n    this.clearWarning();\n\n    this.el.setAttribute('data-success', true);\n\n    if (message) {\n      this.setMessage(message);\n    }\n\n    return this;\n  },\n\n\n  /**\n   * Set the success state.\n   */\n  clearSuccess: function clearSuccess() {\n    this.el.removeAttribute('data-success', true);\n    return this;\n  },\n\n\n  /**\n   * Clear all messages.\n   */\n  clearMessages: function clearMessages() {\n    this._hideMessage(function () {\n      this.clearError();\n      this.clearWarning();\n      this.clearSuccess();\n    }.bind(this));\n    return this;\n  },\n\n\n  /**\n   * Set the message text.\n   * @param {String} message\n   */\n  setMessage: function setMessage(message) {\n    this.messageEl.innerHTML = message;\n    return this;\n  },\n\n\n  /**\n   * Show the message\n   */\n  _showMessage: function _showMessage() {\n\n    if (!this.messageEl.parentNode) {\n      this.el.appendChild(this.messageEl);\n    }\n\n    (0, _height2.default)({\n      el: this.el,\n      toggleEl: this.messageEl\n    });\n  },\n\n\n  /**\n   * Hide the message.\n   * @param {Function} callback\n   */\n  _hideMessage: function _hideMessage(callback) {\n\n    (0, _height2.default)({\n      el: this.el,\n      toggleEl: this.messageEl,\n      toggleValue: 'none',\n      action: 'collapse',\n      onComplete: callback\n    });\n  },\n\n\n  /**\n   * Is the message currently visible?\n   * @return {Boolean}\n   */\n  _isMessageVisible: function _isMessageVisible() {\n    return this.el.getAttribute('data-error') || this.el.getAttribute('data-warning') || this.el.getAttribute('data-success');\n  }\n}; /**\n    * # Messaging Mixin\n    * Add functionality for showing messages related to a form field.\n    *\n    * @example\n    * mixin(Component, messaging);\n    *\n    * @module mixin/messaging.js\n    */\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=messaging.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Validation Mixin\n * Add functionality for validating a form field's value.\n *\n * @example\n * mixin(Component, validation);\n *\n * @module mixin/validation.js\n */\n\nexports.default = {\n\n  /**\n   * Default validate function. This can be overridden by passing a\n   * custom validate method as a parameter. This really only helps out\n   * of the box for text inputs.\n   */\n  validate: function validate() {\n\n    var validate = this.validatePattern;\n\n    // Nothing to validate.\n    if (!this.onValidate || !validate) {\n      return this;\n    }\n\n    var re = new RegExp(validate);\n\n    this.onValidate(re.test(this.getValue()), this.getValue(), this);\n\n    return this;\n  }\n};\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=validation.js.map\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9kaXN0L2NvbXBvbmVudHMvYmFzZS5qcyIsImpzL2Rpc3QvY29tcG9uZW50cy9kYXRlLWlucHV0LmpzIiwianMvZGlzdC9jb21wb25lbnRzL2RhdGUtc2VsZWN0LmpzIiwianMvZGlzdC9jb21wb25lbnRzL2RhdGUtdHlwZWFoZWFkLmpzIiwianMvZGlzdC9jb21wb25lbnRzL3NlbGVjdC1pbnB1dC5qcyIsImpzL2Rpc3QvY29tcG9uZW50cy90eXBlYWhlYWQuanMiLCJqcy9kaXN0L2hlbHBlcnMvYW5pbWF0aW9uL2hlaWdodC5qcyIsImpzL2Rpc3QvaGVscGVycy9kYXRlL2RhdGUuanMiLCJqcy9kaXN0L2hlbHBlcnMvZGF0ZS9wYXJzZS1mb3JtYXQuanMiLCJqcy9kaXN0L2hlbHBlcnMvZG9tL2FkZC1jbGFzcy5qcyIsImpzL2Rpc3QvaGVscGVycy9kb20vaGFzLWNsYXNzLmpzIiwianMvZGlzdC9oZWxwZXJzL2RvbS9tYWtlLWVsZW1lbnQuanMiLCJqcy9kaXN0L2hlbHBlcnMvZG9tL291dGVyLWhlaWdodC5qcyIsImpzL2Rpc3QvaGVscGVycy9kb20vcGFyc2UtYXR0cmlidXRlLmpzIiwianMvZGlzdC9oZWxwZXJzL2RvbS9yZW1vdmUtY2xhc3MuanMiLCJqcy9kaXN0L2hlbHBlcnMvZG9tL3RvZ2dsZS1jbGFzcy5qcyIsImpzL2Rpc3QvaGVscGVycy9kb20vdHJpZ2dlci1ldmVudC5qcyIsImpzL2Rpc3QvaGVscGVycy9tYW5pcHVsYXRpb24vYXBwZW5kLWNoaWxkcmVuLmpzIiwianMvZGlzdC9oZWxwZXJzL21hbmlwdWxhdGlvbi9jb3B5LWF0dHJpYnV0ZXMuanMiLCJqcy9kaXN0L2hlbHBlcnMvdXRpbC9lYWNoLmpzIiwianMvZGlzdC9oZWxwZXJzL3V0aWwvbWl4aW4uanMiLCJqcy9kaXN0L2hlbHBlcnMvdXRpbC9wYWQuanMiLCJqcy9kaXN0L2hlbHBlcnMvdXRpbC90cmltLmpzIiwianMvZGlzdC9taXhpbnMvbWVzc2FnaW5nLmpzIiwianMvZGlzdC9taXhpbnMvdmFsaWRhdGlvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdnpDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbFpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbmlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy83QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZWFjaCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvdXRpbC9lYWNoJyk7XG5cbnZhciBfZWFjaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lYWNoKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH0gLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogIyBCYXNlIENvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFRoZSBiYXNlIGNsYXNzIGZvciBTcGFyayBKUyBjb21wb25lbnRzLiBUaGlzIGNsYXNzIHNob3VsZCBuZXZlciBiZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGluc3RhbnRpYXRlZCBkaXJlY3RseS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAbW9kdWxlIGNvbXBvbmVudHMvYmFzZS5qc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuXG52YXIgbm9vcCA9IGZ1bmN0aW9uIG5vb3AoKSB7fTtcblxudmFyIEJhc2UgPSBmdW5jdGlvbiAoKSB7XG5cbiAgLyoqXG4gICAqIFNldCBwYXJhbWV0ZXJzIGFuZCBjYWNoZSBlbGVtZW50cy5cbiAgICovXG4gIGZ1bmN0aW9uIEJhc2UoZWwpIHtcbiAgICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCYXNlKTtcblxuICAgIGlmIChwYXJhbXMuZWxSZXF1aXJlZCAmJiAhZWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnNldFBhcmFtcyh0aGlzLmRlZmF1bHRzIHx8IHt9LCB0cnVlKTtcbiAgICB0aGlzLnNldFBhcmFtcyhwYXJhbXMpO1xuICAgICh0aGlzLl9jYWNoZUVsZW1lbnRzIHx8IG5vb3ApLmNhbGwodGhpcywgZWwsIHBhcmFtcyk7XG4gICAgKHRoaXMuX3BhcnNlUGFyYW1zIHx8IG5vb3ApLmNhbGwodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBjb21wb25lbnQgZnJvbSB0aGUgRE9NIGFuZCBwcmVwYXJlIGZvciBnYXJiYWdlIGNvbGxlY3Rpb24gYnkgZGVyZWZlcmVuY2luZyB2YWx1ZXMuXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gbGVhdmVFbGVtZW50IExlYXZlIHRoZSBlbGVtZW50IGludGFjdC5cbiAgICovXG5cblxuICBCYXNlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUobGVhdmVFbGVtZW50KSB7XG5cbiAgICBpZiAodGhpcy5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMpIHtcbiAgICAgIHRoaXMuX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgaWYgKCFsZWF2ZUVsZW1lbnQgJiYgdGhpcy5lbCAmJiB0aGlzLmVsLnBhcmVudE5vZGUpIHtcbiAgICAgIHRoaXMuZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsKTtcbiAgICB9XG5cbiAgICB0aGlzLnVuc2V0UGFyYW1zKHRoaXMuZGVmYXVsdHMpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgY29tcG9uZW50IHRvIHVzZSBhIG5ldyBlbGVtZW50IG9yIHJlcGFyc2UgZnJvbVxuICAgKiB0aGUgZXhpc3RpbmcgZWxlbWVudC5cbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbCBPcHRpb25hbFxuICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIE9wdGlvbmFsXG4gICAqL1xuXG5cbiAgQmFzZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKGVsKSB7XG4gICAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cblxuICAgIGlmICh0aGlzLl9yZW1vdmVFdmVudExpc3RlbmVycykge1xuICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICAodGhpcy5fY2FjaGVFbGVtZW50cyB8fCBub29wKS5jYWxsKHRoaXMsIGVsIHx8IHRoaXMuZWwsIHBhcmFtcyk7XG4gICAgKHRoaXMuX3BhcnNlUGFyYW1zIHx8IG5vb3ApLmNhbGwodGhpcyk7XG5cbiAgICBpZiAodGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMpIHtcbiAgICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCBhIGhhc2ggb2YgcGFyYW1ldGVycyBpZiB0aGV5J3JlIHdoaXRlbGlzdGVkIG9yIHdlJ3JlIHRvbGQgdG8gZm9yY2UgdGhlIHNldC5cbiAgICogVGhpcyBpcyB1c2VkIHRvIHNldCBpbml0aWFsIHZhbHVlcyBhcyB3ZWxsIGFzIHNldCBwYXNzZWQgcGFyYW1ldGVycy5cbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtc1xuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGZvcmNlIEZvcmNlIHNldHRpbmcgZXZlbiBpZiB0aGUgcGFyYW0gaXMgbm90IHdoaXRlbGlzdGVkLlxuICAgKi9cblxuXG4gIEJhc2UucHJvdG90eXBlLnNldFBhcmFtcyA9IGZ1bmN0aW9uIHNldFBhcmFtcyhwYXJhbXMsIGZvcmNlKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICgwLCBfZWFjaDIuZGVmYXVsdCkocGFyYW1zLCBmdW5jdGlvbiAoaywgdikge1xuICAgICAgaWYgKF90aGlzLl93aGl0ZWxpc3RlZFBhcmFtcy5pbmRleE9mKGspICE9PSAtMSB8fCBmb3JjZSkge1xuICAgICAgICBfdGhpc1trXSA9IHY7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogVW5zZXQgYWxsIHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBrZXlzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzY29wZSBUaGUgb2JqZWN0IHRvIHVuc2V0IHRoZSBwYXJhbXMgZnJvbS4gRGVmYXVsdHMgdG8gYHRoaXNgLlxuICAgKi9cblxuXG4gIEJhc2UucHJvdG90eXBlLnVuc2V0UGFyYW1zID0gZnVuY3Rpb24gdW5zZXRQYXJhbXMoa2V5cywgc2NvcGUpIHtcblxuICAgIGtleXMgPSBrZXlzIGluc3RhbmNlb2YgQXJyYXkgPyBrZXlzIDogT2JqZWN0LmtleXMoa2V5cyk7XG4gICAgc2NvcGUgPSBzY29wZSB8fCB0aGlzO1xuICAgICgwLCBfZWFjaDIuZGVmYXVsdCkoa2V5cywgZnVuY3Rpb24gKGspIHtcbiAgICAgIGRlbGV0ZSBzY29wZVtrXTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHJldHVybiBCYXNlO1xufSgpO1xuXG4vKipcbiAqIFdoaXRlbGlzdGVkIHBhcmFtZXRlcnMgd2hpY2ggY2FuIGJlIHNldCBvbiBjb25zdHJ1Y3Rpb24uXG4gKiBAdHlwZSB7QXJyYXl9XG4gKi9cblxuXG5CYXNlLnByb3RvdHlwZS5fd2hpdGVsaXN0ZWRQYXJhbXMgPSBbXTtcblxuLyoqXG4gKiBEZWZhdWx0IHZhbHVlcyBmb3IgaW50ZXJuYWwgcHJvcGVydGllcyB3ZSB3aWxsIGJlIHNldHRpbmcuXG4gKiBUaGVzZSBhcmUgc2V0IG9uIGVhY2ggY29uc3RydWN0aW9uIHNvIHdlIGRvbid0IGxlYWsgcHJvcGVydGllc1xuICogaW50byB0aGUgcHJvdG90eXBlIGNoYWluLlxuICogQHR5cGUge09iamVjdH1cbiAqL1xuQmFzZS5wcm90b3R5cGUuZGVmYXVsdHMgPSB7fTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gQmFzZTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmFzZS5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9iYXNlID0gcmVxdWlyZSgnLi9iYXNlJyk7XG5cbnZhciBfYmFzZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9iYXNlKTtcblxudmFyIF9kYXRlVHlwZWFoZWFkID0gcmVxdWlyZSgnLi9kYXRlLXR5cGVhaGVhZCcpO1xuXG52YXIgX2RhdGVUeXBlYWhlYWQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGF0ZVR5cGVhaGVhZCk7XG5cbnZhciBfZGF0ZVNlbGVjdCA9IHJlcXVpcmUoJy4vZGF0ZS1zZWxlY3QnKTtcblxudmFyIF9kYXRlU2VsZWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RhdGVTZWxlY3QpO1xuXG52YXIgX3BhcnNlRm9ybWF0ID0gcmVxdWlyZSgnLi4vaGVscGVycy9kYXRlL3BhcnNlLWZvcm1hdCcpO1xuXG52YXIgX3BhcnNlRm9ybWF0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BhcnNlRm9ybWF0KTtcblxudmFyIF9wYWQgPSByZXF1aXJlKCcuLi9oZWxwZXJzL3V0aWwvcGFkJyk7XG5cbnZhciBfcGFkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BhZCk7XG5cbnZhciBfdG9nZ2xlQ2xhc3MgPSByZXF1aXJlKCcuLi9oZWxwZXJzL2RvbS90b2dnbGUtY2xhc3MnKTtcblxudmFyIF90b2dnbGVDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90b2dnbGVDbGFzcyk7XG5cbnZhciBfcmVtb3ZlQ2xhc3MgPSByZXF1aXJlKCcuLi9oZWxwZXJzL2RvbS9yZW1vdmUtY2xhc3MnKTtcblxudmFyIF9yZW1vdmVDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZW1vdmVDbGFzcyk7XG5cbnZhciBfYWRkQ2xhc3MgPSByZXF1aXJlKCcuLi9oZWxwZXJzL2RvbS9hZGQtY2xhc3MnKTtcblxudmFyIF9hZGRDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hZGRDbGFzcyk7XG5cbnZhciBfaGFzQ2xhc3MgPSByZXF1aXJlKCcuLi9oZWxwZXJzL2RvbS9oYXMtY2xhc3MnKTtcblxudmFyIF9oYXNDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oYXNDbGFzcyk7XG5cbnZhciBfYXBwZW5kQ2hpbGRyZW4gPSByZXF1aXJlKCcuLi9oZWxwZXJzL21hbmlwdWxhdGlvbi9hcHBlbmQtY2hpbGRyZW4nKTtcblxudmFyIF9hcHBlbmRDaGlsZHJlbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hcHBlbmRDaGlsZHJlbik7XG5cbnZhciBfdHJpZ2dlckV2ZW50ID0gcmVxdWlyZSgnLi4vaGVscGVycy9kb20vdHJpZ2dlci1ldmVudCcpO1xuXG52YXIgX3RyaWdnZXJFdmVudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90cmlnZ2VyRXZlbnQpO1xuXG52YXIgX2NvcHlBdHRyaWJ1dGVzID0gcmVxdWlyZSgnLi4vaGVscGVycy9tYW5pcHVsYXRpb24vY29weS1hdHRyaWJ1dGVzJyk7XG5cbnZhciBfY29weUF0dHJpYnV0ZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29weUF0dHJpYnV0ZXMpO1xuXG52YXIgX2RhdGUgPSByZXF1aXJlKCcuLi9oZWxwZXJzL2RhdGUvZGF0ZScpO1xuXG52YXIgX2RhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGF0ZSk7XG5cbnZhciBfZWFjaCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvdXRpbC9lYWNoJyk7XG5cbnZhciBfZWFjaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lYWNoKTtcblxudmFyIF9wYXJzZUF0dHJpYnV0ZSA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvZG9tL3BhcnNlLWF0dHJpYnV0ZScpO1xuXG52YXIgX21peGluID0gcmVxdWlyZSgnLi4vaGVscGVycy91dGlsL21peGluJyk7XG5cbnZhciBfbWl4aW4yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWl4aW4pO1xuXG52YXIgX21lc3NhZ2luZyA9IHJlcXVpcmUoJy4uL21peGlucy9tZXNzYWdpbmcnKTtcblxudmFyIF9tZXNzYWdpbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWVzc2FnaW5nKTtcblxudmFyIF9tYWtlRWxlbWVudCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvZG9tL21ha2UtZWxlbWVudCcpO1xuXG52YXIgX21ha2VFbGVtZW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21ha2VFbGVtZW50KTtcblxudmFyIF92YWxpZGF0aW9uID0gcmVxdWlyZSgnLi4vbWl4aW5zL3ZhbGlkYXRpb24nKTtcblxudmFyIF92YWxpZGF0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRpb24pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9IC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogIyBEYXRlSW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEEgZGF0ZSBpbnB1dCBjb250YWluZXIuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIG5ldyBEYXRlSW5wdXQoZWwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgLy8gT3B0aW9uYWwuIENhbGxiYWNrIGZvciB3aGVuIHRoZSBpbnB1dCB2YWx1ZSBjaGFuZ2VzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogICBvbkNoYW5nZSh2YWx1ZSwgaW5wdXRJbnN0YW5jZSkge31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBtb2R1bGUgY29tcG9uZW50cy9kYXRlLWlucHV0LmpzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cblxuXG52YXIgZG9tRGF0ZUZvcm1hdCA9ICdZWVlZLU1NLUREJztcbnZhciBwYXJzZWREb21Gb3JtYXQgPSAoMCwgX3BhcnNlRm9ybWF0Mi5kZWZhdWx0KShkb21EYXRlRm9ybWF0KTtcbnZhciBub29wID0gZnVuY3Rpb24gbm9vcCgpIHt9O1xuXG52YXIgRGF0ZUlucHV0ID0gZnVuY3Rpb24gKF9CYXNlKSB7XG4gIF9pbmhlcml0cyhEYXRlSW5wdXQsIF9CYXNlKTtcblxuICAvKipcbiAgICogRGF0ZUlucHV0IGNvbnN0cnVjdG9yLlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXNcbiAgICovXG4gIGZ1bmN0aW9uIERhdGVJbnB1dChlbCkge1xuICAgIHZhciBfdGhpcztcblxuICAgIHZhciBwYXJhbXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERhdGVJbnB1dCk7XG5cbiAgICBwYXJhbXMuZWxSZXF1aXJlZCA9IHRydWU7XG5cbiAgICBpZiAoIShfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9CYXNlLmNhbGwodGhpcywgZWwsIHBhcmFtcykpLCBfdGhpcykpIHtcbiAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcyk7XG4gICAgfVxuXG4gICAgX3RoaXMuX2JpbmRFdmVudExpc3RlbmVyQ2FsbGJhY2tzKCk7XG4gICAgX3RoaXMuX2NvbnZlcnRMYWJlbCgpO1xuICAgIF90aGlzLl9pbml0aWFsaXplSW5wdXRzKCk7XG4gICAgX3RoaXMuX3VwZGF0ZUNsYXNzKCk7XG4gICAgX3RoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IHRoZSBpbnB1dCBieSBhZGRpbmcgdGhlIGFjdGl2ZSBzdGF0ZSBhbmQgc2V0dGluZyBjaGFyYWN0ZXIgY291bnRzIChpZiBuZWNlc3NhcnkpLlxuICAgKi9cblxuXG4gIERhdGVJbnB1dC5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uIHNob3coKSB7XG5cbiAgICBpZiAoIXRoaXMuaXNBY3RpdmUpIHtcbiAgICAgIHRoaXMuX3J1blR5cGVhaGVhZHMoKTtcbiAgICAgIHRoaXMuaXNBY3RpdmUgPSB0cnVlO1xuICAgICAgdGhpcy5fdXBkYXRlQ2xhc3MoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogSGlkZSB0aGUgaW5wdXQgYnkgcmVtb3ZpbmcgdGhlIGFjdGl2ZSBzdGF0ZS5cbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLmhpZGUgPSBmdW5jdGlvbiBoaWRlKCkge1xuICAgIGlmICghdGhpcy5pc0FjdGl2ZSkgcmV0dXJuIHRoaXM7XG4gICAgdGhpcy5pc0FjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMuX3VwZGF0ZUNsYXNzKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEF1Z21lbnQgZGVmYXVsdCByZW1vdmUgY2FsbCB3LyBoZWxwZXIgY2xlYW51cC5cbiAgICogQHBhcmFtIHtCb29sZWFufSBsZWF2ZUVsZW1lbnQgTGVhdmUgdGhlIGVsZW1lbnQgaW50YWN0LlxuICAgKi9cblxuXG4gIERhdGVJbnB1dC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKGxlYXZlRWxlbWVudCkge1xuXG4gICAgdGhpcy5fcmVtb3ZlVHlwZWFoZWFkcyhsZWF2ZUVsZW1lbnQpO1xuICAgIHRoaXMuX3JlbW92ZVNlbGVjdHMobGVhdmVFbGVtZW50KTtcbiAgICB0aGlzLl9yZW1vdmVJbnB1dFBpZWNlcygpO1xuXG4gICAgX0Jhc2UucHJvdG90eXBlLnJlbW92ZS5jYWxsKHRoaXMsIGxlYXZlRWxlbWVudCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogR2l2ZW4gYW4gb2JqZWN0IHdpdGggZGF5LCBtb250aCBhbmQgeWVhciwgc2V0IHRoZSB2YWx1ZSBvZiB0aGUgaW5wdXQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZXNcbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLnNldFZhbHVlID0gZnVuY3Rpb24gc2V0VmFsdWUodmFsdWVzKSB7XG5cbiAgICB2YWx1ZXMgPSB2YWx1ZXMgfHwge1xuICAgICAgZGF5OiAnJyxcbiAgICAgIG1vbnRoOiAnJyxcbiAgICAgIHllYXI6ICcnXG4gICAgfTtcbiAgICB2YXIgaSA9IHZvaWQgMDtcbiAgICB2YXIgaGFkVmFsdWUgPSB2b2lkIDA7XG5cbiAgICBmb3IgKGkgaW4gdGhpcy50eXBlYWhlYWRzKSB7XG4gICAgICBpZiAodmFsdWVzW2ldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy50eXBlYWhlYWRzW2ldLnNldFZhbHVlKHZhbHVlc1tpXSk7XG4gICAgICAgIGhhZFZhbHVlID0gaGFkVmFsdWUgfHwgKHZhbHVlc1tpXSA/IHRydWUgOiBmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChpIGluIHRoaXMuc2VsZWN0cykge1xuICAgICAgaWYgKHZhbHVlc1tpXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0c1tpXS5zZXRWYWx1ZSh2YWx1ZXNbaV0pO1xuICAgICAgICBoYWRWYWx1ZSA9IGhhZFZhbHVlIHx8ICh2YWx1ZXNbaV0gPyB0cnVlIDogZmFsc2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghdGhpcy5pc0FjdGl2ZSAmJiBoYWRWYWx1ZSkge1xuICAgICAgdGhpcy5pc0FjdGl2ZSA9IHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5fcGFkVHlwZWFoZWFkcygpO1xuICAgIHRoaXMuX3VwZGF0ZUNsYXNzKCk7XG4gICAgdGhpcy51cGRhdGVJbnB1dCgpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgb2YgdGhlIGlucHV0LlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuXG5cbiAgRGF0ZUlucHV0LnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uIGdldFZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLmlucHV0RWwudmFsdWU7XG4gIH07XG5cbiAgLyoqXG4gICAqIENsZWFyIHRoZSB2YWx1ZXMuXG4gICAqL1xuXG5cbiAgRGF0ZUlucHV0LnByb3RvdHlwZS5jbGVhclZhbHVlID0gZnVuY3Rpb24gY2xlYXJWYWx1ZSgpIHtcblxuICAgICgwLCBfZWFjaDIuZGVmYXVsdCkodGhpcy5pc1R5cGVhaGVhZCA/IHRoaXMudHlwZWFoZWFkcyA6IHRoaXMuc2VsZWN0cywgZnVuY3Rpb24gKGssIHYpIHtcbiAgICAgIHYuY2xlYXJWYWx1ZSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5pbnB1dEVsLnZhbHVlID0gJyc7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogU2V0L3Jlc2V0IGVycm9yIHN0YXRlXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gdHJ1ZTogc2V0IGVycm9yIHN0YXRlLCBmYWxzZTogcmVzZXRcbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLnNldEVycm9yU3RhdGUgPSBmdW5jdGlvbiBzZXRFcnJvclN0YXRlKG9wdCkge1xuICAgIGlmIChvcHQpIHtcbiAgICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKCdkYXRhLWVycm9yJywgJycpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1lcnJvcicpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRW5hYmxlIHRoZSBpbnB1dHNcbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uIGVuYWJsZSgpIHtcblxuICAgICgwLCBfZWFjaDIuZGVmYXVsdCkodGhpcy5pc1R5cGVhaGVhZCA/IHRoaXMudHlwZWFoZWFkcyA6IHRoaXMuc2VsZWN0cywgZnVuY3Rpb24gKGssIHYpIHtcbiAgICAgIHYuZW5hYmxlKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmlucHV0RWwucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuXG4gICAgKDAsIF90b2dnbGVDbGFzczIuZGVmYXVsdCkodGhpcy5lbCwgJ2Rpc2FibGVkJywgZmFsc2UpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIENsZWFyIHRoZSB2YWx1ZXMuXG4gICAqL1xuXG5cbiAgRGF0ZUlucHV0LnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24gZGlzYWJsZSgpIHtcblxuICAgICgwLCBfZWFjaDIuZGVmYXVsdCkodGhpcy5pc1R5cGVhaGVhZCA/IHRoaXMudHlwZWFoZWFkcyA6IHRoaXMuc2VsZWN0cywgZnVuY3Rpb24gKGssIHYpIHtcbiAgICAgIHYuZGlzYWJsZSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5pbnB1dEVsLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnJyk7XG5cbiAgICAoMCwgX3RvZ2dsZUNsYXNzMi5kZWZhdWx0KSh0aGlzLmVsLCAnZGlzYWJsZWQnLCB0cnVlKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGlucHV0IHZhbHVlcyB0byBtYXRjaCB0aGUgdHlwZWFoZWFkcy5cbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLnVwZGF0ZUlucHV0ID0gZnVuY3Rpb24gdXBkYXRlSW5wdXQoKSB7XG5cbiAgICB2YXIgaW5wdXRzID0gdm9pZCAwO1xuXG4gICAgaWYgKHRoaXMuaXNUeXBlYWhlYWQgJiYgdGhpcy50eXBlYWhlYWRzKSB7XG4gICAgICBpbnB1dHMgPSB0aGlzLnR5cGVhaGVhZHM7XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzU2VsZWN0KSB7XG4gICAgICBpbnB1dHMgPSB0aGlzLnNlbGVjdHM7XG4gICAgfVxuXG4gICAgaWYgKGlucHV0cykge1xuXG4gICAgICB2YXIgZGF5ID0gaW5wdXRzLmRheSAmJiBpbnB1dHMuZGF5LmdldFZhbHVlKHRydWUpIHx8IDA7XG4gICAgICB2YXIgbW9udGggPSBpbnB1dHMubW9udGggJiYgaW5wdXRzLm1vbnRoLmdldFZhbHVlKHRydWUpIHx8IDA7XG4gICAgICB2YXIgeWVhciA9IGlucHV0cy55ZWFyICYmIGlucHV0cy55ZWFyLmdldFZhbHVlKHRydWUpIHx8IDA7XG5cbiAgICAgIHZhciB2YWwgPSB0aGlzLmlucHV0RWwudmFsdWU7XG5cbiAgICAgIHRoaXMuaW5wdXRFbC52YWx1ZSA9IFtkYXksIG1vbnRoLCB5ZWFyXS5pbmRleE9mKDApID09PSAtMSA/ICgwLCBfcGFkMi5kZWZhdWx0KSh5ZWFyLCA0KSArICctJyArICgwLCBfcGFkMi5kZWZhdWx0KShtb250aCwgMikgKyAnLScgKyAoMCwgX3BhZDIuZGVmYXVsdCkoZGF5LCAyKSA6ICcnO1xuXG4gICAgICBpZiAodmFsICE9PSB0aGlzLmlucHV0RWwudmFsdWUpIHtcbiAgICAgICAgdGhpcy5fcGF1c2VJbnB1dENoYW5nZSA9IHRydWU7XG4gICAgICAgICgwLCBfdHJpZ2dlckV2ZW50Mi5kZWZhdWx0KSh0aGlzLmlucHV0RWwsICdjaGFuZ2UnKTtcbiAgICAgICAgKHRoaXMub25DaGFuZ2UgfHwgbm9vcCkodGhpcy5pbnB1dEVsLnZhbHVlLCB0aGlzKTtcbiAgICAgICAgdGhpcy5fcGF1c2VJbnB1dENoYW5nZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCB0eXBpbmcgdmFsdWVcbiAgICpcbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLmdldFR5cGluZ1ZhbHVlID0gZnVuY3Rpb24gZ2V0VHlwaW5nVmFsdWUoKSB7XG5cbiAgICB2YXIgaW5wdXRzID0gdm9pZCAwO1xuICAgIHZhciByZXN1bHQgPSAnJztcblxuICAgIGlmICh0aGlzLmlzVHlwZWFoZWFkICYmIHRoaXMudHlwZWFoZWFkcykge1xuICAgICAgaW5wdXRzID0gdGhpcy50eXBlYWhlYWRzO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pc1NlbGVjdCkge1xuICAgICAgaW5wdXRzID0gdGhpcy5zZWxlY3RzO1xuICAgIH1cblxuICAgIGlmIChpbnB1dHMpIHtcblxuICAgICAgdmFyIGRheSA9IGlucHV0cy5kYXkgJiYgaW5wdXRzLmRheS5nZXRWYWx1ZSh0cnVlKTtcbiAgICAgIHZhciBtb250aCA9IGlucHV0cy5tb250aCAmJiBpbnB1dHMubW9udGguZ2V0VmFsdWUodHJ1ZSk7XG4gICAgICB2YXIgeWVhciA9IGlucHV0cy55ZWFyICYmIGlucHV0cy55ZWFyLmdldFZhbHVlKHRydWUpO1xuXG4gICAgICByZXN1bHQgPSBtb250aC50b1N0cmluZygpICsgZGF5LnRvU3RyaW5nKCkgKyB5ZWFyLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvKipcbiAgICogTW92ZSB0aGUgZm9jdXMgdG8gYSB0eXBlYWhlYWQgZWxlbWVudC5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGlcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNoYXJhY3RlciBPcHRpb25hbCBBIGNoYXJhY3RlciB0byBhZGRcbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLmZvY3VzID0gZnVuY3Rpb24gZm9jdXMoaSwgY2hhcmFjdGVyKSB7XG5cbiAgICBpZiAoIXRoaXMuaXNBY3RpdmUgfHwgIXRoaXMuaW5Gb2N1cykge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgdmFyIGluZGV4ID0gdGhpcy50eXBlYWhlYWRFbHMuaW5kZXhPZih0aGlzLmluRm9jdXMudHlwZWFoZWFkLmVsKTtcbiAgICB2YXIgc2liID0gdGhpcy50eXBlYWhlYWRFbHNbaW5kZXggKyBpXTtcbiAgICB2YXIgdHlwZWFoZWFkID0gdm9pZCAwO1xuXG4gICAgLy8gSWYgd2Ugd2VyZSBwYXNzZWQgYSBjaGFyYWN0ZXIgdG8gcHJlcGVuZCwgZmluZCB0aGUgdHlwZWFoZWFkIGZvciB0aGlzIGVsZW1lbnRcbiAgICBpZiAoY2hhcmFjdGVyKSB7XG4gICAgICB0eXBlYWhlYWQgPSB0aGlzLl9nZXRUeXBlYWhlYWRCeUVsZW1lbnQoc2liKTtcbiAgICAgIGlmICh0eXBlYWhlYWQpIHtcbiAgICAgICAgdHlwZWFoZWFkLnR5cGVhaGVhZC5hZGRDaGFyYWN0ZXJBdEluZGV4KGNoYXJhY3RlciwgMCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFzaWIpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgc2liSW5wdXQgPSBzaWIucXVlcnlTZWxlY3RvcignaW5wdXQnKTtcblxuICAgIGlmIChzaWJJbnB1dCkge1xuICAgICAgc2liSW5wdXQuZm9jdXMoKTtcblxuICAgICAgLy8gSWYgd2UgaGF2ZSBhIHR5cGVhaGVhZCAoYmVjYXVzZSB3ZSBuZWVkZWQgdG8gcHJlcGVuZCBhIGNoYXJhY3RlciksIG1vdmUgdGhlIGNhcmV0LlxuICAgICAgaWYgKHR5cGVhaGVhZCkge1xuICAgICAgICB0eXBlYWhlYWQudHlwZWFoZWFkLm1vdmVDYXJldCgxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogTW92ZSB0aGUgZm9jdXMgdG8gdGhlIG5leHQgZWxlbWVudC5cbiAgICogQHBhcmFtIHtTdHJpbmd9IGNoYXJhY3RlciBPcHRpb25hbCBBIGNoYXJhY3RlciB0byBhZGRcbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLmZvY3VzTmV4dCA9IGZ1bmN0aW9uIGZvY3VzTmV4dChjaGFyYWN0ZXIpIHtcblxuICAgIGlmICh0aGlzLmZvY3VzKDEsIGNoYXJhY3RlcikpIHtcbiAgICAgIGlmICh0aGlzLmluRm9jdXMgJiYgIWNoYXJhY3RlcikgdGhpcy5pbkZvY3VzLnR5cGVhaGVhZC5tb3ZlQ2FyZXRUb1N0YXJ0KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1vdmUgdGhlIGZvY3VzIHRvIHRoZSBuZXh0IGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjaGFyYWN0ZXIgT3B0aW9uYWwgQSBjaGFyYWN0ZXIgdG8gYWRkXG4gICAqL1xuXG5cbiAgRGF0ZUlucHV0LnByb3RvdHlwZS5mb2N1c1ByZXZpb3VzID0gZnVuY3Rpb24gZm9jdXNQcmV2aW91cyhjaGFyYWN0ZXIpIHtcblxuICAgIGlmICh0aGlzLmZvY3VzKC0xLCBjaGFyYWN0ZXIpKSB7XG4gICAgICBpZiAodGhpcy5pbkZvY3VzKSB0aGlzLmluRm9jdXMudHlwZWFoZWFkLm1vdmVDYXJldFRvRW5kKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIERvIHdlIGhhdmUgYW55IHZhbHVlcz9cbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLmhhc1BhcnRpYWxWYWx1ZSA9IGZ1bmN0aW9uIGhhc1BhcnRpYWxWYWx1ZSgpIHtcblxuICAgIHZhciBpID0gdm9pZCAwO1xuXG4gICAgZm9yIChpIGluIHRoaXMudHlwZWFoZWFkcykge1xuICAgICAgaWYgKHRoaXMudHlwZWFoZWFkc1tpXS5nZXRWYWx1ZSgpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoaSBpbiB0aGlzLnNlbGVjdHMpIHtcbiAgICAgIGlmICh0aGlzLnNlbGVjdHNbaV0uZ2V0VmFsdWUoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlc2l6ZSB0aGUgZWxlbWVudHMsIHRvIGFjY291bnQgZm9yIGFueSBjaGFuZ2VkIGRpc3BsYXkgcHJvcGVydHkuXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWwgT3B0aW9uYWxcbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZShlbCkge1xuXG4gICAgaWYgKGVsKSB7XG5cbiAgICAgIHRoaXMuX3JlbW92ZVR5cGVhaGVhZHMoKTtcbiAgICAgIHRoaXMuX3JlbW92ZVNlbGVjdHMoKTtcbiAgICAgIHRoaXMuX3JlbW92ZUlucHV0UGllY2VzKCk7XG5cbiAgICAgIHRoaXMuX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICAgIHRoaXMuX2NhY2hlRWxlbWVudHMoZWwpO1xuICAgICAgdGhpcy5fY29udmVydExhYmVsKCk7XG4gICAgICB0aGlzLl9pbml0aWFsaXplSW5wdXRzKCk7XG4gICAgICB0aGlzLl91cGRhdGVDbGFzcygpO1xuXG4gICAgICB0aGlzLl9hZGRFdmVudExpc3RlbmVycygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9ydW5UeXBlYWhlYWRzKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0b3JlIGEgcmVmZXJlbmNlIHRvIHRoZSBuZWVkZWQgZWxlbWVudHMuXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLl9jYWNoZUVsZW1lbnRzID0gZnVuY3Rpb24gX2NhY2hlRWxlbWVudHMoZWwpIHtcblxuICAgIHRoaXMuZWwgPSBlbDtcblxuICAgIHRoaXMuaW5wdXRFbCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignW3R5cGU9XCJkYXRlXCJdJyk7XG5cbiAgICBpZiAoIXRoaXMuaW5wdXRFbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyA8aW5wdXQgdHlwZT1cImRhdGVcIj4gZWxlbWVudCBwcmVzZW50IGluIGRhdGUgaW5wdXQgY29udGFpbmVyIScsIHRoaXMuZWwpO1xuICAgIH1cblxuICAgIHRoaXMudG9nZ2xlRWwgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5zcGFyay1kYXRlX190b2dnbGUnKTtcblxuICAgIHRoaXMubWVzc2FnZUVsID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcuc3BhcmstaW5wdXRfX21lc3NhZ2UnKSB8fCAoMCwgX21ha2VFbGVtZW50Mi5kZWZhdWx0KSgnPHNwYW4gY2xhc3M9XCJzcGFyay1pbnB1dF9fbWVzc2FnZVwiPjwvc3Bhbj4nKTtcbiAgfTtcblxuICAvKipcbiAgICogUGFyc2UgcGFyYW1ldGVycyBmcm9tIHRoZSBlbGVtZW50cy5cbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLl9wYXJzZVBhcmFtcyA9IGZ1bmN0aW9uIF9wYXJzZVBhcmFtcygpIHtcblxuICAgIHRoaXMuaXNBY3RpdmUgPSB0aGlzLmlzQWN0aXZlICE9PSBudWxsID8gdGhpcy5pc0FjdGl2ZSA6IHRoaXMuaW5wdXRFbC52YWx1ZSA/IHRydWUgOiBmYWxzZTtcbiAgICB0aGlzLmlzU2VsZWN0ID0gdGhpcy5pc1NlbGVjdCAhPT0gbnVsbCA/IHRoaXMuaXNTZWxlY3QgOiAoMCwgX2hhc0NsYXNzMi5kZWZhdWx0KSh0aGlzLmVsLCAnc3BhcmstZGF0ZS0tc2VsZWN0JykgPyB0cnVlIDogZmFsc2U7XG4gICAgdGhpcy5pc1R5cGVhaGVhZCA9IHRoaXMuaXNUeXBlYWhlYWQgIT09IG51bGwgPyB0aGlzLmlzVHlwZWFoZWFkIDogIXRoaXMuaXNTZWxlY3QgPyB0cnVlIDogZmFsc2U7XG4gICAgdGhpcy5mb3JtYXQgPSB0aGlzLmZvcm1hdCAhPT0gbnVsbCA/IHRoaXMuZm9ybWF0IDogKDAsIF9wYXJzZUF0dHJpYnV0ZS5zdHJpbmcpKHRoaXMuaW5wdXRFbCwgJ2RhdGEtZm9ybWF0JywgJ01NLURELVlZWVknKTtcbiAgICB0aGlzLnRleHRGb3JtYXQgPSB0aGlzLnRleHRGb3JtYXQgIT09IG51bGwgPyB0aGlzLnRleHRGb3JtYXQgOiAoMCwgX3BhcnNlQXR0cmlidXRlLnN0cmluZykodGhpcy5pbnB1dEVsLCAnZGF0YS10ZXh0LWZvcm1hdCcsICdNTSBERCBZWVlZJyk7XG4gICAgdGhpcy5zaG93RGF0ZUFzVGV4dCA9IHRoaXMuc2hvd0RhdGVBc1RleHQgIT09IG51bGwgPyB0aGlzLnNob3dEYXRlQXNUZXh0IDogKDAsIF9wYXJzZUF0dHJpYnV0ZS5ib29sZWFuKSh0aGlzLmlucHV0RWwsICdkYXRhLXNob3ctZGF0ZS1hcy10ZXh0JywgZmFsc2UpO1xuXG4gICAgdGhpcy5wYXJzZWRGb3JtYXQgPSAoMCwgX3BhcnNlRm9ybWF0Mi5kZWZhdWx0KSh0aGlzLmZvcm1hdCk7XG4gICAgdGhpcy5wYXJzZWRUZXh0Rm9ybWF0ID0gKDAsIF9wYXJzZUZvcm1hdDIuZGVmYXVsdCkodGhpcy50ZXh0Rm9ybWF0KTtcbiAgICB0aGlzLm1pbiA9IHRoaXMubWluICE9PSBudWxsID8gdGhpcy5taW4gOiB0aGlzLmlucHV0RWwuZ2V0QXR0cmlidXRlKCdtaW4nKTtcbiAgICB0aGlzLm1heCA9IHRoaXMubWF4ICE9PSBudWxsID8gdGhpcy5tYXggOiB0aGlzLmlucHV0RWwuZ2V0QXR0cmlidXRlKCdtYXgnKTtcbiAgICB0aGlzLm1pbiA9IHRoaXMubWluICYmIHBhcnNlZERvbUZvcm1hdC5nZXRWYWx1ZXModGhpcy5taW4pO1xuICAgIHRoaXMubWF4ID0gdGhpcy5tYXggJiYgcGFyc2VkRG9tRm9ybWF0LmdldFZhbHVlcyh0aGlzLm1heCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHVwIHRoZSBwcm9wZXIgaW5wdXRzLiBUaGlzIGNvdWxkIG1lYW4gY3JlYXRpbmcgYSB0eXBlYWhlYWQsIG9yIGNyZWF0aW5nIHNlbGVjdHMuXG4gICAqL1xuXG5cbiAgRGF0ZUlucHV0LnByb3RvdHlwZS5faW5pdGlhbGl6ZUlucHV0cyA9IGZ1bmN0aW9uIF9pbml0aWFsaXplSW5wdXRzKCkge1xuXG4gICAgaWYgKHRoaXMuaXNUeXBlYWhlYWQpIHtcbiAgICAgIHRoaXMuX2luaXRpYWxpemVJbnB1dFBpZWNlcygpO1xuICAgICAgdGhpcy5fcnVuVHlwZWFoZWFkcygpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pc1NlbGVjdCkge1xuICAgICAgKDAsIF9yZW1vdmVDbGFzczIuZGVmYXVsdCkodGhpcy5lbCwgJ3NwYXJrLWlucHV0Jyk7XG4gICAgICB0aGlzLl9pbml0aWFsaXplSW5wdXRQaWVjZXMoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlcGxhY2UgdGhlIGRhdGUgaW5wdXQgd2l0aCBhIGdyb3VwIG9mIHR5cGVhaGVhZHMgb3Igc2VsZWN0IGlucHV0cy5cbiAgICogS2VlcCB0aGUgZGF0ZSBpbnB1dCBhcm91bmQgYW5kIHN0b3JlIHRoZSB0eXBlYWhlYWQgZGF0YSBpbiB0aGVyZSBpbiBhbiBJU08gZGF0ZSBmb3JtYXQuXG4gICAqL1xuXG5cbiAgRGF0ZUlucHV0LnByb3RvdHlwZS5faW5pdGlhbGl6ZUlucHV0UGllY2VzID0gZnVuY3Rpb24gX2luaXRpYWxpemVJbnB1dFBpZWNlcygpIHtcblxuICAgIC8vIEhpZGUgdGhlIG9yaWdpbmFsIGVsZW1lbnQuIFRoaXMgd2lsbCBiZSB1cGRhdGVkIGFzIHRoZSB0eXBlYWhlYWQgdmFsdWVzIGNoYW5nZVxuICAgIHRoaXMuaW5wdXRFbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgdmFyIGVscyA9IFtdO1xuICAgIHZhciBsYWJlbCA9IHZvaWQgMDtcblxuICAgIC8vIENyZWF0ZSBhIG5ldyB0eXBlYWhlYWQgZm9yIGVhY2ggcGFydCBvZiB0aGUgcGFyc2VkIGZvcm1hdC4gQWxzbyBhZGQgcGxhY2Vob2xkZXIgZWxlbWVudHMuXG4gICAgdGhpcy5wYXJzZWRGb3JtYXQucGFydHMuZm9yRWFjaChmdW5jdGlvbiAocGFydCkge1xuICAgICAgLy8gU29tZXRoaW5nIHdlaXJkIHdpdGggTm9kZSB0aGF0IG1ha2VzIHVzIGhhdmUgdG8gc3BlY2lmeSB3aGF0IGB0aGlzYCBpcyBoZXJlLlxuICAgICAgKHRoaXMuaXNUeXBlYWhlYWQgPyB0aGlzLl9pbml0aWFsaXplVHlwZWFoZWFkUGllY2UgOiB0aGlzLl9pbml0aWFsaXplU2VsZWN0UGllY2UpLmNhbGwodGhpcywgZWxzLCBwYXJ0KTtcbiAgICB9LmJpbmQodGhpcykpO1xuXG4gICAgLy8gQ3JlYXRlIGEgaG9sZGVyIGZvciBhbGwgdGhlIHBpZWNlc1xuICAgIHRoaXMucGllY2VzRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgdGhpcy5waWVjZXNFbC5jbGFzc05hbWUgPSB0aGlzLmlzVHlwZWFoZWFkID8gJ3NwYXJrLWlucHV0X19maWVsZHMnIDogJ3NwYXJrLXNlbGVjdC1ncm91cCc7XG5cbiAgICAvLyBBZGQgYWxsIHRoZSBuZWNlc3NhcnkgZWxlbWVudHNcbiAgICAoMCwgX2FwcGVuZENoaWxkcmVuMi5kZWZhdWx0KSh0aGlzLnBpZWNlc0VsLCBlbHMpO1xuXG4gICAgLy8gSWYgdGhpcyBpcyBhIHNlbGVjdCBncm91cCwgbW92ZSB0aGUgbGFiZWwgZWxlbWVudC5cbiAgICBpZiAodGhpcy5pc1NlbGVjdCAmJiAobGFiZWwgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5zcGFyay1sYWJlbCcpKSkge1xuICAgICAgdGhpcy5waWVjZXNFbC5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHRoZSBwaWVjZXMgaG9sZGVyXG4gICAgdGhpcy5lbC5pbnNlcnRCZWZvcmUodGhpcy5waWVjZXNFbCwgdGhpcy5pbnB1dEVsKTtcblxuICAgIC8vIFNldCB0aGUgdmFsdWVcbiAgICBpZiAodGhpcy5pbnB1dEVsLnZhbHVlKSB7XG4gICAgICB0aGlzLnNldFZhbHVlKHBhcnNlZERvbUZvcm1hdC5nZXRWYWx1ZXModGhpcy5pbnB1dEVsLnZhbHVlKSk7XG4gICAgICB0aGlzLmlzQWN0aXZlID0gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgaW5wdXQgcGllY2VzLlxuICAgKi9cblxuXG4gIERhdGVJbnB1dC5wcm90b3R5cGUuX3JlbW92ZUlucHV0UGllY2VzID0gZnVuY3Rpb24gX3JlbW92ZUlucHV0UGllY2VzKCkge1xuXG4gICAgdGhpcy5pbnB1dEVsLnN0eWxlLmRpc3BsYXkgPSAnJztcblxuICAgIC8vIFJlbW92ZSBlbGVtZW50cyB3ZSBpbnNlcnRlZCBpbnRvIHRoZSBET01cbiAgICBpZiAodGhpcy5waWVjZXNFbCkge1xuICAgICAgdGhpcy5waWVjZXNFbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMucGllY2VzRWwpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIHR5cGVhaGVhZHMuXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gbGVhdmVFbGVtZW50IExlYXZlIHRoZSBlbGVtZW50IGludGFjdC5cbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLl9yZW1vdmVUeXBlYWhlYWRzID0gZnVuY3Rpb24gX3JlbW92ZVR5cGVhaGVhZHMobGVhdmVFbGVtZW50KSB7XG5cbiAgICAvLyBSZW1vdmUgdHlwZWFoZWFkc1xuICAgIGlmICh0aGlzLnR5cGVhaGVhZHMpIHtcbiAgICAgIGZvciAodmFyIGkgaW4gdGhpcy50eXBlYWhlYWRzKSB7XG4gICAgICAgIHRoaXMudHlwZWFoZWFkc1tpXS5yZW1vdmUobGVhdmVFbGVtZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBzZWxlY3RzLlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGxlYXZlRWxlbWVudCBMZWF2ZSB0aGUgZWxlbWVudCBpbnRhY3QuXG4gICAqL1xuXG5cbiAgRGF0ZUlucHV0LnByb3RvdHlwZS5fcmVtb3ZlU2VsZWN0cyA9IGZ1bmN0aW9uIF9yZW1vdmVTZWxlY3RzKGxlYXZlRWxlbWVudCkge1xuXG4gICAgdmFyIGxhYmVsID0gdm9pZCAwO1xuXG4gICAgLy8gUmVtb3ZlIHNlbGVjdHNcbiAgICBpZiAodGhpcy5zZWxlY3RzKSB7XG5cbiAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5zZWxlY3RzKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0c1tpXS5yZW1vdmUobGVhdmVFbGVtZW50KTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhpcyBpcyBhIHNlbGVjdCBncm91cCwgbW92ZSB0aGUgbGFiZWwgZWxlbWVudC5cbiAgICAgIGlmIChsYWJlbCA9IHRoaXMucGllY2VzRWwucXVlcnlTZWxlY3RvcignLnNwYXJrLWxhYmVsJykpIHtcbiAgICAgICAgdGhpcy5lbC5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICB9XG5cbiAgICAgICgwLCBfYWRkQ2xhc3MyLmRlZmF1bHQpKHRoaXMuZWwsICdzcGFyay1pbnB1dCcpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlIGEgdHlwZWFoZWFkIG9yIHBsYWNlaG9sZGVyIHBpZWNlLlxuICAgKiBAcGFyYW0ge0FycmF5fSBlbHNcbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcnRcbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLl9pbml0aWFsaXplVHlwZWFoZWFkUGllY2UgPSBmdW5jdGlvbiBfaW5pdGlhbGl6ZVR5cGVhaGVhZFBpZWNlKGVscywgcGFydCkge1xuXG4gICAgdGhpcy50eXBlYWhlYWRzID0gdGhpcy50eXBlYWhlYWRzIHx8IHt9O1xuICAgIHRoaXMudHlwZWFoZWFkRWxzID0gdGhpcy50eXBlYWhlYWRFbHMgfHwgW107XG5cbiAgICB2YXIgZWwgPSB2b2lkIDA7XG5cbiAgICBzd2l0Y2ggKHBhcnQubmFtZSkge1xuICAgICAgY2FzZSAnZGF5JzpcbiAgICAgIGNhc2UgJ21vbnRoJzpcbiAgICAgIGNhc2UgJ3llYXInOlxuICAgICAgICB0aGlzLnR5cGVhaGVhZHNbcGFydC5uYW1lXSA9IG5ldyBfZGF0ZVR5cGVhaGVhZDIuZGVmYXVsdCh7XG4gICAgICAgICAgdHlwZTogcGFydC5uYW1lLFxuICAgICAgICAgIGxlbjogcGFydC5sZW5ndGgsXG4gICAgICAgICAgcGxhY2Vob2xkZXI6IHBhcnQudmFsdWUsXG4gICAgICAgICAgb25Gb2N1czogdGhpcy5fb25UeXBlYWhlYWRGb2N1c0JvdW5kLFxuICAgICAgICAgIG9uQmx1cjogdGhpcy5fb25UeXBlYWhlYWRCbHVyQm91bmQsXG4gICAgICAgICAgb25DaGFuZ2U6IHRoaXMuX29uUGllY2VDaGFuZ2VCb3VuZCxcbiAgICAgICAgICBvbklucHV0OiB0aGlzLl9vblR5cGVhaGVhZElucHV0Qm91bmQsXG4gICAgICAgICAgb25CYWNrc3BhY2U6IHRoaXMuX29uVHlwZWFoZWFkQmFja3NwYWNlQm91bmQsXG4gICAgICAgICAgb25FbmQ6IHRoaXMuX29uVHlwZWFoZWFkRW5kQm91bmRcbiAgICAgICAgfSk7XG4gICAgICAgIGVsID0gdGhpcy50eXBlYWhlYWRzW3BhcnQubmFtZV0udHlwZWFoZWFkLmVsO1xuICAgICAgICB0aGlzLnR5cGVhaGVhZEVscy5wdXNoKGVsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgZWwuaW5uZXJIVE1MID0gcGFydC52YWx1ZTtcbiAgICAgICAgZWwuY2xhc3NOYW1lID0gJ3NwYXJrLWlucHV0X19kaXZpZGVyJztcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgZWxzLnB1c2goZWwpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXBsYWNlIHRoZSBkYXRlIGlucHV0IHdpdGggdGhyZWUgZGF0ZSBkcm9wZG93bnMuIEtlZXAgdGhlIGRhdGUgaW5wdXQgYXJvdW5kIGFuZCBzdG9yZSB0aGVcbiAgICogc2VsZWN0IGRhdGEgaW4gdGhlcmUuXG4gICAqL1xuXG5cbiAgRGF0ZUlucHV0LnByb3RvdHlwZS5faW5pdGlhbGl6ZVNlbGVjdFBpZWNlID0gZnVuY3Rpb24gX2luaXRpYWxpemVTZWxlY3RQaWVjZShlbHMsIHBhcnQpIHtcblxuICAgIHRoaXMuc2VsZWN0cyA9IHRoaXMuc2VsZWN0cyB8fCB7fTtcbiAgICB0aGlzLnNlbGVjdEVscyA9IHRoaXMuc2VsZWN0RWxzIHx8IFtdO1xuXG4gICAgaWYgKFsnZGF5JywgJ21vbnRoJywgJ3llYXInXS5pbmRleE9mKHBhcnQubmFtZSkgPT09IC0xKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGVsID0gdm9pZCAwO1xuXG4gICAgc3dpdGNoIChwYXJ0Lm5hbWUpIHtcbiAgICAgIGNhc2UgJ2RheSc6XG4gICAgICBjYXNlICdtb250aCc6XG4gICAgICAgIHRoaXMuc2VsZWN0c1twYXJ0Lm5hbWVdID0gbmV3IF9kYXRlU2VsZWN0Mi5kZWZhdWx0KHtcbiAgICAgICAgICB0eXBlOiBwYXJ0Lm5hbWUsXG4gICAgICAgICAgb25DaGFuZ2U6IHRoaXMuX29uUGllY2VDaGFuZ2VCb3VuZFxuICAgICAgICB9KTtcbiAgICAgICAgZWwgPSB0aGlzLnNlbGVjdHNbcGFydC5uYW1lXS5zZWxlY3QuZWw7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAneWVhcic6XG4gICAgICAgIHtcbiAgICAgICAgICB2YXIgbWluWWVhciA9IHRoaXMuaW5wdXRFbC5taW4gPyBwYXJzZWREb21Gb3JtYXQuZ2V0VmFsdWVzKHRoaXMuaW5wdXRFbC5taW4pLnllYXIgOiBudWxsO1xuICAgICAgICAgIHZhciBtYXhZZWFyID0gdGhpcy5pbnB1dEVsLm1heCA/IHBhcnNlZERvbUZvcm1hdC5nZXRWYWx1ZXModGhpcy5pbnB1dEVsLm1heCkueWVhciA6IG51bGw7XG5cbiAgICAgICAgICB0aGlzLnNlbGVjdHNbcGFydC5uYW1lXSA9IG5ldyBfZGF0ZVNlbGVjdDIuZGVmYXVsdCh7XG4gICAgICAgICAgICBtaW46IG1pblllYXIsXG4gICAgICAgICAgICBtYXg6IG1heFllYXIsXG4gICAgICAgICAgICB0eXBlOiBwYXJ0Lm5hbWUsXG4gICAgICAgICAgICBvbkNoYW5nZTogdGhpcy5fb25QaWVjZUNoYW5nZUJvdW5kXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZWwgPSB0aGlzLnNlbGVjdHNbcGFydC5uYW1lXS5zZWxlY3QuZWw7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBlbHMucHVzaChlbCk7XG4gICAgdGhpcy5zZWxlY3RFbHMucHVzaChlbCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIElmIG91ciBlbGVtZW50IGlzIGEgbGFiZWwsIGNvbnZlcnQgaXQgdG8gYSBkaXYgc28gdGhhdFxuICAgKiB3ZSBhcmUgc2VtYW50aWNhbGx5IGNvcnJlY3QuIENhbid0IGhhdmUgbW9yZSB0aGFuIG9uZVxuICAgKiBpbnB1dCBpbnNpZGUgb2YgYSBsYWJlbCFcbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLl9jb252ZXJ0TGFiZWwgPSBmdW5jdGlvbiBfY29udmVydExhYmVsKCkge1xuXG4gICAgaWYgKHRoaXMuaXNUeXBlYWhlYWQgfHwgdGhpcy5lbC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAnbGFiZWwnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG5ld0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZmllbGRzZXQnKTtcblxuICAgICgwLCBfY29weUF0dHJpYnV0ZXMyLmRlZmF1bHQpKHRoaXMuZWwsIG5ld0VsKTtcbiAgICAoMCwgX2FwcGVuZENoaWxkcmVuMi5kZWZhdWx0KShuZXdFbCwgdGhpcy5lbC5jaGlsZHJlbik7XG5cbiAgICBpZiAodGhpcy5lbC5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLmVsLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld0VsLCB0aGlzLmVsKTtcbiAgICB9XG5cbiAgICB0aGlzLmVsID0gbmV3RWw7XG4gIH07XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIHRoZSBkYXRlIHZhbHVlcy5cbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLl92YWxpZGF0ZSA9IGZ1bmN0aW9uIF92YWxpZGF0ZSgpIHtcblxuICAgIGlmICh0aGlzLmlzVHlwZWFoZWFkKSB7XG4gICAgICB0aGlzLl92YWxpZGF0ZVR5cGVhaGVhZHMoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNTZWxlY3QpIHtcbiAgICAgIHRoaXMuX3ZhbGlkYXRlU2VsZWN0cygpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVmFsaWRhdGUgdGhlIHR5cGVhaGVhZCB2YWx1ZXMuXG4gICAqL1xuXG5cbiAgRGF0ZUlucHV0LnByb3RvdHlwZS5fdmFsaWRhdGVUeXBlYWhlYWRzID0gZnVuY3Rpb24gX3ZhbGlkYXRlVHlwZWFoZWFkcygpIHtcblxuICAgIGlmICghdGhpcy50eXBlYWhlYWRzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG1vbnRoID0gdGhpcy50eXBlYWhlYWRzLm1vbnRoID8gdGhpcy50eXBlYWhlYWRzLm1vbnRoLmdldFZhbHVlKHRydWUpIDogbnVsbDtcbiAgICB2YXIgeWVhciA9IHRoaXMudHlwZWFoZWFkcy55ZWFyID8gdGhpcy50eXBlYWhlYWRzLnllYXIuZ2V0VmFsdWUodHJ1ZSkgOiBudWxsO1xuXG4gICAgdmFyIG1heERheSA9IG1vbnRoICYmIG5ldyBEYXRlKHllYXIgIT09IG51bGwgPyB5ZWFyIDogbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLCBtb250aCwgMCkuZ2V0RGF0ZSgpIHx8IHRoaXMuX2dldE1heERheXNJbk1vbnRoKG1vbnRoKTtcbiAgICB2YXIgZGF5ID0gdGhpcy50eXBlYWhlYWRzLmRheSA/IHRoaXMudHlwZWFoZWFkcy5kYXkuZ2V0VmFsdWUodHJ1ZSkgOiBudWxsO1xuXG4gICAgaWYgKG1heERheSA8IGRheSkge1xuICAgICAgdGhpcy50eXBlYWhlYWRzLmRheS5zZXRWYWx1ZShtYXhEYXkpO1xuICAgICAgdGhpcy51cGRhdGVJbnB1dCgpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVmFsaWRhdGUgdGhlIGJvdW5kYXJpZXMgb2YgdGhlIHR5cGVhaGVhZCB2YWx1ZXMgcmVsYXRpdmUgdG8gdGhlIG1pbiBhbmQgbWF4IHZhbHVlcy5cbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLl92YWxpZGF0ZVR5cGVhaGVhZEJvdW5kcyA9IGZ1bmN0aW9uIF92YWxpZGF0ZVR5cGVhaGVhZEJvdW5kcygpIHtcblxuICAgIHZhciB5ZWFyID0gdGhpcy50eXBlYWhlYWRzLnllYXIgPyB0aGlzLnR5cGVhaGVhZHMueWVhci5nZXRWYWx1ZSh0cnVlKSA6IG51bGw7XG4gICAgdmFyIG1vbnRoID0gdGhpcy50eXBlYWhlYWRzLm1vbnRoID8gdGhpcy50eXBlYWhlYWRzLm1vbnRoLmdldFZhbHVlKHRydWUpIDogbnVsbDtcbiAgICB2YXIgZGF5ID0gdGhpcy50eXBlYWhlYWRzLmRheSA/IHRoaXMudHlwZWFoZWFkcy5kYXkuZ2V0VmFsdWUodHJ1ZSkgOiBudWxsO1xuXG4gICAgaWYgKCF5ZWFyIHx8ICFtb250aCB8fCAhZGF5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCAtIDEsIGRheSk7XG4gICAgdmFyIHNldCA9ICcnO1xuXG4gICAgaWYgKHRoaXMubWluICYmIGRhdGUgPCBuZXcgRGF0ZSh0aGlzLm1pbi55ZWFyLCB0aGlzLm1pbi5tb250aCAtIDEsIHRoaXMubWluLmRheSkpIHtcbiAgICAgIHNldCA9ICdtaW4nO1xuICAgIH0gZWxzZSBpZiAodGhpcy5tYXggJiYgZGF0ZSA+IG5ldyBEYXRlKHRoaXMubWF4LnllYXIsIHRoaXMubWF4Lm1vbnRoIC0gMSwgdGhpcy5tYXguZGF5KSkge1xuICAgICAgc2V0ID0gJ21heCc7XG4gICAgfVxuXG4gICAgaWYgKHNldCkge1xuICAgICAgdGhpcy50eXBlYWhlYWRzLnllYXIuc2V0VmFsdWUoKDAsIF9wYWQyLmRlZmF1bHQpKHRoaXNbc2V0XS55ZWFyLCB0aGlzLnR5cGVhaGVhZHMueWVhci50eXBlYWhlYWQuZm9ybWF0Lmxlbmd0aCkpO1xuICAgICAgdGhpcy50eXBlYWhlYWRzLm1vbnRoLnNldFZhbHVlKCgwLCBfcGFkMi5kZWZhdWx0KSh0aGlzW3NldF0ubW9udGgsIHRoaXMudHlwZWFoZWFkcy5tb250aC50eXBlYWhlYWQuZm9ybWF0Lmxlbmd0aCkpO1xuICAgICAgdGhpcy50eXBlYWhlYWRzLmRheS5zZXRWYWx1ZSgoMCwgX3BhZDIuZGVmYXVsdCkodGhpc1tzZXRdLmRheSwgdGhpcy50eXBlYWhlYWRzLmRheS50eXBlYWhlYWQuZm9ybWF0Lmxlbmd0aCkpO1xuICAgICAgdGhpcy51cGRhdGVJbnB1dCgpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUGFkIHRoZSB0eXBlYWhlYWQgaW5wdXQgdmFsdWVzLlxuICAgKi9cblxuXG4gIERhdGVJbnB1dC5wcm90b3R5cGUuX3BhZFR5cGVhaGVhZHMgPSBmdW5jdGlvbiBfcGFkVHlwZWFoZWFkcygpIHtcblxuICAgIGlmICh0aGlzLl9wYXVzZUlucHV0Q2hhbmdlKSByZXR1cm47XG5cbiAgICB0aGlzLl9wYXVzZUlucHV0Q2hhbmdlID0gdHJ1ZTtcblxuICAgIGZvciAodmFyIGkgaW4gdGhpcy50eXBlYWhlYWRzKSB7XG4gICAgICB0aGlzLl9wYWRUeXBlYWhlYWQodGhpcy50eXBlYWhlYWRzW2ldKTtcbiAgICB9XG5cbiAgICB0aGlzLl9wYXVzZUlucHV0Q2hhbmdlID0gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIFBhZCB0aGUgdHlwZWFoZWFkIGlucHV0IHZhbHVlcy5cbiAgICogQHBhcmFtIHtUeXBlYWhlYWR9IHR5cGVhaGVhZFxuICAgKi9cblxuXG4gIERhdGVJbnB1dC5wcm90b3R5cGUuX3BhZFR5cGVhaGVhZCA9IGZ1bmN0aW9uIF9wYWRUeXBlYWhlYWQodHlwZWFoZWFkKSB7XG5cbiAgICB2YXIgdmFsdWUgPSB0eXBlYWhlYWQuZ2V0VmFsdWUoKTtcblxuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdmFyIHBhZGRlZCA9ICgwLCBfcGFkMi5kZWZhdWx0KSh2YWx1ZSwgdHlwZWFoZWFkLnR5cGVhaGVhZC5mb3JtYXQubGVuZ3RoKTtcbiAgICAgIGlmICh2YWx1ZSAhPT0gcGFkZGVkKSB0eXBlYWhlYWQuc2V0VmFsdWUoKDAsIF9wYWQyLmRlZmF1bHQpKHZhbHVlLCB0eXBlYWhlYWQudHlwZWFoZWFkLmZvcm1hdC5sZW5ndGgpKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERvIGFueSBvZiB0aGUgdHlwZWFoZWFkcyBoYXZlIGEgdmFsdWU/XG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuXG5cbiAgRGF0ZUlucHV0LnByb3RvdHlwZS5faGFzVHlwZWFoZWFkVmFsdWUgPSBmdW5jdGlvbiBfaGFzVHlwZWFoZWFkVmFsdWUoKSB7XG5cbiAgICBmb3IgKHZhciBpIGluIHRoaXMudHlwZWFoZWFkcykge1xuICAgICAgaWYgKHRoaXMudHlwZWFoZWFkc1tpXS5nZXRWYWx1ZSh0cnVlKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIHNlbGVjdCBpbnB1dCB2YWx1ZXMuXG4gICAqL1xuXG5cbiAgRGF0ZUlucHV0LnByb3RvdHlwZS5fdmFsaWRhdGVTZWxlY3RzID0gZnVuY3Rpb24gX3ZhbGlkYXRlU2VsZWN0cygpIHtcblxuICAgIGlmICghdGhpcy5zZWxlY3RzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG1vbnRoID0gdGhpcy5zZWxlY3RzLm1vbnRoID8gdGhpcy5zZWxlY3RzLm1vbnRoLmdldFZhbHVlKHRydWUpIDogbnVsbDtcbiAgICB2YXIgeWVhciA9IHRoaXMuc2VsZWN0cy55ZWFyID8gdGhpcy5zZWxlY3RzLnllYXIuZ2V0VmFsdWUodHJ1ZSkgOiBudWxsO1xuXG4gICAgdmFyIG1heERheSA9IG1vbnRoICYmIG5ldyBEYXRlKHllYXIgIT09IG51bGwgPyB5ZWFyIDogbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLCBtb250aCwgMCkuZ2V0RGF0ZSgpIHx8IHRoaXMuX2dldE1heERheXNJbk1vbnRoKG1vbnRoKTtcbiAgICB2YXIgZGF5ID0gdGhpcy5zZWxlY3RzLmRheSA/IHRoaXMuc2VsZWN0cy5kYXkuZ2V0VmFsdWUodHJ1ZSkgOiBudWxsO1xuXG4gICAgdGhpcy5zZWxlY3RzLmRheS5zZXRPcHRpb25zKHtcbiAgICAgIG1heDogbWF4RGF5XG4gICAgfSk7XG4gICAgaWYgKG1heERheSA8IGRheSkge1xuICAgICAgdGhpcy5zZWxlY3RzLmRheS5zZXRWYWx1ZShtYXhEYXkpO1xuICAgIH1cblxuICAgIHRoaXMudXBkYXRlSW5wdXQoKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBtYXhpbXVtIG51bWJlciBvZiBkYXlzIGZvciBhIGdpdmVuIG1vbnRoLlxuICAgKiBAcGFyYW0ge051bWJlcn0gbW9udGggVGhlIG1vbnRoJ3MgbnVtYmVyLiAxLTEyLlxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9IFRoZSBtYXhpbXVtIG51bWJlciBvZiBkYXlzLiAyOC0zMS5cbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLl9nZXRNYXhEYXlzSW5Nb250aCA9IGZ1bmN0aW9uIF9nZXRNYXhEYXlzSW5Nb250aChtb250aCkge1xuICAgIGlmIChtb250aCA9PT0gMikgcmV0dXJuIDI5O2Vsc2UgaWYgKFs0LCA2LCA5LCAxMV0uaW5kZXhPZihtb250aCkgIT09IC0xKSByZXR1cm4gMzA7XG4gICAgcmV0dXJuIDMxO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYm91bmQgdmVyc2lvbnMgb2YgZXZlbnQgbGlzdGVuZXIgY2FsbGJhY2tzIGFuZCBzdG9yZSB0aGVtLlxuICAgKiBPdGhlcndpc2Ugd2UgY2FuJ3QgdW5iaW5kIGZyb20gdGhlc2UgZXZlbnRzIGxhdGVyIGJlY2F1c2UgdGhlbS5cbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLl9iaW5kRXZlbnRMaXN0ZW5lckNhbGxiYWNrcyA9IGZ1bmN0aW9uIF9iaW5kRXZlbnRMaXN0ZW5lckNhbGxiYWNrcygpIHtcbiAgICB0aGlzLl9vblR5cGVhaGVhZEJsdXJCb3VuZCA9IHRoaXMuX29uVHlwZWFoZWFkQmx1ci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uVHlwZWFoZWFkSW5wdXRCb3VuZCA9IHRoaXMuX29uVHlwZWFoZWFkSW5wdXQuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vblR5cGVhaGVhZEZvY3VzQm91bmQgPSB0aGlzLl9vblR5cGVhaGVhZEZvY3VzLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25QaWVjZUNoYW5nZUJvdW5kID0gdGhpcy5fb25QaWVjZUNoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uVHlwZWFoZWFkQmFja3NwYWNlQm91bmQgPSB0aGlzLl9vblR5cGVhaGVhZEJhY2tzcGFjZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uVHlwZWFoZWFkRW5kQm91bmQgPSB0aGlzLl9vblR5cGVhaGVhZEVuZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uSW5wdXRDaGFuZ2VCb3VuZCA9IHRoaXMuX29uSW5wdXRDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vblZpc2libGVDaGlsZHJlbkJvdW5kID0gdGhpcy5fb25WaXNpYmxlQ2hpbGRyZW4uYmluZCh0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogQWRkIGV2ZW50IGxpc3RlbmVycy5cbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLl9hZGRFdmVudExpc3RlbmVycyA9IGZ1bmN0aW9uIF9hZGRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb25DbGlja0JvdW5kKTtcbiAgICB0aGlzLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5fb25JbnB1dENoYW5nZUJvdW5kKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzcGFyay52aXNpYmxlLWNoaWxkcmVuJywgdGhpcy5fb25WaXNpYmxlQ2hpbGRyZW5Cb3VuZCwgdHJ1ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBldmVudCBsaXN0ZW5lcnMuXG4gICAqL1xuXG5cbiAgRGF0ZUlucHV0LnByb3RvdHlwZS5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX29uQ2xpY2tCb3VuZCk7XG4gICAgdGhpcy5pbnB1dEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuX29uSW5wdXRDaGFuZ2VCb3VuZCk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3BhcmsudmlzaWJsZS1jaGlsZHJlbicsIHRoaXMuX29uVmlzaWJsZUNoaWxkcmVuQm91bmQsIHRydWUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgdGhlIHNwYXJrLnZpc2libGUtY2hpbGRyZW4gZXZlbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IGVcbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLl9vblZpc2libGVDaGlsZHJlbiA9IGZ1bmN0aW9uIF9vblZpc2libGVDaGlsZHJlbihlKSB7XG4gICAgaWYgKGUudGFyZ2V0LmNvbnRhaW5zKHRoaXMuZWwpKSB7XG4gICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICB9LmJpbmQodGhpcyksIDApO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUnVuIGFsbCB0eXBlYWhlYWRzIHNvIHRoZXkgaGF2ZSBwbGFjZWhvbGRlciB2YWx1ZXMuXG4gICAqL1xuXG5cbiAgRGF0ZUlucHV0LnByb3RvdHlwZS5fcnVuVHlwZWFoZWFkcyA9IGZ1bmN0aW9uIF9ydW5UeXBlYWhlYWRzKCkge1xuXG4gICAgLy8gTWFrZSBzdXJlIHdlIGRvbid0IGdldCBpbnRvIGFuIGluZmluaXRlIGxvb3AuIEV2ZW4gdGhvdWdoIHRoZSBsb2dpY1xuICAgIC8vIGluIHRoZSB0eXBlYWhlYWRzIHNob3VsZCBiZSBzdG9wcGluZyB0aGlzIGZyb20gaGFwcGVuaW5nLCB0aGVyZSBpc1xuICAgIC8vIHNvbWV0aGluZyBpbiBTYWZhcmkgd2hlcmUgdGhlIGZvY3VzIGFuZCBibHVyIGV2ZW50cyBmaXJlIGluIGRpZmZlcmVudFxuICAgIC8vIG9yZGVyIHRoYW4gb3RoZXIgYnJvd3NlcnMgc28gdGhvc2UgZmFpbHNhZmVzIGRvIG5vdCB3b3JrLlxuICAgIGlmICh0aGlzLnJ1bm5pbmdUeXBlYWhlYWRzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5ydW5uaW5nVHlwZWFoZWFkcyA9IHRydWU7XG5cbiAgICBpZiAodGhpcy5pbkZvY3VzKSB7XG4gICAgICB0aGlzLmluRm9jdXMucGF1c2UoKTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpIGluIHRoaXMudHlwZWFoZWFkcykge1xuICAgICAgaWYgKHRoaXMudHlwZWFoZWFkc1tpXSAhPT0gdGhpcy5pbkZvY3VzKSB7XG4gICAgICAgIHRoaXMudHlwZWFoZWFkc1tpXS5ydW4oKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5pbkZvY3VzKSB7XG4gICAgICB0aGlzLmluRm9jdXMucmVzdW1lKCk7XG4gICAgICB0aGlzLmluRm9jdXMucnVuKCk7XG4gICAgfVxuXG4gICAgdGhpcy5ydW5uaW5nVHlwZWFoZWFkcyA9IGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGFjdGl2ZSBhbmQgZm9jdXMgY2xhc3Nlcy5cbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLl91cGRhdGVDbGFzcyA9IGZ1bmN0aW9uIF91cGRhdGVDbGFzcygpIHtcbiAgICAoMCwgX3RvZ2dsZUNsYXNzMi5kZWZhdWx0KSh0aGlzLmVsLCAnYWN0aXZlJywgdGhpcy5pc0FjdGl2ZSk7XG4gICAgKDAsIF90b2dnbGVDbGFzczIuZGVmYXVsdCkodGhpcy5lbCwgJ2hhcy1wYXJ0aWFsLXZhbHVlJywgdGhpcy5oYXNQYXJ0aWFsVmFsdWUoKSk7XG4gICAgKDAsIF90b2dnbGVDbGFzczIuZGVmYXVsdCkodGhpcy5lbCwgJ2ZvY3VzJywgdGhpcy5pbkZvY3VzID8gdHJ1ZSA6IGZhbHNlKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSB0eXBlYWhlYWQgdGhhdCBjb3JyZXNwb25kcyB0byB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuXG5cbiAgRGF0ZUlucHV0LnByb3RvdHlwZS5fZ2V0VHlwZWFoZWFkQnlFbGVtZW50ID0gZnVuY3Rpb24gX2dldFR5cGVhaGVhZEJ5RWxlbWVudChlbCkge1xuICAgIGZvciAodmFyIGkgaW4gdGhpcy50eXBlYWhlYWRzKSB7XG4gICAgICBpZiAodGhpcy50eXBlYWhlYWRzW2ldLnR5cGVhaGVhZC5lbCA9PT0gZWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZWFoZWFkc1tpXTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNob3cgdGhlIGRhdGUgYXMgdGV4dC5cbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLl9zaG93RGF0ZVRleHQgPSBmdW5jdGlvbiBfc2hvd0RhdGVUZXh0KCkge1xuXG4gICAgdmFyIHRleHQgPSB0aGlzLl9nZXREYXRlVGV4dCgpO1xuXG4gICAgaWYgKCF0ZXh0IHx8ICF0aGlzLnNob3dEYXRlQXNUZXh0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmRhdGVUZXh0RWwpIHtcbiAgICAgIHRoaXMuX2NyZWF0ZURhdGVUZXh0RWwoKTtcbiAgICB9XG5cbiAgICB0aGlzLmRhdGVUZXh0RWwuaW5uZXJIVE1MID0gdGV4dDtcbiAgICB0aGlzLmRhdGVUZXh0RWwuc3R5bGUuZGlzcGxheSA9ICcnO1xuICB9O1xuXG4gIC8qKlxuICAgKiBIaWRlIHRoZSBkYXRlIGFzIHRleHQuXG4gICAqL1xuXG5cbiAgRGF0ZUlucHV0LnByb3RvdHlwZS5faGlkZURhdGVUZXh0ID0gZnVuY3Rpb24gX2hpZGVEYXRlVGV4dCgpIHtcblxuICAgIGlmICghdGhpcy5zaG93RGF0ZUFzVGV4dCB8fCAhdGhpcy5kYXRlVGV4dEVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5kYXRlVGV4dEVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgZGF0ZSB0ZXh0IGVsZW1lbnQuXG4gICAqL1xuXG5cbiAgRGF0ZUlucHV0LnByb3RvdHlwZS5fY3JlYXRlRGF0ZVRleHRFbCA9IGZ1bmN0aW9uIF9jcmVhdGVEYXRlVGV4dEVsKCkge1xuXG4gICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZWwuY2xhc3NOYW1lID0gJ3NwYXJrLWlucHV0X19vdmVybGF5JztcbiAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgdGhpcy5lbC5hcHBlbmRDaGlsZChlbCk7XG4gICAgdGhpcy5kYXRlVGV4dEVsID0gZWw7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZGF0ZSBhcyB0ZXh0LlxuICAgKi9cblxuXG4gIERhdGVJbnB1dC5wcm90b3R5cGUuX2dldERhdGVUZXh0ID0gZnVuY3Rpb24gX2dldERhdGVUZXh0KCkge1xuXG4gICAgdmFyIHBhcnRzID0gdGhpcy5wYXJzZWRUZXh0Rm9ybWF0LnBhcnRzO1xuICAgIHZhciBpID0gMDtcbiAgICB2YXIgbGVuID0gcGFydHMubGVuZ3RoO1xuICAgIHZhciBzdHIgPSAnJztcbiAgICB2YXIgaXNWYWxpZCA9IHRydWU7XG4gICAgdmFyIHZhbDtcblxuICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcblxuICAgICAgdmFsID0gdGhpcy50eXBlYWhlYWRzW3BhcnRzW2ldLm5hbWVdICYmIHRoaXMudHlwZWFoZWFkc1twYXJ0c1tpXS5uYW1lXS5nZXRWYWx1ZSgpO1xuXG4gICAgICBzd2l0Y2ggKHBhcnRzW2ldLm5hbWUpIHtcbiAgICAgICAgY2FzZSAnbW9udGgnOlxuICAgICAgICAgIHN0ciArPSBfZGF0ZTIuZGVmYXVsdC5nZXRNb250aE5hbWVTaG9ydCh2YWwpO1xuICAgICAgICAgIGlmICghdmFsKSB7XG4gICAgICAgICAgICBpc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2RheSc6XG4gICAgICAgIGNhc2UgJ3llYXInOlxuICAgICAgICAgIHN0ciArPSB2YWw7XG4gICAgICAgICAgaWYgKCF2YWwpIHtcbiAgICAgICAgICAgIGlzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBzdHIgKz0gcGFydHNbaV0udmFsdWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGlzVmFsaWQgPyBzdHIgOiBmYWxzZTtcbiAgfTtcblxuICAvKipcbiAgICogV2hlbiB0aGUgdmFsdWUgb2YgYSB0eXBlYWhlYWQgb3Igc2VsZWN0IGNoYW5nZXMsIHZhbGlkYXRlLlxuICAgKiBAcGFyYW0ge051bWJlcn0gdmFsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0eXBlYWhlYWRcbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLl9vblBpZWNlQ2hhbmdlID0gZnVuY3Rpb24gX29uUGllY2VDaGFuZ2UoKSB7XG5cbiAgICB0aGlzLl92YWxpZGF0ZSgpO1xuXG4gICAgaWYgKHRoaXMuaXNUeXBlYWhlYWQgJiYgdGhpcy5zaG93RGF0ZUFzVGV4dCAmJiAhdGhpcy5faGFzRm9jdXMpIHtcblxuICAgICAgaWYgKHRoaXMuX3Nob3dUZXh0VGltZXIpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3Nob3dUZXh0VGltZXIpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9zaG93VGV4dFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3Nob3dEYXRlVGV4dCgpO1xuICAgICAgfS5iaW5kKHRoaXMpLCAwKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIHR5cGVhaGVhZCBnYWlucyBmb2N1cy5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IHZhbFxuICAgKiBAcGFyYW0ge09iamVjdH0gdHlwZWFoZWFkXG4gICAqL1xuXG5cbiAgRGF0ZUlucHV0LnByb3RvdHlwZS5fb25UeXBlYWhlYWRGb2N1cyA9IGZ1bmN0aW9uIF9vblR5cGVhaGVhZEZvY3VzKHZhbCwgdHlwZWFoZWFkKSB7XG5cbiAgICBpZiAodGhpcy5ydW5uaW5nVHlwZWFoZWFkcykgcmV0dXJuO1xuXG4gICAgdGhpcy5faGlkZURhdGVUZXh0KCk7XG5cbiAgICBpZiAoIXRoaXMuX2hhc0ZvY3VzKSB7XG4gICAgICB0aGlzLl9oYXNGb2N1cyA9IHRydWU7XG4gICAgICAodGhpcy5vbkZvY3VzIHx8IG5vb3ApKHRoaXMuaW5wdXRFbC52YWx1ZSwgdGhpcyk7XG4gICAgfVxuXG4gICAgKDAsIF90cmlnZ2VyRXZlbnQyLmRlZmF1bHQpKHRoaXMuaW5wdXRFbCwgJ2ZvY3VzJyk7XG4gICAgdGhpcy5pbkZvY3VzID0gdHlwZWFoZWFkO1xuICAgIHRoaXMuc2hvdygpO1xuICAgIHRoaXMuX3VwZGF0ZUNsYXNzKCk7XG5cbiAgICBpZiAodGhpcy5fYmx1clRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5fYmx1clRpbWVyKTtcbiAgICAgIHRoaXMuX2JsdXJUaW1lciA9IG51bGw7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSB0eXBlYWhlYWQgbG9zZXMgZm9jdXMsIG1ha2Ugc3VyZSBudW1iZXJzIGFyZSBwYWRkZWQgcHJvcGVybHkuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB2YWxcbiAgICogQHBhcmFtIHtPYmplY3R9IHR5cGVhaGVhZFxuICAgKi9cblxuXG4gIERhdGVJbnB1dC5wcm90b3R5cGUuX29uVHlwZWFoZWFkQmx1ciA9IGZ1bmN0aW9uIF9vblR5cGVhaGVhZEJsdXIodmFsLCB0eXBlYWhlYWQpIHtcblxuICAgIGlmICh0aGlzLnJ1bm5pbmdUeXBlYWhlYWRzKSByZXR1cm47XG5cbiAgICB0aGlzLmluRm9jdXMgPSBudWxsO1xuXG4gICAgdGhpcy5fcGFkVHlwZWFoZWFkKHR5cGVhaGVhZCk7XG4gICAgdGhpcy51cGRhdGVJbnB1dCgpO1xuICAgIHRoaXMuX3VwZGF0ZUNsYXNzKCk7XG5cbiAgICBpZiAoIXRoaXMuaW5wdXRFbC52YWx1ZSAmJiAhdGhpcy5faGFzVHlwZWFoZWFkVmFsdWUoKSkge1xuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3ZhbGlkYXRlVHlwZWFoZWFkQm91bmRzKCk7XG4gICAgfVxuXG4gICAgdGhpcy5fYmx1clRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9oYXNGb2N1cyA9IGZhbHNlO1xuICAgICAgKHRoaXMub25CbHVyIHx8IG5vb3ApKHRoaXMuaW5wdXRFbC52YWx1ZSwgdGhpcyk7XG4gICAgICB0aGlzLl9zaG93RGF0ZVRleHQoKTtcbiAgICB9LmJpbmQodGhpcyksIDEpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBgaW5wdXRgIGV2ZW50IGNhbGxiYWNrIGZvciB0eXBlYWhlYWRcbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLl9vblR5cGVhaGVhZElucHV0ID0gZnVuY3Rpb24gX29uVHlwZWFoZWFkSW5wdXQoKSB7XG4gICAgKHRoaXMub25JbnB1dCB8fCBub29wKSh0aGlzLmdldFR5cGluZ1ZhbHVlKCksIHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSB0eXBlYWhlYWQgZmlyZXMgYSBiYWNrc3BhY2UgZXZlbnQsIG1vdmUgYmFjayB0byB0aGUgcHJldmlvdXMgaW5wdXQuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB2YWxcbiAgICogQHBhcmFtIHtPYmplY3R9IHR5cGVhaGVhZFxuICAgKi9cblxuXG4gIERhdGVJbnB1dC5wcm90b3R5cGUuX29uVHlwZWFoZWFkQmFja3NwYWNlID0gZnVuY3Rpb24gX29uVHlwZWFoZWFkQmFja3NwYWNlKCkge1xuICAgIHRoaXMuZm9jdXNQcmV2aW91cygpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSB0eXBlYWhlYWQgaXMgYXQgaXRzIG1heGltdW0gbGVuZ3RoIGFuZCB0aGUgY2FyZXQgaXMgYXQgdGhlIGVuZCxcbiAgICogZm9jdXMgb24gdGhlIG5leHQgaW5wdXQgZmllbGQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0eXBlYWhlYWRcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNoYXJhY3RlciBPcHRpb25hbFxuICAgKi9cblxuXG4gIERhdGVJbnB1dC5wcm90b3R5cGUuX29uVHlwZWFoZWFkRW5kID0gZnVuY3Rpb24gX29uVHlwZWFoZWFkRW5kKHR5cGVhaGVhZCwgY2hhcmFjdGVyKSB7XG4gICAgdGhpcy5mb2N1c05leHQoY2hhcmFjdGVyKTtcbiAgfTtcblxuICAvKipcbiAgICogV2hlbiB0aGUgaW5wdXQgdGhhdCBjb3JyZXNwb25kcyB0byB0aGlzIGluc3RhbmNlIGNoYW5nZXMuIEFsbG93cyB1cyB0byBsaXN0ZW5cbiAgICogYW5kIHJlc3BvbmQgdG8gY2hhbmdlcyBtYWRlIGJ5IG90aGVyIGNvbXBvbmVudHMgKENhbGVuZGFyIFBvcG92ZXIsIGZvciBleGFtcGxlKS5cbiAgICogQHBhcmFtIHtPYmplY3R9IGVcbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLl9vbklucHV0Q2hhbmdlID0gZnVuY3Rpb24gX29uSW5wdXRDaGFuZ2UoZSkge1xuXG4gICAgaWYgKHRoaXMuaXNUeXBlYWhlYWQpIHtcbiAgICAgIHRoaXMuaXNBY3RpdmUgPSBlLnRhcmdldC52YWx1ZSA/IHRydWUgOiBmYWxzZTtcbiAgICAgIHRoaXMuX3VwZGF0ZUNsYXNzKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3BhdXNlSW5wdXRDaGFuZ2UpIHJldHVybjtcbiAgICB0aGlzLnNldFZhbHVlKHBhcnNlZERvbUZvcm1hdC5nZXRWYWx1ZXMoZS50YXJnZXQudmFsdWUpKTtcbiAgICAodGhpcy5vbkNoYW5nZSB8fCBub29wKSh0aGlzLmlucHV0RWwudmFsdWUsIHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSBpbnB1dCBncm91cCBpcyBjbGlja2VkLCBmb2N1cyBvbiB0aGUgZmlyc3QgdHlwZWFoZWFkXG4gICAqIGlmIHdlIGRvbid0IGFscmVhZHkgaGF2ZSBmb2N1cy5cbiAgICogQHRvZG8gOiB3ZSBzaG91bGQgc3RpbGwgcmVwbGFjZSB0aGUgbGFiZWwgb24gdHlwZWFoZWFkcyBhbmQgdXNlIHRoaXMsXG4gICAqIGJ1dCB3ZSBuZWVkIGEgd2F5IHRvIGZvY3VzIG9uIHRoZSBjbG9zZXN0IGVsZW1lbnQgdG8gYSBjbGljay5cbiAgICogQHBhcmFtIHtPYmplY3R9IGVcbiAgICovXG5cblxuICBEYXRlSW5wdXQucHJvdG90eXBlLl9vbkNsaWNrID0gZnVuY3Rpb24gX29uQ2xpY2soKSAvKmUqL3tcblxuICAgIC8qaWYgKHRoaXMuaXNUeXBlYWhlYWQgfHwgdGhpcy5pbkZvY3VzIHx8IHRoaXMuaXNBY3RpdmUgfHwgZ2V0UGFyZW50KGUudGFyZ2V0LCAnLnNwYXJrLWlucHV0X19hZGRvbicpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgICBsZXQgaW5wdXQgPSB0aGlzLnR5cGVhaGVhZEVsc1swXS5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpO1xuICAgICBpZiAoaW5wdXQpIHtcbiAgICAgIGlucHV0LmZvY3VzKCk7XG4gICAgfSovXG4gIH07XG5cbiAgcmV0dXJuIERhdGVJbnB1dDtcbn0oX2Jhc2UyLmRlZmF1bHQpO1xuXG4vKipcbiAqIFdoaXRlbGlzdGVkIHBhcmFtZXRlcnMgd2hpY2ggY2FuIGJlIHNldCBvbiBjb25zdHJ1Y3Rpb24uXG4gKiBAdHlwZSB7QXJyYXl9XG4gKi9cblxuXG5EYXRlSW5wdXQucHJvdG90eXBlLl93aGl0ZWxpc3RlZFBhcmFtcyA9IFsndmFsaWRhdGUnLCAnb25WYWxpZGF0ZScsICdvbkNoYW5nZScsICdvbklucHV0JywgJ29uRm9jdXMnLCAnb25CbHVyJywgJ2lzVHlwZWFoZWFkJywgJ2lzU2VsZWN0JywgJ2Zvcm1hdCcsICd0ZXh0Rm9ybWF0JywgJ3Nob3dEYXRlQXNUZXh0JywgJ21pbicsICdtYXgnXTtcblxuLyoqXG4gKiBEZWZhdWx0IHZhbHVlcyBmb3IgaW50ZXJuYWwgcHJvcGVydGllcyB3ZSB3aWxsIGJlIHNldHRpbmcuXG4gKiBUaGVzZSBhcmUgc2V0IG9uIGVhY2ggY29uc3RydWN0aW9uIHNvIHdlIGRvbid0IGxlYWsgcHJvcGVydGllc1xuICogaW50byB0aGUgcHJvdG90eXBlIGNoYWluLlxuICogQHR5cGUge09iamVjdH1cbiAqL1xuRGF0ZUlucHV0LnByb3RvdHlwZS5kZWZhdWx0cyA9IHtcbiAgZWw6IG51bGwsXG4gIGlucHV0RWw6IG51bGwsXG4gIG1lc3NhZ2VFbDogbnVsbCxcbiAgcGllY2VzRWw6IG51bGwsXG4gIHRvZ2dsZUVsOiBudWxsLFxuICBpbkZvY3VzOiBudWxsLFxuICBpc0FjdGl2ZTogbnVsbCxcbiAgaXNTZWxlY3Q6IG51bGwsXG4gIGlzVHlwZWFoZWFkOiBudWxsLFxuICB0eXBlYWhlYWRzOiBudWxsLFxuICB0eXBlYWhlYWRFbHM6IG51bGwsXG4gIHNlbGVjdHM6IG51bGwsXG4gIHNlbGVjdEVsczogbnVsbCxcbiAgZm9ybWF0OiBudWxsLFxuICBwYXJzZWRGb3JtYXQ6IG51bGwsXG4gIHNob3dEYXRlQXNUZXh0OiBudWxsLFxuICB0ZXh0Rm9ybWF0OiBudWxsLFxuICBydW5uaW5nVHlwZWFoZWFkczogZmFsc2UsXG4gIG9uVmFsaWRhdGU6IG51bGwsXG4gIG9uQ2hhbmdlOiBudWxsLFxuICBvbklucHV0OiBudWxsLFxuICBvbkZvY3VzOiBudWxsLFxuICBvbkJsdXI6IG51bGwsXG4gIF9oYXNGb2N1czogZmFsc2UsXG4gIF9wYXVzZUlucHV0Q2hhbmdlOiBmYWxzZSxcbiAgX29uQ2xpY2tCb3VuZDogbnVsbCxcbiAgX29uUGllY2VDaGFuZ2VCb3VuZDogbnVsbCxcbiAgX29uVHlwZWFoZWFkRm9jdXNCb3VuZDogbnVsbCxcbiAgX29uVHlwZWFoZWFkQmx1ckJvdW5kOiBudWxsLFxuICBfb25UeXBlYWhlYWRJbnB1dEJvdW5kOiBudWxsLFxuICBfb25UeXBlYWhlYWRCYWNrc3BhY2VCb3VuZDogbnVsbCxcbiAgX29uVHlwZWFoZWFkRW5kQm91bmQ6IG51bGwsXG4gIF9vbklucHV0Q2hhbmdlQm91bmQ6IG51bGxcbn07XG5cbigwLCBfbWl4aW4yLmRlZmF1bHQpKERhdGVJbnB1dC5wcm90b3R5cGUsIF9tZXNzYWdpbmcyLmRlZmF1bHQsIF92YWxpZGF0aW9uMi5kZWZhdWx0KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gRGF0ZUlucHV0O1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRlLWlucHV0LmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2Jhc2UgPSByZXF1aXJlKCcuL2Jhc2UnKTtcblxudmFyIF9iYXNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Jhc2UpO1xuXG52YXIgX3NlbGVjdElucHV0ID0gcmVxdWlyZSgnLi9zZWxlY3QtaW5wdXQnKTtcblxudmFyIF9zZWxlY3RJbnB1dDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZWxlY3RJbnB1dCk7XG5cbnZhciBfZGF0ZSA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvZGF0ZS9kYXRlJyk7XG5cbnZhciBfZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kYXRlKTtcblxudmFyIF9wYXJzZUF0dHJpYnV0ZSA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvZG9tL3BhcnNlLWF0dHJpYnV0ZScpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9IC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogIyBEYXRlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDcmVhdGUgYSBzZWxlY3QgbGlzdCBvZiBkYXlzLCBtb250aHMgb3IgeWVhcnMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIG5ldyBEYXRlU2VsZWN0KGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAbW9kdWxlIGNvbXBvbmVudHMvZGF0ZS1zZWxlY3QuanNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuXG5cbnZhciBub29wID0gZnVuY3Rpb24gbm9vcCgpIHt9O1xuXG5mdW5jdGlvbiBjcmVhdGVEZWZhdWx0RWxlbWVudCgpIHtcbiAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICBlbC5jbGFzc05hbWUgPSAnc3Bhcmstc2VsZWN0JztcbiAgZWwuaW5uZXJIVE1MID0gJzxzZWxlY3QgY2xhc3M9XCJzcGFyay1zZWxlY3RfX2lucHV0XCI+PC9zZWxlY3Q+PHNwYW4gY2xhc3M9XCJzcGFyay1sYWJlbFwiPjwvc3Bhbj4nO1xuICByZXR1cm4gZWw7XG59XG5cbnZhciBEYXRlU2VsZWN0ID0gZnVuY3Rpb24gKF9CYXNlQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhEYXRlU2VsZWN0LCBfQmFzZUNvbXBvbmVudCk7XG5cbiAgLyoqXG4gICAqIERhdGVTZWxlY3QgY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbCBPcHRpb25hbFxuICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIE9wdGlvbmFsXG4gICAqL1xuICBmdW5jdGlvbiBEYXRlU2VsZWN0KGVsKSB7XG4gICAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGF0ZVNlbGVjdCk7XG5cbiAgICAvLyBJZiB0aGUgZmlyc3QgYXJndW1lbnQgaXMgYSBwbGFpbiBvYmplY3QsIGNyZWF0ZSBhIGRlZmF1bHQgZWxlbWVudFxuICAgIC8vIHNpbmNlIHRoZSB1c2VyIE1VU1QgcHJvdmlkZSBhZGRpdGlvbmFsIHBhcmFtcyBidXQgdGhlIGVsZW1lbnRcbiAgICAvLyBpcyBvcHRpb25hbC4gRG9pbmcgaXQgdGhpcyB3YXkgdG8ga2VlcCB0aGUgYXJpdHkgdGhlIHNhbWVcbiAgICAvLyBhcyBvdGhlciBjb21wb25lbnRzLlxuICAgIGlmICghKGVsIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB7XG4gICAgICBwYXJhbXMgPSBlbCB8fCB7fTtcbiAgICAgIGVsID0gY3JlYXRlRGVmYXVsdEVsZW1lbnQoKTtcbiAgICB9XG5cbiAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfQmFzZUNvbXBvbmVudC5jYWxsKHRoaXMsIGVsLCBwYXJhbXMpKTtcblxuICAgIF90aGlzLl9iaW5kRXZlbnRMaXN0ZW5lckNhbGxiYWNrcygpO1xuICAgIF90aGlzLl9jcmVhdGVTZWxlY3QoZWwpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlLlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGFzSW50IEdldCB0aGUgdmFsdWUgYXMgYSBwYXJzZWQgaW50ZWdlci5cbiAgICogQHJldHVybiB7TWl4ZWR9XG4gICAqL1xuXG5cbiAgRGF0ZVNlbGVjdC5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiBnZXRWYWx1ZShhc0ludCkge1xuICAgIHJldHVybiBhc0ludCA/IHBhcnNlSW50KHRoaXMuc2VsZWN0LmdldFZhbHVlKCksIDEwKSA6IHRoaXMuc2VsZWN0LmdldFZhbHVlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgdmFsdWUuXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbFxuICAgKi9cblxuXG4gIERhdGVTZWxlY3QucHJvdG90eXBlLnNldFZhbHVlID0gZnVuY3Rpb24gc2V0VmFsdWUodmFsKSB7XG4gICAgcmV0dXJuIHRoaXMuc2VsZWN0LnNldFZhbHVlKHZhbCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENsZWFyIHRoZSB2YWx1ZS5cbiAgICovXG5cblxuICBEYXRlU2VsZWN0LnByb3RvdHlwZS5jbGVhclZhbHVlID0gZnVuY3Rpb24gY2xlYXJWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zZWxlY3QuY2xlYXJWYWx1ZSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBFbmFibGUgdGhlIGlucHV0LlxuICAgKi9cblxuXG4gIERhdGVTZWxlY3QucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uIGVuYWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zZWxlY3QuZW5hYmxlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIERpc2FibGUgdGhlIGlucHV0LlxuICAgKi9cblxuXG4gIERhdGVTZWxlY3QucHJvdG90eXBlLmRpc2FibGUgPSBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgIHJldHVybiB0aGlzLnNlbGVjdC5kaXNhYmxlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgZGF0ZSBzZWxlY3QncyBvcHRpb25zLlxuICAgKiBAcGFyYW0ge09iamVjdHxBcnJheX0gcGFyYW1zXG4gICAqL1xuXG5cbiAgRGF0ZVNlbGVjdC5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMocGFyYW1zKSB7XG5cbiAgICBwYXJhbXMgPSBwYXJhbXMgfHwge307XG5cbiAgICB0aGlzLm1pbiA9IHBhcmFtcy5taW4gfHwgdGhpcy5taW47XG4gICAgdGhpcy5tYXggPSBwYXJhbXMubWF4IHx8IHRoaXMubWF4O1xuICAgIHRoaXMubW9udGhOYW1lcyA9IHBhcmFtcy5tb250aE5hbWVzIHx8IHRoaXMubW9udGhOYW1lcztcbiAgICB0aGlzLm51bWVyaWNNb250aCA9IHBhcmFtcy5udW1lcmljTW9udGggfHwgdGhpcy5udW1lcmljTW9udGg7XG5cbiAgICBpZiAodGhpcy50eXBlID09PSAneWVhcicpIHtcbiAgICAgIGlmIChwYXJhbXMubWluICYmICFwYXJhbXMubWF4KSB7XG4gICAgICAgIHRoaXMubWF4ID0gdGhpcy5taW4gKyAxMDA7XG4gICAgICB9IGVsc2UgaWYgKHBhcmFtcy5tYXggJiYgIXBhcmFtcy5taW4pIHtcbiAgICAgICAgdGhpcy5taW4gPSB0aGlzLm1heCAtIDEwMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgaSA9IHRoaXMubWluID8gdGhpcy5taW4gLSAxIDogMDtcbiAgICB2YXIgbGVuID0gdGhpcy5tYXggfHwgdGhpcy5tb250aE5hbWVzLmxlbmd0aDtcbiAgICB2YXIgb3B0cyA9IFt7fV07XG5cbiAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBvcHRzLnB1c2goe1xuICAgICAgICB2YWx1ZTogaSArIDEsXG4gICAgICAgIHRleHQ6IHRoaXMubW9udGhOYW1lcyA/IHRoaXMubW9udGhOYW1lc1tpXSA6IGkgKyAxXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLnNlbGVjdC5zZXRPcHRpb25zKG9wdHMpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgbGFiZWwgdGV4dCBmb3IgdGhlIHNlbGVjdCBpbnB1dC5cbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgT3B0aW9uYWxcbiAgICovXG5cblxuICBEYXRlU2VsZWN0LnByb3RvdHlwZS5zZXRMYWJlbCA9IGZ1bmN0aW9uIHNldExhYmVsKHRleHQpIHtcbiAgICB0aGlzLnNlbGVjdC5zZXRMYWJlbCh0ZXh0ICE9PSB1bmRlZmluZWQgPyB0ZXh0IDogdGhpcy5fZ2V0VHlwZVRleHQoKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHNlbGVjdCBpbnB1dCBoZWxwZXIuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlbFxuICAgKi9cblxuXG4gIERhdGVTZWxlY3QucHJvdG90eXBlLl9jcmVhdGVTZWxlY3QgPSBmdW5jdGlvbiBfY3JlYXRlU2VsZWN0KGVsKSB7XG5cbiAgICB0aGlzLnNlbGVjdCA9IG5ldyBfc2VsZWN0SW5wdXQyLmRlZmF1bHQoZWwsIHtcbiAgICAgIG9uQ2hhbmdlOiB0aGlzLl9vblNlbGVjdENoYW5nZUJvdW5kLFxuICAgICAgb25Gb2N1czogdGhpcy5fb25TZWxlY3RGb2N1c0JvdW5kLFxuICAgICAgb25CbHVyOiB0aGlzLl9vblNlbGVjdEJsdXJCb3VuZFxuICAgIH0pO1xuXG4gICAgdGhpcy5zZXRPcHRpb25zKCk7XG4gICAgdGhpcy5zZXRMYWJlbCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDYWNoZSBlbGVtZW50cy5cbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKi9cblxuXG4gIERhdGVTZWxlY3QucHJvdG90eXBlLl9jYWNoZUVsZW1lbnRzID0gZnVuY3Rpb24gX2NhY2hlRWxlbWVudHMoZWwpIHtcbiAgICB0aGlzLmVsID0gZWw7XG4gICAgdGhpcy5zZWxlY3RFbCA9IHRoaXMuZWwucXVlcnlTZWxlY3Rvcignc2VsZWN0Jyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFBhcnNlIHBhcmFtZXRlcnMgZnJvbSB0aGUgZWxlbWVudHMuXG4gICAqL1xuXG5cbiAgRGF0ZVNlbGVjdC5wcm90b3R5cGUuX3BhcnNlUGFyYW1zID0gZnVuY3Rpb24gX3BhcnNlUGFyYW1zKCkge1xuXG4gICAgdGhpcy50eXBlID0gdGhpcy50eXBlICE9PSBudWxsID8gdGhpcy50eXBlIDogKDAsIF9wYXJzZUF0dHJpYnV0ZS5zdHJpbmcpKHRoaXMuc2VsZWN0RWwsICdkYXRhLXR5cGUnLCAnZGF5Jyk7XG5cbiAgICBpZiAodGhpcy50eXBlID09PSAneWVhcicpIHtcbiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgIHRoaXMubWluID0gdGhpcy5taW4gIT09IG51bGwgPyB0aGlzLm1pbiA6ICgwLCBfcGFyc2VBdHRyaWJ1dGUubnVtYmVyKSh0aGlzLnNlbGVjdEVsLCAnbWluJywgZGF0ZS5nZXRGdWxsWWVhcigpIC0gMTAwKTtcbiAgICAgIHRoaXMubWF4ID0gdGhpcy5tYXggIT09IG51bGwgPyB0aGlzLm1heCA6ICgwLCBfcGFyc2VBdHRyaWJ1dGUubnVtYmVyKSh0aGlzLnNlbGVjdEVsLCAnbWF4JywgKHRoaXMubWluIHx8IGRhdGUuZ2V0RnVsbFllYXIoKSkgKyAxMDApO1xuICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSAnbW9udGgnKSB7XG5cbiAgICAgIHRoaXMubW9udGhOYW1lcyA9IHRoaXMubW9udGhOYW1lcyAhPT0gbnVsbCA/IHRoaXMubW9udGhOYW1lcyA6ICgwLCBfcGFyc2VBdHRyaWJ1dGUuc3RyaW5nKSh0aGlzLnNlbGVjdEVsLCAnZGF0YS1tb250aC1uYW1lcycsIG51bGwpO1xuICAgICAgdGhpcy5udW1lcmljTW9udGggPSB0aGlzLm51bWVyaWNNb250aCAhPT0gbnVsbCA/IHRoaXMubnVtZXJpY01vbnRoIDogKDAsIF9wYXJzZUF0dHJpYnV0ZS5ib29sZWFuKSh0aGlzLnNlbGVjdEVsLCAnZGF0YS1udW1lcmljLW1vbnRoJywgZmFsc2UpO1xuICAgICAgdGhpcy5taW4gPSB0aGlzLm1pbiAhPT0gbnVsbCA/IHRoaXMubWluIDogKDAsIF9wYXJzZUF0dHJpYnV0ZS5udW1iZXIpKHRoaXMuc2VsZWN0RWwsICdtaW4nLCBudWxsKTtcbiAgICAgIHRoaXMubWF4ID0gdGhpcy5tYXggIT09IG51bGwgPyB0aGlzLm1heCA6ICgwLCBfcGFyc2VBdHRyaWJ1dGUubnVtYmVyKSh0aGlzLnNlbGVjdEVsLCAnbWF4JywgbnVsbCk7XG5cbiAgICAgIC8vIE5vIG1vbnRoTmFtZXMgeWV0IGFuZCBubyBtaW4gb3IgbWF4XG4gICAgICBpZiAoIXRoaXMubW9udGhOYW1lcyAmJiAhdGhpcy5udW1lcmljTW9udGggJiYgIXRoaXMubWluICYmICF0aGlzLm1heCkge1xuICAgICAgICB0aGlzLm1vbnRoTmFtZXMgPSB0aGlzLl9nZXREZWZhdWx0TW9udGhOYW1lcygpO1xuICAgICAgfSBlbHNlIGlmICghdGhpcy5taW4gJiYgIXRoaXMubWF4KSB7XG4gICAgICAgIHRoaXMubWluID0gMTtcbiAgICAgICAgdGhpcy5tYXggPSAxMjtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLm1vbnRoTmFtZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRoaXMubW9udGhOYW1lcyA9IHRoaXMubW9udGhOYW1lcy5zcGxpdCgnLCcpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1pbiA9IHRoaXMubWluICE9PSBudWxsID8gdGhpcy5taW4gOiAoMCwgX3BhcnNlQXR0cmlidXRlLm51bWJlcikodGhpcy5zZWxlY3RFbCwgJ21pbicsIDEpO1xuICAgICAgdGhpcy5tYXggPSB0aGlzLm1heCAhPT0gbnVsbCA/IHRoaXMubWF4IDogKDAsIF9wYXJzZUF0dHJpYnV0ZS5udW1iZXIpKHRoaXMuc2VsZWN0RWwsICdtYXgnLCAzMSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBNYWtlIGEgbGlzdCBvZiBtb250aCBvcHRpb25zLlxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG5cblxuICBEYXRlU2VsZWN0LnByb3RvdHlwZS5fZ2V0RGVmYXVsdE1vbnRoTmFtZXMgPSBmdW5jdGlvbiBfZ2V0RGVmYXVsdE1vbnRoTmFtZXMoKSB7XG4gICAgcmV0dXJuIF9kYXRlMi5kZWZhdWx0LmdldE1vbnRoTmFtZXNTaG9ydCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHRleHQgZm9yIHRoaXMgdHlwZSBvZiBkYXRlIHNlbGVjdC5cbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cblxuXG4gIERhdGVTZWxlY3QucHJvdG90eXBlLl9nZXRUeXBlVGV4dCA9IGZ1bmN0aW9uIF9nZXRUeXBlVGV4dCgpIHtcbiAgICByZXR1cm4gdGhpcy50eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdGhpcy50eXBlLnNsaWNlKDEpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYm91bmQgdmVyc2lvbnMgb2YgZXZlbnQgbGlzdGVuZXIgY2FsbGJhY2tzIGFuZCBzdG9yZSB0aGVtLlxuICAgKiBPdGhlcndpc2Ugd2UgY2FuJ3QgdW5iaW5kIGZyb20gdGhlc2UgZXZlbnRzIGxhdGVyIGJlY2F1c2UgdGhlXG4gICAqIGZ1bmN0aW9uIHNpZ25hdHVyZXMgd29uJ3QgbWF0Y2guXG4gICAqL1xuXG5cbiAgRGF0ZVNlbGVjdC5wcm90b3R5cGUuX2JpbmRFdmVudExpc3RlbmVyQ2FsbGJhY2tzID0gZnVuY3Rpb24gX2JpbmRFdmVudExpc3RlbmVyQ2FsbGJhY2tzKCkge1xuICAgIHRoaXMuX29uU2VsZWN0Q2hhbmdlQm91bmQgPSB0aGlzLl9vblNlbGVjdENoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uU2VsZWN0Rm9jdXNCb3VuZCA9IHRoaXMuX29uU2VsZWN0Rm9jdXMuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vblNlbGVjdEJsdXJCb3VuZCA9IHRoaXMuX29uU2VsZWN0Qmx1ci5iaW5kKHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSBzZWxlY3QgY2hhbmdlcywgcnVuIHRoZSBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtTdHJpbmd9IHZhbCBUaGUgdmFsdWUgb2YgdGhlIGlucHV0XG4gICAqL1xuXG5cbiAgRGF0ZVNlbGVjdC5wcm90b3R5cGUuX29uU2VsZWN0Q2hhbmdlID0gZnVuY3Rpb24gX29uU2VsZWN0Q2hhbmdlKHZhbCkge1xuICAgICh0aGlzLm9uQ2hhbmdlIHx8IG5vb3ApKHZhbCwgdGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIHNlbGVjdCBjaGFuZ2VzLCBydW4gdGhlIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsIFRoZSB2YWx1ZSBvZiB0aGUgaW5wdXRcbiAgICovXG5cblxuICBEYXRlU2VsZWN0LnByb3RvdHlwZS5fb25TZWxlY3RGb2N1cyA9IGZ1bmN0aW9uIF9vblNlbGVjdEZvY3VzKHZhbCkge1xuICAgICh0aGlzLm9uRm9jdXMgfHwgbm9vcCkodmFsLCB0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogV2hlbiB0aGUgc2VsZWN0IGNoYW5nZXMsIHJ1biB0aGUgY2FsbGJhY2suXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB2YWwgVGhlIHZhbHVlIG9mIHRoZSBpbnB1dFxuICAgKi9cblxuXG4gIERhdGVTZWxlY3QucHJvdG90eXBlLl9vblNlbGVjdEJsdXIgPSBmdW5jdGlvbiBfb25TZWxlY3RCbHVyKHZhbCkge1xuICAgICh0aGlzLm9uQmx1ciB8fCBub29wKSh2YWwsIHRoaXMpO1xuICB9O1xuXG4gIHJldHVybiBEYXRlU2VsZWN0O1xufShfYmFzZTIuZGVmYXVsdCk7XG5cbi8qKlxuICogV2hpdGVsaXN0ZWQgcGFyYW1ldGVycyB3aGljaCBjYW4gYmUgc2V0IG9uIGNvbnN0cnVjdGlvbi5cbiAqIEB0eXBlIHtBcnJheX1cbiAqL1xuXG5cbkRhdGVTZWxlY3QucHJvdG90eXBlLl93aGl0ZWxpc3RlZFBhcmFtcyA9IFsndHlwZScsICdtb250aE5hbWVzJywgJ251bWVyaWNNb250aCcsICdtaW4nLCAnbWF4JywgJ29uQ2hhbmdlJywgJ29uRm9jdXMnLCAnb25CbHVyJ107XG5cbi8qKlxuICogRGVmYXVsdCB2YWx1ZXMgZm9yIGludGVybmFsIHByb3BlcnRpZXMgd2Ugd2lsbCBiZSBzZXR0aW5nLlxuICogVGhlc2UgYXJlIHNldCBvbiBlYWNoIGNvbnN0cnVjdGlvbiBzbyB3ZSBkb24ndCBsZWFrIHByb3BlcnRpZXNcbiAqIGludG8gdGhlIHByb3RvdHlwZSBjaGFpbi5cbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbkRhdGVTZWxlY3QucHJvdG90eXBlLmRlZmF1bHRzID0ge1xuICBlbDogbnVsbCxcbiAgc2VsZWN0RWw6IG51bGwsXG4gIHR5cGU6IG51bGwsXG4gIG1vbnRoTmFtZXM6IG51bGwsXG4gIG1pbjogbnVsbCxcbiAgbWF4OiBudWxsLFxuICBzZWxlY3Q6IG51bGwsXG4gIG51bWVyaWNNb250aDogbnVsbCxcbiAgb25DaGFuZ2U6IG51bGwsXG4gIG9uRm9jdXM6IG51bGwsXG4gIG9uQmx1cjogbnVsbCxcbiAgX29uQ2hhbmdlQm91bmQ6IG51bGwsXG4gIF9vbkZvY3VzQm91bmQ6IG51bGwsXG4gIF9vbkJsdXJCb3VuZDogbnVsbFxufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gRGF0ZVNlbGVjdDtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0ZS1zZWxlY3QuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfYmFzZSA9IHJlcXVpcmUoJy4vYmFzZScpO1xuXG52YXIgX2Jhc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYmFzZSk7XG5cbnZhciBfdHlwZWFoZWFkID0gcmVxdWlyZSgnLi90eXBlYWhlYWQnKTtcblxudmFyIF90eXBlYWhlYWQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHlwZWFoZWFkKTtcblxudmFyIF9wYXJzZUF0dHJpYnV0ZSA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvZG9tL3BhcnNlLWF0dHJpYnV0ZScpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9IC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogIyBEYXRlVHlwZWFoZWFkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBMaXN0ZW4gdG8gYW4gaW5wdXQgZWxlbWVudCBhbmQgZm9ybWF0IGl0IGFzIHRoZSB1c2VyIHR5cGVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBuZXcgRGF0ZVR5cGVhaGVhZChlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQG1vZHVsZSBjb21wb25lbnRzL2RhdGUtdHlwZWFoZWFkLmpzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cblxuXG52YXIgbm9vcCA9IGZ1bmN0aW9uIG5vb3AoKSB7fTtcblxuZnVuY3Rpb24gY3JlYXRlRGVmYXVsdEVsZW1lbnQoKSB7XG4gIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgZWwuY2xhc3NOYW1lID0gJ3NwYXJrLWlucHV0JztcbiAgcmV0dXJuIGVsO1xufVxuXG52YXIgRGF0ZVR5cGVhaGVhZCA9IGZ1bmN0aW9uIChfQmFzZUNvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoRGF0ZVR5cGVhaGVhZCwgX0Jhc2VDb21wb25lbnQpO1xuXG4gIC8qKlxuICAgKiBEYXRlVHlwZWFoZWFkIGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWwgT3B0aW9uYWxcbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyBPcHRpb25hbFxuICAgKi9cbiAgZnVuY3Rpb24gRGF0ZVR5cGVhaGVhZChlbCkge1xuICAgIHZhciBwYXJhbXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERhdGVUeXBlYWhlYWQpO1xuXG4gICAgLy8gSWYgb25seSBvbmUgYXJnIHBhc3NlZCwgYXNzdW1lIGl0IHdhcyBhIHBhcmFtZXRlcnNcbiAgICAvLyBvYmplY3Qgc2luY2UgdGhlIHVzZXIgTVVTVCBwcm92aWRlIHRob3NlIGJ1dCB0aGUgZWxlbWVudFxuICAgIC8vIGlzIG9wdGlvbmFsLiBEb2luZyBpdCB0aGlzIHdheSB0byBrZWVwIHRoZSBhcml0eSB0aGUgc2FtZVxuICAgIC8vIGFzIG90aGVyIGNvbXBvbmVudHMuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgICBwYXJhbXMgPSBlbCB8fCB7fTtcbiAgICAgIGVsID0gY3JlYXRlRGVmYXVsdEVsZW1lbnQoKTtcbiAgICB9XG5cbiAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfQmFzZUNvbXBvbmVudC5jYWxsKHRoaXMsIGVsLCBwYXJhbXMpKTtcblxuICAgIF90aGlzLl9iaW5kRXZlbnRMaXN0ZW5lckNhbGxiYWNrcygpO1xuICAgIF90aGlzLl9jcmVhdGVUeXBlYWhlYWQoZWwsIHBhcmFtcyk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUuXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gYXNJbnQgR2V0IHRoZSB2YWx1ZSBhcyBhIHBhcnNlZCBpbnRlZ2VyLlxuICAgKiBAcmV0dXJuIHtNaXhlZH1cbiAgICovXG5cblxuICBEYXRlVHlwZWFoZWFkLnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uIGdldFZhbHVlKGFzSW50KSB7XG4gICAgcmV0dXJuIHRoaXMudHlwZWFoZWFkLmdldFZhbHVlKGFzSW50KTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSB2YWx1ZS5cbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsXG4gICAqL1xuXG5cbiAgRGF0ZVR5cGVhaGVhZC5wcm90b3R5cGUuc2V0VmFsdWUgPSBmdW5jdGlvbiBzZXRWYWx1ZSh2YWwpIHtcbiAgICByZXR1cm4gdGhpcy50eXBlYWhlYWQuc2V0VmFsdWUodmFsKTtcbiAgfTtcblxuICAvKipcbiAgICogQ2xlYXIgdGhlIHZhbHVlLlxuICAgKi9cblxuXG4gIERhdGVUeXBlYWhlYWQucHJvdG90eXBlLmNsZWFyVmFsdWUgPSBmdW5jdGlvbiBjbGVhclZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLnR5cGVhaGVhZC5jbGVhclZhbHVlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEVuYWJsZSB0aGUgaW5wdXQuXG4gICAqL1xuXG5cbiAgRGF0ZVR5cGVhaGVhZC5wcm90b3R5cGUuZW5hYmxlID0gZnVuY3Rpb24gZW5hYmxlKCkge1xuICAgIHJldHVybiB0aGlzLnR5cGVhaGVhZC5lbmFibGUoKTtcbiAgfTtcblxuICAvKipcbiAgICogRGlzYWJsZSB0aGUgaW5wdXQuXG4gICAqL1xuXG5cbiAgRGF0ZVR5cGVhaGVhZC5wcm90b3R5cGUuZGlzYWJsZSA9IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgcmV0dXJuIHRoaXMudHlwZWFoZWFkLmRpc2FibGUoKTtcbiAgfTtcblxuICAvKipcbiAgICogUnVuIHRoZSB0eXBlYWhlYWQgY2FsY3VsYXRpb25zLlxuICAgKi9cblxuXG4gIERhdGVUeXBlYWhlYWQucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uIHJ1bigpIHtcbiAgICByZXR1cm4gdGhpcy50eXBlYWhlYWQucnVuKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFBhdXNlIHRoZSB0eXBlYWhlYWQgZXZlbnRzLlxuICAgKi9cblxuXG4gIERhdGVUeXBlYWhlYWQucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgcmV0dXJuIHRoaXMudHlwZWFoZWFkLnBhdXNlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlc2V1bWUgdHlwZWFoZWFkIGV2ZW50cy5cbiAgICovXG5cblxuICBEYXRlVHlwZWFoZWFkLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiByZXN1bWUoKSB7XG4gICAgcmV0dXJuIHRoaXMudHlwZWFoZWFkLnJlc3VtZSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBdWdtZW50IGRlZmF1bHQgcmVtb3ZlIGNhbGwgdy8gaGVscGVyIGNsZWFudXAuXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gbGVhdmVFbGVtZW50IExlYXZlIHRoZSBlbGVtZW50IGludGFjdC5cbiAgICovXG5cblxuICBEYXRlVHlwZWFoZWFkLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUobGVhdmVFbGVtZW50KSB7XG4gICAgdGhpcy50eXBlYWhlYWQucmVtb3ZlKGxlYXZlRWxlbWVudCk7XG4gICAgX0Jhc2VDb21wb25lbnQucHJvdG90eXBlLnJlbW92ZS5jYWxsKHRoaXMsIGxlYXZlRWxlbWVudCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIENhY2hlIGVsZW1lbnRzLlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqL1xuXG5cbiAgRGF0ZVR5cGVhaGVhZC5wcm90b3R5cGUuX2NhY2hlRWxlbWVudHMgPSBmdW5jdGlvbiBfY2FjaGVFbGVtZW50cyhlbCkge1xuICAgIHRoaXMuZWwgPSBlbDtcbiAgfTtcblxuICAvKipcbiAgICogUGFyc2UgcGFyYW1ldGVycyBmcm9tIHRoZSBlbGVtZW50cy5cbiAgICovXG5cblxuICBEYXRlVHlwZWFoZWFkLnByb3RvdHlwZS5fcGFyc2VQYXJhbXMgPSBmdW5jdGlvbiBfcGFyc2VQYXJhbXMoKSB7XG5cbiAgICB0aGlzLnR5cGUgPSB0aGlzLnR5cGUgIT09IG51bGwgPyB0aGlzLnR5cGUgOiAoMCwgX3BhcnNlQXR0cmlidXRlLnN0cmluZykodGhpcy5lbCwgJ2RhdGEtdHlwZScsICdkYXknKTtcbiAgICB0aGlzLmZvcm1hdCA9IHRoaXMuZm9ybWF0ICE9PSBudWxsID8gdGhpcy5mb3JtYXQgOiAoMCwgX3BhcnNlQXR0cmlidXRlLnN0cmluZykodGhpcy5lbCwgJ2RhdGEtZm9ybWF0JywgbnVsbCk7XG4gICAgdGhpcy5wbGFjZWhvbGRlciA9IHRoaXMucGxhY2Vob2xkZXIgIT09IG51bGwgPyB0aGlzLnBsYWNlaG9sZGVyIDogKDAsIF9wYXJzZUF0dHJpYnV0ZS5zdHJpbmcpKHRoaXMuZWwsICdkYXRhLXBsYWNlaG9sZGVyJywgbnVsbCk7XG4gICAgdGhpcy5sZW4gPSB0aGlzLmxlbiAhPT0gbnVsbCA/IHRoaXMubGVuIDogKDAsIF9wYXJzZUF0dHJpYnV0ZS5udW1iZXIpKHRoaXMuZWwsICdsZW5ndGgnLCBudWxsKTtcblxuICAgIGlmICghdGhpcy5wbGFjZWhvbGRlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbXVzdCBwcm92aWRlIGEgcGxhY2Vob2xkZXIgdmFsdWUgZm9yIGEgRGF0ZVR5cGVhaGVhZC4nKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5sZW4gIT09IG51bGwpIHtcbiAgICAgIHRoaXMuZm9ybWF0ID0gdGhpcy5fbGVuZ3RoVG9Gb3JtYXQodGhpcy5sZW4pO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5mb3JtYXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignWW91IG11c3QgcHJvdmlkZSBhIGZvcm1hdCB2YWx1ZSBmb3IgYSBEYXRlVHlwZWFoZWFkLicpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlIGEgdHlwZWFoZWFkIHdpdGggdGhlIGdpdmVuIGZvcm1hdC5cbiAgICogQHBhcmFtIHtPYmplY3R9IGVsXG4gICAqL1xuXG5cbiAgRGF0ZVR5cGVhaGVhZC5wcm90b3R5cGUuX2NyZWF0ZVR5cGVhaGVhZCA9IGZ1bmN0aW9uIF9jcmVhdGVUeXBlYWhlYWQoZWwpIHtcblxuICAgIHRoaXMudHlwZWFoZWFkID0gbmV3IF90eXBlYWhlYWQyLmRlZmF1bHQoZWwsIHtcbiAgICAgIHBsYWNlaG9sZGVyOiB0aGlzLnBsYWNlaG9sZGVyLFxuICAgICAgZm9ybWF0OiB0aGlzLmZvcm1hdCxcbiAgICAgIG1hdGNoUGxhY2Vob2xkZXJTaXplOiB0cnVlLFxuICAgICAgb25DaGFuZ2U6IHRoaXMuX29uVHlwZWFoZWFkQ2hhbmdlQm91bmQsXG4gICAgICBvbklucHV0OiB0aGlzLl9vblR5cGVhaGVhZElucHV0Qm91bmQsXG4gICAgICBvbkZvY3VzOiB0aGlzLl9vblR5cGVhaGVhZEZvY3VzQm91bmQsXG4gICAgICBvbkJsdXI6IHRoaXMuX29uVHlwZWFoZWFkQmx1ckJvdW5kLFxuICAgICAgb25CYWNrc3BhY2U6IHRoaXMuX29uVHlwZWFoZWFkQmFja3NwYWNlQm91bmQsXG4gICAgICBvbkVuZDogdGhpcy5fb25UeXBlYWhlYWRFbmRCb3VuZFxuICAgIH0pO1xuXG4gICAgLy8gRW5zdXJlIHdlIGhhdmUgYW4gQVJJQSBsYWJlbFxuICAgIHZhciBpbnB1dCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7XG4gICAgaWYgKGlucHV0ICYmICFpbnB1dC5nZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKSkge1xuICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgdGhpcy50eXBlKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBib3VuZCB2ZXJzaW9ucyBvZiBldmVudCBsaXN0ZW5lciBjYWxsYmFja3MgYW5kIHN0b3JlIHRoZW0uXG4gICAqIE90aGVyd2lzZSB3ZSBjYW4ndCB1bmJpbmQgZnJvbSB0aGVzZSBldmVudHMgbGF0ZXIgYmVjYXVzZSB0aGVcbiAgICogZnVuY3Rpb24gc2lnbmF0dXJlcyB3b24ndCBtYXRjaC5cbiAgICovXG5cblxuICBEYXRlVHlwZWFoZWFkLnByb3RvdHlwZS5fYmluZEV2ZW50TGlzdGVuZXJDYWxsYmFja3MgPSBmdW5jdGlvbiBfYmluZEV2ZW50TGlzdGVuZXJDYWxsYmFja3MoKSB7XG4gICAgdGhpcy5fb25UeXBlYWhlYWRDaGFuZ2VCb3VuZCA9IHRoaXMuX29uVHlwZWFoZWFkQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25UeXBlYWhlYWRJbnB1dEJvdW5kID0gdGhpcy5fb25UeXBlYWhlYWRJbnB1dC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uVHlwZWFoZWFkRm9jdXNCb3VuZCA9IHRoaXMuX29uVHlwZWFoZWFkRm9jdXMuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vblR5cGVhaGVhZEJsdXJCb3VuZCA9IHRoaXMuX29uVHlwZWFoZWFkQmx1ci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uVHlwZWFoZWFkQmFja3NwYWNlQm91bmQgPSB0aGlzLl9vblR5cGVhaGVhZEJhY2tzcGFjZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uVHlwZWFoZWFkRW5kQm91bmQgPSB0aGlzLl9vblR5cGVhaGVhZEVuZC5iaW5kKHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUYWtlIGEgbGVuZ3RoIGFuZCByZXR1cm4gYSBmb3JtYXQgc3RyaW5nIHdpdGggdGhhdCBtYW55IGRpZ2l0cy5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGxlbmd0aFxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuXG5cbiAgRGF0ZVR5cGVhaGVhZC5wcm90b3R5cGUuX2xlbmd0aFRvRm9ybWF0ID0gZnVuY3Rpb24gX2xlbmd0aFRvRm9ybWF0KGxlbmd0aCkge1xuXG4gICAgdmFyIGkgPSAwO1xuICAgIHZhciByZXQgPSAnJztcblxuICAgIGZvciAoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHJldCArPSAnXFxcXGQnO1xuICAgIH1cblxuICAgIHJldHVybiByZXQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIENoZWNrIHRvIHNlZSBpZiBhbiBpbnB1dCB2YWx1ZSBpcyB2YWxpZC5cbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gYWxsb3dFbXB0eSBBbGwgdGhlIHZhbHVlIHRvIGJlIGVtcHR5IGluc3RlYWQgb2YgMC5cbiAgICovXG5cblxuICBEYXRlVHlwZWFoZWFkLnByb3RvdHlwZS5fY2hlY2tWYWxpZGl0eSA9IGZ1bmN0aW9uIF9jaGVja1ZhbGlkaXR5KHZhbCwgYWxsb3dFbXB0eSkge1xuXG4gICAgdmFsID0gcGFyc2VJbnQodmFsLCAxMCk7XG5cbiAgICB2YXIgb3JpZ1ZhbCA9IHZhbDtcbiAgICB2YXIgaXNOdW1iZXIgPSAhaXNOYU4odmFsKTtcblxuICAgIC8vIElmIHdlIHdlcmUgcGFzc2VkIGFuIGVtcHR5IHN0cmluZyBvciBzb21ldGhpbmcsIGRvbid0IHRyeSB0byB2YWxpZGF0ZS5cbiAgICAvLyBUcmVhdCB6ZXJvcyBhcyBhIG5vbi1lbnRyeSBmb3IgZGF5cyBhbmQgbW9udGhzLlxuICAgIGlmIChpc051bWJlcikge1xuXG4gICAgICBpZiAodGhpcy50eXBlID09PSAneWVhcicpIHtcbiAgICAgICAgdmFsID0gdmFsID09PSAwID8gYWxsb3dFbXB0eSA/ICcnIDogMCA6IE1hdGgubWF4KHZhbCwgMCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gJ21vbnRoJykge1xuICAgICAgICB2YWwgPSB2YWwgPyBNYXRoLm1pbihNYXRoLm1heCh2YWwsIDEpLCAxMikgOiBhbGxvd0VtcHR5ID8gJycgOiAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsID0gdmFsID8gTWF0aC5taW4oTWF0aC5tYXgodmFsLCAxKSwgMzEpIDogYWxsb3dFbXB0eSA/ICcnIDogMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBOZWVkIHRvIG1ha2Ugc3VyZSB3ZSBhcmVuJ3QgbG9vcGluZyBmb3JldmVyIG9uIHRoZXNlIHVwZGF0ZXMuXG4gICAgaWYgKGlzTnVtYmVyICYmIHZhbCAhPT0gb3JpZ1ZhbCkge1xuICAgICAgdGhpcy50eXBlYWhlYWQuc2V0VmFsdWUodmFsICsgJycpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSB0eXBlYWhlYWQgY2hhbmdlcywgbWFrZSBzdXJlIHRoZSB2YWx1ZSBpcyB2YWxpZC4gVGhpc1xuICAgKiBpcyB2ZXJ5IGJhc2ljIHZhbGlkYXRpb24uIE1vcmUgY29tcGxleCB2YWxpZGF0aW9uIGxpa2UgdGhlIG51bWJlclxuICAgKiBvZiBkYXlzIGluIGEgc3BlY2lmaWMgbW9udGggc2hvdWxkIGJlIGhhbmRsZWQgYnkgdGhlIGNhbGxiYWNrLlxuICAgKiBBbmQgcnVuIG91ciBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtTdHJpbmd9IHZhbCBUaGUgdmFsdWUgb2YgdGhlIGlucHV0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBvbGRWYWwgVGhlIHByZXZpb3VzIHZhbHVlXG4gICAqL1xuXG5cbiAgRGF0ZVR5cGVhaGVhZC5wcm90b3R5cGUuX29uVHlwZWFoZWFkQ2hhbmdlID0gZnVuY3Rpb24gX29uVHlwZWFoZWFkQ2hhbmdlKHZhbCkge1xuICAgIGlmICh0aGlzLl9jaGVja1ZhbGlkaXR5KHZhbCkpIHtcbiAgICAgICh0aGlzLm9uQ2hhbmdlIHx8IG5vb3ApKHZhbCwgdGhpcyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmb3IgYGlucHV0YCBldmVudFxuICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsIFRoZSB2YWx1ZSBvZiB0aGUgaW5wdXRcbiAgICogQHBhcmFtIHtTdHJpbmd9IG9sZFZhbCBUaGUgcHJldmlvdXMgdmFsdWVcbiAgICpcbiAgICovXG5cblxuICBEYXRlVHlwZWFoZWFkLnByb3RvdHlwZS5fb25UeXBlYWhlYWRJbnB1dCA9IGZ1bmN0aW9uIF9vblR5cGVhaGVhZElucHV0KHZhbCkge1xuICAgICh0aGlzLm9uSW5wdXQgfHwgbm9vcCkodmFsLCB0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogV2hlbiB0aGUgdHlwZWFoZWFkIGdhaW5zIGZvY3VzLCBsZXQgYW55b25lIHdobyBpcyBpbnRlcmVzdGVkIGtub3cuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB2YWxcbiAgICovXG5cblxuICBEYXRlVHlwZWFoZWFkLnByb3RvdHlwZS5fb25UeXBlYWhlYWRGb2N1cyA9IGZ1bmN0aW9uIF9vblR5cGVhaGVhZEZvY3VzKHZhbCkge1xuICAgICh0aGlzLm9uRm9jdXMgfHwgbm9vcCkodmFsLCB0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogV2hlbiB0aGUgdHlwZWFoZWFkIGxvc2VzIGZvY3VzLCBsZXQgYW55b25lIHdobyBpcyBpbnRlcmVzdGVkIGtub3cuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB2YWxcbiAgICovXG5cblxuICBEYXRlVHlwZWFoZWFkLnByb3RvdHlwZS5fb25UeXBlYWhlYWRCbHVyID0gZnVuY3Rpb24gX29uVHlwZWFoZWFkQmx1cih2YWwpIHtcbiAgICB0aGlzLl9jaGVja1ZhbGlkaXR5KHZhbCwgdHJ1ZSk7XG4gICAgKHRoaXMub25CbHVyIHx8IG5vb3ApKHZhbCwgdGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIHR5cGVhaGVhZCBmaXJlcyBhIGJhY2tzcGFjZSBldmVudCBiZWNhdXNlIGl0J3MgZW1wdHkgYW5kXG4gICAqIHRoZSB1c2VyIGlzIGhpdHRpbmcgYmFja3NwYWNlLCBsZXQgYW55b25lIHdobyBpcyBpbnRlcmVzdGVkIGtub3cuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB2YWxcbiAgICovXG5cblxuICBEYXRlVHlwZWFoZWFkLnByb3RvdHlwZS5fb25UeXBlYWhlYWRCYWNrc3BhY2UgPSBmdW5jdGlvbiBfb25UeXBlYWhlYWRCYWNrc3BhY2UodmFsKSB7XG4gICAgKHRoaXMub25CYWNrc3BhY2UgfHwgbm9vcCkodmFsLCB0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogV2hlbiB0aGUgdHlwZWFoZWFkIGlzIGZ1bGwgYW5kIGF0IGl0cyBlbmQsIGxldCBhbnlvbmUgd2hvIGlzIGludGVyZXN0ZWQga25vdy5cbiAgICogQHBhcmFtIHtPYmplY3R9IHR5cGVhaGVhZFxuICAgKiBAcGFyYW0ge1N0cmluZ30gY2hhcmFjdGVyIE9wdGlvbmFsIFRoZSBjaGFyYWN0ZXIgdG8gcGFzcyB0byB0aGUgbmV4dCBpbnB1dC5cbiAgICovXG5cblxuICBEYXRlVHlwZWFoZWFkLnByb3RvdHlwZS5fb25UeXBlYWhlYWRFbmQgPSBmdW5jdGlvbiBfb25UeXBlYWhlYWRFbmQodHlwZWFoZWFkLCBjaGFyYWN0ZXIpIHtcbiAgICAodGhpcy5vbkVuZCB8fCBub29wKSh0aGlzLCBjaGFyYWN0ZXIpO1xuICB9O1xuXG4gIHJldHVybiBEYXRlVHlwZWFoZWFkO1xufShfYmFzZTIuZGVmYXVsdCk7XG5cbi8qKlxuICogV2hpdGVsaXN0ZWQgcGFyYW1ldGVycyB3aGljaCBjYW4gYmUgc2V0IG9uIGNvbnN0cnVjdGlvbi5cbiAqIEB0eXBlIHtBcnJheX1cbiAqL1xuXG5cbkRhdGVUeXBlYWhlYWQucHJvdG90eXBlLl93aGl0ZWxpc3RlZFBhcmFtcyA9IFsndHlwZScsICdmb3JtYXQnLCAncGxhY2Vob2xkZXInLCAnbGVuJywgJ29uQ2hhbmdlJywgJ29uSW5wdXQnLCAnb25Gb2N1cycsICdvbkJsdXInLCAnb25CYWNrc3BhY2UnLCAnb25FbmQnXTtcblxuLyoqXG4gKiBEZWZhdWx0IHZhbHVlcyBmb3IgaW50ZXJuYWwgcHJvcGVydGllcyB3ZSB3aWxsIGJlIHNldHRpbmcuXG4gKiBUaGVzZSBhcmUgc2V0IG9uIGVhY2ggY29uc3RydWN0aW9uIHNvIHdlIGRvbid0IGxlYWsgcHJvcGVydGllc1xuICogaW50byB0aGUgcHJvdG90eXBlIGNoYWluLlxuICogQHR5cGUge09iamVjdH1cbiAqL1xuRGF0ZVR5cGVhaGVhZC5wcm90b3R5cGUuZGVmYXVsdHMgPSB7XG4gIGVsOiBudWxsLFxuICB0eXBlOiBudWxsLFxuICB0eXBlYWhlYWQ6IG51bGwsXG4gIGZvcm1hdDogbnVsbCxcbiAgcGxhY2Vob2xkZXI6IG51bGwsXG4gIGxlbjogbnVsbCxcbiAgb25DaGFuZ2U6IG51bGwsXG4gIG9uSW5wdXQ6IG51bGwsXG4gIG9uRm9jdXM6IG51bGwsXG4gIG9uQmx1cjogbnVsbCxcbiAgb25CYWNrc3BhY2U6IG51bGwsXG4gIG9uRW5kOiBudWxsLFxuICBfb25UeXBlYWhlYWRDaGFuZ2VCb3VuZDogbnVsbCxcbiAgX29uVHlwZWFoZWFkSW5wdXRCb3VuZDogbnVsbCxcbiAgX29uVHlwZWFoZWFkRm9jdXNCb3VuZDogbnVsbCxcbiAgX29uVHlwZWFoZWFkQmx1ckJvdW5kOiBudWxsLFxuICBfb25UeXBlYWhlYWRCYWNrc3BhY2VCb3VuZDogbnVsbCxcbiAgX29uVHlwZWFoZWFkRW5kQm91bmQ6IG51bGxcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IERhdGVUeXBlYWhlYWQ7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGUtdHlwZWFoZWFkLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2Jhc2UgPSByZXF1aXJlKCcuL2Jhc2UnKTtcblxudmFyIF9iYXNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Jhc2UpO1xuXG52YXIgX3RvZ2dsZUNsYXNzID0gcmVxdWlyZSgnLi4vaGVscGVycy9kb20vdG9nZ2xlLWNsYXNzJyk7XG5cbnZhciBfdG9nZ2xlQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdG9nZ2xlQ2xhc3MpO1xuXG52YXIgX21peGluID0gcmVxdWlyZSgnLi4vaGVscGVycy91dGlsL21peGluJyk7XG5cbnZhciBfbWl4aW4yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWl4aW4pO1xuXG52YXIgX21lc3NhZ2luZyA9IHJlcXVpcmUoJy4uL21peGlucy9tZXNzYWdpbmcnKTtcblxudmFyIF9tZXNzYWdpbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWVzc2FnaW5nKTtcblxudmFyIF92YWxpZGF0aW9uID0gcmVxdWlyZSgnLi4vbWl4aW5zL3ZhbGlkYXRpb24nKTtcblxudmFyIF92YWxpZGF0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRpb24pO1xuXG52YXIgX21ha2VFbGVtZW50ID0gcmVxdWlyZSgnLi4vaGVscGVycy9kb20vbWFrZS1lbGVtZW50Jyk7XG5cbnZhciBfbWFrZUVsZW1lbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWFrZUVsZW1lbnQpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9IC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogIyBTZWxlY3RJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQSBzZWxlY3QgaW5wdXQgY29udGFpbmVyLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBuZXcgU2VsZWN0SW5wdXQoZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBtb2R1bGUgY29tcG9uZW50cy9zZWxlY3QtaW5wdXQuanNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuXG5cbnZhciBub29wID0gZnVuY3Rpb24gbm9vcCgpIHt9O1xuXG52YXIgU2VsZWN0SW5wdXQgPSBmdW5jdGlvbiAoX0Jhc2VDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFNlbGVjdElucHV0LCBfQmFzZUNvbXBvbmVudCk7XG5cbiAgLyoqXG4gICAqIFNlbGVjdElucHV0IGNvbnN0cnVjdG9yLlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXNcbiAgICovXG4gIGZ1bmN0aW9uIFNlbGVjdElucHV0KGVsKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2VsZWN0SW5wdXQpO1xuXG4gICAgcGFyYW1zLmVsUmVxdWlyZWQgPSB0cnVlO1xuXG4gICAgaWYgKCEoX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfQmFzZUNvbXBvbmVudC5jYWxsKHRoaXMsIGVsLCBwYXJhbXMpKSwgX3RoaXMpKSB7XG4gICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMpO1xuICAgIH1cblxuICAgIF90aGlzLl9iaW5kRXZlbnRMaXN0ZW5lckNhbGxiYWNrcygpO1xuICAgIF90aGlzLl9hZGRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZS5cbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cblxuXG4gIFNlbGVjdElucHV0LnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uIGdldFZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLnNlbGVjdEVsLnZhbHVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHZhbHVlLlxuICAgKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IHZhbFxuICAgKi9cblxuXG4gIFNlbGVjdElucHV0LnByb3RvdHlwZS5zZXRWYWx1ZSA9IGZ1bmN0aW9uIHNldFZhbHVlKHZhbCkge1xuXG4gICAgLy8gQ2FzdCB0byBhIHN0cmluZyBmb3IgY29tcGFyaXNvblxuICAgIHZhbCA9IHZhbCArICcnO1xuXG4gICAgdmFyIGkgPSAwO1xuICAgIHZhciBsZW4gPSB0aGlzLnNlbGVjdEVsLmNoaWxkcmVuLmxlbmd0aDtcblxuICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLnNlbGVjdEVsLmNoaWxkcmVuW2ldLnZhbHVlID09PSB2YWwpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RFbC5jaGlsZHJlbltpXS5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUNsYXNzKCk7XG4gICAgICAgICh0aGlzLm9uQ2hhbmdlIHx8IG5vb3ApKHZhbCwgdGhpcyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDbGVhciB0aGUgc2VsZWN0ZWQgdmFsdWUuXG4gICAqL1xuXG5cbiAgU2VsZWN0SW5wdXQucHJvdG90eXBlLmNsZWFyVmFsdWUgPSBmdW5jdGlvbiBjbGVhclZhbHVlKCkge1xuXG4gICAgdmFyIGkgPSAwO1xuICAgIHZhciBsZW4gPSB0aGlzLnNlbGVjdEVsLmNoaWxkcmVuLmxlbmd0aDtcblxuICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLnNlbGVjdEVsLmNoaWxkcmVuW2ldLnNlbGVjdGVkID09PSB0cnVlKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0RWwuY2hpbGRyZW5baV0uc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fdXBkYXRlQ2xhc3MoKTtcbiAgICAgICAgKHRoaXMub25DaGFuZ2UgfHwgbm9vcCkoJycsIHRoaXMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBvcHRpb25zLlxuICAgKiBAcGFyYW0ge0FycmF5fSBvcHRzXG4gICAqL1xuXG5cbiAgU2VsZWN0SW5wdXQucHJvdG90eXBlLnNldE9wdGlvbnMgPSBmdW5jdGlvbiBzZXRPcHRpb25zKG9wdHMpIHtcblxuICAgIHZhciBpID0gMDtcbiAgICB2YXIgbGVuID0gb3B0cy5sZW5ndGg7XG4gICAgdmFyIHN0ciA9ICcnO1xuXG4gICAgLy8gU3RvcmUgdGhlIGluZGV4IG9mIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgb3B0aW9uIHNvIHdlIGNhbiBzZXRcbiAgICAvLyBpdCB3aGVuIHdlJ3JlIGFsbCBkb25lLlxuICAgIHZhciBjdXJJbmRleCA9IHRoaXMuc2VsZWN0RWwuc2VsZWN0ZWRJbmRleDtcblxuICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHN0ciArPSAnPG9wdGlvbiAnICsgKG9wdHNbaV0udmFsdWUgIT09IHVuZGVmaW5lZCA/ICd2YWx1ZT1cIicgKyAob3B0c1tpXS52YWx1ZSB8fCAnJykgKyAnXCInIDogJycpICsgJz4nICsgKG9wdHNbaV0udGV4dCB8fCAnJykgKyAnPC9vcHRpb24+JztcbiAgICB9XG5cbiAgICB0aGlzLnNlbGVjdEVsLmlubmVySFRNTCA9IHN0cjtcbiAgICB0aGlzLnNlbGVjdEVsLnNlbGVjdGVkSW5kZXggPSBNYXRoLm1pbihsZW4gLSAxLCBjdXJJbmRleCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSB2YWx1ZSBvZiB0aGUgbGFiZWwuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG4gICAqL1xuXG5cbiAgU2VsZWN0SW5wdXQucHJvdG90eXBlLnNldExhYmVsID0gZnVuY3Rpb24gc2V0TGFiZWwodGV4dCkge1xuICAgIGlmICghdGhpcy5sYWJlbEVsKSByZXR1cm4gdGhpcztcbiAgICB0aGlzLmxhYmVsRWwuaW5uZXJIVE1MID0gdGV4dDtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogRGlzYWJsZSBlbnRyeSBpbnRvIHRoZSBpbnB1dC5cbiAgICovXG5cblxuICBTZWxlY3RJbnB1dC5wcm90b3R5cGUuZGlzYWJsZSA9IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgdGhpcy5zZWxlY3RFbC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJycpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBFbmFibGUgZW50cnkgaW50byB0aGUgaW5wdXQuXG4gICAqL1xuXG5cbiAgU2VsZWN0SW5wdXQucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uIGVuYWJsZSgpIHtcbiAgICB0aGlzLnNlbGVjdEVsLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogU3RvcmUgYSByZWZlcmVuY2UgdG8gdGhlIG5lZWRlZCBlbGVtZW50cy5cbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKi9cblxuXG4gIFNlbGVjdElucHV0LnByb3RvdHlwZS5fY2FjaGVFbGVtZW50cyA9IGZ1bmN0aW9uIF9jYWNoZUVsZW1lbnRzKGVsKSB7XG5cbiAgICB0aGlzLmVsID0gZWw7XG4gICAgdGhpcy5zZWxlY3RFbCA9IHRoaXMuZWwucXVlcnlTZWxlY3Rvcignc2VsZWN0Jyk7XG4gICAgdGhpcy5sYWJlbEVsID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcuc3BhcmstbGFiZWwnKTtcblxuICAgIHRoaXMubWVzc2FnZUVsID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcuc3Bhcmstc2VsZWN0X19tZXNzYWdlJykgfHwgKDAsIF9tYWtlRWxlbWVudDIuZGVmYXVsdCkoJzxzcGFuIGNsYXNzPVwic3Bhcmstc2VsZWN0X19tZXNzYWdlXCI+PC9zcGFuPicpO1xuXG4gICAgaWYgKCF0aGlzLnNlbGVjdEVsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0EgPHNlbGVjdD4gZWxlbWVudCBtdXN0IGJlIHByZXNlbnQhJywgdGhpcy5lbCk7XG4gICAgfVxuXG4gICAgdGhpcy5fdXBkYXRlQ2xhc3MoKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlIGJvdW5kIHZlcnNpb25zIG9mIGV2ZW50IGxpc3RlbmVyIGNhbGxiYWNrcyBhbmQgc3RvcmUgdGhlbS5cbiAgICogT3RoZXJ3aXNlIHdlIGNhbid0IHVuYmluZCBmcm9tIHRoZXNlIGV2ZW50cyBsYXRlciBiZWNhdXNlIHRoZVxuICAgKiBmdW5jdGlvbiBzaWduYXR1cmVzIHdvbid0IG1hdGNoLlxuICAgKi9cblxuXG4gIFNlbGVjdElucHV0LnByb3RvdHlwZS5fYmluZEV2ZW50TGlzdGVuZXJDYWxsYmFja3MgPSBmdW5jdGlvbiBfYmluZEV2ZW50TGlzdGVuZXJDYWxsYmFja3MoKSB7XG4gICAgdGhpcy5fb25Gb2N1c0JvdW5kID0gdGhpcy5fb25Gb2N1cy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uQmx1ckJvdW5kID0gdGhpcy5fb25CbHVyLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25JbnB1dEJvdW5kID0gdGhpcy5fb25JbnB1dC5iaW5kKHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGQgZXZlbnQgbGlzdGVuZXJzIGZvciBmb2N1cywgYmx1ciBhbmQgaW5wdXQuXG4gICAqL1xuXG5cbiAgU2VsZWN0SW5wdXQucHJvdG90eXBlLl9hZGRFdmVudExpc3RlbmVycyA9IGZ1bmN0aW9uIF9hZGRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLnNlbGVjdEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fb25Gb2N1c0JvdW5kKTtcbiAgICB0aGlzLnNlbGVjdEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLl9vbkJsdXJCb3VuZCk7XG4gICAgdGhpcy5zZWxlY3RFbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMuX29uSW5wdXRCb3VuZCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBldmVudCBsaXN0ZW5lcnMgZm9yIGZvY3VzLCBibHVyIGFuZCBpbnB1dC5cbiAgICovXG5cblxuICBTZWxlY3RJbnB1dC5wcm90b3R5cGUuX3JlbW92ZUV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuc2VsZWN0RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl9vbkZvY3VzQm91bmQpO1xuICAgIHRoaXMuc2VsZWN0RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmx1cicsIHRoaXMuX29uQmx1ckJvdW5kKTtcbiAgICB0aGlzLnNlbGVjdEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdGhpcy5fb25JbnB1dEJvdW5kKTtcbiAgfTtcblxuICAvKipcbiAgICogVXBkYXRlIHRoZSBhY3RpdmUgY2xhc3MuXG4gICAqL1xuXG5cbiAgU2VsZWN0SW5wdXQucHJvdG90eXBlLl91cGRhdGVDbGFzcyA9IGZ1bmN0aW9uIF91cGRhdGVDbGFzcygpIHtcbiAgICB0aGlzLmhhc1ZhbHVlID0gdGhpcy5zZWxlY3RFbC52YWx1ZSA/IHRydWUgOiBmYWxzZTtcbiAgICAoMCwgX3RvZ2dsZUNsYXNzMi5kZWZhdWx0KSh0aGlzLmVsLCAnaGFzLXZhbHVlJywgdGhpcy5oYXNWYWx1ZSk7XG4gICAgKDAsIF90b2dnbGVDbGFzczIuZGVmYXVsdCkodGhpcy5lbCwgJ2FjdGl2ZScsIHRoaXMuaXNBY3RpdmUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSBpbnB1dCBlbGVtZW50IGdhaW5zIGZvY3VzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZVxuICAgKi9cblxuXG4gIFNlbGVjdElucHV0LnByb3RvdHlwZS5fb25Gb2N1cyA9IGZ1bmN0aW9uIF9vbkZvY3VzKCkge1xuICAgIHRoaXMuaXNBY3RpdmUgPSB0cnVlO1xuICAgIHRoaXMuX3VwZGF0ZUNsYXNzKCk7XG4gICAgdmFyIHZhbHVlID0gdGhpcy5nZXRWYWx1ZSgpO1xuICAgICh0aGlzLm9uRm9jdXMgfHwgbm9vcCkodmFsdWUsIHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSBpbnB1dCBlbGVtZW50IGxvc2VzIGZvY3VzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZVxuICAgKi9cblxuXG4gIFNlbGVjdElucHV0LnByb3RvdHlwZS5fb25CbHVyID0gZnVuY3Rpb24gX29uQmx1cigpIHtcbiAgICB0aGlzLmlzQWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy5fdXBkYXRlQ2xhc3MoKTtcbiAgICB2YXIgdmFsdWUgPSB0aGlzLmdldFZhbHVlKCk7XG4gICAgKHRoaXMub25CbHVyIHx8IG5vb3ApKHZhbHVlLCB0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogV2hlbiB0aGUgdmFsdWUgaXMgYWJvdXQgdG8gY2hhbmdlLCBydW4gdGhlIHZhbGlkYXRpb24sIHNldCB0aGUgY2hhcmFjdGVycyBjb3VudFxuICAgKiBhbmQgcmVzaXplIGlmIHdlJ3JlIGEgdGV4dGFyZWEuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlXG4gICAqL1xuXG5cbiAgU2VsZWN0SW5wdXQucHJvdG90eXBlLl9vbklucHV0ID0gZnVuY3Rpb24gX29uSW5wdXQoKSB7XG5cbiAgICB0aGlzLl91cGRhdGVDbGFzcygpO1xuXG4gICAgdmFyIHZhbHVlID0gdGhpcy5nZXRWYWx1ZSgpO1xuXG4gICAgaWYgKHZhbHVlICE9PSB0aGlzLnByZXZpb3VzVmFsdWUpIHtcbiAgICAgIHRoaXMucHJldmlvdXNWYWx1ZSA9IHZhbHVlO1xuICAgICAgKHRoaXMub25DaGFuZ2UgfHwgbm9vcCkodmFsdWUsIHRoaXMpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gU2VsZWN0SW5wdXQ7XG59KF9iYXNlMi5kZWZhdWx0KTtcblxuLyoqXG4gKiBXaGl0ZWxpc3RlZCBwYXJhbWV0ZXJzIHdoaWNoIGNhbiBiZSBzZXQgb24gY29uc3RydWN0aW9uLlxuICogQHR5cGUge0FycmF5fVxuICovXG5cblxuU2VsZWN0SW5wdXQucHJvdG90eXBlLl93aGl0ZWxpc3RlZFBhcmFtcyA9IFsndmFsaWRhdGUnLCAnb25WYWxpZGF0ZScsICdvbkNoYW5nZScsICdvbkZvY3VzJywgJ29uQmx1ciddO1xuXG4vKipcbiAqIERlZmF1bHQgdmFsdWVzIGZvciBpbnRlcm5hbCBwcm9wZXJ0aWVzIHdlIHdpbGwgYmUgc2V0dGluZy5cbiAqIFRoZXNlIGFyZSBzZXQgb24gZWFjaCBjb25zdHJ1Y3Rpb24gc28gd2UgZG9uJ3QgbGVhayBwcm9wZXJ0aWVzXG4gKiBpbnRvIHRoZSBwcm90b3R5cGUgY2hhaW4uXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5TZWxlY3RJbnB1dC5wcm90b3R5cGUuZGVmYXVsdHMgPSB7XG4gIGVsOiBudWxsLFxuICBtZXNzYWdlRWw6IG51bGwsXG4gIHNlbGVjdEVsOiBudWxsLFxuICBsYWJlbEVsOiBudWxsLFxuICBoYXNWYWx1ZTogZmFsc2UsXG4gIGlzQWN0aXZlOiBmYWxzZSxcbiAgb25DaGFuZ2U6IG51bGwsXG4gIG9uRm9jdXM6IG51bGwsXG4gIG9uQmx1cjogbnVsbCxcbiAgcHJldmlvdXNWYWx1ZTogbnVsbCxcbiAgX29uRm9jdXNCb3VuZDogbnVsbCxcbiAgX29uQmx1ckJvdW5kOiBudWxsLFxuICBfb25JbnB1dEJvdW5kOiBudWxsXG59O1xuXG4oMCwgX21peGluMi5kZWZhdWx0KShTZWxlY3RJbnB1dC5wcm90b3R5cGUsIF9tZXNzYWdpbmcyLmRlZmF1bHQsIF92YWxpZGF0aW9uMi5kZWZhdWx0KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gU2VsZWN0SW5wdXQ7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlbGVjdC1pbnB1dC5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9iYXNlID0gcmVxdWlyZSgnLi9iYXNlJyk7XG5cbnZhciBfYmFzZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9iYXNlKTtcblxudmFyIF90cmlnZ2VyRXZlbnQgPSByZXF1aXJlKCcuLi9oZWxwZXJzL2RvbS90cmlnZ2VyLWV2ZW50Jyk7XG5cbnZhciBfdHJpZ2dlckV2ZW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RyaWdnZXJFdmVudCk7XG5cbnZhciBfcGFyc2VBdHRyaWJ1dGUgPSByZXF1aXJlKCcuLi9oZWxwZXJzL2RvbS9wYXJzZS1hdHRyaWJ1dGUnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfSAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICMgVHlwZWFoZWFkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBMaXN0ZW4gdG8gYW4gaW5wdXQgZWxlbWVudCBhbmQgZm9ybWF0IGl0IGFzIHRoZSB1c2VyIHR5cGVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBuZXcgVHlwZWFoZWFkKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAbW9kdWxlIGNvbXBvbmVudHMvdHlwZWFoZWFkLmpzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cblxudmFyIG5vb3AgPSBmdW5jdGlvbiBub29wKCkge307XG5cbnZhciBUeXBlYWhlYWQgPSBmdW5jdGlvbiAoX0Jhc2VDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFR5cGVhaGVhZCwgX0Jhc2VDb21wb25lbnQpO1xuXG4gIC8qKlxuICAgKiBUeXBlYWhlYWQgY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zXG4gICAqL1xuICBmdW5jdGlvbiBUeXBlYWhlYWQoZWwpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUeXBlYWhlYWQpO1xuXG4gICAgcGFyYW1zLmVsUmVxdWlyZWQgPSB0cnVlO1xuXG4gICAgaWYgKCEoX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfQmFzZUNvbXBvbmVudC5jYWxsKHRoaXMsIGVsLCBwYXJhbXMpKSwgX3RoaXMpKSB7XG4gICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMpO1xuICAgIH1cblxuICAgIF90aGlzLl9tYWludGFpbkZvY3VzKGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3BhcnNlUGFyYW1zKCk7XG4gICAgICB0aGlzLl9iaW5kRXZlbnRMaXN0ZW5lckNhbGxiYWNrcygpO1xuICAgICAgdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9KTtcbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJ1biB0aGUgZm9ybWF0dGluZy5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGN1cnNvckluZGV4XG4gICAqL1xuXG5cbiAgVHlwZWFoZWFkLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiBydW4oY3Vyc29ySW5kZXgpIHtcbiAgICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuXG4gICAgaWYgKHRoaXMuaXNSdW5uaW5nKSByZXR1cm4gdGhpcztcblxuICAgIHRoaXMuaXNSdW5uaW5nID0gdHJ1ZTtcblxuICAgIHZhciBvbGRWYWwgPSB0aGlzLmlucHV0RWwudmFsdWU7XG4gICAgdmFyIHZhbCA9ICcnO1xuICAgIHZhciBwbGFjZWhvbGRlciA9ICcnO1xuICAgIHZhciBpID0gMDtcbiAgICB2YXIgbGVuID0gdGhpcy5mb3JtYXQubGVuZ3RoO1xuICAgIHZhciBza2lwQ291bnQgPSAwO1xuICAgIHZhciB2YWxEb25lID0gZmFsc2U7XG5cbiAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG5cbiAgICAgIC8vIEFkZCBudW1iZXJzXG4gICAgICBpZiAodGhpcy5mb3JtYXRbaV0gPT09ICdcXFxcZCcpIHtcblxuICAgICAgICBpZiAodGhpcy5jaGFyYWN0ZXJzW2kgLSBza2lwQ291bnRdKSB7XG4gICAgICAgICAgdmFsICs9IHRoaXMuY2hhcmFjdGVyc1tpIC0gc2tpcENvdW50XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YWxEb25lID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBsYWNlaG9sZGVyICs9IHZhbERvbmUgPyB0aGlzLnBsYWNlaG9sZGVyW2ldIDogJyZuYnNwOyc7XG4gICAgICB9XG4gICAgICAvLyBQbGFjZWhvbGRlciBjaGFyYWN0ZXJzXG4gICAgICBlbHNlIHtcblxuICAgICAgICAgIGlmICghdmFsRG9uZSkge1xuICAgICAgICAgICAgdmFsICs9IHRoaXMuZm9ybWF0W2ldO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHBsYWNlaG9sZGVyICs9IHRoaXMuZm9ybWF0W2ldO1xuXG4gICAgICAgICAgc2tpcENvdW50Kys7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc0ZvY3VzZWQpIHtcbiAgICAgIGN1cnNvckluZGV4ID0gY3Vyc29ySW5kZXggPT09IHVuZGVmaW5lZCA/IHRoaXMuX2dldENhcmV0RW5kKCkgOiBjdXJzb3JJbmRleDtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGVyZSBhcmUgbm8gY2hhcmFjdGVycywgc2V0IHRoZSBjdXJzb3JJbmRleCB0byBiZSB0aGUgbGFzdCBwbGFjZWhvbGRlciBlbnRyeS5cbiAgICBpZiAodGhpcy5pc0ZvY3VzZWQgJiYgIXRoaXMuY2hhcmFjdGVycy5sZW5ndGgpIHtcbiAgICAgIGN1cnNvckluZGV4ID0gdmFsLmxlbmd0aDtcbiAgICB9XG5cbiAgICAvLyBObyBjaGFyYWN0ZXJzIGFuZCB3ZSBzaG91bGRuJ3QgdXNlIGp1c3QgcGxhY2Vob2xkZXIgdmFsdWVzXG4gICAgaWYgKCF0aGlzLmNoYXJhY3RlcnMubGVuZ3RoICYmIHBhcmFtcy5ub3RPbmx5UGxhY2Vob2xkZXJzKSB7XG4gICAgICB2YWwgPSAnJztcbiAgICB9XG5cbiAgICB0aGlzLmlucHV0RWwudmFsdWUgPSB2YWw7XG4gICAgdGhpcy5wbGFjZWhvbGRlckVsLmlubmVySFRNTCA9IHBsYWNlaG9sZGVyO1xuXG4gICAgdGhpcy5fdXBkYXRlV2lkdGgoKTtcblxuICAgIGlmICh0aGlzLmlzRm9jdXNlZCkge1xuICAgICAgdGhpcy5fc2V0Q2FyZXRQb3NpdGlvblRyYW5zbGF0ZWQoY3Vyc29ySW5kZXgpO1xuICAgIH1cblxuICAgIGlmICh2YWwgIT09IG9sZFZhbCkge1xuICAgICAgKDAsIF90cmlnZ2VyRXZlbnQyLmRlZmF1bHQpKHRoaXMuaW5wdXRFbCwgJ2lucHV0Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcblxuICAgIGlmICh2YWwgIT09IG9sZFZhbCkge1xuICAgICAgKHRoaXMub25DaGFuZ2UgfHwgbm9vcCkodmFsLCBvbGRWYWwsIHRoaXMpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fYXRFbmQgJiYgdGhpcy5pc0ZvY3VzZWQgJiYgdGhpcy5jaGFyYWN0ZXJzLmxlbmd0aCA9PT0gdGhpcy5tYXhMZW5ndGggJiYgdGhpcy5fY2FyZXRJc0F0RW5kKCkpIHtcbiAgICAgIHRoaXMuX2F0RW5kID0gdHJ1ZTtcbiAgICAgICh0aGlzLm9uRW5kIHx8IG5vb3ApKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9hdEVuZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGQgYSBjaGFyYWN0ZXIgdG8gdGhlIGNoYXJhY3RlcnMgYXJyYXkgYXQgYSBnaXZlbiBpbmRleC5cbiAgICogQHBhcmFtIHtTdHJpbmd9IGNoYXJhY3RlclxuICAgKiBAcGFyYW0ge051bWJlcn0gc3RhcnRcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGVuZFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHNraXBDaGVja1xuICAgKi9cblxuXG4gIFR5cGVhaGVhZC5wcm90b3R5cGUuYWRkQ2hhcmFjdGVyQXRJbmRleCA9IGZ1bmN0aW9uIGFkZENoYXJhY3RlckF0SW5kZXgoY2hhcmFjdGVyLCBzdGFydCwgZW5kLCBza2lwQ2hlY2spIHtcblxuICAgIC8vIERvbid0IGFkZCBhdCBhbiBpbmRleCBiZXlvbmQgd2hhdCB3ZSBjYW4gc3VwcG9ydC5cbiAgICBpZiAodGhpcy5tYXhMZW5ndGggJiYgc3RhcnQgPj0gdGhpcy5tYXhMZW5ndGgpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGlmICghc2tpcENoZWNrKSB7XG5cbiAgICAgIHZhciByZTtcblxuICAgICAgLy8gVHJ5IHRvIGJ1aWxkIGEgcmVnZXggZm9yIHRoaXMgZm9ybWF0IGNoYXJhY3Rlci5cbiAgICAgIHRyeSB7XG4gICAgICAgIHJlID0gbmV3IFJlZ0V4cCh0aGlzLmZvcm1hdFtzdGFydF0pO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvL1xuICAgICAgfVxuXG4gICAgICBpZiAoIXJlIHx8ICFyZS5leGVjKGNoYXJhY3RlcikpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5jaGFyYWN0ZXJzLnNwbGljZShzdGFydCwgZW5kIC0gc3RhcnQsIGNoYXJhY3Rlcik7XG5cbiAgICAvLyBJZiB3ZSd2ZSBhZGRlZCBhdCBhbiBpbmRleCB0aGF0IHB1c2hlcyB0aGUgbGVuZ3RoIGJleW9uZCB3aGF0IHdlIHN1cHBvcnQsXG4gICAgLy8gcmVtb3ZlIHRoZSB0cmFpbGluZyBjaGFyYWN0ZXJzLlxuICAgIGlmICh0aGlzLm1heExlbmd0aCAmJiB0aGlzLmNoYXJhY3RlcnMubGVuZ3RoID4gdGhpcy5tYXhMZW5ndGgpIHtcbiAgICAgIHRoaXMuY2hhcmFjdGVycy5zcGxpY2UodGhpcy5tYXhMZW5ndGgsIHRoaXMuY2hhcmFjdGVycy5sZW5ndGgpO1xuICAgIH1cblxuICAgIHRoaXMucnVuKHN0YXJ0ICsgMSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQWRkIGEgY2hhcmFjdGVyIGF0IHRoZSBwb3NpdGlvbiBvZiB0aGUgY2FyZXQuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjaGFyYWN0ZXJcbiAgICovXG5cblxuICBUeXBlYWhlYWQucHJvdG90eXBlLmFkZENoYXJhY3RlckF0Q2FyZXQgPSBmdW5jdGlvbiBhZGRDaGFyYWN0ZXJBdENhcmV0KGNoYXJhY3Rlcikge1xuXG4gICAgdmFyIHBvcyA9IHRoaXMuX2dldENhcmV0U3RhcnQoKTtcbiAgICB2YXIgcmU7XG5cbiAgICAvLyBJZiB3ZSdyZSBiZXlvbmQgdGhlIGJvdW5kcyBvZiB0aGUgZm9ybWF0LCBzdG9wLlxuICAgIGlmICh0aGlzLmZvcm1hdFtwb3NdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICh0aGlzLm9uRW5kIHx8IG5vb3ApKHRoaXMsIGNoYXJhY3Rlcik7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBUcnkgdG8gYnVpbGQgYSByZWdleCBmb3IgdGhpcyBmb3JtYXQgY2hhcmFjdGVyLlxuICAgIHRyeSB7XG4gICAgICByZSA9IG5ldyBSZWdFeHAodGhpcy5mb3JtYXRbcG9zXSk7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICAvL1xuXG5cbiAgICAvLyBXZSBjb3VsZG4ndCBidWlsZCBhIHJlZ2V4IChzbyBpdCdzIGludmFsaWQpIG9yIHRoZSByZWdleCBmYWlsZWQgKHNvIGl0J3MgaW52YWxpZClcbiAgICBpZiAoIXJlIHx8ICFyZS5leGVjKGNoYXJhY3RlcikpIHtcbiAgICAgIGlmICh0aGlzLl9tb3ZlQ2FyZXQoJ3JpZ2h0JykpIHtcbiAgICAgICAgdGhpcy5hZGRDaGFyYWN0ZXJBdENhcmV0KGNoYXJhY3Rlcik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB0aGlzLmFkZENoYXJhY3RlckF0SW5kZXgoY2hhcmFjdGVyLCB0aGlzLl9nZXRDYXJldFN0YXJ0VHJhbnNsYXRlZCgpLCB0aGlzLl9nZXRDYXJldEVuZFRyYW5zbGF0ZWQoKSwgdHJ1ZSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIGEgY2hhcmFjdGVyIGZyb20gdGhlIGNoYXJhY3RlciBhcnJheSBieSBpbmRleC5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7TnVtYmVyfSBsZW5ndGggT3B0aW9uYWxcbiAgICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCBPcHRpb25hbFxuICAgKi9cblxuXG4gIFR5cGVhaGVhZC5wcm90b3R5cGUucmVtb3ZlQ2hhcmFjdGVyQXRJbmRleCA9IGZ1bmN0aW9uIHJlbW92ZUNoYXJhY3RlckF0SW5kZXgoaW5kZXgsIGxlbmd0aCwgb2Zmc2V0KSB7XG5cbiAgICAvLyBEb24ndCB3YW50IGEgbmVnYXRpdmUgc3BsaWNlIGxlbmd0aCBvciBlbHNlIHdlIHN0YXJ0XG4gICAgLy8gcmVtb3ZpbmcgY2hhcmFjdGVycyBmcm9tIHRoZSBlbmQuXG4gICAgaWYgKGluZGV4ICsgb2Zmc2V0IDwgMCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgbGVuZ3RoID0gbGVuZ3RoICE9PSB1bmRlZmluZWQgPyBsZW5ndGggOiAxO1xuICAgIHRoaXMuY2hhcmFjdGVycy5zcGxpY2UoaW5kZXggKyBvZmZzZXQsIGxlbmd0aCk7XG4gICAgdGhpcy5ydW4oaW5kZXggKyAob2Zmc2V0IHx8IDEpKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGNoYXJhY3RlciBhdCB0aGUgY2FyZXQuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgT3B0aW9uYWwgQW4gb2Zmc2V0IGZyb20gdGhlIGN1cnJlbnQgcG9zaXRpb24uXG4gICAqL1xuXG5cbiAgVHlwZWFoZWFkLnByb3RvdHlwZS5yZW1vdmVDaGFyYWN0ZXJBdENhcmV0ID0gZnVuY3Rpb24gcmVtb3ZlQ2hhcmFjdGVyQXRDYXJldChvZmZzZXQpIHtcblxuICAgIHZhciBzdGFydCA9IHRoaXMuX2dldENhcmV0U3RhcnRUcmFuc2xhdGVkKCk7XG4gICAgdmFyIGVuZCA9IHRoaXMuX2dldENhcmV0RW5kVHJhbnNsYXRlZCgpO1xuICAgIHZhciBsZW5ndGggPSAxO1xuICAgIHZhciB0bXA7XG5cbiAgICBpZiAoc3RhcnQgIT09IGVuZCkge1xuXG4gICAgICAvLyBJZiB0aGUgZW5kIGlzIGxlc3MgdGhhbiB0aGUgc3RhcnQsIHRoZSB1c2VyIGRyYWdnZWQgZnJvbSByaWdodCB0byBsZWZ0LlxuICAgICAgLy8gSnVzdCBzd2FwIHRoZW0gdG8gbWFrZSBpdCBlYXNpZXIgdG8gaGFuZGxlLlxuICAgICAgaWYgKGVuZCA8IHN0YXJ0KSB7XG4gICAgICAgIHRtcCA9IHN0YXJ0O1xuICAgICAgICBzdGFydCA9IGVuZDtcbiAgICAgICAgZW5kID0gdG1wO1xuICAgICAgfVxuXG4gICAgICAvLyBUaGUgbGVuZ3RoIG9mIGNoYXJhY3RlcnMgcmVtb3ZlZFxuICAgICAgbGVuZ3RoID0gZW5kIC0gc3RhcnQ7XG5cbiAgICAgIC8vIEJ1bXAgdGhlIHN0YXJ0IHBvc2l0aW9uIEB0b2RvOiBoYXZlbid0IHRob3VnaHQgdGhyb3VnaCB3aHkgdGhpcyBpcywgYnV0IGl0J3MgbmVlZGVkLlxuICAgICAgc3RhcnQrKztcbiAgICB9XG5cbiAgICB0aGlzLnJlbW92ZUNoYXJhY3RlckF0SW5kZXgoc3RhcnQsIGxlbmd0aCwgb2Zmc2V0KTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGNoYXJhY3RlciBpbiB0aGUgY3VycmVudCByYW5nZS5cbiAgICovXG5cblxuICBUeXBlYWhlYWQucHJvdG90eXBlLnJlbW92ZUNoYXJhY3RlcnNJblJhbmdlID0gZnVuY3Rpb24gcmVtb3ZlQ2hhcmFjdGVyc0luUmFuZ2UoKSB7XG4gICAgdGhpcy5yZW1vdmVDaGFyYWN0ZXJBdEluZGV4KHRoaXMuX2dldENhcmV0U3RhcnRUcmFuc2xhdGVkKCksIHRoaXMuX2dldENhcmV0RW5kVHJhbnNsYXRlZCgpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSB2YWx1ZSBvZiB0aGUgdHlwZWFoZWFkLiBNYWludGFpbiB0aGUgcG9zaXRpb24gb2YgdGhlIGNhcmV0LlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAgICovXG5cblxuICBUeXBlYWhlYWQucHJvdG90eXBlLnNldFZhbHVlID0gZnVuY3Rpb24gc2V0VmFsdWUodmFsdWUpIHtcblxuICAgIHRoaXMuc2V0dGluZ1ZhbHVlID0gdHJ1ZTtcbiAgICB0aGlzLnBhdXNlKCk7XG5cbiAgICB0aGlzLmNoYXJhY3RlcnMgPSAodmFsdWUgKyAnJykuc3BsaXQoJycpO1xuICAgIHRoaXMucnVuKCk7XG5cbiAgICBpZiAodGhpcy5pc0ZvY3VzZWQpIHRoaXMuX3NldENhcmV0UG9zaXRpb24odGhpcy5fZ2V0Q2FyZXRTdGFydCgpKTtcblxuICAgIHRoaXMucmVzdW1lKCk7XG4gICAgdGhpcy5zZXR0aW5nVmFsdWUgPSBmYWxzZTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIHRoZSB0eXBlYWhlYWQuXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gYXNJbnQgR2V0IHRoZSB2YWx1ZSBhcyBhIHBhcnNlZCBpbnRlZ2VyLlxuICAgKiBAcmV0dXJuIHtTdHJpbmd8TnVtYmVyfVxuICAgKi9cblxuXG4gIFR5cGVhaGVhZC5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiBnZXRWYWx1ZShhc0ludCkge1xuICAgIHJldHVybiBhc0ludCAmJiB0aGlzLmlucHV0RWwudmFsdWUgPyBwYXJzZUludCh0aGlzLmlucHV0RWwudmFsdWUsIDEwKSA6IHRoaXMuaW5wdXRFbC52YWx1ZTtcbiAgfTtcblxuICAvKipcbiAgICogQ2xlYXIgdGhlIHNlbGVjdGVkIHZhbHVlLlxuICAgKi9cblxuXG4gIFR5cGVhaGVhZC5wcm90b3R5cGUuY2xlYXJWYWx1ZSA9IGZ1bmN0aW9uIGNsZWFyVmFsdWUoKSB7XG4gICAgdGhpcy5wYXVzZSgpO1xuICAgIHRoaXMuY2hhcmFjdGVycyA9IFtdO1xuICAgIHRoaXMucnVuKDAsIHsgbm90T25seVBsYWNlaG9sZGVyczogdHJ1ZSB9KTtcbiAgICByZXR1cm4gdGhpcy5yZXN1bWUoKTtcbiAgfTtcblxuICAvKipcbiAgICogVGFrZSB0aGUgZGF0ZSB2YWx1ZXMgZnJvbSB0aGUgaW5wdXRzIGFuZCBzZXQgdGhlbSBhcyBkYXRlcyBvbiB0aGUgY2FsZW5kYXIuXG4gICAqL1xuXG5cbiAgVHlwZWFoZWFkLnByb3RvdHlwZS51cGRhdGVWYWx1ZSA9IGZ1bmN0aW9uIHVwZGF0ZVZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLnNldFZhbHVlKHRoaXMuaW5wdXRFbC52YWx1ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1vdmUgdGhlIGNhcmV0IHBvc2l0aW9uLlxuICAgKiBAcGFyYW0ge051bWJlcn0gcG9zXG4gICAqL1xuXG5cbiAgVHlwZWFoZWFkLnByb3RvdHlwZS5tb3ZlQ2FyZXQgPSBmdW5jdGlvbiBtb3ZlQ2FyZXQocG9zKSB7XG4gICAgdGhpcy5fc2V0Q2FyZXRQb3NpdGlvblRyYW5zbGF0ZWQocG9zKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogTW92ZSB0aGUgY2FyZXQgdG8gdGhlIGVuZCBvZiB0aGUgaW5wdXQuXG4gICAqL1xuXG5cbiAgVHlwZWFoZWFkLnByb3RvdHlwZS5tb3ZlQ2FyZXRUb0VuZCA9IGZ1bmN0aW9uIG1vdmVDYXJldFRvRW5kKCkge1xuICAgIHJldHVybiB0aGlzLm1vdmVDYXJldCh0aGlzLmNoYXJhY3RlcnMubGVuZ3RoKTtcbiAgfTtcblxuICAvKipcbiAgICogTW92ZSB0aGUgY2FyZXQgdG8gdGhlIHN0YXJ0IG9mIHRoZSBpbnB1dC5cbiAgICovXG5cblxuICBUeXBlYWhlYWQucHJvdG90eXBlLm1vdmVDYXJldFRvU3RhcnQgPSBmdW5jdGlvbiBtb3ZlQ2FyZXRUb1N0YXJ0KCkge1xuICAgIHJldHVybiB0aGlzLm1vdmVDYXJldCgwKTtcbiAgfTtcblxuICAvKipcbiAgICogUGF1c2UgZXZlbnRzLlxuICAgKi9cblxuXG4gIFR5cGVhaGVhZC5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICB0aGlzLnBhdXNlQmx1ckZvY3VzKys7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlc3VtZSBldmVudHMuXG4gICAqL1xuXG5cbiAgVHlwZWFoZWFkLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiByZXN1bWUoKSB7XG4gICAgdGhpcy5wYXVzZUJsdXJGb2N1cy0tO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBEaXNhYmxlIGVudHJ5IGludG8gdGhlIGlucHV0LlxuICAgKi9cblxuXG4gIFR5cGVhaGVhZC5wcm90b3R5cGUuZGlzYWJsZSA9IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgdGhpcy5pbnB1dEVsLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnJyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEVuYWJsZSBlbnRyeSBpbnRvIHRoZSBpbnB1dC5cbiAgICovXG5cblxuICBUeXBlYWhlYWQucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uIGVuYWJsZSgpIHtcbiAgICB0aGlzLmlucHV0RWwucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDbGVhciB0aGUgdmFsdWUuXG4gICAqIENoYW5nZWQgdG8gY2xlYXJWYWx1ZSBpbiB2Mi4wLjAuXG4gICAqL1xuXG5cbiAgVHlwZWFoZWFkLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgIHJldHVybiB0aGlzLmNsZWFyVmFsdWUoKTtcbiAgfTtcblxuICAvKipcbiAgICogQXVnbWVudCBkZWZhdWx0IHJlbW92ZSBjYWxsIHcvIGhlbHBlciBjbGVhbnVwLlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGxlYXZlRWxlbWVudCBMZWF2ZSB0aGUgZWxlbWVudCBpbnRhY3QuXG4gICAqL1xuXG5cbiAgVHlwZWFoZWFkLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUobGVhdmVFbGVtZW50KSB7XG4gICAgX0Jhc2VDb21wb25lbnQucHJvdG90eXBlLnJlbW92ZS5jYWxsKHRoaXMsIGxlYXZlRWxlbWVudCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0b3JlIGEgcmVmZXJlbmNlIHRvIHRoZSBuZWVkZWQgZWxlbWVudHMuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlbFxuICAgKi9cblxuXG4gIFR5cGVhaGVhZC5wcm90b3R5cGUuX2NhY2hlRWxlbWVudHMgPSBmdW5jdGlvbiBfY2FjaGVFbGVtZW50cyhlbCkge1xuICAgIHRoaXMuZWwgPSBlbDtcbiAgICB0aGlzLmlucHV0RWwgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJ1t0eXBlPVwidGV4dFwiXSwgW3R5cGU9XCJlbWFpbFwiXSwgW3R5cGU9XCJwaG9uZVwiXSwgdGV4dGFyZWEnKSB8fCB0aGlzLl9jcmVhdGVEZWZhdWx0SW5wdXRFbGVtZW50KCk7XG4gICAgdGhpcy5wbGFjZWhvbGRlckVsID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcuc3BhcmstaW5wdXRfX3BsYWNlaG9sZGVyJykgfHwgdGhpcy5fY3JlYXRlRGVmYXVsdFBsYWNlaG9sZGVyRWxlbWVudCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQYXJzZSBwYXJhbWV0ZXJzIGZyb20gdGhlIGVsZW1lbnRzLlxuICAgKi9cblxuXG4gIFR5cGVhaGVhZC5wcm90b3R5cGUuX3BhcnNlUGFyYW1zID0gZnVuY3Rpb24gX3BhcnNlUGFyYW1zKCkge1xuXG4gICAgLy8gU3RvcmUgdGhlIHZhbHVlIGNoYXJhY3RlcnNcbiAgICB0aGlzLmNoYXJhY3RlcnMgPSB0aGlzLl9wYXJzZUNoYXJhY3RlcnModGhpcy5pbnB1dEVsLnZhbHVlKTtcblxuICAgIC8vIFN0b3JlIGZvcm1hdFxuICAgIHRoaXMuZm9ybWF0ID0gdGhpcy5fcGFyc2VGb3JtYXQodGhpcy5mb3JtYXQgPyB0aGlzLmZvcm1hdCA6IHRoaXMuaW5wdXRFbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZWFoZWFkLWZvcm1hdCcpKTtcblxuICAgIC8vIFN0b3JlIHRoZSBvcmlnaW5hbCBwbGFjZWhvbGRlclxuICAgIHRoaXMucGxhY2Vob2xkZXIgPSB0aGlzLnBsYWNlaG9sZGVyID8gdGhpcy5wbGFjZWhvbGRlciA6IHRoaXMuaW5wdXRFbC5nZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJykuc3BsaXQoJycpO1xuXG4gICAgLy8gR2V0IHRoZSB0b3RhbCBudW1iZXIgb2YgY2hhcmFjdGVycyB3ZSBjYW4gaGF2ZVxuICAgIHRoaXMubWF4TGVuZ3RoID0gdGhpcy5fZ2V0Q2hhcmFjdGVyc0FsbG93ZWRDb3VudCh0aGlzLmZvcm1hdCk7XG5cbiAgICB0aGlzLm1hdGNoUGxhY2Vob2xkZXJTaXplID0gdGhpcy5tYXRjaFBsYWNlaG9sZGVyU2l6ZSAhPT0gbnVsbCA/IHRoaXMubWF0Y2hQbGFjZWhvbGRlclNpemUgOiAoMCwgX3BhcnNlQXR0cmlidXRlLmJvb2xlYW4pKHRoaXMuaW5wdXRFbCwgJ2RhdGEtbWF0Y2gtcGxhY2Vob2xkZXItc2l6ZScsIGZhbHNlKTtcbiAgfTtcblxuICAvKipcbiAgICogUGFyc2UgdGhlIGZvcm1hdCBzdHJpbmcgaW50byBhbiBhcnJheS5cbiAgICogQHBhcmFtICB7U3RyaW5nfSBmb3JtYXRcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuXG5cbiAgVHlwZWFoZWFkLnByb3RvdHlwZS5fcGFyc2VGb3JtYXQgPSBmdW5jdGlvbiBfcGFyc2VGb3JtYXQoZm9ybWF0KSB7XG5cbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGxlbiA9IGZvcm1hdC5sZW5ndGg7XG4gICAgdmFyIGFyciA9IFtdO1xuICAgIHZhciBsYXN0V2FzRXNjYXBlID0gZmFsc2U7XG5cbiAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBpZiAoZm9ybWF0W2ldID09PSAnXFxcXCcgJiYgIWxhc3RXYXNFc2NhcGUpIHtcbiAgICAgICAgbGFzdFdhc0VzY2FwZSA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcnIucHVzaCgobGFzdFdhc0VzY2FwZSA/ICdcXFxcJyA6ICcnKSArIGZvcm1hdFtpXSk7XG4gICAgICAgIGxhc3RXYXNFc2NhcGUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYXJyO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQYXJzZSB0aGUgY2hhcmFjdGVycyBzdHJpbmcgaW50byBhbiBhcnJheSwgaWdub3JpbmcgY2hhcmFjdGVycyB3aGljaCBkb24ndFxuICAgKiBtYXRjaCB0aGUgZm9ybWF0IHJlcXVpcmVtZW50cy5cbiAgICogQHBhcmFtIHtTdHJpbmd9IGNoYXJhY3RlcnNcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuXG5cbiAgVHlwZWFoZWFkLnByb3RvdHlwZS5fcGFyc2VDaGFyYWN0ZXJzID0gZnVuY3Rpb24gX3BhcnNlQ2hhcmFjdGVycyhjaGFyYWN0ZXJzKSB7XG5cbiAgICB2YXIgY2hhcnMgPSBjaGFyYWN0ZXJzLnNwbGl0KCcnKTtcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGxlbiA9IGNoYXJhY3RlcnMubGVuZ3RoO1xuICAgIHZhciByZWdleGVzID0gW107XG4gICAgdmFyIGFyciA9IFtdO1xuXG4gICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuXG4gICAgICAvLyBUcnkgdG8gYnVpbGQgYSByZWdleCBmb3IgdGhpcyBmb3JtYXQgY2hhcmFjdGVyLlxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoaXMgZm9ybWF0IHN0YXJ0cyB3aXRoIGFuIGVzY2FwZSBjaGFyYWN0ZXIuXG4gICAgICAgIHJlZ2V4ZXNbaV0gPSB0aGlzLmZvcm1hdFtpXVswXSA9PT0gJ1xcXFwnID8gbmV3IFJlZ0V4cCh0aGlzLmZvcm1hdFtpXSkgOiBudWxsO1xuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgIC8vXG5cblxuICAgICAgLy8gSWYgd2Ugd2VyZSBhYmxlIHRvIGNyZWF0ZSBhIHJlZ2V4IGFuZCBvdXIgY2hhciBwYXNzZXMsIGFkZCBpdCB0byB0aGUgYXJyYXlcbiAgICAgIC8vIG9mIGNoYXJhY3RlcnMgdG8gcmV0dXJuLlxuICAgICAgaWYgKHJlZ2V4ZXNbaV0gJiYgcmVnZXhlc1tpXS5leGVjKGNoYXJzW2ldKSkge1xuICAgICAgICBhcnIucHVzaChjaGFyc1tpXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGFycjtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlIHRoZSBkZWZhdWx0IGlucHV0IGVsZW1lbnQuXG4gICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAqL1xuXG5cbiAgVHlwZWFoZWFkLnByb3RvdHlwZS5fY3JlYXRlRGVmYXVsdElucHV0RWxlbWVudCA9IGZ1bmN0aW9uIF9jcmVhdGVEZWZhdWx0SW5wdXRFbGVtZW50KCkge1xuXG4gICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICBlbC5jbGFzc05hbWUgPSAnc3BhcmstaW5wdXRfX2ZpZWxkJztcbiAgICBlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZWFoZWFkJywgJycpO1xuICAgIGVsLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZWwnKTtcblxuICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQoZWwpO1xuXG4gICAgcmV0dXJuIGVsO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGRlZmF1bHQgaW5wdXQgZWxlbWVudC5cbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICovXG5cblxuICBUeXBlYWhlYWQucHJvdG90eXBlLl9jcmVhdGVEZWZhdWx0UGxhY2Vob2xkZXJFbGVtZW50ID0gZnVuY3Rpb24gX2NyZWF0ZURlZmF1bHRQbGFjZWhvbGRlckVsZW1lbnQoKSB7XG4gICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIGVsLmNsYXNzTmFtZSA9ICdzcGFyay1pbnB1dF9fcGxhY2Vob2xkZXInO1xuICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQoZWwpO1xuICAgIHJldHVybiBlbDtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBtYXhpbXVtIG51bWJlciBvZiBjaGFyYWN0ZXJzIGFsbG93ZWQuXG4gICAqIEBwYXJhbSB7QXJyYXl9IGZvcm1hdFxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9XG4gICAqL1xuXG5cbiAgVHlwZWFoZWFkLnByb3RvdHlwZS5fZ2V0Q2hhcmFjdGVyc0FsbG93ZWRDb3VudCA9IGZ1bmN0aW9uIF9nZXRDaGFyYWN0ZXJzQWxsb3dlZENvdW50KGZvcm1hdCkge1xuXG4gICAgdmFyIGkgPSAwO1xuICAgIHZhciBsZW4gPSBmb3JtYXQubGVuZ3RoO1xuICAgIHZhciBhbGxvd2VkID0gMDtcblxuICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGlmIChmb3JtYXRbaV0gPT09ICdcXFxcZCcpIHtcbiAgICAgICAgYWxsb3dlZCsrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBhbGxvd2VkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYm91bmQgdmVyc2lvbnMgb2YgZXZlbnQgbGlzdGVuZXIgY2FsbGJhY2tzIGFuZCBzdG9yZSB0aGVtLlxuICAgKiBPdGhlcndpc2Ugd2UgY2FuJ3QgdW5iaW5kIGZyb20gdGhlc2UgZXZlbnRzIGxhdGVyIGJlY2F1c2UgdGhlXG4gICAqIGZ1bmN0aW9uIHNpZ25hdHVyZXMgd29uJ3QgbWF0Y2guXG4gICAqL1xuXG5cbiAgVHlwZWFoZWFkLnByb3RvdHlwZS5fYmluZEV2ZW50TGlzdGVuZXJDYWxsYmFja3MgPSBmdW5jdGlvbiBfYmluZEV2ZW50TGlzdGVuZXJDYWxsYmFja3MoKSB7XG4gICAgdGhpcy5fb25LZXlkb3duQm91bmQgPSB0aGlzLl9vbktleWRvd24uYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vbklucHV0Qm91bmQgPSB0aGlzLl9vbklucHV0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25Gb2N1c0JvdW5kID0gdGhpcy5fb25Gb2N1cy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uQmx1ckJvdW5kID0gdGhpcy5fb25CbHVyLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25QbGFjZWhvbGRlckNsaWNrQm91bmQgPSB0aGlzLl9vblBsYWNlaG9sZGVyQ2xpY2suYmluZCh0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogQWRkIGV2ZW50IGxpc3RlbmVycyB0byBrZXlwcmVzcyBhbmQga2V5ZG93bi5cbiAgICovXG5cblxuICBUeXBlYWhlYWQucHJvdG90eXBlLl9hZGRFdmVudExpc3RlbmVycyA9IGZ1bmN0aW9uIF9hZGRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX29uS2V5ZG93bkJvdW5kLCBmYWxzZSk7XG4gICAgdGhpcy5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdGhpcy5fb25JbnB1dEJvdW5kLCBmYWxzZSk7XG4gICAgdGhpcy5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fb25Gb2N1c0JvdW5kLCBmYWxzZSk7XG4gICAgdGhpcy5wbGFjZWhvbGRlckVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb25QbGFjZWhvbGRlckNsaWNrQm91bmQsIGZhbHNlKTtcbiAgfTtcblxuICAvKipcbiAgICogQWRkIGV2ZW50IGxpc3RlbmVycyB0byBrZXlwcmVzcyBhbmQga2V5ZG93bi5cbiAgICovXG5cblxuICBUeXBlYWhlYWQucHJvdG90eXBlLl9yZW1vdmVFdmVudExpc3RlbmVycyA9IGZ1bmN0aW9uIF9yZW1vdmVFdmVudExpc3RlbmVycygpIHtcblxuICAgIHRoaXMuaW5wdXRFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fb25LZXlkb3duQm91bmQpO1xuICAgIHRoaXMuaW5wdXRFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMuX29uSW5wdXRCb3VuZCk7XG4gICAgdGhpcy5pbnB1dEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fb25Gb2N1c0JvdW5kKTtcbiAgICB0aGlzLnBsYWNlaG9sZGVyRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9vblBsYWNlaG9sZGVyQ2xpY2tCb3VuZCk7XG5cbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmx1cicsIHRoaXMuX29uQmx1ckJvdW5kKTtcbiAgICB0aGlzLmlucHV0RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmx1cicsIHRoaXMuX29uQmx1ckJvdW5kKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBwb3NpdGlvbiBvZiB0aGUgY2FyZXQgaW4gdGhlIGVsZW1lbnQuXG4gICAqIEByZXR1cm4ge051bWJlcn0gVGhlIGluZGV4XG4gICAqL1xuXG5cbiAgVHlwZWFoZWFkLnByb3RvdHlwZS5fZ2V0Q2FyZXRTdGFydCA9IGZ1bmN0aW9uIF9nZXRDYXJldFN0YXJ0KCkge1xuXG4gICAgcmV0dXJuIHRoaXMuX21haW50YWluRm9jdXMoZnVuY3Rpb24gKCkge1xuXG4gICAgICB2YXIgY2FyZXRQb3NpdGlvbjtcblxuICAgICAgLy8gSUUgc3VwcG9ydFxuICAgICAgaWYgKGRvY3VtZW50LnNlbGVjdGlvbikge1xuICAgICAgICB0aGlzLmlucHV0RWwuZm9jdXMoKTtcbiAgICAgICAgdmFyIHNlbCA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuICAgICAgICBzZWwubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLCAtdGhpcy5pbnB1dEVsLnZhbHVlLmxlbmd0aCk7XG4gICAgICAgIGNhcmV0UG9zaXRpb24gPSBzZWwudGV4dC5sZW5ndGg7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaW5wdXRFbC5zZWxlY3Rpb25TdGFydCB8fCB0aGlzLmlucHV0RWwuc2VsZWN0aW9uU3RhcnQgPT09IDApIHtcbiAgICAgICAgY2FyZXRQb3NpdGlvbiA9IHRoaXMuaW5wdXRFbC5zZWxlY3Rpb25TdGFydDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNhcmV0UG9zaXRpb247XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZW5kIHBvc2l0aW9uIG9mIHRoZSBjYXJldCBpbiB0aGUgZWxlbWVudC5cbiAgICogQHJldHVybiB7TnVtYmVyfSBUaGUgaW5kZXhcbiAgICovXG5cblxuICBUeXBlYWhlYWQucHJvdG90eXBlLl9nZXRDYXJldEVuZCA9IGZ1bmN0aW9uIF9nZXRDYXJldEVuZCgpIHtcblxuICAgIHJldHVybiB0aGlzLl9tYWludGFpbkZvY3VzKGZ1bmN0aW9uICgpIHtcblxuICAgICAgdmFyIGNhcmV0UG9zaXRpb247XG5cbiAgICAgIC8vIElFIHN1cHBvcnRcbiAgICAgIGlmIChkb2N1bWVudC5zZWxlY3Rpb24pIHtcbiAgICAgICAgdGhpcy5pbnB1dEVsLmZvY3VzKCk7XG4gICAgICAgIHZhciBzZWwgPSBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgc2VsLm1vdmVTdGFydCgnY2hhcmFjdGVyJywgLXRoaXMuaW5wdXRFbC52YWx1ZS5sZW5ndGgpO1xuICAgICAgICBjYXJldFBvc2l0aW9uID0gc2VsLnRleHQubGVuZ3RoO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmlucHV0RWwuc2VsZWN0aW9uRW5kIHx8IHRoaXMuaW5wdXRFbC5zZWxlY3Rpb25FbmQgPT09IDApIHtcbiAgICAgICAgY2FyZXRQb3NpdGlvbiA9IHRoaXMuaW5wdXRFbC5zZWxlY3Rpb25FbmQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjYXJldFBvc2l0aW9uO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJcyB0aGUgY2FyZXQgYXQgdGhlIGVuZCBvZiB0aGUgaW5wdXQ/XG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuXG5cbiAgVHlwZWFoZWFkLnByb3RvdHlwZS5fY2FyZXRJc0F0RW5kID0gZnVuY3Rpb24gX2NhcmV0SXNBdEVuZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0Q2FyZXRTdGFydCgpID09PSB0aGlzLm1heExlbmd0aDtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBwb3NpdGlvbiBvZiB0aGUgY2FyZXQgaW4gdGhlIGVsZW1lbnQuXG4gICAqIEByZXR1cm4ge051bWJlcn0gVGhlIGluZGV4XG4gICAqL1xuXG5cbiAgVHlwZWFoZWFkLnByb3RvdHlwZS5fc2V0Q2FyZXRQb3NpdGlvbiA9IGZ1bmN0aW9uIF9zZXRDYXJldFBvc2l0aW9uKHBvcykge1xuXG4gICAgcmV0dXJuIHRoaXMuX21haW50YWluRm9jdXMoZnVuY3Rpb24gKCkge1xuXG4gICAgICAvLyBJRSBzdXBwb3J0XG4gICAgICBpZiAoZG9jdW1lbnQuc2VsZWN0aW9uKSB7XG4gICAgICAgIHRoaXMuaW5wdXRFbC5mb2N1cygpO1xuICAgICAgICB2YXIgc2VsID0gZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7XG4gICAgICAgIHNlbC5tb3ZlU3RhcnQoJ2NoYXJhY3RlcicsIC10aGlzLmlucHV0RWwudmFsdWUubGVuZ3RoKTtcbiAgICAgICAgc2VsLm1vdmVTdGFydCgnY2hhcmFjdGVyJywgcG9zKTtcbiAgICAgICAgc2VsLm1vdmVFbmQoJ2NoYXJhY3RlcicsIDApO1xuICAgICAgICBzZWwuc2VsZWN0KCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaW5wdXRFbC5zZWxlY3Rpb25TdGFydCB8fCB0aGlzLmlucHV0RWwuc2VsZWN0aW9uU3RhcnQgPT09IDApIHtcbiAgICAgICAgdGhpcy5pbnB1dEVsLnNlbGVjdGlvblN0YXJ0ID0gcG9zO1xuICAgICAgICB0aGlzLmlucHV0RWwuc2VsZWN0aW9uRW5kID0gcG9zO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHBvc2l0aW9uIG9mIHRoZSBjYXJldCB0cmFuc2xhdGVkIHRvIHRoZSBjb3JyZXNwb25kaW5nIGluZGV4IGluIHRoZVxuICAgKiBjaGFyYWN0ZXJzIGFycmF5LiBUaGlzIG1lYW5zIGlnbm9yaW5nIGZvcm1hdCBjaGFyYWN0ZXJzLlxuICAgKiBAcGFyYW0ge051bWJlcn0gcG9zXG4gICAqIEByZXR1cm4ge051bWJlcn1cbiAgICovXG5cblxuICBUeXBlYWhlYWQucHJvdG90eXBlLl9nZXRDYXJldFBvc2l0aW9uVHJhbnNsYXRlZCA9IGZ1bmN0aW9uIF9nZXRDYXJldFBvc2l0aW9uVHJhbnNsYXRlZChwb3MpIHtcblxuICAgIHZhciBpID0gMDtcbiAgICB2YXIgc2tpcENvdW50ID0gMDtcblxuICAgIGZvciAoOyBpIDwgcG9zOyBpKyspIHtcblxuICAgICAgLy8gQ291bnQgbm9uLW51bWJlcnMgYXMgYSBza2lwLlxuICAgICAgLy8gQHRvZG86IHRoaXMgbmVlZHMgdG8gd29yayB3aXRoIG1vcmUgdGhhbiBudW1iZXJzLlxuICAgICAgaWYgKHRoaXMuZm9ybWF0W2ldICE9PSAnXFxcXGQnKSB7XG4gICAgICAgIHNraXBDb3VudCsrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwb3MgLSBza2lwQ291bnQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc3RhcnRpbmcgcG9zaXRpb24gb2YgdGhlIGNhcmV0IHRyYW5zbGF0ZWQuXG4gICAqIEByZXR1cm4ge051bWJlcn1cbiAgICovXG5cblxuICBUeXBlYWhlYWQucHJvdG90eXBlLl9nZXRDYXJldFN0YXJ0VHJhbnNsYXRlZCA9IGZ1bmN0aW9uIF9nZXRDYXJldFN0YXJ0VHJhbnNsYXRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0Q2FyZXRQb3NpdGlvblRyYW5zbGF0ZWQodGhpcy5fZ2V0Q2FyZXRTdGFydCgpKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBlbmRpbmcgcG9zaXRpb24gb2YgdGhlIGNhcmV0IHRyYW5zbGF0ZWQuXG4gICAqIEByZXR1cm4ge051bWJlcn1cbiAgICovXG5cblxuICBUeXBlYWhlYWQucHJvdG90eXBlLl9nZXRDYXJldEVuZFRyYW5zbGF0ZWQgPSBmdW5jdGlvbiBfZ2V0Q2FyZXRFbmRUcmFuc2xhdGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9nZXRDYXJldFBvc2l0aW9uVHJhbnNsYXRlZCh0aGlzLl9nZXRDYXJldEVuZCgpKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBwb3NpdGlvbiBvZiB0aGUgY2FyZXQgdHJhbnNsYXRlZCB0byB0aGUgY29ycmVzcG9uZGluZyBpbmRleCBpbiB0aGVcbiAgICogY2hhcmFjdGVycyBhcnJheS4gVGhpcyBtZWFucyBpZ25vcmluZyBmb3JtYXQgY2hhcmFjdGVycy5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IHBvc1xuICAgKi9cblxuXG4gIFR5cGVhaGVhZC5wcm90b3R5cGUuX3NldENhcmV0UG9zaXRpb25UcmFuc2xhdGVkID0gZnVuY3Rpb24gX3NldENhcmV0UG9zaXRpb25UcmFuc2xhdGVkKHBvcykge1xuXG4gICAgdmFyIGkgPSAwO1xuICAgIHZhciBza2lwQ291bnQgPSAwO1xuXG4gICAgZm9yICg7IGkgPCBwb3MgKyBza2lwQ291bnQ7IGkrKykge1xuXG4gICAgICAvLyBDb3VudCBub24tbnVtYmVycyBhcyBhIHNraXAuXG4gICAgICAvLyBAdG9kbzogdGhpcyBuZWVkcyB0byB3b3JrIHdpdGggbW9yZSB0aGFuIG51bWJlcnMuXG4gICAgICBpZiAodGhpcy5mb3JtYXRbaV0gIT09IHVuZGVmaW5lZCAmJiB0aGlzLmZvcm1hdFtpXSAhPT0gJ1xcXFxkJykge1xuICAgICAgICBza2lwQ291bnQrKztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9zZXRDYXJldFBvc2l0aW9uKHBvcyArIHNraXBDb3VudCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1vdmUgdGhlIGNhcmV0IHBvc2l0aW9uXG4gICAqIEBwYXJhbSAge1N0cmluZ30gZGlyZWN0aW9uIFRoZSBkaXJlY3Rpb24gb2YgdGhlIG1vdmVtZW50XG4gICAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgICAgICBXYXMgdGhlIGNhcmV0IGFjdHVhbGx5IG1vdmVkP1xuICAgKi9cblxuXG4gIFR5cGVhaGVhZC5wcm90b3R5cGUuX21vdmVDYXJldCA9IGZ1bmN0aW9uIF9tb3ZlQ2FyZXQoZGlyZWN0aW9uKSB7XG5cbiAgICB2YXIgY3VyUG9zID0gdGhpcy5fZ2V0Q2FyZXRTdGFydCgpO1xuXG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2xlZnQnKSB7XG4gICAgICB0aGlzLl9zZXRDYXJldFBvc2l0aW9uKGN1clBvcyAtIDEpO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAncmlnaHQnKSB7XG4gICAgICB0aGlzLl9zZXRDYXJldFBvc2l0aW9uKGN1clBvcyArIDEpO1xuICAgIH1cblxuICAgIHJldHVybiBjdXJQb3MgIT09IHRoaXMuX2dldENhcmV0U3RhcnQoKTtcbiAgfTtcblxuICAvKipcbiAgICogRW1wdHkgdGhlIGlucHV0IHdoZW4gd2Ugb25seSBoYXZlIHBsYWNlaG9sZGVycy5cbiAgICovXG5cblxuICBUeXBlYWhlYWQucHJvdG90eXBlLl9lbXB0eVdoZW5Pbmx5UGxhY2Vob2xkZXJzID0gZnVuY3Rpb24gX2VtcHR5V2hlbk9ubHlQbGFjZWhvbGRlcnMoKSB7XG4gICAgaWYgKCF0aGlzLmNoYXJhY3RlcnMubGVuZ3RoKSB7XG4gICAgICB0aGlzLmNsZWFyKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSdW4gYSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IG1heSBjaGFuZ2UgdGhlIGZvY3VzIG9mIHRoZSBkb2N1bWVudCwgYnV0XG4gICAqIG1ha2Ugc3VyZSBmb2N1cyBnb2VzIGJhY2sgdG8gd2hlcmUgaXQgbmVlZHMgdG8gYmUuIEFsc28sIHNldCB0aGUgc3RhdGVcbiAgICogc28gdGhhdCBibHVyL2ZvY3VzIGV2ZW50cyBkb24ndCBmaXJlIGZyb20gdGhpcyBpbnN0YW5jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICovXG5cblxuICBUeXBlYWhlYWQucHJvdG90eXBlLl9tYWludGFpbkZvY3VzID0gZnVuY3Rpb24gX21haW50YWluRm9jdXMoY2FsbGJhY2spIHtcblxuICAgIHRoaXMucGF1c2UoKTtcblxuICAgIHZhciBvcmlnaW5hbEFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuXG4gICAgLy9Gb3IgSUVcbiAgICBpZiAoIW9yaWdpbmFsQWN0aXZlRWxlbWVudCkge1xuICAgICAgb3JpZ2luYWxBY3RpdmVFbGVtZW50ID0gZG9jdW1lbnQuYm9keTtcbiAgICB9XG5cbiAgICB2YXIgb3V0cHV0ID0gKGNhbGxiYWNrIHx8IG5vb3ApLmNhbGwodGhpcyk7XG5cbiAgICAvLyBJZiB3ZSBkaWRuJ3QgaGF2ZSBmb2N1cywgZ28gYmFjayB0byBmb2N1c2luZyBvbiB0aGUgb3JpZ2luYWxcbiAgICBpZiAob3JpZ2luYWxBY3RpdmVFbGVtZW50ICE9PSB0aGlzLmlucHV0RWwpIHtcbiAgICAgIHRoaXMuaW5wdXRFbC5ibHVyKCk7XG4gICAgICBvcmlnaW5hbEFjdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlc3VtZSgpO1xuXG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfTtcblxuICAvKipcbiAgICogVXBkYXRlIHRoZSB3aWR0aCBvZiB0aGUgdHlwZWFoZWFkLiBJZiB3ZSBzaG91bGQgYmUgbWF0Y2hpbmcgdGhlIHdpZHRoXG4gICAqIG9mIHRoZSBwbGFjZWhvbGRlciwgZG8gc28uIE90aGVyd2lzZSwgdGFrZSBubyBhY3Rpb24uXG4gICAqL1xuXG5cbiAgVHlwZWFoZWFkLnByb3RvdHlwZS5fdXBkYXRlV2lkdGggPSBmdW5jdGlvbiBfdXBkYXRlV2lkdGgoKSB7XG5cbiAgICBpZiAodGhpcy5tYXRjaFBsYWNlaG9sZGVyU2l6ZSkge1xuICAgICAgdGhpcy5wbGFjZWhvbGRlckVsLnN0eWxlLndpZHRoID0gJ2F1dG8nO1xuICAgICAgLy8gQWRkIDJweCB0byBhY2NvdW50IGZvciBjYXJldCB3aWR0aCBpbiBJRS4uLlxuICAgICAgdGhpcy5pbnB1dEVsLnN0eWxlLndpZHRoID0gJ2F1dG8nO1xuICAgICAgdGhpcy5pbnB1dEVsLnN0eWxlLndpZHRoID0gdGhpcy5wbGFjZWhvbGRlckVsLm9mZnNldFdpZHRoICsgMiArICdweCc7XG4gICAgICB0aGlzLnBsYWNlaG9sZGVyRWwuc3R5bGUud2lkdGggPSAnJztcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIExpc3RlbiBmb3IgZGVsZXRlIGFuZCBhcnJvd3MuXG4gICAqIEBwYXJhbSAge09iamVjdH0gZVxuICAgKi9cblxuXG4gIFR5cGVhaGVhZC5wcm90b3R5cGUuX29uS2V5ZG93biA9IGZ1bmN0aW9uIF9vbktleWRvd24oZSkge1xuXG4gICAgdmFyIGNvZGUgPSBlLmtleUNvZGUgfHwgZS53aGljaDtcblxuICAgIGlmIChjb2RlID09PSB0aGlzLnBhc3RlQ29kZSAmJiAoZS5tZXRhS2V5IHx8IGUuY3RybEtleSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoY29kZSA9PT0gdGhpcy5hY3Rpb25Db2Rlcy5CQUNLU1BBQ0UpIHtcbiAgICAgIHRoaXMucmVtb3ZlQ2hhcmFjdGVyQXRDYXJldCgtMSk7XG4gICAgICB0aGlzLl9vbkJhY2tzcGFjZSgpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gdGhpcy5hY3Rpb25Db2Rlcy5ERUxFVEUpIHtcbiAgICAgIHRoaXMucmVtb3ZlQ2hhcmFjdGVyQXRDYXJldCgwKTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9IGVsc2UgaWYgKGNvZGUgPT09IHRoaXMuYWN0aW9uQ29kZXMuTEVGVCkge1xuICAgICAgaWYgKCF0aGlzLl9nZXRDYXJldFN0YXJ0KCkpIHtcbiAgICAgICAgKHRoaXMub25CYWNrc3BhY2UgfHwgbm9vcCkoKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNvZGUgPT09IHRoaXMuYWN0aW9uQ29kZXMuUklHSFQpIHtcbiAgICAgIGlmICh0aGlzLl9nZXRDYXJldFN0YXJ0KCkgPT09IHRoaXMuY2hhcmFjdGVycy5sZW5ndGgpIHtcbiAgICAgICAgKHRoaXMub25FbmQgfHwgbm9vcCkoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuaWdub3JlQ29kZXMuaW5kZXhPZihjb2RlKSA9PT0gLTEpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLmFkZENoYXJhY3RlckF0Q2FyZXQoU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlKSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSBpbnB1dCBldmVudCBmaXJlcywgdmFsaWRhdGUuIFRoaXMgaGFwcGVuc1xuICAgKiB3aXRoIGEgY29weStwYXN0ZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IGVcbiAgICovXG5cblxuICBUeXBlYWhlYWQucHJvdG90eXBlLl9vbklucHV0ID0gZnVuY3Rpb24gX29uSW5wdXQoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLmNoYXJhY3RlcnMgPSB0aGlzLl9wYXJzZUNoYXJhY3RlcnModGhpcy5pbnB1dEVsLnZhbHVlKTtcbiAgICB0aGlzLnJ1bigpO1xuICAgICh0aGlzLm9uSW5wdXQgfHwgbm9vcCkodGhpcy5nZXRWYWx1ZSgpLCB0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogV2hlbiB3ZSBmb2N1cywgcnVuIHRoZSBmb3JtYXR0aW5nLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZVxuICAgKi9cblxuXG4gIFR5cGVhaGVhZC5wcm90b3R5cGUuX29uRm9jdXMgPSBmdW5jdGlvbiBfb25Gb2N1cygpIHtcblxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5fb25CbHVyQm91bmQpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5fb25CbHVyQm91bmQsIGZhbHNlKTtcbiAgICB0aGlzLmlucHV0RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmx1cicsIHRoaXMuX29uQmx1ckJvdW5kKTtcbiAgICB0aGlzLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIHRoaXMuX29uQmx1ckJvdW5kLCBmYWxzZSk7XG5cbiAgICBpZiAodGhpcy5pc0ZvY3VzZWQgfHwgdGhpcy5wYXVzZUJsdXJGb2N1cyB8fCB0aGlzLmlzUnVubmluZykgcmV0dXJuO1xuXG4gICAgdGhpcy5ydW4oKTtcbiAgICAodGhpcy5vbkZvY3VzIHx8IG5vb3ApKHRoaXMuZ2V0VmFsdWUoKSwgdGhpcyk7XG4gICAgdGhpcy5pc0ZvY3VzZWQgPSB0cnVlO1xuICAgIHRoaXMuX29sZFZhbCA9IHRoaXMuaW5wdXRFbC52YWx1ZTtcbiAgfTtcblxuICAvKipcbiAgICogV2hlbiB3ZSBibHVyLCBpZiB3ZSBoYXZlIG5vIGNoYXJhY3RlcnMsIHJlbW92ZSB0aGUgcGxhY2Vob2xkZXJzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZVxuICAgKi9cblxuXG4gIFR5cGVhaGVhZC5wcm90b3R5cGUuX29uQmx1ciA9IGZ1bmN0aW9uIF9vbkJsdXIoKSB7XG5cbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmx1cicsIHRoaXMuX29uQmx1ckJvdW5kKTtcbiAgICB0aGlzLmlucHV0RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmx1cicsIHRoaXMuX29uQmx1ckJvdW5kKTtcblxuICAgIHRoaXMuaXNGb2N1c2VkID0gZmFsc2U7XG5cbiAgICBpZiAodGhpcy5wYXVzZUJsdXJGb2N1cyB8fCB0aGlzLmlzUnVubmluZykgcmV0dXJuO1xuXG4gICAgdGhpcy5fZW1wdHlXaGVuT25seVBsYWNlaG9sZGVycygpO1xuXG4gICAgaWYgKHRoaXMuX29sZFZhbCAhPT0gdGhpcy5pbnB1dEVsLnZhbHVlKSB7XG4gICAgICAoMCwgX3RyaWdnZXJFdmVudDIuZGVmYXVsdCkodGhpcy5pbnB1dEVsLCAnY2hhbmdlJyk7XG4gICAgfVxuXG4gICAgKHRoaXMub25CbHVyIHx8IG5vb3ApKHRoaXMuZ2V0VmFsdWUoKSwgdGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIHBsYWNlaG9sZGVyIHJlY2VpdmVzIGEgY2xpY2sgZXZlbnQsIGZvY3VzIG9uIHRoZSBpbnB1dC4gVGhpcyBoYXBwZW5zIGluIElFMTAgZm9yIHNvbWVcbiAgICogcmVhc29uIHRoYXQgSSBjYW5ub3QgZnVsbHkgZmF0aG9tLCBidXQgaXQgaGFzIHNvbWV0aGluZyB0byBkbyB3aXRoIHRoZSBleHBsaWNpdCB3aWR0aCBiZWluZ1xuICAgKiBzZXQgb24gYW4gZW1wdHkgZWxlbWVudC5cbiAgICogQHBhcmFtIHtPYmplY3R9IGVcbiAgICovXG5cblxuICBUeXBlYWhlYWQucHJvdG90eXBlLl9vblBsYWNlaG9sZGVyQ2xpY2sgPSBmdW5jdGlvbiBfb25QbGFjZWhvbGRlckNsaWNrKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB0aGlzLmlucHV0RWwuZm9jdXMoKTtcbiAgfTtcblxuICAvKipcbiAgICogV2hlbiB3ZSBiYWNrc3BhY2UsIGlmIHdlIGhhdmUgbm8gY2hhcmFjdGVycyBsZWZ0IGxldCBsaXN0ZW5lcnMga25vdy5cbiAgICogQHBhcmFtIHtPYmplY3R9IGVcbiAgICovXG5cblxuICBUeXBlYWhlYWQucHJvdG90eXBlLl9vbkJhY2tzcGFjZSA9IGZ1bmN0aW9uIF9vbkJhY2tzcGFjZSgpIHtcbiAgICBpZiAoIXRoaXMuX2dldENhcmV0U3RhcnQoKSkgKHRoaXMub25CYWNrc3BhY2UgfHwgbm9vcCkoKTtcbiAgfTtcblxuICByZXR1cm4gVHlwZWFoZWFkO1xufShfYmFzZTIuZGVmYXVsdCk7XG5cbi8qKlxuICogV2hpdGVsaXN0ZWQgcGFyYW1ldGVycyB3aGljaCBjYW4gYmUgc2V0IG9uIGNvbnN0cnVjdGlvbi5cbiAqIEB0eXBlIHtBcnJheX1cbiAqL1xuXG5cblR5cGVhaGVhZC5wcm90b3R5cGUuX3doaXRlbGlzdGVkUGFyYW1zID0gWydmb3JtYXQnLCAncGxhY2Vob2xkZXInLCAnbWF0Y2hQbGFjZWhvbGRlclNpemUnLCAnb25DaGFuZ2UnLCAnb25Gb2N1cycsICdvbkJsdXInLCAnb25JbnB1dCcsICdvbkJhY2tzcGFjZScsICdvbkVuZCddO1xuXG4vKipcbiAqIERlZmF1bHQgdmFsdWVzIGZvciBpbnRlcm5hbCBwcm9wZXJ0aWVzIHdlIHdpbGwgYmUgc2V0dGluZy5cbiAqIFRoZXNlIGFyZSBzZXQgb24gZWFjaCBjb25zdHJ1Y3Rpb24gc28gd2UgZG9uJ3QgbGVhayBwcm9wZXJ0aWVzXG4gKiBpbnRvIHRoZSBwcm90b3R5cGUgY2hhaW4uXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5UeXBlYWhlYWQucHJvdG90eXBlLmRlZmF1bHRzID0ge1xuICBlbDogbnVsbCxcbiAgaW5wdXRFbDogbnVsbCxcbiAgcGxhY2Vob2xkZXJFbDogbnVsbCxcbiAgcGxhY2Vob2xkZXI6IG51bGwsXG4gIGNoYXJhY3RlcnM6IG51bGwsXG4gIGZvcm1hdDogbnVsbCxcbiAgaWdub3JlQ29kZXM6IFs5LCAvLyBUYWJcbiAgMTYsIC8vIFNoaWZ0XG4gIDE3LCAvLyBDdHJsXG4gIDE4LCAvLyBBbHRcbiAgMjAsIC8vIENBUFNcbiAgOTEsIC8vIE1ldGFcbiAgOTMsIC8vIEFsdFxuICAxMTIsIDExMywgMTE0LCAxMTUsIDExNiwgMTE3LCAxMTgsIDExOSwgMTIwLCAxMjEsIDEyMiwgMTIzIC8vIEYxLUYxMlxuICBdLFxuICBhY3Rpb25Db2Rlczoge1xuICAgIEJBQ0tTUEFDRTogOCxcbiAgICBERUxFVEU6IDQ2LFxuICAgIExFRlQ6IDM3LFxuICAgIFJJR0hUOiAzOVxuICB9LFxuICBwYXN0ZUNvZGU6IDg2LCAvLyB2XG4gIHBhdXNlQmx1ckZvY3VzOiAwLFxuICBtYXRjaFBsYWNlaG9sZGVyU2l6ZTogbnVsbCxcbiAgbWF4TGVuZ3RoOiBudWxsLFxuICBpc0ZvY3VzZWQ6IGZhbHNlLFxuICBpc1J1bm5pbmc6IGZhbHNlLFxuICBvbkNoYW5nZTogbnVsbCxcbiAgb25Gb2N1czogbnVsbCxcbiAgb25CbHVyOiBudWxsLFxuICBvbklucHV0OiBudWxsLFxuICBvbkJhY2tzcGFjZTogbnVsbCxcbiAgb25FbmQ6IG51bGwsXG4gIF9hdEVuZDogZmFsc2UsXG4gIF9vbGRWYWw6IG51bGwsXG4gIF9vbklucHV0Qm91bmQ6IG51bGwsXG4gIF9vbktleWRvd25Cb3VuZDogbnVsbCxcbiAgX29uRm9jdXNCb3VuZDogbnVsbCxcbiAgX29uQmx1ckJvdW5kOiBudWxsLFxuICBfb25QbGFjZWhvbGRlckNsaWNrQm91bmQ6IG51bGxcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFR5cGVhaGVhZDtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHlwZWFoZWFkLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX291dGVySGVpZ2h0ID0gcmVxdWlyZSgnLi4vZG9tL291dGVyLWhlaWdodCcpO1xuXG52YXIgX291dGVySGVpZ2h0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX291dGVySGVpZ2h0KTtcblxudmFyIF9hZGRDbGFzcyA9IHJlcXVpcmUoJy4uL2RvbS9hZGQtY2xhc3MnKTtcblxudmFyIF9hZGRDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hZGRDbGFzcyk7XG5cbnZhciBfcmVtb3ZlQ2xhc3MgPSByZXF1aXJlKCcuLi9kb20vcmVtb3ZlLWNsYXNzJyk7XG5cbnZhciBfcmVtb3ZlQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVtb3ZlQ2xhc3MpO1xuXG52YXIgX2hhc0NsYXNzID0gcmVxdWlyZSgnLi4vZG9tL2hhcy1jbGFzcycpO1xuXG52YXIgX2hhc0NsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hhc0NsYXNzKTtcblxudmFyIF90b2dnbGVDbGFzcyA9IHJlcXVpcmUoJy4uL2RvbS90b2dnbGUtY2xhc3MnKTtcblxudmFyIF90b2dnbGVDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90b2dnbGVDbGFzcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBub29wID0gZnVuY3Rpb24gbm9vcCgpIHt9OyAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAjIEFuaW1hdGUgSGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQW5pbWF0ZSB0aGUgaGVpZ2h0IG9mIGFuIGVsZW1lbnQgc2luY2Ugd2UgY2FuJ3QgZG8gdGhpcyB3LyBwdXJlIENTUy4gU2lnaC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogYW5pbWF0ZUhlaWdodCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogICBlbDogLi4uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgdG9nZ2xlRWw6IC4uLixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAgIC8vIE9wdGlvbmFsIHBhcmFtc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgYWN0aW9uOiAnY29sbGFwc2UnfCdleHBhbmQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgaGVpZ2h0QW5pbWF0aW9uQ2xhc3M6ICdzcGFyay1hbmltYXRlLWhlaWdodCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogICBvcGFjaXR5QW5pbWF0aW9uQ2xhc3M6ICdzcGFyay1hbmltYXRlLW9wYWNpdHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgdG9nZ2xlUHJvcGVydHk6ICdkaXNwbGF5J3wnb3ZlcmZsb3cnfCd2aXNpYmlsaXR5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAgIHRvZ2dsZVZhbHVlOiAnYmxvY2snfCdub25lJ3wndmlzaWJsZSd8J2hpZGRlbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogICBhbmltYXRpb25EdXJhdGlvbjogMjUwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAbW9kdWxlIGhlbHBlcnMvYW5pbWF0aW9uL2hlaWdodC5qc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuXG52YXIgcnVubmluZ0FuaW1hdGlvbnMgPSB7XG4gIGVsczogW10sXG4gIGNvbXBsZXRlQ2FsbGJhY2tzOiBbXVxufTtcblxuLyoqXG4gKiBHZXQgdGhlIGludmVyc2UgdG9nZ2xlIHZhbHVlXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHByb3BlcnR5XG4gKiBAcGFyYW0gIHtTdHJpbmd9IG9yaWdpbmFsVmFsdWVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZ2V0SW52ZXJzZVRvZ2dsZVZhbHVlKGVsLCBwcm9wZXJ0eSwgb3JpZ2luYWxWYWx1ZSkge1xuXG4gIC8vIEdldCB0aGUgdmFsdWUgdG8gdG9nZ2xlIHRvIGZvciB0aGUgZ2l2ZW4gcHJvcGVydHlcbiAgc3dpdGNoIChwcm9wZXJ0eSkge1xuICAgIGNhc2UgJ292ZXJmbG93JzpcbiAgICBjYXNlICd2aXNpYmlsaXR5JzpcbiAgICAgIHJldHVybiBvcmlnaW5hbFZhbHVlID09PSAndmlzaWJsZScgPyAnaGlkZGVuJyA6ICd2aXNpYmxlJztcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG9yaWdpbmFsVmFsdWUgPT09ICdibG9jaycgfHwgb3JpZ2luYWxWYWx1ZSA9PT0gJ2lubGluZS1ibG9jaycgPyAnbm9uZScgOiAnYmxvY2snO1xuICB9XG59XG5cbi8qKlxuICogV2hlbiBhbiBhbmltYXRpb24gaXMgY29tcGxldGUsIGNsZWFuIHVwIGFuZCBydW4gdGhlIGNhbGxiYWNrLlxuICogQHBhcmFtICB7T2JqZWN0fSBwYXJhbXNcbiAqL1xuZnVuY3Rpb24gb25Db21wbGV0ZShwYXJhbXMpIHtcblxuICAvLyBSZXNldCB0b2dnbGUgZWwgdmlzaWJpbGl0eVxuICBpZiAocGFyYW1zLnRvZ2dsZUNsYXNzTmFtZSkge1xuICAgICgwLCBfdG9nZ2xlQ2xhc3MyLmRlZmF1bHQpKHBhcmFtcy5lbCwgcGFyYW1zLnRvZ2dsZUNsYXNzTmFtZSwgIXBhcmFtcy5jb2xsYXBzZSk7XG4gIH0gZWxzZSB7XG4gICAgcGFyYW1zLnRvZ2dsZUVsLnN0eWxlW3BhcmFtcy50b2dnbGVQcm9wZXJ0eV0gPSAnJztcbiAgfVxuXG4gIC8vIFJlbW92ZSB0aGUgaGVpZ2h0IHByb3BlcnR5XG4gIHBhcmFtcy5lbC5zdHlsZS5oZWlnaHQgPSAnJztcbiAgcGFyYW1zLnRvZ2dsZUVsLnN0eWxlLmhlaWdodCA9ICcnO1xuICBwYXJhbXMudG9nZ2xlRWwuc3R5bGUubWFyZ2luQm90dG9tID0gJyc7XG4gIHBhcmFtcy50b2dnbGVFbC5zdHlsZS5tYXJnaW5Ub3AgPSAnJztcblxuICAvLyBSZW1vdmUgdGhlIHNwYXJrLWFuaW1hdGUtaGVpZ2h0IGNsYXNzIHNvIHRoZSB0cmFuc2l0aW9ucyBubyBsb25nZXIgYXBwbHlcbiAgKDAsIF9yZW1vdmVDbGFzczIuZGVmYXVsdCkocGFyYW1zLmVsLCBwYXJhbXMuaGVpZ2h0QW5pbWF0aW9uQ2xhc3MpO1xuICAoMCwgX3JlbW92ZUNsYXNzMi5kZWZhdWx0KShwYXJhbXMudG9nZ2xlRWwsIHBhcmFtcy5oZWlnaHRBbmltYXRpb25DbGFzcyk7XG5cbiAgLy8gUnVuIHRoZSBjYWxsYmFja1xuICBwYXJhbXMub25Db21wbGV0ZSgpO1xuXG4gIC8vIFJlbW92ZSB0aGUgZWxlbWVudCBhbmQgY2FsbGJhY2sgZnJvbSB0aGVpciByZXNwZWN0aXZlIGFycmF5c1xuICB2YXIgcnVubmluZ0luZGV4ID0gcnVubmluZ0FuaW1hdGlvbnMuZWxzLmluZGV4T2YocGFyYW1zLmVsKTtcbiAgcnVubmluZ0FuaW1hdGlvbnMuZWxzLnNwbGljZShydW5uaW5nSW5kZXgsIDEpO1xuICBydW5uaW5nQW5pbWF0aW9ucy5jb21wbGV0ZUNhbGxiYWNrcy5zcGxpY2UocnVubmluZ0luZGV4LCAxKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zXG4gKi9cbmZ1bmN0aW9uIGFuaW1hdGVIZWlnaHQocGFyYW1zKSB7XG5cbiAgcGFyYW1zID0gcGFyYW1zIHx8IHt9O1xuXG4gIHZhciBlbCA9IHBhcmFtcy5lbDtcblxuICBpZiAoIWVsKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGNvbGxhcHNlID0gcGFyYW1zLmFjdGlvbiAmJiBwYXJhbXMuYWN0aW9uID09PSAnY29sbGFwc2UnO1xuICB2YXIgaGVpZ2h0QW5pbWF0aW9uQ2xhc3MgPSBwYXJhbXMuaGVpZ2h0QW5pbWF0aW9uQ2xhc3MgfHwgJ3NwYXJrLWFuaW1hdGUtaGVpZ2h0JztcblxuICAvLyBBbGxvdyBmb3IgZWxlbWVudHMgdG8gYmUgcGFzc2VkIG9yIHNlbGVjdG9yIHN0cmluZ3NcbiAgdmFyIHRvZ2dsZUVsID0gdHlwZW9mIHBhcmFtcy50b2dnbGVFbCA9PT0gJ3N0cmluZycgPyBlbC5xdWVyeVNlbGVjdG9yKHBhcmFtcy50b2dnbGVFbCkgOiBwYXJhbXMudG9nZ2xlRWw7XG5cbiAgLy8gTm8gZWxlbWVudCB0byBiZSBzd2l0Y2hpbmcgd2l0aCB0b2dnbGluZyBzbyB3ZSBjYW4ndCBkZXRlcm1pbmUgdGhlIGRlc2lyZWQgaGVpZ2h0IHRvIGFuaW1hdGUgdG8uXG4gIGlmICghdG9nZ2xlRWwgfHwgKDAsIF9oYXNDbGFzczIuZGVmYXVsdCkoZWwsICdzcGFyay1uby1hbmltYXRlJykpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgdG9nZ2xlQ2xhc3NOYW1lID0gcGFyYW1zLnRvZ2dsZUNsYXNzO1xuXG4gIC8vIFRoZSBzdHlsZSBwcm9wZXJ0eSB0byB1c2Ugd2hlbiB0b2dnbGluZyB2aXNpYmlsaXR5XG4gIHZhciB0b2dnbGVQcm9wZXJ0eSA9IHBhcmFtcy50b2dnbGVQcm9wZXJ0eSB8fCAnZGlzcGxheSc7XG4gIHZhciB0b2dnbGVTdHlsZXMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0b2dnbGVFbCk7XG4gIHZhciBvcmlnaW5hbFRvZ2dsZVZhbHVlID0gdG9nZ2xlU3R5bGVzW3RvZ2dsZVByb3BlcnR5XTtcbiAgdmFyIHRvZ2dsZVZhbHVlID0gcGFyYW1zLnRvZ2dsZVZhbHVlIHx8IGdldEludmVyc2VUb2dnbGVWYWx1ZSh0b2dnbGVQcm9wZXJ0eSwgb3JpZ2luYWxUb2dnbGVWYWx1ZSk7XG5cbiAgLy8gSWYgd2UgYXJlIGFscmVhZHkgYW5pbWF0aW5nLCBzdG9wIG5vdy5cbiAgdmFyIHJ1bm5pbmdJbmRleCA9IHJ1bm5pbmdBbmltYXRpb25zLmVscy5pbmRleE9mKGVsKTtcbiAgaWYgKHJ1bm5pbmdJbmRleCAhPT0gLTEpIHtcblxuICAgIHZhciBjb21wbGV0ZUNhbGxiYWNrID0gcnVubmluZ0FuaW1hdGlvbnMuY29tcGxldGVDYWxsYmFja3NbcnVubmluZ0luZGV4XTtcbiAgICBpZiAoY29tcGxldGVDYWxsYmFjaykge1xuICAgICAgY2xlYXJUaW1lb3V0KGNvbXBsZXRlQ2FsbGJhY2spO1xuICAgIH1cblxuICAgIG9uQ29tcGxldGUoe1xuICAgICAgZWw6IGVsLFxuICAgICAgdG9nZ2xlRWw6IHRvZ2dsZUVsLFxuICAgICAgb25Db21wbGV0ZTogcGFyYW1zLm9uQ29tcGxldGUgfHwgbm9vcCxcbiAgICAgIGNvbGxhcHNlOiBjb2xsYXBzZSxcbiAgICAgIHRvZ2dsZVByb3BlcnR5OiB0b2dnbGVQcm9wZXJ0eSxcbiAgICAgIHRvZ2dsZUNsYXNzTmFtZTogdG9nZ2xlQ2xhc3NOYW1lLFxuICAgICAgdG9nZ2xlVmFsdWU6IHRvZ2dsZVZhbHVlLFxuICAgICAgaGVpZ2h0QW5pbWF0aW9uQ2xhc3M6IGhlaWdodEFuaW1hdGlvbkNsYXNzXG4gICAgfSk7XG4gIH1cblxuICAvLyBTdG9yZSB0aGUgY3VycmVudCBoZWlnaHRcbiAgdmFyIG9yaWdpbmFsSGVpZ2h0ID0gKDAsIF9vdXRlckhlaWdodDIuZGVmYXVsdCkoZWwpO1xuXG4gIC8vIFRvZ2dsZSB0aGUgdmlzaWJsZSBwcm9wZXJ0eVxuICBpZiAodG9nZ2xlQ2xhc3NOYW1lKSB7XG4gICAgKDAsIF90b2dnbGVDbGFzczIuZGVmYXVsdCkoZWwsIHRvZ2dsZUNsYXNzTmFtZSwgIWNvbGxhcHNlKTtcbiAgfSBlbHNlIHtcbiAgICB0b2dnbGVFbC5zdHlsZVt0b2dnbGVQcm9wZXJ0eV0gPSB0b2dnbGVWYWx1ZTtcbiAgfVxuXG4gIC8vIFdoZW4gbWVhc3VyaW5nIHRoZSBzaXplIGZvciBhIGNvbGxhcHNlLCB3ZSBoYXZlIHRvIHdhaXQgYSB0aWMgZm9yIGl0IHRvIGJlXG4gIC8vIGFjY3VyYXRlLiBOb3Qgc3VyZSB3aHkuIFVnaC5cbiAgaWYgKGNvbGxhcHNlKSB7XG4gICAgc2V0VGltZW91dChydW5BbmltYXRpb24sIDApO1xuICB9IGVsc2Uge1xuICAgIHJ1bkFuaW1hdGlvbigpO1xuICB9XG5cbiAgZnVuY3Rpb24gcnVuQW5pbWF0aW9uKCkge1xuXG4gICAgLy8gTm93IHRoYXQgdGhlIHRvZ2dsZSBlbCBpcyB0YWtpbmcgdXAgc3BhY2UsIGdldCB0aGUgbmV3IGhlaWdodCB3aGljaCB3ZSB3aWxsIGJlIGFuaW1hdGluZyB0b1xuICAgIHZhciB0YXJnZXRFbEhlaWdodCA9ICgwLCBfb3V0ZXJIZWlnaHQyLmRlZmF1bHQpKGVsKTtcblxuICAgIC8vIFdlIG5lZWQgdG8gc3RvcmUgdGhlIG9yaWdpbmFsIGFuZCB0YXJnZXQgdG9nZ2xlIGVsZW1lbnQgaGVpZ2h0cy4gVGhleSBkaWZmZXIgZGVwZW5kaW5nIG9uXG4gICAgLy8gd2hldGhlciB3ZSBhcmUgZ29pbmcgdG8gZXhwYW5kIG9yIGNvbGxhcHNlLlxuICAgIHZhciB0YXJnZXRUb2dnbGVFbEhlaWdodCA9IHZvaWQgMDtcbiAgICB2YXIgb3JpZ2luYWxUb2dnbGVFbEhlaWdodCA9IHZvaWQgMDtcblxuICAgIC8vIElmIHdlIGFyZSBjb2xsYXBzaW5nLCByZXNldCB0aGUgdG9nZ2xlIHN0eWxlIGFuZCBzZXQgaXQgd2hlbiB3ZSdyZSBkb25lLiBTZXQgdGhlIGhlaWdodCBzb1xuICAgIC8vIHRoYXQgd2UgY2FuIGFuaW1hdGUgZG93biB0byAwIG9yIHVwIHRvIHRoZSB0YXJnZXQgaGVpZ2h0LlxuICAgIGlmIChjb2xsYXBzZSkge1xuXG4gICAgICBpZiAodG9nZ2xlQ2xhc3NOYW1lKSB7XG4gICAgICAgICgwLCBfcmVtb3ZlQ2xhc3MyLmRlZmF1bHQpKGVsLCB0b2dnbGVDbGFzc05hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9nZ2xlRWwuc3R5bGVbdG9nZ2xlUHJvcGVydHldID0gb3JpZ2luYWxUb2dnbGVWYWx1ZTtcbiAgICAgIH1cblxuICAgICAgb3JpZ2luYWxUb2dnbGVFbEhlaWdodCA9ICgwLCBfb3V0ZXJIZWlnaHQyLmRlZmF1bHQpKHRvZ2dsZUVsLCB0b2dnbGVTdHlsZXMpO1xuICAgICAgdGFyZ2V0VG9nZ2xlRWxIZWlnaHQgPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXRUb2dnbGVFbEhlaWdodCA9ICgwLCBfb3V0ZXJIZWlnaHQyLmRlZmF1bHQpKHRvZ2dsZUVsLCB0b2dnbGVTdHlsZXMpO1xuICAgICAgb3JpZ2luYWxUb2dnbGVFbEhlaWdodCA9IDA7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBvcmlnaW5hbCBoZWlnaHRcbiAgICBlbC5zdHlsZS5oZWlnaHQgPSBvcmlnaW5hbEhlaWdodCArICdweCc7XG4gICAgdG9nZ2xlRWwuc3R5bGUuaGVpZ2h0ID0gb3JpZ2luYWxUb2dnbGVFbEhlaWdodCArICdweCc7XG4gICAgdG9nZ2xlRWwuc3R5bGUubWFyZ2luQm90dG9tID0gJzBweCc7XG4gICAgdG9nZ2xlRWwuc3R5bGUubWFyZ2luVG9wID0gJzBweCc7XG5cbiAgICAvLyBBZGQgdGhlIHNwYXJrLWFuaW1hdGUtaGVpZ2h0IGNsYXNzIHdoaWNoIHdpbGwgc2V0dXAgdGhlIHRyYW5zaXRpb24tcHJvcGVydHkgYW5kIGR1cmF0aW9uXG4gICAgKDAsIF9hZGRDbGFzczIuZGVmYXVsdCkoZWwsIGhlaWdodEFuaW1hdGlvbkNsYXNzKTtcbiAgICAoMCwgX2FkZENsYXNzMi5kZWZhdWx0KSh0b2dnbGVFbCwgaGVpZ2h0QW5pbWF0aW9uQ2xhc3MpO1xuXG4gICAgcnVubmluZ0FuaW1hdGlvbnMuZWxzLnB1c2goZWwpO1xuXG4gICAgLy8gV2UgbmVlZCB0byB3YWl0IGEgdGljayB0byB0b2dnbGUgdGhlIGhlaWdodCBvciBlbHNlIHRoZSBhbmltYXRpb24gY2xhc3Mgd29uJ3QgZnVuY3Rpb25cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblxuICAgICAgLy8gU2V0IHRoZSBoZWlnaHQgdG8gdGhlIHRhcmdldCBoZWlnaHRcbiAgICAgIGVsLnN0eWxlLmhlaWdodCA9IHRhcmdldEVsSGVpZ2h0ICsgJ3B4JztcbiAgICAgIHRvZ2dsZUVsLnN0eWxlLmhlaWdodCA9IHRhcmdldFRvZ2dsZUVsSGVpZ2h0ICsgJ3B4JztcblxuICAgICAgLy8gUmVtb3ZlIGlubGluZSBzdHlsZXMgYWZ0ZXIgdGhlIGFuaW1hdGlvbiBpcyBjb21wbGV0ZVxuICAgICAgcnVubmluZ0FuaW1hdGlvbnMuY29tcGxldGVDYWxsYmFja3MucHVzaChzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgb25Db21wbGV0ZSh7XG4gICAgICAgICAgZWw6IGVsLFxuICAgICAgICAgIHRvZ2dsZUVsOiB0b2dnbGVFbCxcbiAgICAgICAgICBvbkNvbXBsZXRlOiBwYXJhbXMub25Db21wbGV0ZSB8fCBub29wLFxuICAgICAgICAgIGNvbGxhcHNlOiBjb2xsYXBzZSxcbiAgICAgICAgICB0b2dnbGVQcm9wZXJ0eTogdG9nZ2xlUHJvcGVydHksXG4gICAgICAgICAgdG9nZ2xlQ2xhc3NOYW1lOiB0b2dnbGVDbGFzc05hbWUsXG4gICAgICAgICAgdG9nZ2xlVmFsdWU6IHRvZ2dsZVZhbHVlLFxuICAgICAgICAgIGhlaWdodEFuaW1hdGlvbkNsYXNzOiBoZWlnaHRBbmltYXRpb25DbGFzc1xuICAgICAgICB9KTtcbiAgICAgIH0sIHBhcmFtcy5hbmltYXRpb25EdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gcGFyYW1zLmFuaW1hdGlvbkR1cmF0aW9uIDogMjAxKSk7XG4gICAgfSwgMCk7XG4gIH1cbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gYW5pbWF0ZUhlaWdodDtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGVpZ2h0LmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuLyoqXG4gKiAjIERhdGUgaGVscGVyXG4gKiBHZW5lcmFsIGhlbHBlcnMgZm9yIHdvcmtpbmcgd2l0aCBkYXRlcy5cbiAqXG4gKiBAbW9kdWxlIGhlbHBlcnMvZGF0ZS9kYXRlLmpzXG4gKi9cblxudmFyIG1vbnRoTmFtZXMgPSBbJ0phbnVhcnknLCAnRmVicnVhcnknLCAnTWFyY2gnLCAnQXByaWwnLCAnTWF5JywgJ0p1bmUnLCAnSnVseScsICdBdWd1c3QnLCAnU2VwdGVtYmVyJywgJ09jdG9iZXInLCAnTm92ZW1iZXInLCAnRGVjZW1iZXInXTtcbnZhciBtb250aE5hbWVzU2hvcnQgPSBbJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYXknLCAnSnVuZScsICdKdWx5JywgJ0F1ZycsICdTZXB0JywgJ09jdCcsICdOb3YnLCAnRGVjJ107XG52YXIgZGF5TmFtZXMgPSBbJ1N1bmRheScsICdNb25kYXknLCAnVHVlc2RheScsICdXZWRuZXNkYXknLCAnVGh1cnNkYXknLCAnRnJpZGF5JywgJ1NhdHVyZGF5J107XG52YXIgZGF5TmFtZXNTaG9ydCA9IFsnU3VuJywgJ01vbicsICdUdWVzJywgJ1dlZCcsICdUaHVyJywgJ0ZyaScsICdTYXQnXTtcbnZhciBhZGp1c3RlZERheU5hbWVzID0gW107XG52YXIgYWRqdXN0ZWREYXlOYW1lc1Nob3J0ID0gW107XG52YXIgd2Vla1N0YXJ0c09uID0gMDtcblxudmFyIGRhdGVIZWxwZXIgPSB7XG5cbiAgLyoqXG4gICAqIFRyYW5zZm9ybSBhIGRhdGUgaW50byBhbiBvYmplY3Qgb2YgZGF0ZSB2YWx1ZXMuXG4gICAqIEBwYXJhbSB7RGF0ZX0gZGF0ZVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZShkYXRlKSB7XG5cbiAgICBkYXRlID0gZGF0ZSBpbnN0YW5jZW9mIERhdGUgPyBkYXRlIDogbmV3IERhdGUoZGF0ZS55ZWFyLCBkYXRlLm1vbnRoIC0gMSwgZGF0ZS5kYXkpO1xuXG4gICAgdmFyIGluc3QgPSBPYmplY3QuY3JlYXRlKGRhdGVIZWxwZXIpO1xuICAgIGluc3QuX2RhdGUgPSBkYXRlO1xuICAgIGluc3QuX2NhY2hlID0ge307XG5cbiAgICByZXR1cm4gaW5zdDtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IGEgeWVhci5cbiAgICogQHJldHVybiB7TnVtYmVyfVxuICAgKi9cbiAgZ2V0IHllYXIoKSB7XG4gICAgdGhpcy5faW5zdGFuY2VDaGVjaygneWVhcicpO1xuICAgIHJldHVybiB0aGlzLl9kYXRlLmdldEZ1bGxZZWFyKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldCBhIHllYXIuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB5XG4gICAqL1xuICBzZXQgeWVhcih5KSB7XG4gICAgdGhpcy5faW5zdGFuY2VDaGVjaygneWVhcicpO1xuICAgIHRoaXMuX2NsZWFyQ2FjaGUoKTtcbiAgICByZXR1cm4gdGhpcy5fZGF0ZS5zZXRGdWxsWWVhcih5KTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IGEgbW9udGguXG4gICAqIEByZXR1cm4ge051bWJlcn0gMS0xMlxuICAgKi9cbiAgZ2V0IG1vbnRoKCkge1xuICAgIHRoaXMuX2luc3RhbmNlQ2hlY2soJ21vbnRoJyk7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGUuZ2V0TW9udGgoKSArIDE7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldCBhIG1vbnRoLlxuICAgKiBAcGFyYW0ge051bWJlcn0gbSAxLTEyXG4gICAqL1xuICBzZXQgbW9udGgobSkge1xuICAgIHRoaXMuX2luc3RhbmNlQ2hlY2soJ21vbnRoJyk7XG4gICAgdGhpcy5fY2xlYXJDYWNoZSgpO1xuICAgIHJldHVybiB0aGlzLl9kYXRlLnNldE1vbnRoKG0gLSAxKTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IGEgZGF5LlxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9IDEtMzFcbiAgICovXG4gIGdldCBkYXkoKSB7XG4gICAgdGhpcy5faW5zdGFuY2VDaGVjaygnZGF5Jyk7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGUuZ2V0RGF0ZSgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXQgYSBkYXkuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkIDEtMzFcbiAgICovXG4gIHNldCBkYXkoZCkge1xuICAgIHRoaXMuX2luc3RhbmNlQ2hlY2soJ2RheScpO1xuICAgIHRoaXMuX2NsZWFyQ2FjaGUoKTtcbiAgICByZXR1cm4gdGhpcy5fZGF0ZS5zZXREYXRlKGQpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBkYXksIG1vbnRoIGFuZCB5ZWFyIHZhbHVlcyBhdCBvbmNlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zXG4gICAqL1xuICBzZXQ6IGZ1bmN0aW9uIHNldChwYXJhbXMpIHtcbiAgICBwYXJhbXMgPSBwYXJhbXMgfHwge307XG4gICAgdGhpcy55ZWFyID0gcGFyYW1zLnllYXIgfHwgdGhpcy55ZWFyO1xuICAgIHRoaXMubW9udGggPSBwYXJhbXMubW9udGggfHwgdGhpcy5tb250aDtcbiAgICB0aGlzLmRheSA9IHBhcmFtcy5kYXkgfHwgdGhpcy5kYXk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZnVsbCBuYW1lIG9mIHRoZSBtb250aC5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IG51bVxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICBnZXRNb250aE5hbWU6IGZ1bmN0aW9uIGdldE1vbnRoTmFtZShudW0pIHtcbiAgICByZXR1cm4gbW9udGhOYW1lc1tudW0gLSAxXTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBtb250aCBuYW1lLlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICBnZXQgbW9udGhOYW1lKCkge1xuICAgIHRoaXMuX2luc3RhbmNlQ2hlY2soJ21vbnRoTmFtZScpO1xuICAgIHJldHVybiBkYXRlSGVscGVyLmdldE1vbnRoTmFtZSh0aGlzLm1vbnRoKTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBsaXN0IG9mIG1vbnRoIG5hbWVzLlxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIGdldE1vbnRoTmFtZXM6IGZ1bmN0aW9uIGdldE1vbnRoTmFtZXMoKSB7XG4gICAgcmV0dXJuIG1vbnRoTmFtZXM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc2hvcnQgbmFtZSBvZiB0aGUgbW9udGguXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBudW1cbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0TW9udGhOYW1lU2hvcnQ6IGZ1bmN0aW9uIGdldE1vbnRoTmFtZVNob3J0KG51bSkge1xuICAgIHJldHVybiBtb250aE5hbWVzU2hvcnRbbnVtIC0gMV07XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbW9udGggbmFtZS5cbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IG1vbnRoTmFtZVNob3J0KCkge1xuICAgIHRoaXMuX2luc3RhbmNlQ2hlY2soJ21vbnRoTmFtZScpO1xuICAgIHJldHVybiBkYXRlSGVscGVyLmdldE1vbnRoTmFtZVNob3J0KHRoaXMubW9udGgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxpc3Qgb2Ygc2hvcnQgbW9udGggbmFtZXMuXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgZ2V0TW9udGhOYW1lc1Nob3J0OiBmdW5jdGlvbiBnZXRNb250aE5hbWVzU2hvcnQoKSB7XG4gICAgcmV0dXJuIG1vbnRoTmFtZXNTaG9ydDtcbiAgfSxcblxuICAvKipcbiAgICogU2V0IHRoZSBtb250aCBuYW1lcy5cbiAgICogQHBhcmFtIHtBcnJheX0gbmFtZXNcbiAgICovXG4gIHNldE1vbnRoTmFtZXM6IGZ1bmN0aW9uIHNldE1vbnRoTmFtZXMobmFtZXMpIHtcbiAgICBpZiAobmFtZXMubGVuZ3RoID09PSAxMikgbW9udGhOYW1lcyA9IG5hbWVzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHNob3J0IG1vbnRoIG5hbWVzLlxuICAgKiBAcGFyYW0ge0FycmF5fSBuYW1lc1xuICAgKi9cbiAgc2V0TW9udGhOYW1lc1Nob3J0OiBmdW5jdGlvbiBzZXRNb250aE5hbWVzU2hvcnQobmFtZXMpIHtcbiAgICBpZiAobmFtZXMubGVuZ3RoID09PSAxMikgbW9udGhOYW1lc1Nob3J0ID0gbmFtZXM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZGF5IG9mIHRoZSB3ZWVrIGZvciBhIGdpdmVuIGRheS5cbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGVcbiAgICogQHJldHVybiB7TnVtYmVyfSAxLTdcbiAgICovXG4gIGdldERheU9mV2VlazogZnVuY3Rpb24gZ2V0RGF5T2ZXZWVrKGRhdGUpIHtcbiAgICB2YXIgZGF5ID0gKGRhdGUgaW5zdGFuY2VvZiBEYXRlID8gZGF0ZSA6IG5ldyBEYXRlKGRhdGUueWVhciwgZGF0ZS5tb250aCAtIDEsIGRhdGUuZGF5KSkuZ2V0RGF5KCkgLSB3ZWVrU3RhcnRzT247XG4gICAgcmV0dXJuIChkYXkgPCAwID8gNyAtIE1hdGguYWJzKGRheSkgOiBkYXkpICsgMTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBkYXkgb2YgdGhlIHdlZWsuXG4gICAqIEByZXR1cm4ge051bWJlcn1cbiAgICovXG4gIGdldCBkYXlPZldlZWsoKSB7XG4gICAgcmV0dXJuIGRhdGVIZWxwZXIuZ2V0RGF5T2ZXZWVrKHRoaXMuX2RhdGUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGZ1bGwgbmFtZSBvZiBhIGRheSBvZiB0aGUgd2Vlay5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IG51bVxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICBnZXREYXlOYW1lOiBmdW5jdGlvbiBnZXREYXlOYW1lKG51bSkge1xuICAgIHJldHVybiBkYXlOYW1lc1tudW0gLSAxICsgd2Vla1N0YXJ0c09uXSB8fCBkYXlOYW1lc1tkYXlOYW1lcy5sZW5ndGggLSBudW0gLSAxICsgd2Vla1N0YXJ0c09uXTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBkYXkgbmFtZS5cbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IGRheU5hbWUoKSB7XG4gICAgdGhpcy5faW5zdGFuY2VDaGVjaygnZGF5TmFtZScpO1xuICAgIHJldHVybiBkYXRlSGVscGVyLmdldERheU5hbWUodGhpcy5kYXlPZldlZWspO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGZ1bGwgbmFtZSBvZiB0aGUgZGF5cyBvZiB0aGUgd2Vlay5cbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBnZXREYXlOYW1lczogZnVuY3Rpb24gZ2V0RGF5TmFtZXMoKSB7XG4gICAgcmV0dXJuIGFkanVzdGVkRGF5TmFtZXMubGVuZ3RoID8gYWRqdXN0ZWREYXlOYW1lcyA6IGRheU5hbWVzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHNob3J0IG5hbWUgb2YgdGhlIGRheS5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IG51bVxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICBnZXREYXlOYW1lU2hvcnQ6IGZ1bmN0aW9uIGdldERheU5hbWVTaG9ydChudW0pIHtcbiAgICByZXR1cm4gZGF5TmFtZXNTaG9ydFtudW0gLSAxICsgd2Vla1N0YXJ0c09uXSB8fCBkYXlOYW1lc1tkYXlOYW1lcy5sZW5ndGggLSBudW0gLSAxICsgd2Vla1N0YXJ0c09uXTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBzaG9ydCBkYXkgbmFtZS5cbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IGRheU5hbWVTaG9ydCgpIHtcbiAgICB0aGlzLl9pbnN0YW5jZUNoZWNrKCdkYXlOYW1lU2hvcnQnKTtcbiAgICByZXR1cm4gZGF0ZUhlbHBlci5nZXREYXlOYW1lU2hvcnQodGhpcy5kYXlPZldlZWspO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGZ1bGwgbmFtZSBvZiB0aGUgZGF5cyBvZiB0aGUgd2Vlay5cbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBnZXREYXlOYW1lc1Nob3J0OiBmdW5jdGlvbiBnZXREYXlOYW1lc1Nob3J0KCkge1xuICAgIHJldHVybiBhZGp1c3RlZERheU5hbWVzU2hvcnQubGVuZ3RoID8gYWRqdXN0ZWREYXlOYW1lc1Nob3J0IDogZGF5TmFtZXNTaG9ydDtcbiAgfSxcblxuICAvKipcbiAgICogU2V0IHRoZSBkYXkgbmFtZXMuXG4gICAqIEBwYXJhbSB7QXJyYXl9IG5hbWVzXG4gICAqL1xuICBzZXREYXlOYW1lczogZnVuY3Rpb24gc2V0RGF5TmFtZXMobmFtZXMpIHtcbiAgICBpZiAobmFtZXMubGVuZ3RoID09PSA3KSBkYXlOYW1lcyA9IG5hbWVzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHNob3J0IGRheSBuYW1lcy5cbiAgICogQHBhcmFtIHtBcnJheX0gbmFtZXNcbiAgICovXG4gIHNldERheU5hbWVzU2hvcnQ6IGZ1bmN0aW9uIHNldERheU5hbWVzU2hvcnQobmFtZXMpIHtcbiAgICBpZiAobmFtZXMubGVuZ3RoID09PSA3KSBkYXlOYW1lc1Nob3J0ID0gbmFtZXM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2Vlay5cbiAgICogQHJldHVybiB7TnVtYmVyfVxuICAgKi9cbiAgZ2V0V2Vla1N0YXJ0c09uOiBmdW5jdGlvbiBnZXRXZWVrU3RhcnRzT24oKSB7XG4gICAgcmV0dXJuIHdlZWtTdGFydHNPbjtcbiAgfSxcblxuICAvKipcbiAgICogU2V0IHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrLlxuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cbiAgc2V0V2Vla1N0YXJ0c09uOiBmdW5jdGlvbiBzZXRXZWVrU3RhcnRzT24obnVtYmVyKSB7XG5cbiAgICB3ZWVrU3RhcnRzT24gPSBudW1iZXI7XG5cbiAgICBpZiAobnVtYmVyKSB7XG4gICAgICBhZGp1c3RlZERheU5hbWVzID0gZGF5TmFtZXMuc2xpY2Uod2Vla1N0YXJ0c09uKTtcbiAgICAgIGFkanVzdGVkRGF5TmFtZXMgPSBhZGp1c3RlZERheU5hbWVzLmNvbmNhdChkYXlOYW1lcy5zbGljZSgwLCB3ZWVrU3RhcnRzT24pKTtcbiAgICAgIGFkanVzdGVkRGF5TmFtZXNTaG9ydCA9IGRheU5hbWVzU2hvcnQuc2xpY2Uod2Vla1N0YXJ0c09uKTtcbiAgICAgIGFkanVzdGVkRGF5TmFtZXNTaG9ydCA9IGFkanVzdGVkRGF5TmFtZXNTaG9ydC5jb25jYXQoZGF5TmFtZXNTaG9ydC5zbGljZSgwLCB3ZWVrU3RhcnRzT24pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWRqdXN0ZWREYXlOYW1lcyA9IFtdO1xuICAgICAgYWRqdXN0ZWREYXlOYW1lc1Nob3J0ID0gW107XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnQgZGF0ZS5cbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgbm93OiBmdW5jdGlvbiBub3coKSB7XG4gICAgcmV0dXJuIGRhdGVIZWxwZXIuY3JlYXRlKG5ldyBEYXRlKCkpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG5leHQgeWVhciBhZnRlciB0aGUgZ2l2ZW4gZGF0ZS5cbiAgICogVGhpcyBvYnZpb3VzbHkgaXNuJ3QgdmVyeSBjb21wbGljYXRlZCwgYnV0IGl0IGV4aXN0c1xuICAgKiBmb3IgcGFyaXR5IHdpdGggaG93IHdlIGdldCB0aGUgd2VlaywgZGF5IGFuZCBtb250aC5cbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGVcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgZ2V0TmV4dFllYXI6IGZ1bmN0aW9uIGdldE5leHRZZWFyKGRhdGUpIHtcbiAgICByZXR1cm4gZGF0ZUhlbHBlci5jcmVhdGUobmV3IERhdGUoZGF0ZS55ZWFyICsgMSwgZGF0ZS5tb250aCAtIDEsIGRhdGUuZGF5KSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgeWVhciBmb2xsb3dpbmcgdGhpcy5cbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgZ2V0IG5leHRZZWFyKCkge1xuICAgIHRoaXMuX2luc3RhbmNlQ2hlY2soJ25leHRZZWFyJyk7XG4gICAgcmV0dXJuIHRoaXMuX2NhY2hlLm5leHRZZWFyIHx8ICh0aGlzLl9jYWNoZS5uZXh0WWVhciA9IGRhdGVIZWxwZXIuZ2V0TmV4dFllYXIodGhpcykpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlayBmb3IgYSBnaXZlbiBkYXRlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0ZVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBnZXRXZWVrU3RhcnQ6IGZ1bmN0aW9uIGdldFdlZWtTdGFydChkYXRlKSB7XG4gICAgdmFyIGluc3QgPSBkYXRlSGVscGVyLmNyZWF0ZShuZXcgRGF0ZShkYXRlLnllYXIsIGRhdGUubW9udGggLSAxLCBkYXRlLmRheSAtIGRhdGVIZWxwZXIuZ2V0RGF5T2ZXZWVrKGRhdGUpICsgMSkpO1xuICAgIGluc3Qud2Vla1N0YXJ0c09uID0gd2Vla1N0YXJ0c09uO1xuICAgIHJldHVybiBpbnN0O1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHN0YXJ0IG9mIHRoZSB3ZWVrIGZvciB0aGlzIGRhdGUuXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIGdldCB3ZWVrU3RhcnQoKSB7XG4gICAgdGhpcy5faW5zdGFuY2VDaGVjaygnd2Vla1N0YXJ0Jyk7XG4gICAgcmV0dXJuIHRoaXMuX2NhY2hlLndlZWtTdGFydCAmJiB0aGlzLl9jYWNoZS53ZWVrU3RhcnQud2Vla1N0YXJ0c09uID09PSB3ZWVrU3RhcnRzT24gPyB0aGlzLl9jYWNoZS53ZWVrU3RhcnQgOiB0aGlzLl9jYWNoZS53ZWVrU3RhcnQgPSBkYXRlSGVscGVyLmdldFdlZWtTdGFydCh0aGlzKTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBmaXJzdCBkYXkgb2YgdGhlIG1vbnRoIGZvciBhIGdpdmVuIGRhdGUuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRlXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIGdldE1vbnRoU3RhcnQ6IGZ1bmN0aW9uIGdldE1vbnRoU3RhcnQoZGF0ZSkge1xuICAgIHZhciBpbnN0ID0gZGF0ZUhlbHBlci5jcmVhdGUobmV3IERhdGUoZGF0ZS55ZWFyLCBkYXRlLm1vbnRoIC0gMSwgMSkpO1xuICAgIHJldHVybiBpbnN0O1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHN0YXJ0IG9mIHRoZSBtb250aCBmb3IgdGhpcyBkYXRlLlxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBnZXQgbW9udGhTdGFydCgpIHtcbiAgICB0aGlzLl9pbnN0YW5jZUNoZWNrKCdtb250aFN0YXJ0Jyk7XG4gICAgcmV0dXJuIHRoaXMuX2NhY2hlLm1vbnRoU3RhcnQgfHwgKHRoaXMuX2NhY2hlLm1vbnRoU3RhcnQgPSBkYXRlSGVscGVyLmdldE1vbnRoU3RhcnQodGhpcykpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG5leHQgd2VlayBhZnRlciB0aGUgZ2l2ZW4gZGF0ZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGVcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgZ2V0TmV4dFdlZWs6IGZ1bmN0aW9uIGdldE5leHRXZWVrKGRhdGUpIHtcbiAgICB2YXIgc3RhcnQgPSBkYXRlSGVscGVyLmdldFdlZWtTdGFydChkYXRlKTtcbiAgICByZXR1cm4gZGF0ZUhlbHBlci5jcmVhdGUobmV3IERhdGUoc3RhcnQueWVhciwgc3RhcnQubW9udGggLSAxLCBzdGFydC5kYXkgKyA3KSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgd2VlayBmb2xsb3dpbmcgdGhpcy5cbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgZ2V0IG5leHRXZWVrKCkge1xuICAgIHRoaXMuX2luc3RhbmNlQ2hlY2soJ25leHRXZWVrJyk7XG4gICAgcmV0dXJuIHRoaXMuX2NhY2hlLm5leHRXZWVrIHx8ICh0aGlzLl9jYWNoZS5uZXh0V2VlayA9IGRhdGVIZWxwZXIuZ2V0TmV4dFdlZWsodGhpcykpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG5leHQgZGF5IGFmdGVyIHRoZSBnaXZlbiBkYXRlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0ZVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBnZXROZXh0RGF5OiBmdW5jdGlvbiBnZXROZXh0RGF5KGRhdGUpIHtcbiAgICByZXR1cm4gZGF0ZUhlbHBlci5jcmVhdGUobmV3IERhdGUoZGF0ZS55ZWFyLCBkYXRlLm1vbnRoIC0gMSwgZGF0ZS5kYXkgKyAxKSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZGF5IGZvbGxvd2luZyB0aGlzLlxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBnZXQgbmV4dERheSgpIHtcbiAgICB0aGlzLl9pbnN0YW5jZUNoZWNrKCduZXh0RGF5Jyk7XG4gICAgcmV0dXJuIHRoaXMuX2NhY2hlLm5leHREYXkgfHwgKHRoaXMuX2NhY2hlLm5leHREYXkgPSBkYXRlSGVscGVyLmdldE5leHREYXkodGhpcykpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG5leHQgbW9udGggYWZ0ZXIgdGhlIGdpdmVuIGRhdGUuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRlXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIGdldE5leHRNb250aDogZnVuY3Rpb24gZ2V0TmV4dE1vbnRoKGRhdGUpIHtcbiAgICAvLyBEYXRlKCkgaGFzIGEgKmJ1Zy9mZWF0dXJlKiBpZiBsYXN0IGRheSBvZiBtb250aCBpcyAzMSB3aGVuIGNhbGN1bGF0aW5nIHRoZSBuZXh0IG1vbnRoLlxuICAgIC8vIE5lZWQgdG8gYWNjb3VudCBmb3IgdGhhdCBzbyB0aGF0IGl0IGRvZXNuJ3Qgcm91bmQgdXAgdGhlIGRhdGUvbW9udGguXG5cbiAgICBpZiAoZGF0ZS5kYXkgPT09IDMxICYmIGRhdGUubW9udGggIT09IDEgJiYgZGF0ZS5tb250aCAhPT0gNyAmJiBkYXRlLm1vbnRoICE9PSAxMikge1xuICAgICAgLy8gQWRqdXN0IGZvciBtb250aHMgZW5kaW5nIGluIDMxIGZvbGxvd2VkIGJ5IG1vbnRocyBlbmRpbmcgaW4gMzBcbiAgICAgIHJldHVybiBkYXRlSGVscGVyLmNyZWF0ZShuZXcgRGF0ZShkYXRlLnllYXIsIGRhdGUubW9udGgsIGRhdGUuZGF5IC0gMSkpO1xuICAgIH0gZWxzZSBpZiAoZGF0ZS5kYXkgPiAyOCAmJiBkYXRlLm1vbnRoID09PSAxKSB7XG4gICAgICAvLyBmaXggZm9yIGxhc3QgZGF5IG9mIEZlYnJ1YXJ5XG4gICAgICByZXR1cm4gZGF0ZUhlbHBlci5jcmVhdGUobmV3IERhdGUoZGF0ZS55ZWFyLCBkYXRlLm1vbnRoICsgMSwgMCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZGF0ZUhlbHBlci5jcmVhdGUobmV3IERhdGUoZGF0ZS55ZWFyLCBkYXRlLm1vbnRoLCBkYXRlLmRheSkpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBtb250aCBmb2xsb3dpbmcgdGhpcy5cbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgZ2V0IG5leHRNb250aCgpIHtcbiAgICB0aGlzLl9pbnN0YW5jZUNoZWNrKCduZXh0TW9udGgnKTtcbiAgICByZXR1cm4gdGhpcy5fY2FjaGUubmV4dE1vbnRoIHx8ICh0aGlzLl9jYWNoZS5uZXh0TW9udGggPSBkYXRlSGVscGVyLmdldE5leHRNb250aCh0aGlzKSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcHJldmlvdXMgeWVhciBhZnRlciB0aGUgZ2l2ZW4gZGF0ZS5cbiAgICogVGhpcyBvYnZpb3VzbHkgaXNuJ3QgdmVyeSBjb21wbGljYXRlZCwgYnV0IGl0IGV4aXN0c1xuICAgKiBmb3IgcGFyaXR5IHdpdGggaG93IHdlIGdldCB0aGUgd2VlaywgZGF5IGFuZCBtb250aC5cbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGVcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgZ2V0UHJldmlvdXNZZWFyOiBmdW5jdGlvbiBnZXRQcmV2aW91c1llYXIoZGF0ZSkge1xuICAgIHJldHVybiBkYXRlSGVscGVyLmNyZWF0ZShuZXcgRGF0ZShkYXRlLnllYXIgLSAxLCBkYXRlLm1vbnRoIC0gMSwgZGF0ZS5kYXkpKTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSB5ZWFyIHByZWNlZGluZyB0aGlzLlxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBnZXQgcHJldmlvdXNZZWFyKCkge1xuICAgIHRoaXMuX2luc3RhbmNlQ2hlY2soJ3ByZXZpb3VzWWVhcicpO1xuICAgIHJldHVybiB0aGlzLl9jYWNoZS5wcmV2aW91c1llYXIgfHwgKHRoaXMuX2NhY2hlLnByZXZpb3VzWWVhciA9IGRhdGVIZWxwZXIuZ2V0UHJldmlvdXNZZWFyKHRoaXMpKTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBwcmV2aW91cyB3ZWVrIGFmdGVyIHRoZSBnaXZlbiBkYXRlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0ZVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBnZXRQcmV2aW91c1dlZWs6IGZ1bmN0aW9uIGdldFByZXZpb3VzV2VlayhkYXRlKSB7XG4gICAgdmFyIHN0YXJ0ID0gZGF0ZUhlbHBlci5nZXRXZWVrU3RhcnQoZGF0ZSk7XG4gICAgdmFyIGluc3QgPSBkYXRlSGVscGVyLmNyZWF0ZShuZXcgRGF0ZShzdGFydC55ZWFyLCBzdGFydC5tb250aCAtIDEsIHN0YXJ0LmRheSAtIDcpKTtcbiAgICBpbnN0LndlZWtTdGFydHNPbiA9IHdlZWtTdGFydHNPbjtcbiAgICByZXR1cm4gaW5zdDtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSB3ZWVrIHByZWNlZGluZyB0aGlzLlxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBnZXQgcHJldmlvdXNXZWVrKCkge1xuICAgIHRoaXMuX2luc3RhbmNlQ2hlY2soJ3ByZXZpb3VzV2VlaycpO1xuICAgIHJldHVybiB0aGlzLl9jYWNoZS5wcmV2aW91c1dlZWsgfHwgKHRoaXMuX2NhY2hlLnByZXZpb3VzV2VlayA9IGRhdGVIZWxwZXIuZ2V0UHJldmlvdXNXZWVrKHRoaXMpKTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBwcmV2aW91cyBkYXkgYWZ0ZXIgdGhlIGdpdmVuIGRhdGUuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRlXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIGdldFByZXZpb3VzRGF5OiBmdW5jdGlvbiBnZXRQcmV2aW91c0RheShkYXRlKSB7XG4gICAgcmV0dXJuIGRhdGVIZWxwZXIuY3JlYXRlKG5ldyBEYXRlKGRhdGUueWVhciwgZGF0ZS5tb250aCAtIDEsIGRhdGUuZGF5IC0gMSkpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGRheSBwcmVjZWRpbmcgdGhpcy5cbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgZ2V0IHByZXZpb3VzRGF5KCkge1xuICAgIHRoaXMuX2luc3RhbmNlQ2hlY2soJ3ByZXZpb3VzRGF5Jyk7XG4gICAgcmV0dXJuIHRoaXMuX2NhY2hlLnByZXZpb3VzRGF5IHx8ICh0aGlzLl9jYWNoZS5wcmV2aW91c0RheSA9IGRhdGVIZWxwZXIuZ2V0UHJldmlvdXNEYXkodGhpcykpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHByZXZpb3VzIG1vbnRoIGFmdGVyIHRoZSBnaXZlbiBkYXRlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0ZVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBnZXRQcmV2aW91c01vbnRoOiBmdW5jdGlvbiBnZXRQcmV2aW91c01vbnRoKGRhdGUpIHtcbiAgICAvLyBEYXRlKCkgaGFzIGEgKmJ1Zy9mZWF0dXJlKiBpZiBsYXN0IGRheSBvZiBtb250aCBpcyAzMSB3aGVuIGNhbGN1bGF0aW5nIHRoZSBwcmV2aW91cyBtb250aC5cbiAgICAvLyBOZWVkIHRvIGFjY291bnQgZm9yIHRoYXQgc28gdGhhdCBpdCBkb2Vzbid0IHJvdW5kIHVwIHRoZSBkYXRlL21vbnRoLlxuXG4gICAgaWYgKGRhdGUuZGF5ID09PSAzMSAmJiBkYXRlLm1vbnRoICE9PSAxICYmIGRhdGUubW9udGggIT09IDMgJiYgZGF0ZS5tb250aCAhPT0gOCkge1xuICAgICAgLy8gQWRqdXN0IGZvciBtb250aHMgZW5kaW5nIGluIDMxIHRoYXQgZm9sbG93IG1vbnRocyBlbmRpbmcgaW4gMzBcbiAgICAgIHJldHVybiBkYXRlSGVscGVyLmNyZWF0ZShuZXcgRGF0ZShkYXRlLnllYXIsIGRhdGUubW9udGggLSAyLCBkYXRlLmRheSAtIDEpKTtcbiAgICB9IGVsc2UgaWYgKGRhdGUuZGF5ID4gMjggJiYgZGF0ZS5tb250aCA9PT0gMykge1xuICAgICAgLy8gQWRqdXN0IGZvciBsYXN0IGRheSBvZiBGZWJydWFyeVxuICAgICAgcmV0dXJuIGRhdGVIZWxwZXIuY3JlYXRlKG5ldyBEYXRlKGRhdGUueWVhciwgZGF0ZS5tb250aCAtIDEsIDApKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGRhdGVIZWxwZXIuY3JlYXRlKG5ldyBEYXRlKGRhdGUueWVhciwgZGF0ZS5tb250aCAtIDIsIGRhdGUuZGF5KSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1vbnRoIHByZWNlZGluZyB0aGlzLlxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBnZXQgcHJldmlvdXNNb250aCgpIHtcbiAgICB0aGlzLl9pbnN0YW5jZUNoZWNrKCdwcmV2aW91c01vbnRoJyk7XG4gICAgcmV0dXJuIHRoaXMuX2NhY2hlLnByZXZpb3VzTW9udGggfHwgKHRoaXMuX2NhY2hlLnByZXZpb3VzTW9udGggPSBkYXRlSGVscGVyLmdldFByZXZpb3VzTW9udGgodGhpcykpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxhc3QgZGF5IG9mIHRoZSBtb250aC5cbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGVcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgZ2V0TW9udGhFbmQ6IGZ1bmN0aW9uIGdldE1vbnRoRW5kKGRhdGUpIHtcbiAgICByZXR1cm4gZGF0ZUhlbHBlci5jcmVhdGUobmV3IERhdGUoZGF0ZS55ZWFyLCBkYXRlLm1vbnRoLCAwKSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbGFzdCBkYXkgb2YgdGhlIG1vbnRoLlxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBnZXQgbW9udGhFbmQoKSB7XG4gICAgdGhpcy5faW5zdGFuY2VDaGVjaygnbW9udGhFbmQnKTtcbiAgICByZXR1cm4gdGhpcy5fY2FjaGUubW9udGhFbmQgfHwgKHRoaXMuX2NhY2hlLm1vbnRoRW5kID0gZGF0ZUhlbHBlci5nZXRNb250aEVuZCh0aGlzKSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIERvZXMgYSBnaXZlbiBkYXkgZXF1YWwgYW5vdGhlcj8gT3IgaXMgaXQgcHJlc2VudCBpbiBhIGxpc3Qgb2Ygb3RoZXJzP1xuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0ZVxuICAgKiBAcGFyYW0ge09iamVjdHxBcnJheX0gY29tcGFyZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGZ1bGwgUmV0dXJuIGEgc3VjY2Vzc2Z1bCBtYXRjaCBvbmx5IGlmIGFsbCBtYXRjaGVzIGFyZSBmb3VuZC5cbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG4gIGVxdWFsOiBmdW5jdGlvbiBlcXVhbChkYXRlLCBjb21wYXJlLCBmdWxsKSB7XG4gICAgcmV0dXJuIHRoaXMuZXF1YWxEYXkoZGF0ZSwgY29tcGFyZSwgZnVsbCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIERvZXMgYSBnaXZlbiBkYXkgZXF1YWwgYW5vdGhlcj8gT3IgaXMgaXQgcHJlc2VudCBpbiBhIGxpc3Qgb2Ygb3RoZXJzP1xuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0ZVxuICAgKiBAcGFyYW0ge09iamVjdHxBcnJheX0gY29tcGFyZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGZ1bGwgUmV0dXJuIGEgc3VjY2Vzc2Z1bCBtYXRjaCBvbmx5IGlmIGFsbCBtYXRjaGVzIGFyZSBmb3VuZC5cbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG4gIGVxdWFsRGF5OiBmdW5jdGlvbiBlcXVhbERheShkYXRlLCBjb21wYXJlLCBmdWxsKSB7XG5cbiAgICB2YXIgYXJncyA9IHRoaXMuX2NoZWNrQ29tcGFyaXNvbkFyZ3MoZGF0ZSwgY29tcGFyZSwgZnVsbCk7XG4gICAgZGF0ZSA9IGFyZ3NbMF07XG4gICAgY29tcGFyZSA9IGFyZ3NbMV07XG4gICAgZnVsbCA9IGFyZ3NbMl07XG5cbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGxlbiA9IGNvbXBhcmUubGVuZ3RoO1xuICAgIHZhciBtYXRjaGVzID0gMDtcblxuICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGlmIChjb21wYXJlW2ldICYmIGRhdGUueWVhciA9PT0gY29tcGFyZVtpXS55ZWFyICYmIGRhdGUubW9udGggPT09IGNvbXBhcmVbaV0ubW9udGggJiYgZGF0ZS5kYXkgPT09IGNvbXBhcmVbaV0uZGF5KSBtYXRjaGVzKys7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bGwgPyBtYXRjaGVzID09PSBsZW4gOiAhIW1hdGNoZXM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIElzIGEgd2VlayBlcXVhbCB0byBhbm90aGVyP1xuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0ZVxuICAgKiBAcGFyYW0ge09iamVjdHxBcnJheX0gY29tcGFyZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGZ1bGwgUmV0dXJuIGEgc3VjY2Vzc2Z1bCBtYXRjaCBvbmx5IGlmIGFsbCBtYXRjaGVzIGFyZSBmb3VuZC5cbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG4gIGVxdWFsV2VlazogZnVuY3Rpb24gZXF1YWxXZWVrKGRhdGUsIGNvbXBhcmUsIGZ1bGwpIHtcblxuICAgIHZhciBhcmdzID0gdGhpcy5fY2hlY2tDb21wYXJpc29uQXJncyhkYXRlLCBjb21wYXJlLCBmdWxsKTtcbiAgICBkYXRlID0gYXJnc1swXTtcbiAgICBjb21wYXJlID0gYXJnc1sxXTtcbiAgICBmdWxsID0gYXJnc1syXTtcblxuICAgIHZhciBpID0gMDtcbiAgICB2YXIgbGVuID0gY29tcGFyZS5sZW5ndGg7XG4gICAgdmFyIG1hdGNoZXMgPSAwO1xuXG4gICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKCFjb21wYXJlW2ldIHx8ICFkYXRlLndlZWtTdGFydC5lcXVhbERheShjb21wYXJlW2ldLndlZWtTdGFydCkpIGNvbnRpbnVlO2Vsc2UgbWF0Y2hlcysrO1xuICAgIH1cblxuICAgIHJldHVybiBmdWxsID8gbWF0Y2hlcyA9PT0gbGVuIDogISFtYXRjaGVzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBJcyBhIG1vbnRoIGVxdWFsIHRvIGFub3RoZXI/XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBjb21wYXJlXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZnVsbCBSZXR1cm4gYSBzdWNjZXNzZnVsIG1hdGNoIG9ubHkgaWYgYWxsIG1hdGNoZXMgYXJlIGZvdW5kLlxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cbiAgZXF1YWxNb250aDogZnVuY3Rpb24gZXF1YWxNb250aChkYXRlLCBjb21wYXJlLCBmdWxsKSB7XG5cbiAgICB2YXIgYXJncyA9IHRoaXMuX2NoZWNrQ29tcGFyaXNvbkFyZ3MoZGF0ZSwgY29tcGFyZSwgZnVsbCk7XG4gICAgZGF0ZSA9IGFyZ3NbMF07XG4gICAgY29tcGFyZSA9IGFyZ3NbMV07XG4gICAgZnVsbCA9IGFyZ3NbMl07XG5cbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGxlbiA9IGNvbXBhcmUubGVuZ3RoO1xuICAgIHZhciBtYXRjaGVzID0gMDtcblxuICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGlmICghY29tcGFyZVtpXSB8fCBkYXRlLnllYXIgIT09IGNvbXBhcmVbaV0ueWVhciB8fCBkYXRlLnllYXIgPT09IGNvbXBhcmVbaV0ueWVhciAmJiBkYXRlLm1vbnRoICE9PSBjb21wYXJlW2ldLm1vbnRoKSBjb250aW51ZTtlbHNlIG1hdGNoZXMrKztcbiAgICB9XG5cbiAgICByZXR1cm4gZnVsbCA/IG1hdGNoZXMgPT09IGxlbiA6ICEhbWF0Y2hlcztcbiAgfSxcblxuICAvKipcbiAgICogSXMgYSB5ZWFyIGVxdWFsIHRvIGFub3RoZXI/XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBjb21wYXJlXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZnVsbCBSZXR1cm4gYSBzdWNjZXNzZnVsIG1hdGNoIG9ubHkgaWYgYWxsIG1hdGNoZXMgYXJlIGZvdW5kLlxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cbiAgZXF1YWxZZWFyOiBmdW5jdGlvbiBlcXVhbFllYXIoZGF0ZSwgY29tcGFyZSwgZnVsbCkge1xuXG4gICAgdmFyIGFyZ3MgPSB0aGlzLl9jaGVja0NvbXBhcmlzb25BcmdzKGRhdGUsIGNvbXBhcmUsIGZ1bGwpO1xuICAgIGRhdGUgPSBhcmdzWzBdO1xuICAgIGNvbXBhcmUgPSBhcmdzWzFdO1xuICAgIGZ1bGwgPSBhcmdzWzJdO1xuXG4gICAgdmFyIGkgPSAwO1xuICAgIHZhciBsZW4gPSBjb21wYXJlLmxlbmd0aDtcbiAgICB2YXIgbWF0Y2hlcyA9IDA7XG5cbiAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBpZiAoIWNvbXBhcmVbaV0gfHwgZGF0ZS55ZWFyICE9PSBjb21wYXJlW2ldLnllYXIpIGNvbnRpbnVlO2Vsc2UgbWF0Y2hlcysrO1xuICAgIH1cblxuICAgIHJldHVybiBmdWxsID8gbWF0Y2hlcyA9PT0gbGVuIDogISFtYXRjaGVzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBJcyBhIGRhdGUgYmVmb3JlIGFub3RoZXI/XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBjb21wYXJlXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZnVsbCBSZXR1cm4gYSBzdWNjZXNzZnVsIG1hdGNoIG9ubHkgaWYgYWxsIG1hdGNoZXMgYXJlIGZvdW5kLlxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cbiAgYmVmb3JlOiBmdW5jdGlvbiBiZWZvcmUoZGF0ZSwgY29tcGFyZSwgZnVsbCkge1xuICAgIHJldHVybiB0aGlzLmJlZm9yZURheShkYXRlLCBjb21wYXJlLCBmdWxsKTtcbiAgfSxcblxuICAvKipcbiAgICogSXMgYSBnaXZlbiBkYXRlIGJlZm9yZSBhbm90aGVyP1xuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0ZVxuICAgKiBAcGFyYW0ge09iamVjdHxBcnJheX0gY29tcGFyZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGZ1bGwgUmV0dXJuIGEgc3VjY2Vzc2Z1bCBtYXRjaCBvbmx5IGlmIGFsbCBtYXRjaGVzIGFyZSBmb3VuZC5cbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG4gIGJlZm9yZURheTogZnVuY3Rpb24gYmVmb3JlRGF5KGRhdGUsIGNvbXBhcmUsIGZ1bGwpIHtcblxuICAgIHZhciBhcmdzID0gdGhpcy5fY2hlY2tDb21wYXJpc29uQXJncyhkYXRlLCBjb21wYXJlLCBmdWxsKTtcbiAgICBkYXRlID0gYXJnc1swXTtcbiAgICBjb21wYXJlID0gYXJnc1sxXTtcbiAgICBmdWxsID0gYXJnc1syXTtcblxuICAgIHZhciBpID0gMDtcbiAgICB2YXIgbGVuID0gY29tcGFyZS5sZW5ndGg7XG4gICAgdmFyIG1hdGNoZXMgPSAwO1xuXG4gICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKCFjb21wYXJlW2ldIHx8IGRhdGUuX2RhdGUgPj0gY29tcGFyZVtpXS5fZGF0ZSkgY29udGludWU7ZWxzZSBtYXRjaGVzKys7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bGwgPyBtYXRjaGVzID09PSBsZW4gOiAhIW1hdGNoZXM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIElzIGEgd2VlayBiZWZvcmUgYW5vdGhlcj9cbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGVcbiAgICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IGNvbXBhcmVcbiAgICogQHBhcmFtIHtCb29sZWFufSBmdWxsIFJldHVybiBhIHN1Y2Nlc3NmdWwgbWF0Y2ggb25seSBpZiBhbGwgbWF0Y2hlcyBhcmUgZm91bmQuXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuICBiZWZvcmVXZWVrOiBmdW5jdGlvbiBiZWZvcmVXZWVrKGRhdGUsIGNvbXBhcmUsIGZ1bGwpIHtcblxuICAgIHZhciBhcmdzID0gdGhpcy5fY2hlY2tDb21wYXJpc29uQXJncyhkYXRlLCBjb21wYXJlLCBmdWxsKTtcbiAgICBkYXRlID0gYXJnc1swXTtcbiAgICBjb21wYXJlID0gYXJnc1sxXTtcbiAgICBmdWxsID0gYXJnc1syXTtcblxuICAgIHZhciBpID0gMDtcbiAgICB2YXIgbGVuID0gY29tcGFyZS5sZW5ndGg7XG4gICAgdmFyIG1hdGNoZXMgPSAwO1xuXG4gICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKCFjb21wYXJlW2ldIHx8ICFkYXRlLndlZWtTdGFydC5iZWZvcmVEYXkoY29tcGFyZVtpXS53ZWVrU3RhcnQpKSBjb250aW51ZTtlbHNlIG1hdGNoZXMrKztcbiAgICB9XG5cbiAgICByZXR1cm4gZnVsbCA/IG1hdGNoZXMgPT09IGxlbiA6ICEhbWF0Y2hlcztcbiAgfSxcblxuICAvKipcbiAgICogSXMgYSBtb250aCBiZWZvcmUgYW5vdGhlcj9cbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGVcbiAgICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IGNvbXBhcmVcbiAgICogQHBhcmFtIHtCb29sZWFufSBmdWxsIFJldHVybiBhIHN1Y2Nlc3NmdWwgbWF0Y2ggb25seSBpZiBhbGwgbWF0Y2hlcyBhcmUgZm91bmQuXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuICBiZWZvcmVNb250aDogZnVuY3Rpb24gYmVmb3JlTW9udGgoZGF0ZSwgY29tcGFyZSwgZnVsbCkge1xuXG4gICAgdmFyIGFyZ3MgPSB0aGlzLl9jaGVja0NvbXBhcmlzb25BcmdzKGRhdGUsIGNvbXBhcmUsIGZ1bGwpO1xuICAgIGRhdGUgPSBhcmdzWzBdO1xuICAgIGNvbXBhcmUgPSBhcmdzWzFdO1xuICAgIGZ1bGwgPSBhcmdzWzJdO1xuXG4gICAgdmFyIGkgPSAwO1xuICAgIHZhciBsZW4gPSBjb21wYXJlLmxlbmd0aDtcbiAgICB2YXIgbWF0Y2hlcyA9IDA7XG5cbiAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBpZiAoIWNvbXBhcmVbaV0gfHwgZGF0ZS55ZWFyID4gY29tcGFyZVtpXS55ZWFyIHx8IGRhdGUueWVhciA9PT0gY29tcGFyZVtpXS55ZWFyICYmIGRhdGUubW9udGggPj0gY29tcGFyZVtpXS5tb250aCkgY29udGludWU7ZWxzZSBtYXRjaGVzKys7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bGwgPyBtYXRjaGVzID09PSBsZW4gOiAhIW1hdGNoZXM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIElzIGEgeWVhciBiZWZvcmUgYW5vdGhlcj9cbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGVcbiAgICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IGNvbXBhcmVcbiAgICogQHBhcmFtIHtCb29sZWFufSBmdWxsIFJldHVybiBhIHN1Y2Nlc3NmdWwgbWF0Y2ggb25seSBpZiBhbGwgbWF0Y2hlcyBhcmUgZm91bmQuXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuICBiZWZvcmVZZWFyOiBmdW5jdGlvbiBiZWZvcmVZZWFyKGRhdGUsIGNvbXBhcmUsIGZ1bGwpIHtcblxuICAgIHZhciBhcmdzID0gdGhpcy5fY2hlY2tDb21wYXJpc29uQXJncyhkYXRlLCBjb21wYXJlLCBmdWxsKTtcbiAgICBkYXRlID0gYXJnc1swXTtcbiAgICBjb21wYXJlID0gYXJnc1sxXTtcbiAgICBmdWxsID0gYXJnc1syXTtcblxuICAgIHZhciBpID0gMDtcbiAgICB2YXIgbGVuID0gY29tcGFyZS5sZW5ndGg7XG4gICAgdmFyIG1hdGNoZXMgPSAwO1xuXG4gICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKCFjb21wYXJlW2ldIHx8IGRhdGUueWVhciA+PSBjb21wYXJlW2ldLnllYXIpIGNvbnRpbnVlO2Vsc2UgbWF0Y2hlcysrO1xuICAgIH1cblxuICAgIHJldHVybiBmdWxsID8gbWF0Y2hlcyA9PT0gbGVuIDogISFtYXRjaGVzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBJcyBhIGRhdGUgYWZ0ZXIgYW5vdGhlcj9cbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGVcbiAgICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IGNvbXBhcmVcbiAgICogQHBhcmFtIHtCb29sZWFufSBmdWxsIFJldHVybiBhIHN1Y2Nlc3NmdWwgbWF0Y2ggb25seSBpZiBhbGwgbWF0Y2hlcyBhcmUgZm91bmQuXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuICBhZnRlcjogZnVuY3Rpb24gYWZ0ZXIoZGF0ZSwgY29tcGFyZSwgZnVsbCkge1xuICAgIHJldHVybiB0aGlzLmFmdGVyRGF5KGRhdGUsIGNvbXBhcmUsIGZ1bGwpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBJcyBhIGdpdmVuIGRhdGUgYWZ0ZXIgYW5vdGhlcj9cbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGVcbiAgICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IGNvbXBhcmVcbiAgICogQHBhcmFtIHtCb29sZWFufSBmdWxsIFJldHVybiBhIHN1Y2Nlc3NmdWwgbWF0Y2ggb25seSBpZiBhbGwgbWF0Y2hlcyBhcmUgZm91bmQuXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuICBhZnRlckRheTogZnVuY3Rpb24gYWZ0ZXJEYXkoZGF0ZSwgY29tcGFyZSwgZnVsbCkge1xuXG4gICAgdmFyIGFyZ3MgPSB0aGlzLl9jaGVja0NvbXBhcmlzb25BcmdzKGRhdGUsIGNvbXBhcmUsIGZ1bGwpO1xuICAgIGRhdGUgPSBhcmdzWzBdO1xuICAgIGNvbXBhcmUgPSBhcmdzWzFdO1xuICAgIGZ1bGwgPSBhcmdzWzJdO1xuXG4gICAgdmFyIGkgPSAwO1xuICAgIHZhciBsZW4gPSBjb21wYXJlLmxlbmd0aDtcbiAgICB2YXIgbWF0Y2hlcyA9IDA7XG5cbiAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBpZiAoIWNvbXBhcmVbaV0gfHwgZGF0ZS5fZGF0ZSA8PSBjb21wYXJlW2ldLl9kYXRlKSBjb250aW51ZTtlbHNlIG1hdGNoZXMrKztcbiAgICB9XG5cbiAgICByZXR1cm4gZnVsbCA/IG1hdGNoZXMgPT09IGxlbiA6ICEhbWF0Y2hlcztcbiAgfSxcblxuICAvKipcbiAgICogSXMgYSB3ZWVrIGFmdGVyIGFub3RoZXI/XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBjb21wYXJlXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZnVsbCBSZXR1cm4gYSBzdWNjZXNzZnVsIG1hdGNoIG9ubHkgaWYgYWxsIG1hdGNoZXMgYXJlIGZvdW5kLlxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cbiAgYWZ0ZXJXZWVrOiBmdW5jdGlvbiBhZnRlcldlZWsoZGF0ZSwgY29tcGFyZSwgZnVsbCkge1xuXG4gICAgdmFyIGFyZ3MgPSB0aGlzLl9jaGVja0NvbXBhcmlzb25BcmdzKGRhdGUsIGNvbXBhcmUsIGZ1bGwpO1xuICAgIGRhdGUgPSBhcmdzWzBdO1xuICAgIGNvbXBhcmUgPSBhcmdzWzFdO1xuICAgIGZ1bGwgPSBhcmdzWzJdO1xuXG4gICAgdmFyIGkgPSAwO1xuICAgIHZhciBsZW4gPSBjb21wYXJlLmxlbmd0aDtcbiAgICB2YXIgbWF0Y2hlcyA9IDA7XG5cbiAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBpZiAoIWNvbXBhcmVbaV0gfHwgIWRhdGUud2Vla1N0YXJ0LmFmdGVyRGF5KGNvbXBhcmVbaV0ud2Vla1N0YXJ0KSkgY29udGludWU7ZWxzZSBtYXRjaGVzKys7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bGwgPyBtYXRjaGVzID09PSBsZW4gOiAhIW1hdGNoZXM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIElzIGEgbW9udGggYWZ0ZXIgYW5vdGhlcj9cbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGVcbiAgICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IGNvbXBhcmVcbiAgICogQHBhcmFtIHtCb29sZWFufSBmdWxsIFJldHVybiBhIHN1Y2Nlc3NmdWwgbWF0Y2ggb25seSBpZiBhbGwgbWF0Y2hlcyBhcmUgZm91bmQuXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuICBhZnRlck1vbnRoOiBmdW5jdGlvbiBhZnRlck1vbnRoKGRhdGUsIGNvbXBhcmUsIGZ1bGwpIHtcblxuICAgIHZhciBhcmdzID0gdGhpcy5fY2hlY2tDb21wYXJpc29uQXJncyhkYXRlLCBjb21wYXJlLCBmdWxsKTtcbiAgICBkYXRlID0gYXJnc1swXTtcbiAgICBjb21wYXJlID0gYXJnc1sxXTtcbiAgICBmdWxsID0gYXJnc1syXTtcblxuICAgIHZhciBpID0gMDtcbiAgICB2YXIgbGVuID0gY29tcGFyZS5sZW5ndGg7XG4gICAgdmFyIG1hdGNoZXMgPSAwO1xuXG4gICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKCFjb21wYXJlW2ldIHx8IGRhdGUueWVhciA8IGNvbXBhcmVbaV0ueWVhciB8fCBkYXRlLnllYXIgPT09IGNvbXBhcmVbaV0ueWVhciAmJiBkYXRlLm1vbnRoIDw9IGNvbXBhcmVbaV0ubW9udGgpIGNvbnRpbnVlO2Vsc2UgbWF0Y2hlcysrO1xuICAgIH1cblxuICAgIHJldHVybiBmdWxsID8gbWF0Y2hlcyA9PT0gbGVuIDogISFtYXRjaGVzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBJcyBhIHllYXIgYWZ0ZXIgYW5vdGhlcj9cbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGVcbiAgICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IGNvbXBhcmVcbiAgICogQHBhcmFtIHtCb29sZWFufSBmdWxsIFJldHVybiBhIHN1Y2Nlc3NmdWwgbWF0Y2ggb25seSBpZiBhbGwgbWF0Y2hlcyBhcmUgZm91bmQuXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuICBhZnRlclllYXI6IGZ1bmN0aW9uIGFmdGVyWWVhcihkYXRlLCBjb21wYXJlLCBmdWxsKSB7XG5cbiAgICB2YXIgYXJncyA9IHRoaXMuX2NoZWNrQ29tcGFyaXNvbkFyZ3MoZGF0ZSwgY29tcGFyZSwgZnVsbCk7XG4gICAgZGF0ZSA9IGFyZ3NbMF07XG4gICAgY29tcGFyZSA9IGFyZ3NbMV07XG4gICAgZnVsbCA9IGFyZ3NbMl07XG5cbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGxlbiA9IGNvbXBhcmUubGVuZ3RoO1xuICAgIHZhciBtYXRjaGVzID0gMDtcblxuICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGlmICghY29tcGFyZVtpXSB8fCBkYXRlLnllYXIgPD0gY29tcGFyZVtpXS55ZWFyKSBjb250aW51ZTtlbHNlIG1hdGNoZXMrKztcbiAgICB9XG5cbiAgICByZXR1cm4gZnVsbCA/IG1hdGNoZXMgPT09IGxlbiA6ICEhbWF0Y2hlcztcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBlYXJsaWVzdCBkYXRlIGluIGFuIGFycmF5LlxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBlYXJsaWVzdDogZnVuY3Rpb24gZWFybGllc3QoYXJyKSB7XG5cbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGxlbiA9IGFyci5sZW5ndGg7XG4gICAgdmFyIGUgPSB2b2lkIDA7XG5cbiAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBpZiAoIWUgfHwgYXJyW2ldLmJlZm9yZShlKSkgZSA9IGFycltpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gZTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBsYXRlc3QgZGF0ZSBpbiBhbiBhcnJheS5cbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgbGF0ZXN0OiBmdW5jdGlvbiBsYXRlc3QoYXJyKSB7XG5cbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGxlbiA9IGFyci5sZW5ndGg7XG4gICAgdmFyIGwgPSB2b2lkIDA7XG5cbiAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBpZiAoIWwgfHwgYXJyW2ldLmFmdGVyKGwpKSBsID0gYXJyW2ldO1xuICAgIH1cblxuICAgIHJldHVybiBsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDbG9uZSBhIGRhdGUgaW5zdGFuY2UuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRlXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIGNsb25lOiBmdW5jdGlvbiBjbG9uZShkYXRlKSB7XG5cbiAgICAvLyBJZiB3ZSB3ZXJlbid0IHBhc3NlZCBhIGRhdGUsIHVzZSB0aGlzIGluc3RhbmNlLlxuICAgIGlmICghZGF0ZSAmJiB0aGlzLl9kYXRlICYmIHRoaXMuX2RhdGUgaW5zdGFuY2VvZiBEYXRlICYmIGRhdGVIZWxwZXIuaXNQcm90b3R5cGVPZih0aGlzKSkge1xuICAgICAgZGF0ZSA9IHRoaXM7XG4gICAgfVxuXG4gICAgLy8gTm8gZGF0ZSwgY2FuJ3QgY2xvbmUuXG4gICAgaWYgKCFkYXRlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ011c3QgcGFzcyBhIGRhdGUgdG8gY2xvbmUgb3IgY2FsbCBvbiBhbiBpbnN0YW5jZS4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0ZUhlbHBlci5jcmVhdGUobmV3IERhdGUoZGF0ZS5fZGF0ZS52YWx1ZU9mKCkpKTtcbiAgfSxcblxuICAvKipcbiAgICogSWYgYSBjb21wYXJpc29uIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBhbiBpbnN0YW5jZSwgcHJvcGVybHlcbiAgICogYXNzaWduIHRoZSB2YXJzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0ZVxuICAgKiBAcGFyYW0ge09iamVjdHxBcnJheX0gY29tcGFyZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGZ1bGxcbiAgICovXG4gIF9jaGVja0NvbXBhcmlzb25BcmdzOiBmdW5jdGlvbiBfY2hlY2tDb21wYXJpc29uQXJncyhkYXRlLCBjb21wYXJlLCBmdWxsKSB7XG5cbiAgICBpZiAoY29tcGFyZSA9PT0gdW5kZWZpbmVkIHx8IHR5cGVvZiBjb21wYXJlID09PSAnYm9vbGVhbicpIHtcblxuICAgICAgaWYgKCFkYXRlSGVscGVyLmlzUHJvdG90eXBlT2YodGhpcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgY29tcGFyZSBvbmx5IG9uZSBkYXRlIScpO1xuICAgICAgfVxuXG4gICAgICBmdWxsID0gY29tcGFyZTtcbiAgICAgIGNvbXBhcmUgPSBkYXRlO1xuICAgICAgZGF0ZSA9IHRoaXM7XG4gICAgfVxuXG4gICAgY29tcGFyZSA9IGNvbXBhcmUgaW5zdGFuY2VvZiBBcnJheSA/IGNvbXBhcmUgOiBbY29tcGFyZV07XG5cbiAgICByZXR1cm4gW2RhdGUsIGNvbXBhcmUsIGZ1bGxdO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVjayB0byBzZWUgaWYgd2UgaGF2ZSBhbiBpbnN0YW5jZSBvZiB0aGUgZGF0ZSBvYmplY3QuXG4gICAqIEBwYXJhbSAge1N0cmluZ30gcHJvcFxuICAgKi9cbiAgX2luc3RhbmNlQ2hlY2s6IGZ1bmN0aW9uIF9pbnN0YW5jZUNoZWNrKHByb3ApIHtcbiAgICBpZiAoIXRoaXMuX2RhdGUgfHwgISh0aGlzLl9kYXRlIGluc3RhbmNlb2YgRGF0ZSkgfHwgIWRhdGVIZWxwZXIuaXNQcm90b3R5cGVPZih0aGlzKSkgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgYWNjZXNzIHRoZSBwcm9wZXJ0eSBcIicgKyBwcm9wICsgJ1wiIG9mIHRoZSBkYXRlIGhlbHBlciB3aXRoIGNyZWF0aW5nIGFuIGluc3RhbmNlIScpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDbGVhciB0aGUgY2FjaGUuXG4gICAqL1xuICBfY2xlYXJDYWNoZTogZnVuY3Rpb24gX2NsZWFyQ2FjaGUoKSB7XG4gICAgdGhpcy5faW5zdGFuY2VDaGVjaygnY2xlYXJDYWNoZScpO1xuICAgIHRoaXMuX2NhY2hlID0ge307XG4gIH1cbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGRhdGVIZWxwZXI7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGUuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcGFkID0gcmVxdWlyZSgnLi4vdXRpbC9wYWQnKTtcblxudmFyIF9wYWQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcGFkKTtcblxudmFyIF9kYXRlID0gcmVxdWlyZSgnLi9kYXRlJyk7XG5cbnZhciBfZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kYXRlKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqXG4gKiBNYXAgY2hhcmFjdGVycyB0byB0aGVpciBzcGVjaWFsIG1lYW5pbmdzLlxuICogQHR5cGUge09iamVjdH1cbiAqL1xuLyoqXG4gKiAjIFBhcnNlIERhdGUgRm9ybWF0XG4gKiBHaXZlbiBhIGRhdGUgZm9ybWF0IHN0cmluZywgYnJlYWsgaXQgZG93biBpbnRvIHBpZWNlcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogcGFyc2VEYXRlRm9ybWF0KCdNTS1ERC1ZWVlZJyk7XG4gKlxuICogQG1vZHVsZSBoZWxwZXJzL2RhdGUvcGFyc2UtZm9ybWF0LmpzXG4gKi9cblxudmFyIG1hcCA9IHtcbiAgZDogJ2RheScsXG4gIG06ICdtb250aCcsXG4gIHk6ICd5ZWFyJyxcbiAgJy0nOiAnZGl2aWRlcicsXG4gICcvJzogJ2RpdmlkZXInLFxuICAnICc6ICdzcGFjZSdcbn07XG5cbi8qKlxuICogR2l2ZW4gYSBmb3JtYXQgYW5kIGEgc3RyaW5nLCBnZXQgdGhlIGRheSwgbW9udGggYW5kIHllYXIgdmFsdWVzIGZyb20gdGhhdCBzdHJpbmcuXG4gKiBAcGFyYW0ge09iamVjdH0gZm9ybWF0XG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gZ2V0VmFsdWVzKGZvcm1hdCkge1xuXG4gIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcblxuICAgIHZhciBpID0gMDtcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHZhciBsZW4gPSBmb3JtYXQubGVuZ3RoO1xuICAgIHZhciB2YWx1ZXMgPSB7fTtcblxuICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgZm9ybWF0IHBpZWNlc1xuICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcblxuICAgICAgLy8gT25seSB3b3JyeSBhYm91dCBkYXRlIHZhbHVlc1xuICAgICAgaWYgKFsnZGF5JywgJ21vbnRoJywgJ3llYXInXS5pbmRleE9mKGZvcm1hdFtpXS5uYW1lKSAhPT0gLTEpIHtcblxuICAgICAgICAvLyBJZiB0aGUgcGFzc2VkIHZhbHVlIGRvZXNuJ3QgY29udGFpbiBhIGZvcm1hdCBwaWVjZSwgaXQncyBpbnZhbGlkLlxuICAgICAgICBpZiAodmFsdWUubGVuZ3RoIDwgaW5kZXggKyBmb3JtYXRbaV0ubGVuZ3RoKSByZXR1cm47XG5cbiAgICAgICAgdmFsdWVzW2Zvcm1hdFtpXS5uYW1lXSA9IHBhcnNlSW50KHZhbHVlLnN1YnN0cihpbmRleCwgZm9ybWF0W2ldLmxlbmd0aCksIDEwKTtcbiAgICAgIH1cbiAgICAgIGluZGV4ICs9IGZvcm1hdFtpXS5sZW5ndGg7XG4gICAgfVxuXG4gICAgcmV0dXJuIF9kYXRlMi5kZWZhdWx0LmNyZWF0ZSh2YWx1ZXMpO1xuICB9O1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIGZvcm1hdHRlZCBkYXRlIHN0cmluZyBnaXZlbiBhbiBvYmplY3Qgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtPYmplY3R9IGZvcm1hdFxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cbmZ1bmN0aW9uIGdldFN0cmluZyhmb3JtYXQpIHtcblxuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3R9IHZhbHNcbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cbiAgcmV0dXJuIGZ1bmN0aW9uICh2YWxzKSB7XG5cbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGxlbiA9IGZvcm1hdC5sZW5ndGg7XG4gICAgdmFyIHN0ciA9ICcnO1xuXG4gICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuXG4gICAgICAvLyBOdW1iZXJzXG4gICAgICBpZiAodmFsc1tmb3JtYXRbaV0ubmFtZV0pIHtcbiAgICAgICAgc3RyICs9ICgwLCBfcGFkMi5kZWZhdWx0KSh2YWxzW2Zvcm1hdFtpXS5uYW1lXSwgZm9ybWF0W2ldLmxlbmd0aCk7XG4gICAgICB9XG4gICAgICAvLyBEaXZpZGVyc1xuICAgICAgZWxzZSB7XG4gICAgICAgICAgc3RyICs9IGZvcm1hdFtpXS52YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzdHI7XG4gIH07XG59XG5cbi8qKlxuICogQHBhcmFtIHtTdHJpbmd9IGZvcm1hdFxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5mdW5jdGlvbiBwYXJzZURhdGVGb3JtYXQoZm9ybWF0KSB7XG5cbiAgdmFyIGYgPSBmb3JtYXQudG9Mb3dlckNhc2UoKTtcbiAgdmFyIGkgPSAwO1xuICB2YXIgbGVuID0gZi5sZW5ndGg7XG5cbiAgdmFyIG9iaiA9IHtcbiAgICBwYXJ0czogW11cbiAgfTtcblxuICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG5cbiAgICAvLyBJZiB0aGVyZSBpcyBhIG1hdGNoaW5nIGNoYXJhY3RlciBtYXBwaW5nIGFuZCB0aGUgbGFzdCBwYXJ0IHdhcyBvZiB0aGUgc2FtZSBuYW1lLCBpbmNyZW1lbnQgaXRzIGxlbmd0aFxuICAgIC8vIGFuZCBhZGQgdG8gaXRzIGNvbnRlbnQuXG4gICAgaWYgKG1hcFtmW2ldXSAmJiBvYmoucGFydHMubGVuZ3RoICYmIG9iai5wYXJ0c1tvYmoucGFydHMubGVuZ3RoIC0gMV0ubmFtZSA9PT0gbWFwW2ZbaV1dKSB7XG4gICAgICBvYmoucGFydHNbb2JqLnBhcnRzLmxlbmd0aCAtIDFdLmxlbmd0aCsrO1xuICAgICAgb2JqLnBhcnRzW29iai5wYXJ0cy5sZW5ndGggLSAxXS52YWx1ZSArPSBmb3JtYXRbaV07XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBvYmoucGFydHMucHVzaCh7XG4gICAgICBuYW1lOiBtYXBbZltpXV0gPyBtYXBbZltpXV0gOiAnJyxcbiAgICAgIHZhbHVlOiBmb3JtYXRbaV0sXG4gICAgICBsZW5ndGg6IDFcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEFkZCBhIHdheSB0byBjb252ZXJ0IHRoZSBwYXJzZWQgZGF0ZSBpbnRvIGEgcmVnZXgtaXNoIHN0cmluZyB0aGF0IHdvcmtzIHdpdGggdGhlIFR5cGVhaGVhZCBpbXBsZW1lbnRhdGlvbi5cbiAgb2JqLmdldFZhbHVlcyA9IGdldFZhbHVlcyhvYmoucGFydHMpO1xuICBvYmouZ2V0U3RyaW5nID0gZ2V0U3RyaW5nKG9iai5wYXJ0cyk7XG5cbiAgcmV0dXJuIG9iajtcbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gcGFyc2VEYXRlRm9ybWF0O1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXJzZS1mb3JtYXQuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfdHJpbSA9IHJlcXVpcmUoJy4uL3V0aWwvdHJpbScpO1xuXG52YXIgX3RyaW0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHJpbSk7XG5cbnZhciBfaGFzQ2xhc3MgPSByZXF1aXJlKCcuL2hhcy1jbGFzcycpO1xuXG52YXIgX2hhc0NsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hhc0NsYXNzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqXG4gKiAjIEFkZCBDbGFzc1xuICogQWRkIGEgY2xhc3Mgb24gYW4gZWxlbWVudC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8QXJyYXl9IGVsIEFuIGVsZW1lbnQgb3IgYXJyYXkgb2YgZWxlbWVudHMgdG8gdXBkYXRlLlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge0VsZW1lbnR9XG4gKlxuICogQG1vZHVsZSBoZWxwZXJzL2RvbS9hZGQtY2xhc3MuanNcbiAqL1xuXG52YXIgd3MgPSAvXFxzKy87XG52YXIgY2xlYW51cCA9IC9cXHN7Mix9L2c7XG5cbmZ1bmN0aW9uIGFkZENsYXNzKGVsLCBuYW1lKSB7XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIgJiYgdHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgbmFtZSA9ICgwLCBfdHJpbTIuZGVmYXVsdCkobmFtZSkuc3BsaXQod3MpO1xuICB9IGVsc2Uge1xuICAgIG5hbWUgPSBuYW1lIGluc3RhbmNlb2YgQXJyYXkgPyBuYW1lIDogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgfVxuXG4gIC8vIG9wdGltaXplIGZvciBiZXN0LCBtb3N0IGNvbW1vbiBjYXNlXG4gIGlmIChuYW1lLmxlbmd0aCA9PT0gMSAmJiBlbC5jbGFzc0xpc3QpIHtcbiAgICBpZiAobmFtZVswXSkge1xuICAgICAgZWwuY2xhc3NMaXN0LmFkZChuYW1lWzBdKTtcbiAgICB9XG4gICAgcmV0dXJuIGVsO1xuICB9XG5cbiAgdmFyIHRvQWRkID0gW107XG4gIHZhciBpID0gMDtcbiAgdmFyIGwgPSBuYW1lLmxlbmd0aDtcbiAgdmFyIGl0ZW0gPSB2b2lkIDA7XG4gIHZhciBjbHNOYW1lID0gdHlwZW9mIGVsLmNsYXNzTmFtZSA9PT0gJ3N0cmluZycgPyBlbC5jbGFzc05hbWUgOiBlbC5nZXRBdHRyaWJ1dGUgPyBlbC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgOiAnJztcblxuICAvLyBzZWUgaWYgd2UgaGF2ZSBhbnl0aGluZyB0byBhZGRcbiAgZm9yICg7IGkgPCBsOyBpKyspIHtcbiAgICBpdGVtID0gbmFtZVtpXTtcbiAgICBpZiAoaXRlbSAmJiAhKDAsIF9oYXNDbGFzczIuZGVmYXVsdCkoY2xzTmFtZSwgaXRlbSkpIHtcbiAgICAgIHRvQWRkLnB1c2goaXRlbSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRvQWRkLmxlbmd0aCkge1xuICAgIGlmICh0eXBlb2YgZWwuY2xhc3NOYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgZWwuY2xhc3NOYW1lID0gKDAsIF90cmltMi5kZWZhdWx0KSgoY2xzTmFtZSArICcgJyArIHRvQWRkLmpvaW4oJyAnKSkucmVwbGFjZShjbGVhbnVwLCAnICcpKTtcbiAgICB9IGVsc2UgaWYgKGVsLnNldEF0dHJpYnV0ZSkge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsICgwLCBfdHJpbTIuZGVmYXVsdCkoKGNsc05hbWUgKyAnICcgKyB0b0FkZC5qb2luKCcgJykpLnJlcGxhY2UoY2xlYW51cCwgJyAnKSkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBlbDtcbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gYWRkQ2xhc3M7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFkZC1jbGFzcy5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG4vKipcbiAqICMgSGFzIENsYXNzXG4gKiBTZWUgaWYgYW4gZWxlbWVudCBoYXMgYSBjbGFzcy5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8U3RyaW5nfSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKlxuICogQG1vZHVsZSBoZWxwZXJzL2RvbS9oYXMtY2xhc3MuanNcbiAqL1xuZnVuY3Rpb24gaGFzQ2xhc3MoZWwsIG5hbWUpIHtcbiAgdmFyIGNOYW1lID0gKCh0eXBlb2YgZWwgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGVsKSkgPT09ICdvYmplY3QnID8gZWwuY2xhc3NOYW1lIHx8IGVsLmdldEF0dHJpYnV0ZSAmJiBlbC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgfHwgJycgOiBlbCB8fCAnJykucmVwbGFjZSgvW1xcdFxcclxcblxcZl0vZywgJyAnKTtcbiAgcmV0dXJuICgnICcgKyBjTmFtZSArICcgJykuaW5kZXhPZignICcgKyBuYW1lICsgJyAnKSAhPT0gLTE7XG59XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGhhc0NsYXNzO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oYXMtY2xhc3MuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChodG1sKSB7XG5cbiAgaWYgKCFodG1sKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgY3JlYXRlIGVsZW1lbnQgd2l0aCBubyBIVE1MIScpO1xuICB9XG5cbiAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGVsLmlubmVySFRNTCA9IGh0bWw7XG4gIHZhciBlbDIgPSBlbC5jaGlsZHJlblswXTtcbiAgZWwyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwyKTtcbiAgcmV0dXJuIGVsMjtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOyAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAjIE1ha2UgRWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIE1ha2UgZW4gZWxlbWVudCB1c2luZyBhIHN0cmluZyBvZiBIVE1MLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBtYWtlRWxlbWVudCgnPGRpdj48L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBtb2R1bGUgaGVscGVycy9tYWtlLWVsZW1lbnQuanNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBodG1sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1ha2UtZWxlbWVudC5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9lYWNoID0gcmVxdWlyZSgnLi4vdXRpbC9lYWNoJyk7XG5cbnZhciBfZWFjaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lYWNoKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIHByb3BzID0gWydtYXJnaW5Ub3AnLCAnbWFyZ2luQm90dG9tJywgJ2JvcmRlclRvcCcsICdib3JkZXJCb3R0b20nXTsgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAjIE91dGVyIEhlaWdodFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogR2V0IHRoZSBvdXRlciBoZWlnaHQgb2YgYW4gZWxlbWVudCAoaW5jbHVkaW5nIG1hcmdpbiBhbmQgYm9yZGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzdHlsZXMgT3B0aW9uYWwgQWxyZWFkeSBoYXZlIGNvbXB1dGVkIHN0eWxlcz8gUGFzcyB0aGVtIGluLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBvdXRlckhlaWdodChlbCwgY29tcHV0ZWRTdHlsZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBtb2R1bGUgaGVscGVycy9vdXRlci1oZWlnaHQuanNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuXG5cbmZ1bmN0aW9uIG91dGVySGVpZ2h0KGVsLCBzdHlsZXMpIHtcblxuICBzdHlsZXMgPSBzdHlsZXMgfHwgd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpO1xuXG4gIHZhciBoZWlnaHQgPSBlbC5jbGllbnRIZWlnaHQ7XG5cbiAgKDAsIF9lYWNoMi5kZWZhdWx0KShwcm9wcywgZnVuY3Rpb24gKHByb3ApIHtcbiAgICBoZWlnaHQgKz0gcGFyc2VJbnQoc3R5bGVzW3Byb3BdIHx8IDAsIDEwKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGhlaWdodDtcbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gb3V0ZXJIZWlnaHQ7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW91dGVyLWhlaWdodC5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbi8qKlxuICogIyBQYXJzZSBET00gYXR0cmlidXRlc1xuICogR2l2ZW4gYW4gZWxlbWVudCBhbmQgYW4gYXR0cmlidXRlIG5hbWUsIHBhcnNlIHRoYXQgYXR0cmlidXRlXG4gKiBpZiBpdCBleGlzdHMgb3IgcmV0dXJuIGEgZGVmYXVsdC5cbiAqXG4gKiBAbW9kdWxlIGhlbHBlcnMvZG9tL3BhcnNlLWF0dHJpYnV0ZS5qc1xuICovXG5cbi8qKlxuICogR2V0IHRoZSBib29sZWFuIHZhbHVlIG9mIGFuIGF0dHJpYnV0ZSBvbiBhbiBlbGVtZW50LFxuICogZmFsbGluZyBiYWNrIHRvIHRoZSBkZWZhdWx0IHZhbHVlLlxuICogQHBhcmFtICB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSAge1N0cmluZ30gbmFtZVxuICogQHBhcmFtICB7Qm9vbGVhbn0gZGVmXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBib29sZWFuKGVsLCBuYW1lLCBkZWYpIHtcbiAgdmFyIHZhbCA9IGVsLmdldEF0dHJpYnV0ZShuYW1lKTtcbiAgaWYgKHZhbCA9PT0gbnVsbCkgcmV0dXJuIGRlZjtcbiAgcmV0dXJuIHZhbCA9PT0gJ3RydWUnIHx8IHZhbCA9PT0gJycgPyB0cnVlIDogZmFsc2U7XG59XG5cbi8qKlxuICogR2V0IHRoZSBudW1lcmljIHZhbHVlIG9mIGFuIGF0dHJpYnV0ZSBvbiBhbiBlbGVtZW50LFxuICogZmFsbGluZyBiYWNrIHRvIHRoZSBkZWZhdWx0IHZhbHVlLlxuICogQHBhcmFtICB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSAge1N0cmluZ30gbmFtZVxuICogQHBhcmFtICB7Qm9vbGVhbn0gZGVmXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBudW1iZXIoZWwsIG5hbWUsIGRlZikge1xuICB2YXIgdmFsID0gZWwuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICBpZiAodmFsID09PSBudWxsKSByZXR1cm4gZGVmO1xuICByZXR1cm4gcGFyc2VJbnQodmFsLCAxMCk7XG59XG5cbi8qKlxuICogR2V0IHRoZSBib29sZWFuIHZhbHVlIG9mIGFuIGF0dHJpYnV0ZSBvbiBhbiBlbGVtZW50LFxuICogZmFsbGluZyBiYWNrIHRvIHRoZSBkZWZhdWx0IHZhbHVlLlxuICogQHBhcmFtICB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSAge1N0cmluZ30gbmFtZVxuICogQHBhcmFtICB7Qm9vbGVhbn0gZGVmXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBzdHJpbmcoZWwsIG5hbWUsIGRlZikge1xuICB2YXIgdmFsID0gZWwuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICBpZiAodmFsID09PSBudWxsKSByZXR1cm4gZGVmO1xuICByZXR1cm4gdmFsO1xufVxuXG5leHBvcnRzLmJvb2xlYW4gPSBib29sZWFuO1xuZXhwb3J0cy5udW1iZXIgPSBudW1iZXI7XG5leHBvcnRzLnN0cmluZyA9IHN0cmluZztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlLWF0dHJpYnV0ZS5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF90cmltID0gcmVxdWlyZSgnLi4vdXRpbC90cmltJyk7XG5cbnZhciBfdHJpbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90cmltKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIHdzID0gL1xccysvOyAvKipcbiAgICAgICAgICAgICAgICAgKiAjIFJlbW92ZSBDbGFzc1xuICAgICAgICAgICAgICAgICAqIFJlbW92ZSBhIGNsYXNzIG9uIGFuIGVsZW1lbnQuXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0VsZW1lbnR8QXJyYXl9IGVsIEFuIGVsZW1lbnQgb3IgYXJyYXkgb2YgZWxlbWVudHMgdG8gdXBkYXRlLlxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAgICAgICAgICAgICAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEBtb2R1bGUgaGVscGVycy9kb20vcmVtb3ZlLWNsYXNzLmpzXG4gICAgICAgICAgICAgICAgICovXG5cbnZhciBjbGVhbnVwID0gL1xcc3syLH0vZztcblxuZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWwsIG5hbWUpIHtcblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMiAmJiB0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICBuYW1lID0gKDAsIF90cmltMi5kZWZhdWx0KShuYW1lKS5zcGxpdCh3cyk7XG4gIH0gZWxzZSB7XG4gICAgbmFtZSA9IG5hbWUgaW5zdGFuY2VvZiBBcnJheSA/IG5hbWUgOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICB9XG5cbiAgLy8gb3B0aW1pemUgZm9yIGJlc3QsIG1vc3QgY29tbW9uIGNhc2VcbiAgaWYgKG5hbWUubGVuZ3RoID09PSAxICYmIGVsLmNsYXNzTGlzdCkge1xuICAgIGlmIChuYW1lWzBdKSBlbC5jbGFzc0xpc3QucmVtb3ZlKG5hbWVbMF0pO1xuICAgIHJldHVybiBlbDtcbiAgfVxuXG4gIC8vIHN0b3JlIHR3byBjb3BpZXNcbiAgdmFyIGNsc05hbWUgPSAnICcgKyAodHlwZW9mIGVsLmNsYXNzTmFtZSA9PT0gJ3N0cmluZycgPyBlbC5jbGFzc05hbWUgOiBlbC5nZXRBdHRyaWJ1dGUgPyBlbC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgOiAnJykgKyAnICc7XG4gIHZhciByZXN1bHQgPSBjbHNOYW1lO1xuICB2YXIgY3VycmVudCA9IHZvaWQgMDtcbiAgdmFyIHN0YXJ0ID0gdm9pZCAwO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IG5hbWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgY3VycmVudCA9IG5hbWVbaV07XG4gICAgc3RhcnQgPSBjdXJyZW50ID8gcmVzdWx0LmluZGV4T2YoJyAnICsgY3VycmVudCArICcgJykgOiAtMTtcbiAgICBpZiAoc3RhcnQgIT09IC0xKSB7XG4gICAgICBzdGFydCArPSAxO1xuICAgICAgcmVzdWx0ID0gcmVzdWx0LnNsaWNlKDAsIHN0YXJ0KSArIHJlc3VsdC5zbGljZShzdGFydCArIGN1cnJlbnQubGVuZ3RoKTtcbiAgICB9XG4gIH1cblxuICAvLyBvbmx5IHdyaXRlIGlmIG1vZGlmaWVkXG4gIGlmIChjbHNOYW1lICE9PSByZXN1bHQpIHtcbiAgICBpZiAodHlwZW9mIGVsLmNsYXNzTmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVsLmNsYXNzTmFtZSA9ICgwLCBfdHJpbTIuZGVmYXVsdCkocmVzdWx0LnJlcGxhY2UoY2xlYW51cCwgJyAnKSk7XG4gICAgfSBlbHNlIGlmIChlbC5zZXRBdHRyaWJ1dGUpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAoMCwgX3RyaW0yLmRlZmF1bHQpKHJlc3VsdC5yZXBsYWNlKGNsZWFudXAsICcgJykpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZWw7XG59XG5cbmV4cG9ydHMuZGVmYXVsdCA9IHJlbW92ZUNsYXNzO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZW1vdmUtY2xhc3MuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfaGFzQ2xhc3MgPSByZXF1aXJlKCcuL2hhcy1jbGFzcycpO1xuXG52YXIgX2hhc0NsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hhc0NsYXNzKTtcblxudmFyIF9hZGRDbGFzcyA9IHJlcXVpcmUoJy4vYWRkLWNsYXNzJyk7XG5cbnZhciBfYWRkQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYWRkQ2xhc3MpO1xuXG52YXIgX3JlbW92ZUNsYXNzID0gcmVxdWlyZSgnLi9yZW1vdmUtY2xhc3MnKTtcblxudmFyIF9yZW1vdmVDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZW1vdmVDbGFzcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIHRvZ2dsZUNsYXNzKGVsLCBuYW1lLCBlbmFibGUpIHtcblxuICBpZiAoIWVsKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gSWYgd2UncmUgcGFzc2VkIGFuIGFycmF5LCB0b2dnbGUgdGhlIGNsYXNzIG9uIGVhY2guXG4gIGlmIChlbCBpbnN0YW5jZW9mIE5vZGVMaXN0IHx8IGVsIGluc3RhbmNlb2YgQXJyYXkpIHtcblxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBlbC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgdG9nZ2xlQ2xhc3MoZWxbaV0sIG5hbWUsIGVuYWJsZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGFjdGlvbiA9IHZvaWQgMDtcbiAgaWYgKGVuYWJsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZW5hYmxlID0gdHlwZW9mIGVuYWJsZSA9PT0gJ2Z1bmN0aW9uJyA/IGVuYWJsZS5jYWxsKG51bGwsIGVsKSA6IGVuYWJsZTtcbiAgICBhY3Rpb24gPSBlbmFibGUgPyAnYWRkJyA6ICdyZW1vdmUnO1xuICB9IGVsc2Uge1xuICAgIGFjdGlvbiA9ICgwLCBfaGFzQ2xhc3MyLmRlZmF1bHQpKGVsLCBuYW1lKSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gIH1cblxuICByZXR1cm4gKGFjdGlvbiA9PT0gJ2FkZCcgPyBfYWRkQ2xhc3MyLmRlZmF1bHQgOiBfcmVtb3ZlQ2xhc3MyLmRlZmF1bHQpKGVsLCBuYW1lKTtcbn0gLyoqXG4gICAqICMgVG9nZ2xlIENsYXNzXG4gICAqIFRvZ2dsZSBhIGNsYXNzIG9uIGFuIGVsZW1lbnQgZ2l2ZW4gYSBjb25kaXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudHxBcnJheX0gZWwgQW4gZWxlbWVudCBvciBhcnJheSBvZiBlbGVtZW50cyB0byB1cGRhdGUuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZW5hYmxlXG4gICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAqXG4gICAqIEBtb2R1bGUgIGhlbHBlcnMvZG9tL3RvZ2dsZS1jbGFzcy5qc1xuICAgKi9cblxuZXhwb3J0cy5kZWZhdWx0ID0gdG9nZ2xlQ2xhc3M7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvZ2dsZS1jbGFzcy5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbi8qKlxuICogIyBUcmlnZ2VyIEV2ZW50XG4gKiBUcmlnZ2VyIGEgRE9NIGV2ZW50IG9uIGFuIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqXG4gKiBAbW9kdWxlIGhlbHBlcnMvZG9tL3RyaWdnZXItZXZlbnQuanNcbiAqL1xuZnVuY3Rpb24gdHJpZ2dlckV2ZW50KGVsLCBuYW1lKSB7XG5cbiAgdmFyIGV2ZW50ID0gdm9pZCAwO1xuXG4gIGlmIChkb2N1bWVudC5jcmVhdGVFdmVudCkge1xuICAgIGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0hUTUxFdmVudHMnKTtcbiAgICBldmVudC5pbml0RXZlbnQobmFtZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgZXZlbnQuZXZlbnROYW1lID0gbmFtZTtcbiAgICBlbC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgfSBlbHNlIHtcbiAgICBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KCk7XG4gICAgZXZlbnQuZXZlbnRUeXBlID0gbmFtZTtcbiAgICBldmVudC5ldmVudE5hbWUgPSBuYW1lO1xuICAgIGVsLmZpcmVFdmVudCgnb24nICsgZXZlbnQuZXZlbnRUeXBlLCBldmVudCk7XG4gIH1cbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gdHJpZ2dlckV2ZW50O1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmlnZ2VyLWV2ZW50LmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2VhY2ggPSByZXF1aXJlKCcuLi91dGlsL2VhY2gnKTtcblxudmFyIF9lYWNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2VhY2gpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBhcHBlbmRDaGlsZHJlbihlbCwgY2hpbGRyZW4sIGVtcHR5KSB7XG5cbiAgZW1wdHkgPSBlbXB0eSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBlbXB0eTtcblxuICBpZiAoZW1wdHkpIHtcbiAgICBlbC50ZXh0Q29udGVudCA9ICcnO1xuICB9XG5cbiAgdmFyIGRvbUxpc3QgPSBjaGlsZHJlbiBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MQ29sbGVjdGlvbjtcblxuICBpZiAoZG9tTGlzdCkge1xuICAgIHdoaWxlIChjaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgIGVsLmFwcGVuZENoaWxkKGNoaWxkcmVuWzBdKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgKDAsIF9lYWNoMi5kZWZhdWx0KShjaGlsZHJlbiwgZnVuY3Rpb24gKGMpIHtcbiAgICAgIGlmIChjKSB7XG4gICAgICAgIGVsLmFwcGVuZENoaWxkKGMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59IC8qKlxuICAgKiAjIEFwcGVuZCBDaGlsZHJlblxuICAgKiBBcHBlbmQgYW4gYXJyYXkgb2YgY2hpbGRyZW4gdG8gYSBub2RlLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqIEBwYXJhbSB7QXJyYXl9IGNoaWxkcmVuXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZW1wdHkgRW1wdHkgdGhlIG5vZGUgYmVmb3JlIGFkZGluZyBjaGlsZHJlbj9cbiAgICpcbiAgICogQG1vZHVsZSBoZWxwZXJzL21hbmlwdWxhdGlvbi9hcHBlbmQtY2hpbGRyZW4uanNcbiAgICovXG5cbmV4cG9ydHMuZGVmYXVsdCA9IGFwcGVuZENoaWxkcmVuO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHBlbmQtY2hpbGRyZW4uanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZWFjaCA9IHJlcXVpcmUoJy4uL3V0aWwvZWFjaCcpO1xuXG52YXIgX2VhY2gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZWFjaCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIGNvcHlBdHRyaWJ1dGVzKGEsIGIpIHtcbiAgKDAsIF9lYWNoMi5kZWZhdWx0KShhLmF0dHJpYnV0ZXMsIGZ1bmN0aW9uIChhdHRyKSB7XG4gICAgYi5zZXRBdHRyaWJ1dGUoYXR0ci5uYW1lLCBhdHRyLnZhbHVlKTtcbiAgfSk7XG59IC8qKlxuICAgKiAjIENvcHkgQXR0cmlidXRlc1xuICAgKiBDb3B5IGFsbCBvZiB0aGUgYXR0cmlidXRlcyBmcm9tIG9uZSBlbGVtZW50IHRvIGFub3RoZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gYVxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGJcbiAgICpcbiAgICogQG1vZHVsZSBoZWxwZXJzL21hbmlwdWxhdGlvbi9jb3B5LWF0dHJpYnV0ZXMuanNcbiAgICovXG5cbmV4cG9ydHMuZGVmYXVsdCA9IGNvcHlBdHRyaWJ1dGVzO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb3B5LWF0dHJpYnV0ZXMuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG4vKipcbiAqICMgRWFjaFxuICogQXBwbHkgYSBjYWxsYmFjayBmdW5jdGlvbiB0byBhIGxpc3Qgb2YgYW55IGtpbmQ6IEFycmF5LCBOb2RlTGlzdCwgSFRNTENvbGxlY3Rpb24gb3IgT2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7QXJyYXl8Tm9kZUxpc3R8SFRNTENvbGxlY3Rpb258T2JqZWN0fSBsaXN0XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICpcbiAqIEBleGFtcGxlXG4gKiBlYWNoKFtdLCBjYWxsYmFjayk7XG4gKiBlYWNoKGVsLmNoaWxkcmVuLCBjYWxsYmFjayk7XG4gKiBlYWNoKGVsLmNoaWxkTm9kZXMsIGNhbGxiYWNrKTtcbiAqIGVhY2goe30sIGNhbGxiYWNrKTtcbiAqXG4gKiBAbW9kdWxlIGhlbHBlcnMvdXRpbC9lYWNoLmpzXG4gKi9cbmZ1bmN0aW9uIGVhY2gobGlzdCwgY2IpIHtcblxuICBpZiAoIWxpc3QpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAodHlwZW9mIGNiICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgaW52b2tlIGBlYWNoYCB3aXRob3V0IGEgY2FsbGJhY2shJyk7XG4gIH1cblxuICB2YXIgaSA9IDA7XG4gIHZhciBsZW4gPSBsaXN0Lmxlbmd0aDtcblxuICAvLyBPYmplY3RcbiAgaWYgKGxlbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZm9yIChpIGluIGxpc3QpIHtcbiAgICAgIGlmIChpICE9PSAncHJvdG90eXBlJyAmJiBsaXN0Lmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgIGNiKGksIGxpc3RbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvLyBBcnJheS1saWtlXG4gIGVsc2Uge1xuICAgICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBjYihsaXN0W2ldKTtcbiAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGVhY2g7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVhY2guanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChwcm90bykge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgbWl4aW5zID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIG1peGluc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICAoMCwgX2VhY2gyLmRlZmF1bHQpKG1peGlucywgZnVuY3Rpb24gKG1peGluKSB7XG4gICAgZm9yICh2YXIgaSBpbiBtaXhpbikge1xuICAgICAgaWYgKG1peGluLmhhc093blByb3BlcnR5KGkpICYmICFwcm90b1tpXSkgcHJvdG9baV0gPSBtaXhpbltpXTtcbiAgICB9XG4gIH0pO1xufTtcblxudmFyIF9lYWNoID0gcmVxdWlyZSgnLi9lYWNoJyk7XG5cbnZhciBfZWFjaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lYWNoKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqXG4gKiAjIE1peGluXG4gKiBBcHBseSBhIG1peGluLCBvciBtaXhpbnMsIHRvIGFuIE9iamVjdFxuICpcbiAqIEBleGFtcGxlXG4gKiBtaXhpbihwcm90bywgbWl4LCBtaXgyKVxuICpcbiAqIEBtb2R1bGUgaGVscGVycy91dGlsL21peGluLmpzXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWl4aW4uanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG4vKipcbiAqICMgUGFkXG4gKiBQYWQgYSBudW1iZXIgd2l0aCBsZWFkaW5nIHplcm9zXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG5cbiAqIEBwYXJhbSB7TnVtYmVyfSB3XG4gKiBAcGFyYW0ge1N0cmluZ30gYyBPcHRpb25hbCBTdHJpbmcgdG8gcGFkIHdpdGhcbiAqXG4gKiBAZXhhbXBsZVxuICogcGFkKDQsIDIpO1xuICpcbiAqIEBtb2R1bGUgaGVscGVycy91dGlsL3BhZC5qc1xuICovXG5mdW5jdGlvbiBwYWQobiwgdywgYykge1xuICBjID0gYyB8fCAnMCc7XG4gIG4gPSBuICsgJyc7XG4gIHJldHVybiBuLmxlbmd0aCA+PSB3ID8gbiA6IG5ldyBBcnJheSh3IC0gbi5sZW5ndGggKyAxKS5qb2luKGMpICsgbjtcbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gcGFkO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWQuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG4vKipcbiAqICMgVHJpbVxuICogVHJpbSB3aGl0ZXNwYWNlIG9uIGEgc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqXG4gKiBAbW9kdWxlIGhlbHBlcnMvdXRpbC90cmltLmpzXG4gKi9cblxudmFyIHRyaW1SRSA9IC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZztcblxuZnVuY3Rpb24gdHJpbShzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKHRyaW1SRSwgJycpO1xufVxuXG5leHBvcnRzLmRlZmF1bHQgPSB0cmltO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmltLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2hlaWdodCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvYW5pbWF0aW9uL2hlaWdodCcpO1xuXG52YXIgX2hlaWdodDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oZWlnaHQpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5leHBvcnRzLmRlZmF1bHQgPSB7XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZXJyb3Igc3RhdGUuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIE9wdGlvbmFsXG4gICAqL1xuICBzZXRFcnJvcjogZnVuY3Rpb24gc2V0RXJyb3IobWVzc2FnZSkge1xuXG4gICAgLy8gQW5pbWF0ZSBkb3duXG4gICAgaWYgKCF0aGlzLl9pc01lc3NhZ2VWaXNpYmxlKCkpIHtcbiAgICAgIHRoaXMuX3Nob3dNZXNzYWdlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5jbGVhcldhcm5pbmcoKTtcbiAgICB0aGlzLmNsZWFyU3VjY2VzcygpO1xuXG4gICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZXJyb3InLCB0cnVlKTtcblxuICAgIGlmIChtZXNzYWdlKSB7XG4gICAgICB0aGlzLnNldE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cblxuICAvKipcbiAgICogU2V0IHRoZSBlcnJvciBzdGF0ZS5cbiAgICovXG4gIGNsZWFyRXJyb3I6IGZ1bmN0aW9uIGNsZWFyRXJyb3IoKSB7XG4gICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtZXJyb3InLCB0cnVlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHdhcm5pbmcgc3RhdGUuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIE9wdGlvbmFsXG4gICAqL1xuICBzZXRXYXJuaW5nOiBmdW5jdGlvbiBzZXRXYXJuaW5nKG1lc3NhZ2UpIHtcblxuICAgIC8vIEFuaW1hdGUgZG93blxuICAgIGlmICghdGhpcy5faXNNZXNzYWdlVmlzaWJsZSgpKSB7XG4gICAgICB0aGlzLl9zaG93TWVzc2FnZSgpO1xuICAgIH1cblxuICAgIHRoaXMuY2xlYXJFcnJvcigpO1xuICAgIHRoaXMuY2xlYXJTdWNjZXNzKCk7XG5cbiAgICB0aGlzLmVsLnNldEF0dHJpYnV0ZSgnZGF0YS13YXJuaW5nJywgdHJ1ZSk7XG5cbiAgICBpZiAobWVzc2FnZSkge1xuICAgICAgdGhpcy5zZXRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZXJyb3Igc3RhdGUuXG4gICAqL1xuICBjbGVhcldhcm5pbmc6IGZ1bmN0aW9uIGNsZWFyV2FybmluZygpIHtcbiAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS13YXJuaW5nJywgdHJ1ZSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cblxuICAvKipcbiAgICogU2V0IHRoZSBzdWNjZXNzIHN0YXRlLlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBPcHRpb25hbFxuICAgKi9cbiAgc2V0U3VjY2VzczogZnVuY3Rpb24gc2V0U3VjY2VzcyhtZXNzYWdlKSB7XG5cbiAgICAvLyBBbmltYXRlIGRvd25cbiAgICBpZiAoIXRoaXMuX2lzTWVzc2FnZVZpc2libGUoKSkge1xuICAgICAgdGhpcy5fc2hvd01lc3NhZ2UoKTtcbiAgICB9XG5cbiAgICB0aGlzLmNsZWFyRXJyb3IoKTtcbiAgICB0aGlzLmNsZWFyV2FybmluZygpO1xuXG4gICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3VjY2VzcycsIHRydWUpO1xuXG4gICAgaWYgKG1lc3NhZ2UpIHtcbiAgICAgIHRoaXMuc2V0TWVzc2FnZShtZXNzYWdlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHN1Y2Nlc3Mgc3RhdGUuXG4gICAqL1xuICBjbGVhclN1Y2Nlc3M6IGZ1bmN0aW9uIGNsZWFyU3VjY2VzcygpIHtcbiAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1zdWNjZXNzJywgdHJ1ZSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cblxuICAvKipcbiAgICogQ2xlYXIgYWxsIG1lc3NhZ2VzLlxuICAgKi9cbiAgY2xlYXJNZXNzYWdlczogZnVuY3Rpb24gY2xlYXJNZXNzYWdlcygpIHtcbiAgICB0aGlzLl9oaWRlTWVzc2FnZShmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmNsZWFyRXJyb3IoKTtcbiAgICAgIHRoaXMuY2xlYXJXYXJuaW5nKCk7XG4gICAgICB0aGlzLmNsZWFyU3VjY2VzcygpO1xuICAgIH0uYmluZCh0aGlzKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cblxuICAvKipcbiAgICogU2V0IHRoZSBtZXNzYWdlIHRleHQuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAqL1xuICBzZXRNZXNzYWdlOiBmdW5jdGlvbiBzZXRNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICB0aGlzLm1lc3NhZ2VFbC5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgIHJldHVybiB0aGlzO1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIFNob3cgdGhlIG1lc3NhZ2VcbiAgICovXG4gIF9zaG93TWVzc2FnZTogZnVuY3Rpb24gX3Nob3dNZXNzYWdlKCkge1xuXG4gICAgaWYgKCF0aGlzLm1lc3NhZ2VFbC5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLmVsLmFwcGVuZENoaWxkKHRoaXMubWVzc2FnZUVsKTtcbiAgICB9XG5cbiAgICAoMCwgX2hlaWdodDIuZGVmYXVsdCkoe1xuICAgICAgZWw6IHRoaXMuZWwsXG4gICAgICB0b2dnbGVFbDogdGhpcy5tZXNzYWdlRWxcbiAgICB9KTtcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBIaWRlIHRoZSBtZXNzYWdlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgX2hpZGVNZXNzYWdlOiBmdW5jdGlvbiBfaGlkZU1lc3NhZ2UoY2FsbGJhY2spIHtcblxuICAgICgwLCBfaGVpZ2h0Mi5kZWZhdWx0KSh7XG4gICAgICBlbDogdGhpcy5lbCxcbiAgICAgIHRvZ2dsZUVsOiB0aGlzLm1lc3NhZ2VFbCxcbiAgICAgIHRvZ2dsZVZhbHVlOiAnbm9uZScsXG4gICAgICBhY3Rpb246ICdjb2xsYXBzZScsXG4gICAgICBvbkNvbXBsZXRlOiBjYWxsYmFja1xuICAgIH0pO1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIElzIHRoZSBtZXNzYWdlIGN1cnJlbnRseSB2aXNpYmxlP1xuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cbiAgX2lzTWVzc2FnZVZpc2libGU6IGZ1bmN0aW9uIF9pc01lc3NhZ2VWaXNpYmxlKCkge1xuICAgIHJldHVybiB0aGlzLmVsLmdldEF0dHJpYnV0ZSgnZGF0YS1lcnJvcicpIHx8IHRoaXMuZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXdhcm5pbmcnKSB8fCB0aGlzLmVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zdWNjZXNzJyk7XG4gIH1cbn07IC8qKlxuICAgICogIyBNZXNzYWdpbmcgTWl4aW5cbiAgICAqIEFkZCBmdW5jdGlvbmFsaXR5IGZvciBzaG93aW5nIG1lc3NhZ2VzIHJlbGF0ZWQgdG8gYSBmb3JtIGZpZWxkLlxuICAgICpcbiAgICAqIEBleGFtcGxlXG4gICAgKiBtaXhpbihDb21wb25lbnQsIG1lc3NhZ2luZyk7XG4gICAgKlxuICAgICogQG1vZHVsZSBtaXhpbi9tZXNzYWdpbmcuanNcbiAgICAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lc3NhZ2luZy5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuLyoqXG4gKiAjIFZhbGlkYXRpb24gTWl4aW5cbiAqIEFkZCBmdW5jdGlvbmFsaXR5IGZvciB2YWxpZGF0aW5nIGEgZm9ybSBmaWVsZCdzIHZhbHVlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBtaXhpbihDb21wb25lbnQsIHZhbGlkYXRpb24pO1xuICpcbiAqIEBtb2R1bGUgbWl4aW4vdmFsaWRhdGlvbi5qc1xuICovXG5cbmV4cG9ydHMuZGVmYXVsdCA9IHtcblxuICAvKipcbiAgICogRGVmYXVsdCB2YWxpZGF0ZSBmdW5jdGlvbi4gVGhpcyBjYW4gYmUgb3ZlcnJpZGRlbiBieSBwYXNzaW5nIGFcbiAgICogY3VzdG9tIHZhbGlkYXRlIG1ldGhvZCBhcyBhIHBhcmFtZXRlci4gVGhpcyByZWFsbHkgb25seSBoZWxwcyBvdXRcbiAgICogb2YgdGhlIGJveCBmb3IgdGV4dCBpbnB1dHMuXG4gICAqL1xuICB2YWxpZGF0ZTogZnVuY3Rpb24gdmFsaWRhdGUoKSB7XG5cbiAgICB2YXIgdmFsaWRhdGUgPSB0aGlzLnZhbGlkYXRlUGF0dGVybjtcblxuICAgIC8vIE5vdGhpbmcgdG8gdmFsaWRhdGUuXG4gICAgaWYgKCF0aGlzLm9uVmFsaWRhdGUgfHwgIXZhbGlkYXRlKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKHZhbGlkYXRlKTtcblxuICAgIHRoaXMub25WYWxpZGF0ZShyZS50ZXN0KHRoaXMuZ2V0VmFsdWUoKSksIHRoaXMuZ2V0VmFsdWUoKSwgdGhpcyk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxufTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07XG4vLyMgc291cmNlTWFwcGluZ1VSTD12YWxpZGF0aW9uLmpzLm1hcFxuIl19"}