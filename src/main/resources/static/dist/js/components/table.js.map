{"version":3,"sources":["js/dist/components/node_modules/browser-pack/_prelude.js","js/dist/components/js/dist/components/base.js","js/dist/components/js/dist/components/expand.js","js/dist/components/js/dist/components/table.js","js/dist/components/js/dist/helpers/animation/height.js","js/dist/components/js/dist/helpers/dom/add-class.js","js/dist/components/js/dist/helpers/dom/has-class.js","js/dist/components/js/dist/helpers/dom/outer-height.js","js/dist/components/js/dist/helpers/dom/remove-class.js","js/dist/components/js/dist/helpers/dom/toggle-class.js","js/dist/components/js/dist/helpers/form/form-data.js","js/dist/components/js/dist/helpers/form/set-caret.js","js/dist/components/js/dist/helpers/traversal/get-index.js","js/dist/components/js/dist/helpers/traversal/get-parent.js","js/dist/components/js/dist/helpers/traversal/get-sibling-after.js","js/dist/components/js/dist/helpers/traversal/get-sibling-before.js","js/dist/components/js/dist/helpers/traversal/matches.js","js/dist/components/js/dist/helpers/util/each.js","js/dist/components/js/dist/helpers/util/trim.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"table.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _each = require('../helpers/util/each');\n\nvar _each2 = _interopRequireDefault(_each);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } /**\n                                                                                                                                                           * # Base Component\n                                                                                                                                                           * The base class for Spark JS components. This class should never be\n                                                                                                                                                           * instantiated directly.\n                                                                                                                                                           *\n                                                                                                                                                           * @param {Element} el\n                                                                                                                                                           * @param {Object} params\n                                                                                                                                                           *\n                                                                                                                                                           * @module components/base.js\n                                                                                                                                                           */\n\nvar noop = function noop() {};\n\nvar Base = function () {\n\n  /**\n   * Set parameters and cache elements.\n   */\n  function Base(el) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Base);\n\n    if (params.elRequired && !el) {\n      return;\n    }\n\n    this.setParams(this.defaults || {}, true);\n    this.setParams(params);\n    (this._cacheElements || noop).call(this, el, params);\n    (this._parseParams || noop).call(this);\n  }\n\n  /**\n   * Remove the component from the DOM and prepare for garbage collection by dereferencing values.\n   * @param {Boolean} leaveElement Leave the element intact.\n   */\n\n\n  Base.prototype.remove = function remove(leaveElement) {\n\n    if (this._removeEventListeners) {\n      this._removeEventListeners();\n    }\n\n    if (!leaveElement && this.el && this.el.parentNode) {\n      this.el.parentNode.removeChild(this.el);\n    }\n\n    this.unsetParams(this.defaults);\n\n    return this;\n  };\n\n  /**\n   * Update the component to use a new element or reparse from\n   * the existing element.\n   * @param {Element} el Optional\n   * @param {Object} params Optional\n   */\n\n\n  Base.prototype.update = function update(el) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\n    if (this._removeEventListeners) {\n      this._removeEventListeners();\n    }\n\n    (this._cacheElements || noop).call(this, el || this.el, params);\n    (this._parseParams || noop).call(this);\n\n    if (this._addEventListeners) {\n      this._addEventListeners();\n    }\n\n    return this;\n  };\n\n  /**\n   * Set a hash of parameters if they're whitelisted or we're told to force the set.\n   * This is used to set initial values as well as set passed parameters.\n   * @param {Object} params\n   * @param {Boolean} force Force setting even if the param is not whitelisted.\n   */\n\n\n  Base.prototype.setParams = function setParams(params, force) {\n    var _this = this;\n\n    (0, _each2.default)(params, function (k, v) {\n      if (_this._whitelistedParams.indexOf(k) !== -1 || force) {\n        _this[k] = v;\n      }\n    });\n\n    return this;\n  };\n\n  /**\n   * Unset all parameters.\n   * @param {Array|Object} keys\n   * @param {Object} scope The object to unset the params from. Defaults to `this`.\n   */\n\n\n  Base.prototype.unsetParams = function unsetParams(keys, scope) {\n\n    keys = keys instanceof Array ? keys : Object.keys(keys);\n    scope = scope || this;\n    (0, _each2.default)(keys, function (k) {\n      delete scope[k];\n    });\n\n    return this;\n  };\n\n  return Base;\n}();\n\n/**\n * Whitelisted parameters which can be set on construction.\n * @type {Array}\n */\n\n\nBase.prototype._whitelistedParams = [];\n\n/**\n * Default values for internal properties we will be setting.\n * These are set on each construction so we don't leak properties\n * into the prototype chain.\n * @type {Object}\n */\nBase.prototype.defaults = {};\n\nexports.default = Base;\nmodule.exports = exports['default'];\n//# sourceMappingURL=base.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _base = require('./base');\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _height = require('../helpers/animation/height');\n\nvar _height2 = _interopRequireDefault(_height);\n\nvar _toggleClass = require('../helpers/dom/toggle-class');\n\nvar _toggleClass2 = _interopRequireDefault(_toggleClass);\n\nvar _hasClass = require('../helpers/dom/has-class');\n\nvar _hasClass2 = _interopRequireDefault(_hasClass);\n\nvar _getParent = require('../helpers/traversal/get-parent');\n\nvar _getParent2 = _interopRequireDefault(_getParent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * # Expand\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Expand and collapse an element.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @example\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * new Expand(el);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @module components/expand.js\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar noop = function noop() {};\n\nvar Expand = function (_BaseComponent) {\n  _inherits(Expand, _BaseComponent);\n\n  /**\n   * Expand constructor.\n   * @param {Element} el\n   * @param {Object} params\n   */\n  function Expand(el) {\n    var _this;\n\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Expand);\n\n    params.elRequired = true;\n\n    if (!(_this = _possibleConstructorReturn(this, _BaseComponent.call(this, el, params)), _this)) {\n      return _possibleConstructorReturn(_this);\n    }\n\n    _this._bindEventListenerCallbacks();\n    _this._addEventListeners();\n    return _possibleConstructorReturn(_this);\n  }\n\n  /**\n   * Expand\n   */\n\n\n  Expand.prototype.expand = function expand() {\n\n    (this.onBeforeExpand || noop)();\n\n    (0, _height2.default)({\n      el: this.el,\n      toggleClass: 'expanded',\n      toggleEl: '.spark-expand__content, .spark-panel__content'\n    });\n\n    this.isExpanded = true;\n    this._updateClasses();\n    var e = document.createEvent('Event');\n    e.initEvent('spark.visible-children', true, true);\n    this.el.dispatchEvent(e);\n\n    // If the expand element have input, focus on the first one.\n    if (this.el.querySelector('input')) {\n      this.el.querySelector('input').focus();\n    }\n\n    (this.onAfterExpand || noop)();\n\n    return this;\n  };\n\n  /**\n   * Collapse\n   */\n\n\n  Expand.prototype.collapse = function collapse() {\n\n    (this.onBeforeCollapse || noop)();\n\n    (0, _height2.default)({\n      el: this.el,\n      toggleEl: '.spark-expand__content, .spark-panel__content',\n      toggleValue: 'none',\n      action: 'collapse'\n    });\n\n    this.isExpanded = false;\n    this._updateClasses();\n\n    (this.onAfterCollapse || noop)();\n\n    return this;\n  };\n\n  /**\n   * Toggle the expand state.\n   */\n\n\n  Expand.prototype.toggle = function toggle() {\n    return this[this.isExpanded ? 'collapse' : 'expand']();\n  };\n\n  /**\n   * Store a reference to the element.\n   * @param {Element} el\n   */\n\n\n  Expand.prototype._cacheElements = function _cacheElements(el) {\n    this.el = el;\n    this.isExpanded = (0, _hasClass2.default)(this.el, 'expanded');\n  };\n\n  /**\n   * Update classes for the expand or collapse state.\n   */\n\n\n  Expand.prototype._updateClasses = function _updateClasses() {\n    (0, _toggleClass2.default)(this.el, 'expanded', this.isExpanded);\n  };\n\n  /**\n   * Create bound versions of event listener callbacks and store them.\n   * Otherwise we can't unbind from these events later because the\n   * function signatures won't match.\n   */\n\n\n  Expand.prototype._bindEventListenerCallbacks = function _bindEventListenerCallbacks() {\n    this._onClickBound = this._onClick.bind(this);\n    this._onKeydownBound = this._onKeydown.bind(this);\n  };\n\n  /**\n   * Add event listeners for DOM events.\n   */\n\n\n  Expand.prototype._addEventListeners = function _addEventListeners() {\n    this.el.addEventListener('click', this._onClickBound);\n    this.el.addEventListener('keydown', this._onKeydownBound);\n  };\n\n  /**\n   * Remove event listeners for DOM events..\n   */\n\n\n  Expand.prototype._removeEventListeners = function _removeEventListeners() {\n    this.el.removeEventListener('click', this._onClickBound);\n    this.el.removeEventListener('keydown', this._onKeydownBound);\n  };\n\n  /**\n   * When we are clicked, toggle the expanded state.\n   * @param {Object} e\n   */\n\n\n  Expand.prototype._onClick = function _onClick(e) {\n\n    if (!(0, _getParent2.default)(e.target, '.spark-expand__toggle, [data-role=\"toggle\"], [role=\"heading\"]', this.el)) {\n      return;\n    }\n\n    e.preventDefault();\n    this.toggle();\n  };\n\n  /**\n   * When the space or enter key is pressed on the toggle, toggle!\n   * @param {Object} e\n   */\n\n\n  Expand.prototype._onKeydown = function _onKeydown(e) {\n\n    if (!(0, _getParent2.default)(e.target, '.spark-expand__toggle, [data-role=\"toggle\"], [role=\"heading\"]', this.el)) {\n      return;\n    }\n\n    var code = e.keyCode || e.which;\n\n    // Space or enter\n    if (code === 32 || code === 13) {\n      e.preventDefault();\n      this.toggle();\n    }\n  };\n\n  return Expand;\n}(_base2.default);\n\n/**\n * Whitelisted parameters which can be set on construction.\n * @type {Array}\n */\n\n\nExpand.prototype._whitelistedParams = ['onBeforeExpand', 'onAfterExpand', 'onBeforeCollapse', 'onAfterCollapse'];\n\n/**\n * Default values for internal properties we will be setting.\n * These are set on each construction so we don't leak properties\n * into the prototype chain.\n * @type {Object}\n */\nExpand.prototype.defaults = {\n  el: null,\n  isExpanded: false,\n  onBeforeExpand: null,\n  onAfterExpand: null,\n  onBeforeCollapse: null,\n  onAfterCollapse: null,\n  _onClickBound: null,\n  _onKeydownBound: null\n};\n\nexports.default = Expand;\nmodule.exports = exports['default'];\n//# sourceMappingURL=expand.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _base = require('./base');\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _expand = require('./expand');\n\nvar _expand2 = _interopRequireDefault(_expand);\n\nvar _setCaret = require('../helpers/form/set-caret');\n\nvar _setCaret2 = _interopRequireDefault(_setCaret);\n\nvar _formData = require('../helpers/form/form-data');\n\nvar _each = require('../helpers/util/each');\n\nvar _each2 = _interopRequireDefault(_each);\n\nvar _hasClass = require('../helpers/dom/has-class');\n\nvar _hasClass2 = _interopRequireDefault(_hasClass);\n\nvar _toggleClass = require('../helpers/dom/toggle-class');\n\nvar _toggleClass2 = _interopRequireDefault(_toggleClass);\n\nvar _addClass = require('../helpers/dom/add-class');\n\nvar _addClass2 = _interopRequireDefault(_addClass);\n\nvar _removeClass = require('../helpers/dom/remove-class');\n\nvar _removeClass2 = _interopRequireDefault(_removeClass);\n\nvar _getParent = require('../helpers/traversal/get-parent');\n\nvar _getParent2 = _interopRequireDefault(_getParent);\n\nvar _getIndex = require('../helpers/traversal/get-index');\n\nvar _getIndex2 = _interopRequireDefault(_getIndex);\n\nvar _getSiblingBefore = require('../helpers/traversal/get-sibling-before');\n\nvar _getSiblingBefore2 = _interopRequireDefault(_getSiblingBefore);\n\nvar _getSiblingAfter = require('../helpers/traversal/get-sibling-after');\n\nvar _getSiblingAfter2 = _interopRequireDefault(_getSiblingAfter);\n\nvar _matches = require('../helpers/traversal/matches');\n\nvar _matches2 = _interopRequireDefault(_matches);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * # Table\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @example\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * new Table(el);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @module components/table.js\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar noop = function noop() {};\n\nvar Table = function (_BaseComponent) {\n  _inherits(Table, _BaseComponent);\n\n  /**\n   * Table constructor.\n   * @param {Element} el\n   * @param {Object} params\n   */\n  function Table(el) {\n    var _this;\n\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Table);\n\n    params.elRequired = true;\n\n    if (!(_this = _possibleConstructorReturn(this, _BaseComponent.call(this, el, params)), _this)) {\n      return _possibleConstructorReturn(_this);\n    }\n\n    _this._bindEventListenerCallbacks();\n    _this._addEventListeners();\n\n    _this._initRows();\n\n    if (_this.isSpreadsheet || _this.isEditRows) {\n      _this._deactivateAllInputs();\n    }\n\n    if (_this.isResizable) {\n      _this._initResize();\n    }\n\n    _this._disableRowsColumnsCells();\n\n    _this._initExpands();\n    return _possibleConstructorReturn(_this);\n  }\n\n  /**\n   * Disable the form field in a table cell.\n   * @param {Element} el\n   */\n\n\n  Table.prototype.disableCell = function disableCell(el) {\n    el.disabled = true;\n    (0, _addClass2.default)((0, _getParent2.default)(el, 'td'), 'spark-table__disabled-cell');\n    return this;\n  };\n\n  /**\n   * Enable the form field in a table cell.\n   * @param {Element} el\n   */\n\n\n  Table.prototype.enableCell = function enableCell(el) {\n    el.disabled = false;\n    (0, _removeClass2.default)((0, _getParent2.default)(el, 'td'), 'spark-table__disabled-cell');\n    return this;\n  };\n\n  /**\n   * Disable a row and all the cells inside of it.\n   * @param {Element} el\n   */\n\n\n  Table.prototype.disableRow = function disableRow(el) {\n    (0, _addClass2.default)(el, 'spark-table__disabled-row');\n    (0, _each2.default)(el.querySelectorAll('input, button, a'), function (i) {\n      i.disabled = true;\n    });\n    return this;\n  };\n\n  /**\n   * Enable a row and all the cells inside of it.\n   * @param {Element} el\n   */\n\n\n  Table.prototype.enableRow = function enableRow(el) {\n    (0, _removeClass2.default)(el, 'spark-table__disabled-row');\n    (0, _each2.default)(el.querySelectorAll('input, button, a'), function (i) {\n      i.disabled = false;\n    });\n    return this;\n  };\n\n  /**\n   * Disable a column and all the cells inside of it.\n   * @param {Element} el\n   */\n\n\n  Table.prototype.disableColumn = function disableColumn(el) {\n\n    var index = (0, _getIndex2.default)(el.parentNode.children, el);\n\n    (0, _each2.default)(this.tableEl.querySelectorAll('tbody tr'), function (row) {\n      this.disableCell(row.children[index].querySelector('input'));\n    }.bind(this));\n\n    (0, _addClass2.default)(el, 'spark-table__disabled-column');\n\n    return this;\n  };\n\n  /**\n   * Enable a column and all the cells inside of it.\n   * @param {Element} el\n   */\n\n\n  Table.prototype.enableColumn = function enableColumn(el) {\n\n    var index = (0, _getIndex2.default)(el.parentNode.children, el);\n\n    (0, _each2.default)(this.tableEl.querySelectorAll('tbody tr'), function (row) {\n      this.enableCell(row.children[index].querySelector('input'));\n    }.bind(this));\n\n    (0, _removeClass2.default)(el, 'spark-table__disabled-column');\n\n    return this;\n  };\n\n  /**\n   * Remove the table anc cleanup.\n   * @param {Boolean} leaveElement Leave the element intact.\n   */\n\n\n  Table.prototype.remove = function remove(leaveElement) {\n    (0, _each2.default)(this._expands, function (e) {\n      e.remove(leaveElement);\n    });\n    return _BaseComponent.prototype.remove.call(this, leaveElement);\n  };\n\n  /**\n   * Activate a row.\n   * @param {Number|Element} row\n   */\n\n\n  Table.prototype.activateRow = function activateRow(row) {\n    row = typeof row === 'number' ? this.tableEl.querySelectorAll('tbody tr')[row] : row;\n    if (row) this._makeRowActive(row);\n    return this;\n  };\n\n  /**\n   * Activate multiple rows.\n   * @param {Array} rows\n   */\n\n\n  Table.prototype.activateRows = function activateRows(rows) {\n    (0, _each2.default)(rows, this.activateRow.bind(this));\n    return this;\n  };\n\n  /**\n   * Deactivate a row.\n   * @param {Number|Element} row\n   */\n\n\n  Table.prototype.deactivateRow = function deactivateRow(row) {\n    row = typeof row === 'number' ? this.tableEl.querySelectorAll('tbody tr')[row] : row;\n    if (row) this._makeRowInActive(row);\n    return this;\n  };\n\n  /**\n   * Deactivate multiple rows.\n   * @param {Array} rows\n   */\n\n\n  Table.prototype.deactivateRows = function deactivateRows(rows) {\n    (0, _each2.default)(rows, this.deactivateRow.bind(this));\n    return this;\n  };\n\n  /**\n   * Get an array of currently active rows.\n   * @return {Array}\n   */\n\n\n  Table.prototype.getActiveRows = function getActiveRows() {\n\n    var arr = [];\n\n    (0, _each2.default)(this.el.querySelectorAll('tbody tr.active'), function (tr) {\n      arr.push(tr);\n    });\n\n    return arr;\n  };\n\n  /**\n   * Update the component to use a new element or reparse from\n   * the existing element.\n   * @param {Element} el Optional\n   */\n\n\n  Table.prototype.update = function update(el) {\n\n    this._removeEventListeners();\n\n    this._cacheElements(el || this.el);\n    this._parseParams();\n\n    this._addEventListeners();\n\n    this._initRows();\n\n    if (this.isSpreadsheet || this.isEditRows) {\n      this._deactivateAllInputs();\n    }\n\n    if (this.isResizable) {\n      this._initResize();\n    }\n\n    this._disableRowsColumnsCells();\n\n    this._initExpands();\n\n    return this;\n  };\n\n  /**\n   * Store a reference to the tabs list, each tab and each panel.\n   * Set which tab is active, or use the first.\n   * @param {Element} el\n   */\n\n\n  Table.prototype._cacheElements = function _cacheElements(el) {\n    this.el = el;\n    this.tableEl = el.querySelector('table');\n  };\n\n  /**\n   * Parse parameters from the elements.\n   */\n\n\n  Table.prototype._parseParams = function _parseParams() {\n\n    if (!this.tableEl) {\n      return;\n    }\n\n    this.isSpreadsheet = this.isSpreadsheet !== null ? this.isSpreadsheet : (0, _hasClass2.default)(this.el, 'spark-table--spreadsheet') ? true : false;\n    this.isEditRows = this.isEditRows !== null ? this.isEditRows : (0, _hasClass2.default)(this.el, 'spark-table--edit-rows') ? true : false;\n    this.isResizable = this.isResizable !== null ? this.isResizable : (0, _hasClass2.default)(this.el, 'spark-table--resizable') ? true : false;\n  };\n\n  /**\n   * Create bound versions of event listener callbacks and store them.\n   * Otherwise we can't unbind from these events later because the\n   * function signatures won't match.\n   */\n\n\n  Table.prototype._bindEventListenerCallbacks = function _bindEventListenerCallbacks() {\n\n    this._onClickBound = this._onClick.bind(this);\n    this._onChangeBound = this._onChange.bind(this);\n    this._onFocusBound = this._onFocus.bind(this);\n    this._onBlurBound = this._onBlur.bind(this);\n\n    this._onTouchstartBound = this._onTouchstart.bind(this);\n    this._onTouchendBound = this._onTouchend.bind(this);\n    this._onKeydownBound = this._onKeydown.bind(this);\n\n    this._onMouseDownBound = this._onMouseDown.bind(this);\n    this._onMouseMoveBound = this._onMouseMove.bind(this);\n    this._onMouseUpBound = this._onMouseUp.bind(this);\n  };\n\n  /**\n   * Add event listeners for DOM events.\n   */\n\n\n  Table.prototype._addEventListeners = function _addEventListeners() {\n\n    this.el.addEventListener('click', this._onClickBound, false);\n    this.el.addEventListener('change', this._onChangeBound, false);\n    this.el.addEventListener('focus', this._onFocusBound, true);\n    this.el.addEventListener('blur', this._onBlurBound, true);\n\n    if (this.isSpreadsheet) {\n      this.el.addEventListener('touchstart', this._onTouchstartBound, false);\n      this.el.addEventListener('touchend', this._onTouchendBound, false);\n      this.el.addEventListener('keydown', this._onKeydownBound, false);\n    }\n\n    if (this.isResizable) {\n      this.tableEl.addEventListener('mousedown', this._onMouseDownBound, false);\n    }\n  };\n\n  /**\n   * Remove event listeners for DOM events..\n   */\n\n\n  Table.prototype._removeEventListeners = function _removeEventListeners() {\n\n    this.el.removeEventListener('click', this._onClickBound);\n    this.el.removeEventListener('change', this._onChangeBound);\n    this.el.removeEventListener('focus', this._onFocusBound);\n    this.el.removeEventListener('blur', this._onBlurBound);\n\n    this.el.removeEventListener('touchstart', this._onTouchstartBound);\n    this.el.removeEventListener('touchend', this._onTouchendBound);\n    this.el.removeEventListener('keydown', this._onKeydownBound);\n\n    this.tableEl.removeEventListener('mousedown', this._onMouseDownBound);\n\n    this._removeResizeListeners();\n  };\n\n  /**\n   * Add listeners for mousemove and mouseup events.\n   */\n\n\n  Table.prototype._addResizeListeners = function _addResizeListeners() {\n    window.addEventListener('mousemove', this._onMouseMoveBound, false);\n    window.addEventListener('mouseup', this._onMouseUpBound, false);\n  };\n\n  /**\n   * Remove listeners for mosuemove and mouseup.\n   */\n\n\n  Table.prototype._removeResizeListeners = function _removeResizeListeners() {\n    window.removeEventListener('mousemove', this._onMouseMoveBound);\n    window.removeEventListener('mouseup', this._onMouseUpBound);\n  };\n\n  /**\n   * Toggle the active state on a row.\n   * @param {Object} row\n   */\n\n\n  Table.prototype._toggleRowActive = function _toggleRowActive(row) {\n\n    if ((0, _hasClass2.default)(row, 'active')) {\n      this._makeRowInActive(row);\n      this._uncheckSelectAll();\n    } else {\n      this._makeRowActive(row);\n    }\n  };\n\n  /**\n   * Make a row active\n   * @param {Element} row\n   */\n\n\n  Table.prototype._makeRowActive = function _makeRowActive(row) {\n    (0, _addClass2.default)(row, 'active');\n    (row.querySelector('input[type=\"checkbox\"]:not([disabled])') || {}).checked = true;\n  };\n\n  /**\n   * Make a row active\n   * @param  {Element} row\n   */\n\n\n  Table.prototype._makeRowInActive = function _makeRowInActive(row) {\n    (0, _removeClass2.default)(row, 'active');\n    (row.querySelector('input[type=\"checkbox\"]:not([disabled])') || {}).checked = false;\n  };\n\n  /**\n   * Toggle active on each row.\n   * @param {NodeList} rows\n   * @param {Boolean} active\n   */\n\n\n  Table.prototype._toggleRowsActive = function _toggleRowsActive(rows, active) {\n\n    var func = active ? '_makeRowActive' : '_makeRowInActive';\n    var i = 0;\n    var len = rows.length;\n\n    for (; i < len; i++) {\n      this[func](rows[i]);\n    }\n  };\n\n  /**\n   * Toggle whether everything should be selected. Find the checkbox input inside of the\n   * given element and invert its state.\n   * @param {Element} el\n   */\n\n\n  Table.prototype._toggleSelectAll = function _toggleSelectAll(el) {\n\n    var checkbox = el.querySelector('input[type=\"checkbox\"]');\n\n    if (!checkbox) {\n      return;\n    }\n\n    this._toggleRowsActive(this.el.querySelectorAll('tbody tr'), !checkbox.checked);\n\n    checkbox.checked = !checkbox.checked;\n  };\n\n  /**\n   * Uncheck the select all checkboxes.\n   */\n\n\n  Table.prototype._uncheckSelectAll = function _uncheckSelectAll() {\n\n    var checkboxes = this.el.querySelectorAll('.spark-table__select-all input[type=\"checkbox\"]');\n    var i = 0;\n    var len = checkboxes.length;\n\n    for (; i < len; i++) {\n      checkboxes[i].checked = false;\n    }\n  };\n\n  /**\n   * Deactivate editing in all input fields.\n   */\n\n\n  Table.prototype._deactivateAllInputs = function _deactivateAllInputs() {\n\n    if (!this.tableEl) {\n      return;\n    }\n\n    this._deactivateInputs(this.tableEl);\n  };\n\n  /**\n   * Deactivate all the inputs inside an element\n   * @param {Element} el\n   */\n\n\n  Table.prototype._deactivateInputs = function _deactivateInputs(el) {\n\n    var inputs = el.querySelectorAll('input:not([type=\"checkbox\"])');\n    var i = 0;\n\n    var len = inputs.length;\n\n    for (; i < len; i++) {\n      this._deactivateInput(inputs[i]);\n    }\n  };\n\n  /**\n   * Make an input field readonly.\n   * @param {Element} input\n   */\n\n\n  Table.prototype._deactivateInput = function _deactivateInput(input) {\n    input.setAttribute('readonly', '');\n    (0, _removeClass2.default)(input.parentNode, 'editing');\n  };\n\n  /**\n   * Activate all the inputs inside an element\n   * @param {Element} el\n   */\n\n\n  Table.prototype._activateInputs = function _activateInputs(el) {\n\n    var inputs = el.querySelectorAll('input:not([type=\"checkbox\"])');\n    var i = 0;\n\n    var len = inputs.length;\n\n    for (; i < len; i++) {\n      this._activateInput(inputs[i]);\n    }\n  };\n\n  /**\n   * Make an input field readable.\n   * @param {Element} input\n   */\n\n\n  Table.prototype._activateInput = function _activateInput(input) {\n    input.removeAttribute('readonly');\n    (0, _addClass2.default)(input.parentNode, 'editing');\n    if (input.type !== 'checkbox' && input.type !== 'radio') {\n      (0, _setCaret2.default)(input, -1);\n    }\n  };\n\n  /**\n   * Activate an input, unless it's already enabled in which case\n   * the focus should move down a row.\n   * @param {Element} input\n   */\n\n\n  Table.prototype._activateInputOrFocusDown = function _activateInputOrFocusDown(input) {\n\n    // Currently readonly\n    if (input.getAttribute('readonly') === '') {\n      this._activateInput(input);\n      return;\n    }\n\n    this._focusDown(input, true);\n  };\n\n  /**\n   * Find all the rows, columns and cells that should be disabled.\n   */\n\n\n  Table.prototype._disableRowsColumnsCells = function _disableRowsColumnsCells() {\n    (0, _each2.default)(this.tableEl.querySelectorAll('td input[disabled]'), this.disableCell.bind(this));\n    (0, _each2.default)(this.tableEl.querySelectorAll('.spark-table__disabled-row'), this.disableRow.bind(this));\n    (0, _each2.default)(this.tableEl.querySelectorAll('.spark-table__disabled-column'), this.disableColumn.bind(this));\n  };\n\n  /**\n   * Move our focus up a row from the given element.\n   * @param {Element} input\n   * @param {Boolean} force Force the move even if the element is active.\n   */\n\n\n  Table.prototype._focusUp = function _focusUp(input, force) {\n    return this._focusUpDown(input, 'up', force);\n  };\n\n  /**\n   * Move our focus down a row from the given element.\n   * @param {Element} input\n   * @param {Boolean} force Force the move even if the element is active.\n   */\n\n\n  Table.prototype._focusDown = function _focusDown(input, force) {\n    return this._focusUpDown(input, 'down', force);\n  };\n\n  /**\n   * Focus on a row up or down from the given element.\n   * @param {Element} input\n   * @param {String} direction up|down\n   * @param {Boolean} force Force the move even if the element is active.\n   */\n\n\n  Table.prototype._focusUpDown = function _focusUpDown(input, direction, force) {\n\n    // If we're not being told to force and the item is not read only\n    if (!force && input.getAttribute('readonly') === null) {\n      return;\n    }\n\n    this._deactivateInput(input);\n    var td = (0, _getParent2.default)(input, 'td', this.el);\n\n    if (!td) {\n      return;\n    }\n\n    var index = (0, _getIndex2.default)(td.parentNode.children, td);\n    var nextRow = (direction === 'up' ? _getSiblingBefore2.default : _getSiblingAfter2.default)(td.parentNode, 'tr');\n\n    if (!nextRow) {\n      return;\n    }\n\n    var newTd = nextRow.children[index];\n\n    if (!newTd) {\n      return;\n    }\n\n    var newInput = newTd.querySelector('input:not([type=\"checkbox\"]), select');\n\n    if (newInput) {\n      if (newInput.disabled) {\n        this._focusUpDown(newInput, direction, force);\n      } else {\n        newInput.focus();\n      }\n    }\n  };\n\n  /**\n   * Move our focus left a cell from the given element.\n   * @param {Element} input\n   * @param {Boolean} force Force the move even if the element is active.\n   */\n\n\n  Table.prototype._focusLeft = function _focusLeft(input, force) {\n    return this._focusLeftRight(input, 'left', force);\n  };\n\n  /**\n   * Move our focus right a cell from the given element.\n   * @param {Element} input\n   * @param {Boolean} force Force the move even if the element is active.\n   */\n\n\n  Table.prototype._focusRight = function _focusRight(input, force) {\n    return this._focusLeftRight(input, 'right', force);\n  };\n\n  /**\n   * Focus on a cell left or down from the given element.\n   * @param {Element} input\n   * @param {String} direction up|down\n   * @param {Boolean} force Force the move even if the element is active.\n   */\n\n\n  Table.prototype._focusLeftRight = function _focusLeftRight(input, direction, force) {\n\n    // If we're not being told to force and the item is not read only\n    if (!force && input.getAttribute('readonly') === null) {\n      return;\n    }\n\n    this._deactivateInput(input);\n    var td = (0, _getParent2.default)(input, 'td', this.el);\n\n    if (!td) {\n      return;\n    }\n\n    var newTd = (direction === 'left' ? _getSiblingBefore2.default : _getSiblingAfter2.default)(td, 'td');\n\n    if (!newTd) {\n      return;\n    }\n\n    var newInput = newTd.querySelector('input:not([type=\"checkbox\"]), select');\n\n    if (newInput) {\n      if (newInput.disabled) {\n        this._focusLeftRight(newInput, direction, force);\n      } else {\n        newInput.focus();\n      }\n    }\n  };\n\n  /**\n   * Check for two click events on the same element in short succession.\n   * @param {Element} el\n   */\n\n\n  Table.prototype._checkDoubleClick = function _checkDoubleClick(el) {\n\n    var now = Date.now();\n    var lastTime = this._lastClickTime;\n    var lastEl = this._lastClickEl;\n\n    this._lastClickTime = now;\n    this._lastClickEl = el;\n\n    if (el === lastEl && now - 500 < lastTime) {\n      return true;\n    }\n\n    return false;\n  };\n\n  /**\n   * Unset the last clicked element.\n   */\n\n\n  Table.prototype._clearClicked = function _clearClicked() {\n    this._lastClickEl = null;\n  };\n\n  /**\n   * Enable editing on a row.\n   * @param {Element} row\n   */\n\n\n  Table.prototype._editRow = function _editRow(row) {\n\n    if (!row) {\n      return;\n    }\n\n    this._editingCount++;\n\n    this._activateInputs(row);\n    (0, _formData.store)(row);\n    (0, _addClass2.default)(row, 'editing');\n    this._updateBindings();\n  };\n\n  /**\n   * Cancel editing a row.\n   * @param {Element} row\n   */\n\n\n  Table.prototype._cancelRow = function _cancelRow(row) {\n\n    if (!row) {\n      return;\n    }\n\n    this._editingCount--;\n\n    this._deactivateInputs(row);\n    (0, _formData.restore)(row);\n    (0, _removeClass2.default)(row, 'editing');\n    this._updateBindings();\n  };\n\n  /**\n   * Save a row.\n   * @param {Element} row\n   */\n\n\n  Table.prototype._saveRow = function _saveRow(row) {\n\n    if (!row) {\n      return;\n    }\n\n    this._editingCount--;\n\n    this._deactivateInputs(row);\n    (0, _formData.clear)(row);\n    (0, _removeClass2.default)(row, 'editing');\n    this._updateBindings();\n\n    (this.onRowSave || noop)((0, _getIndex2.default)(row.parentNode.children, row), row);\n  };\n\n  /**\n   * Delete a row.\n   * @param {Element} row\n   */\n\n\n  Table.prototype._deleteRow = function _deleteRow(row) {\n\n    if (!row) {\n      return;\n    }\n\n    (this.onRowDelete || noop)((0, _getIndex2.default)(row.parentNode.children, row), row);\n    row.parentNode.removeChild(row);\n  };\n\n  /**\n   * Confirm the deletion of a row.\n   * @param {Element} row\n   */\n\n\n  Table.prototype._confirmDelete = function _confirmDelete(row) {\n\n    if (!this.confirmDelete || typeof this.confirmDelete !== 'function') {\n      this._deleteRow(row);\n    } else {\n      this.confirmDelete(row, this._deleteRow);\n    }\n  };\n\n  /**\n   * Update data bindings.\n   */\n\n\n  Table.prototype._updateBindings = function _updateBindings() {\n    (0, _toggleClass2.default)(this.el, 'editing', this._editingCount);\n  };\n\n  /**\n   * Add handles to the header that can be grabbed for resizing.\n   */\n\n\n  Table.prototype._initResize = function _initResize() {\n\n    this._resizeEls = [];\n\n    var ths = this.tableEl.querySelectorAll('thead th');\n\n    (0, _each2.default)(ths, function (th) {\n      th.innerHTML = '<span class=\"spark-table__resize spark-table__resize--left\"></span>' + th.innerHTML + '<span class=\"spark-table__resize spark-table__resize--right\"></span>';\n      this._resizeEls.push(th);\n    }.bind(this));\n  };\n\n  /**\n   * Initialize rows active states.\n   */\n\n\n  Table.prototype._initRows = function _initRows() {\n\n    (0, _each2.default)(this.tableEl.querySelectorAll('td.spark-table__checkbox input:checked'), function (c) {\n      this._makeRowActive((0, _getParent2.default)(c, 'tr'));\n    }.bind(this));\n  };\n\n  /**\n   * Set the size of each column as a percentage so it can be adjusted\n   * while cells are resized.\n   * @param {String} unit Optional\n   * @param {Boolean} force Optional\n   */\n\n\n  Table.prototype._sizeColumns = function _sizeColumns(unit, force) {\n\n    unit = unit || '%';\n\n    if (this._sizeColumnsRun && !force) {\n      return;\n    }\n\n    var width = this.tableEl.offsetWidth;\n\n    (0, _each2.default)(this.tableEl.querySelectorAll('thead th'), function (th) {\n      if (unit === '%') th.style.width = Math.round(th.offsetWidth / width * 100000) / 100000 * 100 + '%';else th.style.width = th.offsetWidth + 'px';\n    }.bind(this));\n\n    this._sizeColumnsRun = true;\n  };\n\n  /**\n   * Initialize expand/collapse rows.\n   */\n\n\n  Table.prototype._initExpands = function _initExpands() {\n\n    var expands = this.tableEl.querySelectorAll('.spark-table-expand');\n\n    this._expands = [];\n\n    (0, _each2.default)(expands, function (e) {\n      this._expands.push(new _expand2.default(e, {\n        onBeforeExpand: this._onBeforeExpand.bind(this)\n      }));\n    }.bind(this));\n  };\n\n  /**\n   * Before an expand is called, size all the columns so that\n   * the expand does cause width changes.\n   */\n\n\n  Table.prototype._onBeforeExpand = function _onBeforeExpand() {\n    this._sizeColumns();\n  };\n\n  /**\n   * When we are clicked determine the proper action to take.\n   * @param  {Object} e\n   */\n\n\n  Table.prototype._onClick = function _onClick(e) {\n\n    var target = e.target || e.srcElement;\n    var row;\n    var selectAll;\n    var actionTaken = false;\n    var clearClicked = true;\n\n    // Select all rows checkbox\n    if ((selectAll = (0, _getParent2.default)(target, '.spark-table__select-all', this.el)) && !(0, _matches2.default)(target, 'input[type=\"checkbox\"]')) {\n      this._toggleSelectAll(selectAll);\n      actionTaken = true;\n    }\n    // Editable field\n    else if ((0, _matches2.default)(target, 'input:not([type=\"checkbox\"]), select')) {\n\n        if (!target.disabled) {\n\n          // Listen for double clicks on a spreadsheet\n          if (this.isSpreadsheet) {\n            clearClicked = false;\n            if (this._checkDoubleClick(target)) {\n              clearClicked = true;\n              this._activateInput(target);\n            }\n          }\n\n          actionTaken = true;\n        }\n      }\n      // Edit button\n      else if ((0, _matches2.default)(target, '.spark-table__edit-row')) {\n          this._editRow((0, _getParent2.default)(target, 'tr', this.el));\n          actionTaken = true;\n        }\n        // Delete button\n        else if ((0, _matches2.default)(target, '.spark-table__delete-row')) {\n            this._confirmDelete((0, _getParent2.default)(target, 'tr', this.el));\n            actionTaken = true;\n          }\n          // Save button\n          else if ((0, _matches2.default)(target, '.spark-table__edit-row-save')) {\n              this._saveRow((0, _getParent2.default)(target, 'tr', this.el));\n              actionTaken = true;\n            }\n            // Cancel button\n            else if ((0, _matches2.default)(target, '.spark-table__edit-row-cancel')) {\n                this._cancelRow((0, _getParent2.default)(target, 'tr', this.el));\n                actionTaken = true;\n              }\n              // Select a row\n              else if (!(0, _getParent2.default)(target, 'button, a', this.el) && !(0, _matches2.default)(target, 'input[type=\"checkbox\"]') && (row = (0, _getParent2.default)(target, 'tbody tr', this.el))) {\n                  if (!(row.querySelector('input[type=\"checkbox\"]') || {}).disabled) {\n                    this._toggleRowActive(row);\n                    actionTaken = true;\n                  }\n                }\n\n    if (clearClicked) {\n      this._clearClicked();\n    }\n\n    if (actionTaken) {\n      e.preventDefault();\n    }\n  };\n\n  /**\n   * When the change event fires on our element.\n   * @param {Object} e\n   */\n\n\n  Table.prototype._onChange = function _onChange(e) {\n\n    var target = e.target || e.srcElement;\n    var row;\n    var selectAll;\n\n    // Select all rows checkbox. We have to invert the checked value here because it\n    // get toggled back in the select all call.\n    if (selectAll = (0, _getParent2.default)(target, '.spark-table__select-all', this.el)) {\n      target.checked = !target.checked;\n      this._toggleSelectAll(selectAll);\n    }\n    // Checkbox for a row\n    else if ((0, _matches2.default)(target, 'input[type=\"checkbox\"]') && (row = (0, _getParent2.default)(target, 'tbody tr', this.el))) {\n        this._toggleRowActive(row);\n      }\n  };\n\n  /**\n   * If this is a spreadsheet, whenever a field gains focus, highlight its parent.\n   * @param {Object} e\n   */\n\n\n  Table.prototype._onFocus = function _onFocus(e) {\n\n    var target = e.target || e.srcElement;\n\n    if (!this.isSpreadsheet || !(0, _matches2.default)(target, 'input:not([type=\"checkbox\"]), select')) {\n      return;\n    }\n\n    var td = (0, _getParent2.default)(target, 'td', this.el);\n    (0, _addClass2.default)(td, 'focus');\n  };\n\n  /**\n   * If this is a spreadsheet, whenever a field gains focus, highlight its parent.\n   * @param {Object} e\n   */\n\n\n  Table.prototype._onBlur = function _onBlur(e) {\n\n    if (!this.isSpreadsheet) {\n      return;\n    }\n\n    var target = e.target || e.srcElement;\n    var td = (0, _getParent2.default)(target, 'td', this.el);\n    (0, _removeClass2.default)(td, 'focus');\n    this._deactivateInput(target);\n  };\n\n  /**\n   * When a key is pressed, if this is a spreadsheet then we should detect\n   * enter or arrow keys.\n   * @param {Object} e\n   */\n\n\n  Table.prototype._onKeydown = function _onKeydown(e) {\n\n    var target = e.target || e.srcElement;\n\n    if (!this.isSpreadsheet || !(0, _matches2.default)(target, 'input:not([type=\"checkbox\"]), select')) {\n      return;\n    }\n\n    var code = e.keyCode || e.which;\n\n    switch (code) {\n      case this._keyCodes.ENTER:\n        this._activateInputOrFocusDown(target);\n        break;\n      case this._keyCodes.ESCAPE:\n        this._deactivateInput(target);\n        break;\n      case this._keyCodes.DOWN:\n        this._focusDown(target);\n        break;\n      case this._keyCodes.UP:\n        this._focusUp(target);\n        break;\n      case this._keyCodes.LEFT:\n        this._focusLeft(target);\n        break;\n      case this._keyCodes.RIGHT:\n        this._focusRight(target);\n        break;\n    }\n  };\n\n  /**\n   * Listen for a touch and hold on an input.\n   * @param {Object} e\n   */\n\n\n  Table.prototype._onTouchstart = function _onTouchstart(e) {\n\n    var target = e.target || e.srcElement;\n\n    if (!this.isSpreadsheet || !(0, _matches2.default)(target, 'input:not([type=\"checkbox\"])')) {\n      return;\n    }\n\n    this._touchStartEl = target;\n    this._touchStartTime = Date.now();\n    this._touchStartTimer = setTimeout(this._onTouchHold.bind(this), 1000);\n  };\n\n  /**\n   * Listen for the end of a touch to cancel the hold timer.\n   * @param {Object} e\n   */\n\n\n  Table.prototype._onTouchend = function _onTouchend(e) {\n\n    var target = e.target || e.srcElement;\n\n    if (!this._touchStartEl || target !== this._touchStartEl) {\n      return;\n    }\n\n    this._touchStartEl = null;\n    this._touchStartTime = null;\n    clearTimeout(this._touchStartTimer);\n  };\n\n  /**\n   * When the user has held on an input for the defined amount of time.\n   */\n\n\n  Table.prototype._onTouchHold = function _onTouchHold() {\n\n    this._activateInput(this._touchStartEl);\n\n    this._touchStartEl = null;\n    this._touchStartTime = null;\n    clearTimeout(this._touchStartTimer);\n  };\n\n  /**\n   * When the mouse is depressed.\n   * @param {Object} e\n   */\n\n\n  Table.prototype._onMouseDown = function _onMouseDown(e) {\n\n    var target = e.target || e.srcElement;\n\n    if (!this.isResizable || !(0, _matches2.default)(target, '.spark-table__resize')) {\n      return;\n    }\n\n    e.preventDefault();\n\n    this._lastScreenX = e.screenX;\n\n    this._sizeColumns('px', true);\n\n    this._resizingEl = target.parentNode;\n    var index = this._resizeEls.indexOf(this._resizingEl);\n\n    if ((0, _hasClass2.default)(target, 'spark-table__resize--left')) {\n      this._resizingEl = this._resizeEls[index - 1];\n    }\n\n    if (!this._resizingEl) {\n      return;\n    }\n\n    this._addResizeListeners();\n  };\n\n  /**\n   * When the mouse moves after being depressed, resize the columns.\n   * @param {Object} e\n   */\n\n\n  Table.prototype._onMouseMove = function _onMouseMove(e) {\n\n    var x = e.screenX;\n    var d = x - this._lastScreenX;\n\n    // No delta change\n    if (!d) {\n      return;\n    }\n\n    e.preventDefault();\n\n    var w = this._resizingEl.offsetWidth;\n    var tW = this.tableEl.offsetWidth;\n    var newW = w + d;\n    var newTW = tW + d;\n\n    this._resizingEl.style.width = newW + 'px';\n    this.tableEl.style.width = newTW + 'px';\n\n    // Size was not affected because we're too small\n    if (this._resizingEl.offsetWidth === w || this.tableEl.offsetWidth < this.tableEl.parentNode.offsetWidth) {\n      this._resizingEl.style.width = w + 'px';\n      this.tableEl.style.width = tW + 'px';\n    }\n\n    this._lastScreenX = x;\n  };\n\n  /**\n   * When the mouse is released, stop tracking mouse move events and\n   * convert table sizes to percentages.\n   * @param {Object} e\n   */\n\n\n  Table.prototype._onMouseUp = function _onMouseUp() {\n    this._sizeColumns('%', true);\n    this.tableEl.style.width = this.tableEl.offsetWidth / this.tableEl.parentNode.offsetWidth * 100 + '%';\n    this._removeResizeListeners();\n  };\n\n  return Table;\n}(_base2.default);\n\n/**\n * Whitelisted parameters which can be set on construction.\n * @type {Array}\n */\n\n\nTable.prototype._whitelistedParams = ['isSpreadsheet', 'isEditRows', 'isResizable', 'confirmDelete', 'onRowSave', 'onRowDelete'];\n\n/**\n * Default values for internal properties we will be setting.\n * These are set on each construction so we don't leak properties\n * into the prototype chain.\n * @type {Object}\n */\nTable.prototype.defaults = {\n  el: null,\n  tableEl: null,\n  isSpreadsheet: null,\n  isEditRows: null,\n  isResizable: null,\n  onRowSave: null,\n  onRowDelete: null,\n  confirmDelete: null,\n  _expands: null,\n  _keyCodes: {\n    ENTER: 13,\n    UP: 38,\n    DOWN: 40,\n    LEFT: 37,\n    RIGHT: 39,\n    ESCAPE: 27\n  },\n  _editingCount: 0,\n  _lastClickTime: 0,\n  _lastClickEl: null,\n  _lastScreenX: 0,\n  _touchStartTime: 0,\n  _touchStartEl: null,\n  _resizeEls: null,\n  _resizingEl: null,\n  _sizeColumnsRun: false,\n  _onClickBound: null,\n  _onChangeBound: null,\n  _onFocusBound: null,\n  _onBlurBound: null,\n  _onKeydownBound: null,\n  _onTouchstartBound: null,\n  _onTouchendBound: null,\n  _onMouseDownBound: null,\n  _onMouseMoveBound: null,\n  _onMouseUpBound: null\n};\n\nexports.default = Table;\nmodule.exports = exports['default'];\n//# sourceMappingURL=table.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _outerHeight = require('../dom/outer-height');\n\nvar _outerHeight2 = _interopRequireDefault(_outerHeight);\n\nvar _addClass = require('../dom/add-class');\n\nvar _addClass2 = _interopRequireDefault(_addClass);\n\nvar _removeClass = require('../dom/remove-class');\n\nvar _removeClass2 = _interopRequireDefault(_removeClass);\n\nvar _hasClass = require('../dom/has-class');\n\nvar _hasClass2 = _interopRequireDefault(_hasClass);\n\nvar _toggleClass = require('../dom/toggle-class');\n\nvar _toggleClass2 = _interopRequireDefault(_toggleClass);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar noop = function noop() {}; /**\n                                * # Animate Height\n                                * Animate the height of an element since we can't do this w/ pure CSS. Sigh.\n                                *\n                                * @example\n                                * animateHeight({\n                                *   el: ...,\n                                *   toggleEl: ...,\n                                *   // Optional params\n                                *   action: 'collapse'|'expand',\n                                *   heightAnimationClass: 'spark-animate-height',\n                                *   opacityAnimationClass: 'spark-animate-opacity',\n                                *   toggleProperty: 'display'|'overflow'|'visibility',\n                                *   toggleValue: 'block'|'none'|'visible'|'hidden',\n                                *   animationDuration: 250\n                                * });\n                                *\n                                * @module helpers/animation/height.js\n                                */\n\nvar runningAnimations = {\n  els: [],\n  completeCallbacks: []\n};\n\n/**\n * Get the inverse toggle value\n * @param  {String} property\n * @param  {String} originalValue\n * @return {String}\n */\nfunction getInverseToggleValue(el, property, originalValue) {\n\n  // Get the value to toggle to for the given property\n  switch (property) {\n    case 'overflow':\n    case 'visibility':\n      return originalValue === 'visible' ? 'hidden' : 'visible';\n    default:\n      return originalValue === 'block' || originalValue === 'inline-block' ? 'none' : 'block';\n  }\n}\n\n/**\n * When an animation is complete, clean up and run the callback.\n * @param  {Object} params\n */\nfunction onComplete(params) {\n\n  // Reset toggle el visibility\n  if (params.toggleClassName) {\n    (0, _toggleClass2.default)(params.el, params.toggleClassName, !params.collapse);\n  } else {\n    params.toggleEl.style[params.toggleProperty] = '';\n  }\n\n  // Remove the height property\n  params.el.style.height = '';\n  params.toggleEl.style.height = '';\n  params.toggleEl.style.marginBottom = '';\n  params.toggleEl.style.marginTop = '';\n\n  // Remove the spark-animate-height class so the transitions no longer apply\n  (0, _removeClass2.default)(params.el, params.heightAnimationClass);\n  (0, _removeClass2.default)(params.toggleEl, params.heightAnimationClass);\n\n  // Run the callback\n  params.onComplete();\n\n  // Remove the element and callback from their respective arrays\n  var runningIndex = runningAnimations.els.indexOf(params.el);\n  runningAnimations.els.splice(runningIndex, 1);\n  runningAnimations.completeCallbacks.splice(runningIndex, 1);\n}\n\n/**\n * @param {Object} params\n */\nfunction animateHeight(params) {\n\n  params = params || {};\n\n  var el = params.el;\n\n  if (!el) {\n    return;\n  }\n\n  var collapse = params.action && params.action === 'collapse';\n  var heightAnimationClass = params.heightAnimationClass || 'spark-animate-height';\n\n  // Allow for elements to be passed or selector strings\n  var toggleEl = typeof params.toggleEl === 'string' ? el.querySelector(params.toggleEl) : params.toggleEl;\n\n  // No element to be switching with toggling so we can't determine the desired height to animate to.\n  if (!toggleEl || (0, _hasClass2.default)(el, 'spark-no-animate')) {\n    return;\n  }\n\n  var toggleClassName = params.toggleClass;\n\n  // The style property to use when toggling visibility\n  var toggleProperty = params.toggleProperty || 'display';\n  var toggleStyles = window.getComputedStyle(toggleEl);\n  var originalToggleValue = toggleStyles[toggleProperty];\n  var toggleValue = params.toggleValue || getInverseToggleValue(toggleProperty, originalToggleValue);\n\n  // If we are already animating, stop now.\n  var runningIndex = runningAnimations.els.indexOf(el);\n  if (runningIndex !== -1) {\n\n    var completeCallback = runningAnimations.completeCallbacks[runningIndex];\n    if (completeCallback) {\n      clearTimeout(completeCallback);\n    }\n\n    onComplete({\n      el: el,\n      toggleEl: toggleEl,\n      onComplete: params.onComplete || noop,\n      collapse: collapse,\n      toggleProperty: toggleProperty,\n      toggleClassName: toggleClassName,\n      toggleValue: toggleValue,\n      heightAnimationClass: heightAnimationClass\n    });\n  }\n\n  // Store the current height\n  var originalHeight = (0, _outerHeight2.default)(el);\n\n  // Toggle the visible property\n  if (toggleClassName) {\n    (0, _toggleClass2.default)(el, toggleClassName, !collapse);\n  } else {\n    toggleEl.style[toggleProperty] = toggleValue;\n  }\n\n  // When measuring the size for a collapse, we have to wait a tic for it to be\n  // accurate. Not sure why. Ugh.\n  if (collapse) {\n    setTimeout(runAnimation, 0);\n  } else {\n    runAnimation();\n  }\n\n  function runAnimation() {\n\n    // Now that the toggle el is taking up space, get the new height which we will be animating to\n    var targetElHeight = (0, _outerHeight2.default)(el);\n\n    // We need to store the original and target toggle element heights. They differ depending on\n    // whether we are going to expand or collapse.\n    var targetToggleElHeight = void 0;\n    var originalToggleElHeight = void 0;\n\n    // If we are collapsing, reset the toggle style and set it when we're done. Set the height so\n    // that we can animate down to 0 or up to the target height.\n    if (collapse) {\n\n      if (toggleClassName) {\n        (0, _removeClass2.default)(el, toggleClassName);\n      } else {\n        toggleEl.style[toggleProperty] = originalToggleValue;\n      }\n\n      originalToggleElHeight = (0, _outerHeight2.default)(toggleEl, toggleStyles);\n      targetToggleElHeight = 0;\n    } else {\n      targetToggleElHeight = (0, _outerHeight2.default)(toggleEl, toggleStyles);\n      originalToggleElHeight = 0;\n    }\n\n    // Set the original height\n    el.style.height = originalHeight + 'px';\n    toggleEl.style.height = originalToggleElHeight + 'px';\n    toggleEl.style.marginBottom = '0px';\n    toggleEl.style.marginTop = '0px';\n\n    // Add the spark-animate-height class which will setup the transition-property and duration\n    (0, _addClass2.default)(el, heightAnimationClass);\n    (0, _addClass2.default)(toggleEl, heightAnimationClass);\n\n    runningAnimations.els.push(el);\n\n    // We need to wait a tick to toggle the height or else the animation class won't function\n    setTimeout(function () {\n\n      // Set the height to the target height\n      el.style.height = targetElHeight + 'px';\n      toggleEl.style.height = targetToggleElHeight + 'px';\n\n      // Remove inline styles after the animation is complete\n      runningAnimations.completeCallbacks.push(setTimeout(function () {\n        onComplete({\n          el: el,\n          toggleEl: toggleEl,\n          onComplete: params.onComplete || noop,\n          collapse: collapse,\n          toggleProperty: toggleProperty,\n          toggleClassName: toggleClassName,\n          toggleValue: toggleValue,\n          heightAnimationClass: heightAnimationClass\n        });\n      }, params.animationDuration !== undefined ? params.animationDuration : 201));\n    }, 0);\n  }\n}\n\nexports.default = animateHeight;\nmodule.exports = exports['default'];\n//# sourceMappingURL=height.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _trim = require('../util/trim');\n\nvar _trim2 = _interopRequireDefault(_trim);\n\nvar _hasClass = require('./has-class');\n\nvar _hasClass2 = _interopRequireDefault(_hasClass);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * # Add Class\n * Add a class on an element.\n *\n * @param {Element|Array} el An element or array of elements to update.\n * @param {String} name\n * @return {Element}\n *\n * @module helpers/dom/add-class.js\n */\n\nvar ws = /\\s+/;\nvar cleanup = /\\s{2,}/g;\n\nfunction addClass(el, name) {\n\n  if (arguments.length === 2 && typeof name === 'string') {\n    name = (0, _trim2.default)(name).split(ws);\n  } else {\n    name = name instanceof Array ? name : Array.prototype.slice.call(arguments, 1);\n  }\n\n  // optimize for best, most common case\n  if (name.length === 1 && el.classList) {\n    if (name[0]) {\n      el.classList.add(name[0]);\n    }\n    return el;\n  }\n\n  var toAdd = [];\n  var i = 0;\n  var l = name.length;\n  var item = void 0;\n  var clsName = typeof el.className === 'string' ? el.className : el.getAttribute ? el.getAttribute('class') : '';\n\n  // see if we have anything to add\n  for (; i < l; i++) {\n    item = name[i];\n    if (item && !(0, _hasClass2.default)(clsName, item)) {\n      toAdd.push(item);\n    }\n  }\n\n  if (toAdd.length) {\n    if (typeof el.className === 'string') {\n      el.className = (0, _trim2.default)((clsName + ' ' + toAdd.join(' ')).replace(cleanup, ' '));\n    } else if (el.setAttribute) {\n      el.setAttribute('class', (0, _trim2.default)((clsName + ' ' + toAdd.join(' ')).replace(cleanup, ' ')));\n    }\n  }\n\n  return el;\n}\n\nexports.default = addClass;\nmodule.exports = exports['default'];\n//# sourceMappingURL=add-class.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/**\n * # Has Class\n * See if an element has a class.\n *\n * @param {Element|String} el\n * @param {String} name\n * @return {Boolean}\n *\n * @module helpers/dom/has-class.js\n */\nfunction hasClass(el, name) {\n  var cName = ((typeof el === 'undefined' ? 'undefined' : _typeof(el)) === 'object' ? el.className || el.getAttribute && el.getAttribute('class') || '' : el || '').replace(/[\\t\\r\\n\\f]/g, ' ');\n  return (' ' + cName + ' ').indexOf(' ' + name + ' ') !== -1;\n}\n\nexports.default = hasClass;\nmodule.exports = exports['default'];\n//# sourceMappingURL=has-class.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _each = require('../util/each');\n\nvar _each2 = _interopRequireDefault(_each);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar props = ['marginTop', 'marginBottom', 'borderTop', 'borderBottom']; /**\n                                                                         * # Outer Height\n                                                                         * Get the outer height of an element (including margin and border)\n                                                                         *\n                                                                         * @param {Element} el\n                                                                         * @param {Object} styles Optional Already have computed styles? Pass them in.\n                                                                         *\n                                                                         * @example\n                                                                         * outerHeight(el, computedStyles);\n                                                                         *\n                                                                         * @module helpers/outer-height.js\n                                                                         */\n\n\nfunction outerHeight(el, styles) {\n\n  styles = styles || window.getComputedStyle(el);\n\n  var height = el.clientHeight;\n\n  (0, _each2.default)(props, function (prop) {\n    height += parseInt(styles[prop] || 0, 10);\n  });\n\n  return height;\n}\n\nexports.default = outerHeight;\nmodule.exports = exports['default'];\n//# sourceMappingURL=outer-height.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _trim = require('../util/trim');\n\nvar _trim2 = _interopRequireDefault(_trim);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ws = /\\s+/; /**\n                 * # Remove Class\n                 * Remove a class on an element.\n                 *\n                 * @param {Element|Array} el An element or array of elements to update.\n                 * @param {String} name\n                 * @return {Element}\n                 *\n                 * @module helpers/dom/remove-class.js\n                 */\n\nvar cleanup = /\\s{2,}/g;\n\nfunction removeClass(el, name) {\n\n  if (arguments.length === 2 && typeof name === 'string') {\n    name = (0, _trim2.default)(name).split(ws);\n  } else {\n    name = name instanceof Array ? name : Array.prototype.slice.call(arguments, 1);\n  }\n\n  // optimize for best, most common case\n  if (name.length === 1 && el.classList) {\n    if (name[0]) el.classList.remove(name[0]);\n    return el;\n  }\n\n  // store two copies\n  var clsName = ' ' + (typeof el.className === 'string' ? el.className : el.getAttribute ? el.getAttribute('class') : '') + ' ';\n  var result = clsName;\n  var current = void 0;\n  var start = void 0;\n  for (var i = 0, l = name.length; i < l; i++) {\n    current = name[i];\n    start = current ? result.indexOf(' ' + current + ' ') : -1;\n    if (start !== -1) {\n      start += 1;\n      result = result.slice(0, start) + result.slice(start + current.length);\n    }\n  }\n\n  // only write if modified\n  if (clsName !== result) {\n    if (typeof el.className === 'string') {\n      el.className = (0, _trim2.default)(result.replace(cleanup, ' '));\n    } else if (el.setAttribute) {\n      el.setAttribute('class', (0, _trim2.default)(result.replace(cleanup, ' ')));\n    }\n  }\n\n  return el;\n}\n\nexports.default = removeClass;\nmodule.exports = exports['default'];\n//# sourceMappingURL=remove-class.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _hasClass = require('./has-class');\n\nvar _hasClass2 = _interopRequireDefault(_hasClass);\n\nvar _addClass = require('./add-class');\n\nvar _addClass2 = _interopRequireDefault(_addClass);\n\nvar _removeClass = require('./remove-class');\n\nvar _removeClass2 = _interopRequireDefault(_removeClass);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction toggleClass(el, name, enable) {\n\n  if (!el) {\n    return;\n  }\n\n  // If we're passed an array, toggle the class on each.\n  if (el instanceof NodeList || el instanceof Array) {\n\n    for (var i = 0, len = el.length; i < len; i++) {\n      toggleClass(el[i], name, enable);\n    }\n\n    return;\n  }\n\n  var action = void 0;\n  if (enable !== undefined) {\n    enable = typeof enable === 'function' ? enable.call(null, el) : enable;\n    action = enable ? 'add' : 'remove';\n  } else {\n    action = (0, _hasClass2.default)(el, name) ? 'remove' : 'add';\n  }\n\n  return (action === 'add' ? _addClass2.default : _removeClass2.default)(el, name);\n} /**\n   * # Toggle Class\n   * Toggle a class on an element given a condition.\n   *\n   * @param {Element|Array} el An element or array of elements to update.\n   * @param {String} name\n   * @param {Boolean} enable\n   * @return {Element}\n   *\n   * @module  helpers/dom/toggle-class.js\n   */\n\nexports.default = toggleClass;\nmodule.exports = exports['default'];\n//# sourceMappingURL=toggle-class.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.clear = exports.restore = exports.store = undefined;\n\nvar _each = require('../util/each');\n\nvar _each2 = _interopRequireDefault(_each);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Find all the form elements inside a given element and run a callback on each.\n * @param  {Element} el\n * @param  {Function} cb\n */\nfunction findAll(el, cb) {\n  (0, _each2.default)(el.querySelectorAll('input, select, textarea'), function (i) {\n    cb(i);\n  });\n}\n\n/**\n * Find all the form elements inside a given element and store their current\n * value as a data attribute.\n * @param {Element} el\n */\n/**\n * # Form Data\n * Store and restore the data of form fields inline so it can be reverted.\n *\n * @example\n * formData.store(el);\n * formData.revert(el);\n *\n * @module helpers/form/form-data.js\n */\n\nfunction store(el) {\n\n  findAll(el, function (input) {\n\n    var name = input.nodeName.toLowerCase();\n    var value = void 0;\n\n    switch (name) {\n      case 'select':\n        value = input.selectedIndex;\n        break;\n      default:\n        value = encodeURI(input.value);\n        break;\n    }\n\n    input.setAttribute('data-stored-value', value);\n  });\n}\n\n/**\n * Revert all the form elements inside of a given element.\n * @param {Element} el\n */\nfunction restore(el) {\n\n  findAll(el, function (input) {\n\n    var name = input.nodeName.toLowerCase();\n    var value = input.getAttribute('data-stored-value');\n\n    // No stored value\n    if (!value && value !== '') {\n      return;\n    }\n\n    switch (name) {\n      case 'select':\n        input.options[value].selected = true;\n        break;\n      default:\n        input.value = decodeURI(value);\n        break;\n    }\n\n    input.removeAttribute('data-stored-value');\n  });\n}\n\n/**\n * Clear the stored data on all the form elements inside of a given element.\n * @param {Element} el\n */\nfunction clear(el) {\n  findAll(el, function (input) {\n    input.removeAttribute('data-stored-value');\n  });\n}\n\nexports.store = store;\nexports.restore = restore;\nexports.clear = clear;\n//# sourceMappingURL=form-data.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Set Caret\n * Set the caret position in an input.\n *\n * @param {Element} el\n * @param {Number} start\n * @param {Number} end\n *\n * @example\n * setCaret(el, -1);\n * setCaret(el, 2);\n *\n * @module helpers/form/set-caret.js\n */\nfunction setCaret(el, start, end) {\n\n  var originalActiveElement = document.activeElement;\n\n  start = start < 0 ? el.value.length + start + 1 : start;\n  end = end < 0 ? el.value.length + end + 1 : end;\n\n  // IE support\n  if (document.selection) {\n    el.focus();\n    var sel = document.selection.createRange();\n    sel.moveStart('character', -el.value.length);\n    sel.moveStart('character', start);\n    sel.moveEnd('character', end !== undefined ? end : start);\n    sel.select();\n  } else if (el.selectionStart || el.selectionStart === 0) {\n    el.selectionStart = start;\n    el.selectionEnd = end !== undefined ? end : start;\n  }\n\n  // If we didn't have focus, go back to focusing on the original\n  if (originalActiveElement !== el) {\n    el.blur();\n    originalActiveElement.focus();\n  }\n\n  return {\n    start: start,\n    end: end\n  };\n}\n\nexports.default = setCaret;\nmodule.exports = exports['default'];\n//# sourceMappingURL=set-caret.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Get Index\n * Get the index of an element in a nodelist.\n *\n * @param {NodeList} els\n * @param {Node} el\n * @return {Number}\n *\n * @module helpers/traversal/get-index.js\n */\nfunction getIndex(els, el) {\n  return Array.prototype.indexOf.call(els, el);\n}\n\nexports.default = getIndex;\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=get-index.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _matches = require('./matches');\n\nvar _matches2 = _interopRequireDefault(_matches);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getParent(parent, query, limitEl) {\n\n  limitEl = limitEl instanceof Array ? limitEl : [limitEl || document.body];\n\n  while (parent) {\n\n    if ((0, _matches2.default)(parent, query)) {\n      return parent;\n    }\n\n    if (limitEl.indexOf(parent) !== -1) {\n      return false;\n    }\n\n    parent = parent.parentNode;\n  }\n\n  return false;\n} /**\n   * # Get Parent\n   * See if an element has another element for a parent.\n   *\n   * @param {Element} parent\n   * @param {String} query\n   * @param {Array|Element} limitEl The last element we should check.\n   * @return {Boolean|Element}\n   *\n   * @module helpers/traversal/get-parent.js\n   */\n\nexports.default = getParent;\nmodule.exports = exports['default'];\n//# sourceMappingURL=get-parent.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _matches = require('./matches');\n\nvar _matches2 = _interopRequireDefault(_matches);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getSiblingAfter(el, query) {\n\n  while (el = el.nextElementSibling) {\n    if ((0, _matches2.default)(el, query)) {\n      return el;\n    }\n  }\n\n  return null;\n} /**\n   * # Get Sibling After\n   * Get a nearest sibling after the given element which matches\n   * the given query selector.\n   *\n   * @param {Element} el\n   * @param {String} query\n   * @return {Element|Null}\n   *\n   * @module helpers/traversal/get-sibling-after.js\n   */\n\nexports.default = getSiblingAfter;\nmodule.exports = exports['default'];\n//# sourceMappingURL=get-sibling-after.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _matches = require('./matches');\n\nvar _matches2 = _interopRequireDefault(_matches);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getSiblingBefore(el, query) {\n\n  while (el = el.previousElementSibling) {\n    if ((0, _matches2.default)(el, query)) {\n      return el;\n    }\n  }\n\n  return null;\n} /**\n   * # Get Sibling Before\n   * Get a nearest sibling before the given element which matches\n   * the given query selector.\n   *\n   * @param {Element} el\n   * @param {String} query\n   * @return {Element|Null}\n   *\n   * @module helpers/traversal/get-sibling-before.js\n   */\n\nexports.default = getSiblingBefore;\nmodule.exports = exports['default'];\n//# sourceMappingURL=get-sibling-before.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Matches\n * See if an element matches a query selector.\n *\n * @param {Element} el\n * @param {String} query\n * @return {Boolean}\n *\n * @module helpers/traversal/matches.js\n */\nvar vendorMatch = typeof Element !== 'undefined' && (Element.prototype.matches || Element.prototype.matchesSelector || Element.prototype.webkitMatchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.oMatchesSelector);\n\nfunction matches(el, query) {\n\n  if (vendorMatch) return vendorMatch.call(el, query);\n\n  var nodes = el.parentNode ? el.parentNode.querySelectorAll(query) : [];\n\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i] === el) return true;\n  }\n\n  return false;\n}\n\nexports.default = matches;\nmodule.exports = exports['default'];\n//# sourceMappingURL=matches.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Each\n * Apply a callback function to a list of any kind: Array, NodeList, HTMLCollection or Object.\n *\n * @param {Array|NodeList|HTMLCollection|Object} list\n * @param {Function} cb\n *\n * @example\n * each([], callback);\n * each(el.children, callback);\n * each(el.childNodes, callback);\n * each({}, callback);\n *\n * @module helpers/util/each.js\n */\nfunction each(list, cb) {\n\n  if (!list) {\n    return;\n  }\n\n  if (typeof cb !== 'function') {\n    throw new Error('Cannot invoke `each` without a callback!');\n  }\n\n  var i = 0;\n  var len = list.length;\n\n  // Object\n  if (len === undefined) {\n    for (i in list) {\n      if (i !== 'prototype' && list.hasOwnProperty(i)) {\n        cb(i, list[i]);\n      }\n    }\n  }\n  // Array-like\n  else {\n      for (; i < len; i++) {\n        cb(list[i]);\n      }\n    }\n}\n\nexports.default = each;\nmodule.exports = exports['default'];\n//# sourceMappingURL=each.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Trim\n * Trim whitespace on a string.\n *\n * @param {String} str\n *\n * @module helpers/util/trim.js\n */\n\nvar trimRE = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;\n\nfunction trim(str) {\n  return str.replace(trimRE, '');\n}\n\nexports.default = trim;\nmodule.exports = exports['default'];\n//# sourceMappingURL=trim.js.map\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9kaXN0L2NvbXBvbmVudHMvYmFzZS5qcyIsImpzL2Rpc3QvY29tcG9uZW50cy9leHBhbmQuanMiLCJqcy9kaXN0L2NvbXBvbmVudHMvdGFibGUuanMiLCJqcy9kaXN0L2hlbHBlcnMvYW5pbWF0aW9uL2hlaWdodC5qcyIsImpzL2Rpc3QvaGVscGVycy9kb20vYWRkLWNsYXNzLmpzIiwianMvZGlzdC9oZWxwZXJzL2RvbS9oYXMtY2xhc3MuanMiLCJqcy9kaXN0L2hlbHBlcnMvZG9tL291dGVyLWhlaWdodC5qcyIsImpzL2Rpc3QvaGVscGVycy9kb20vcmVtb3ZlLWNsYXNzLmpzIiwianMvZGlzdC9oZWxwZXJzL2RvbS90b2dnbGUtY2xhc3MuanMiLCJqcy9kaXN0L2hlbHBlcnMvZm9ybS9mb3JtLWRhdGEuanMiLCJqcy9kaXN0L2hlbHBlcnMvZm9ybS9zZXQtY2FyZXQuanMiLCJqcy9kaXN0L2hlbHBlcnMvdHJhdmVyc2FsL2dldC1pbmRleC5qcyIsImpzL2Rpc3QvaGVscGVycy90cmF2ZXJzYWwvZ2V0LXBhcmVudC5qcyIsImpzL2Rpc3QvaGVscGVycy90cmF2ZXJzYWwvZ2V0LXNpYmxpbmctYWZ0ZXIuanMiLCJqcy9kaXN0L2hlbHBlcnMvdHJhdmVyc2FsL2dldC1zaWJsaW5nLWJlZm9yZS5qcyIsImpzL2Rpc3QvaGVscGVycy90cmF2ZXJzYWwvbWF0Y2hlcy5qcyIsImpzL2Rpc3QvaGVscGVycy91dGlsL2VhY2guanMiLCJqcy9kaXN0L2hlbHBlcnMvdXRpbC90cmltLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3p6Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaFBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2VhY2ggPSByZXF1aXJlKCcuLi9oZWxwZXJzL3V0aWwvZWFjaCcpO1xuXG52YXIgX2VhY2gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZWFjaCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9IC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICMgQmFzZSBDb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBUaGUgYmFzZSBjbGFzcyBmb3IgU3BhcmsgSlMgY29tcG9uZW50cy4gVGhpcyBjbGFzcyBzaG91bGQgbmV2ZXIgYmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBpbnN0YW50aWF0ZWQgZGlyZWN0bHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQG1vZHVsZSBjb21wb25lbnRzL2Jhc2UuanNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cblxudmFyIG5vb3AgPSBmdW5jdGlvbiBub29wKCkge307XG5cbnZhciBCYXNlID0gZnVuY3Rpb24gKCkge1xuXG4gIC8qKlxuICAgKiBTZXQgcGFyYW1ldGVycyBhbmQgY2FjaGUgZWxlbWVudHMuXG4gICAqL1xuICBmdW5jdGlvbiBCYXNlKGVsKSB7XG4gICAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQmFzZSk7XG5cbiAgICBpZiAocGFyYW1zLmVsUmVxdWlyZWQgJiYgIWVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zZXRQYXJhbXModGhpcy5kZWZhdWx0cyB8fCB7fSwgdHJ1ZSk7XG4gICAgdGhpcy5zZXRQYXJhbXMocGFyYW1zKTtcbiAgICAodGhpcy5fY2FjaGVFbGVtZW50cyB8fCBub29wKS5jYWxsKHRoaXMsIGVsLCBwYXJhbXMpO1xuICAgICh0aGlzLl9wYXJzZVBhcmFtcyB8fCBub29wKS5jYWxsKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgY29tcG9uZW50IGZyb20gdGhlIERPTSBhbmQgcHJlcGFyZSBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uIGJ5IGRlcmVmZXJlbmNpbmcgdmFsdWVzLlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGxlYXZlRWxlbWVudCBMZWF2ZSB0aGUgZWxlbWVudCBpbnRhY3QuXG4gICAqL1xuXG5cbiAgQmFzZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKGxlYXZlRWxlbWVudCkge1xuXG4gICAgaWYgKHRoaXMuX3JlbW92ZUV2ZW50TGlzdGVuZXJzKSB7XG4gICAgICB0aGlzLl9yZW1vdmVFdmVudExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIGlmICghbGVhdmVFbGVtZW50ICYmIHRoaXMuZWwgJiYgdGhpcy5lbC5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLmVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbCk7XG4gICAgfVxuXG4gICAgdGhpcy51bnNldFBhcmFtcyh0aGlzLmRlZmF1bHRzKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGNvbXBvbmVudCB0byB1c2UgYSBuZXcgZWxlbWVudCBvciByZXBhcnNlIGZyb21cbiAgICogdGhlIGV4aXN0aW5nIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWwgT3B0aW9uYWxcbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyBPcHRpb25hbFxuICAgKi9cblxuXG4gIEJhc2UucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZShlbCkge1xuICAgIHZhciBwYXJhbXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG5cbiAgICBpZiAodGhpcy5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMpIHtcbiAgICAgIHRoaXMuX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgKHRoaXMuX2NhY2hlRWxlbWVudHMgfHwgbm9vcCkuY2FsbCh0aGlzLCBlbCB8fCB0aGlzLmVsLCBwYXJhbXMpO1xuICAgICh0aGlzLl9wYXJzZVBhcmFtcyB8fCBub29wKS5jYWxsKHRoaXMpO1xuXG4gICAgaWYgKHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKSB7XG4gICAgICB0aGlzLl9hZGRFdmVudExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgYSBoYXNoIG9mIHBhcmFtZXRlcnMgaWYgdGhleSdyZSB3aGl0ZWxpc3RlZCBvciB3ZSdyZSB0b2xkIHRvIGZvcmNlIHRoZSBzZXQuXG4gICAqIFRoaXMgaXMgdXNlZCB0byBzZXQgaW5pdGlhbCB2YWx1ZXMgYXMgd2VsbCBhcyBzZXQgcGFzc2VkIHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXNcbiAgICogQHBhcmFtIHtCb29sZWFufSBmb3JjZSBGb3JjZSBzZXR0aW5nIGV2ZW4gaWYgdGhlIHBhcmFtIGlzIG5vdCB3aGl0ZWxpc3RlZC5cbiAgICovXG5cblxuICBCYXNlLnByb3RvdHlwZS5zZXRQYXJhbXMgPSBmdW5jdGlvbiBzZXRQYXJhbXMocGFyYW1zLCBmb3JjZSkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAoMCwgX2VhY2gyLmRlZmF1bHQpKHBhcmFtcywgZnVuY3Rpb24gKGssIHYpIHtcbiAgICAgIGlmIChfdGhpcy5fd2hpdGVsaXN0ZWRQYXJhbXMuaW5kZXhPZihrKSAhPT0gLTEgfHwgZm9yY2UpIHtcbiAgICAgICAgX3RoaXNba10gPSB2O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVuc2V0IGFsbCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0ga2V5c1xuICAgKiBAcGFyYW0ge09iamVjdH0gc2NvcGUgVGhlIG9iamVjdCB0byB1bnNldCB0aGUgcGFyYW1zIGZyb20uIERlZmF1bHRzIHRvIGB0aGlzYC5cbiAgICovXG5cblxuICBCYXNlLnByb3RvdHlwZS51bnNldFBhcmFtcyA9IGZ1bmN0aW9uIHVuc2V0UGFyYW1zKGtleXMsIHNjb3BlKSB7XG5cbiAgICBrZXlzID0ga2V5cyBpbnN0YW5jZW9mIEFycmF5ID8ga2V5cyA6IE9iamVjdC5rZXlzKGtleXMpO1xuICAgIHNjb3BlID0gc2NvcGUgfHwgdGhpcztcbiAgICAoMCwgX2VhY2gyLmRlZmF1bHQpKGtleXMsIGZ1bmN0aW9uIChrKSB7XG4gICAgICBkZWxldGUgc2NvcGVba107XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICByZXR1cm4gQmFzZTtcbn0oKTtcblxuLyoqXG4gKiBXaGl0ZWxpc3RlZCBwYXJhbWV0ZXJzIHdoaWNoIGNhbiBiZSBzZXQgb24gY29uc3RydWN0aW9uLlxuICogQHR5cGUge0FycmF5fVxuICovXG5cblxuQmFzZS5wcm90b3R5cGUuX3doaXRlbGlzdGVkUGFyYW1zID0gW107XG5cbi8qKlxuICogRGVmYXVsdCB2YWx1ZXMgZm9yIGludGVybmFsIHByb3BlcnRpZXMgd2Ugd2lsbCBiZSBzZXR0aW5nLlxuICogVGhlc2UgYXJlIHNldCBvbiBlYWNoIGNvbnN0cnVjdGlvbiBzbyB3ZSBkb24ndCBsZWFrIHByb3BlcnRpZXNcbiAqIGludG8gdGhlIHByb3RvdHlwZSBjaGFpbi5cbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbkJhc2UucHJvdG90eXBlLmRlZmF1bHRzID0ge307XG5cbmV4cG9ydHMuZGVmYXVsdCA9IEJhc2U7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJhc2UuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfYmFzZSA9IHJlcXVpcmUoJy4vYmFzZScpO1xuXG52YXIgX2Jhc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYmFzZSk7XG5cbnZhciBfaGVpZ2h0ID0gcmVxdWlyZSgnLi4vaGVscGVycy9hbmltYXRpb24vaGVpZ2h0Jyk7XG5cbnZhciBfaGVpZ2h0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hlaWdodCk7XG5cbnZhciBfdG9nZ2xlQ2xhc3MgPSByZXF1aXJlKCcuLi9oZWxwZXJzL2RvbS90b2dnbGUtY2xhc3MnKTtcblxudmFyIF90b2dnbGVDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90b2dnbGVDbGFzcyk7XG5cbnZhciBfaGFzQ2xhc3MgPSByZXF1aXJlKCcuLi9oZWxwZXJzL2RvbS9oYXMtY2xhc3MnKTtcblxudmFyIF9oYXNDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oYXNDbGFzcyk7XG5cbnZhciBfZ2V0UGFyZW50ID0gcmVxdWlyZSgnLi4vaGVscGVycy90cmF2ZXJzYWwvZ2V0LXBhcmVudCcpO1xuXG52YXIgX2dldFBhcmVudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQYXJlbnQpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9IC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogIyBFeHBhbmRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEV4cGFuZCBhbmQgY29sbGFwc2UgYW4gZWxlbWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogbmV3IEV4cGFuZChlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQG1vZHVsZSBjb21wb25lbnRzL2V4cGFuZC5qc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG5cblxudmFyIG5vb3AgPSBmdW5jdGlvbiBub29wKCkge307XG5cbnZhciBFeHBhbmQgPSBmdW5jdGlvbiAoX0Jhc2VDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKEV4cGFuZCwgX0Jhc2VDb21wb25lbnQpO1xuXG4gIC8qKlxuICAgKiBFeHBhbmQgY29uc3RydWN0b3IuXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtc1xuICAgKi9cbiAgZnVuY3Rpb24gRXhwYW5kKGVsKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRXhwYW5kKTtcblxuICAgIHBhcmFtcy5lbFJlcXVpcmVkID0gdHJ1ZTtcblxuICAgIGlmICghKF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX0Jhc2VDb21wb25lbnQuY2FsbCh0aGlzLCBlbCwgcGFyYW1zKSksIF90aGlzKSkge1xuICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzKTtcbiAgICB9XG5cbiAgICBfdGhpcy5fYmluZEV2ZW50TGlzdGVuZXJDYWxsYmFja3MoKTtcbiAgICBfdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4cGFuZFxuICAgKi9cblxuXG4gIEV4cGFuZC5wcm90b3R5cGUuZXhwYW5kID0gZnVuY3Rpb24gZXhwYW5kKCkge1xuXG4gICAgKHRoaXMub25CZWZvcmVFeHBhbmQgfHwgbm9vcCkoKTtcblxuICAgICgwLCBfaGVpZ2h0Mi5kZWZhdWx0KSh7XG4gICAgICBlbDogdGhpcy5lbCxcbiAgICAgIHRvZ2dsZUNsYXNzOiAnZXhwYW5kZWQnLFxuICAgICAgdG9nZ2xlRWw6ICcuc3BhcmstZXhwYW5kX19jb250ZW50LCAuc3BhcmstcGFuZWxfX2NvbnRlbnQnXG4gICAgfSk7XG5cbiAgICB0aGlzLmlzRXhwYW5kZWQgPSB0cnVlO1xuICAgIHRoaXMuX3VwZGF0ZUNsYXNzZXMoKTtcbiAgICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgIGUuaW5pdEV2ZW50KCdzcGFyay52aXNpYmxlLWNoaWxkcmVuJywgdHJ1ZSwgdHJ1ZSk7XG4gICAgdGhpcy5lbC5kaXNwYXRjaEV2ZW50KGUpO1xuXG4gICAgLy8gSWYgdGhlIGV4cGFuZCBlbGVtZW50IGhhdmUgaW5wdXQsIGZvY3VzIG9uIHRoZSBmaXJzdCBvbmUuXG4gICAgaWYgKHRoaXMuZWwucXVlcnlTZWxlY3RvcignaW5wdXQnKSkge1xuICAgICAgdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLmZvY3VzKCk7XG4gICAgfVxuXG4gICAgKHRoaXMub25BZnRlckV4cGFuZCB8fCBub29wKSgpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbGxhcHNlXG4gICAqL1xuXG5cbiAgRXhwYW5kLnByb3RvdHlwZS5jb2xsYXBzZSA9IGZ1bmN0aW9uIGNvbGxhcHNlKCkge1xuXG4gICAgKHRoaXMub25CZWZvcmVDb2xsYXBzZSB8fCBub29wKSgpO1xuXG4gICAgKDAsIF9oZWlnaHQyLmRlZmF1bHQpKHtcbiAgICAgIGVsOiB0aGlzLmVsLFxuICAgICAgdG9nZ2xlRWw6ICcuc3BhcmstZXhwYW5kX19jb250ZW50LCAuc3BhcmstcGFuZWxfX2NvbnRlbnQnLFxuICAgICAgdG9nZ2xlVmFsdWU6ICdub25lJyxcbiAgICAgIGFjdGlvbjogJ2NvbGxhcHNlJ1xuICAgIH0pO1xuXG4gICAgdGhpcy5pc0V4cGFuZGVkID0gZmFsc2U7XG4gICAgdGhpcy5fdXBkYXRlQ2xhc3NlcygpO1xuXG4gICAgKHRoaXMub25BZnRlckNvbGxhcHNlIHx8IG5vb3ApKCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogVG9nZ2xlIHRoZSBleHBhbmQgc3RhdGUuXG4gICAqL1xuXG5cbiAgRXhwYW5kLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiB0b2dnbGUoKSB7XG4gICAgcmV0dXJuIHRoaXNbdGhpcy5pc0V4cGFuZGVkID8gJ2NvbGxhcHNlJyA6ICdleHBhbmQnXSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTdG9yZSBhIHJlZmVyZW5jZSB0byB0aGUgZWxlbWVudC5cbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKi9cblxuXG4gIEV4cGFuZC5wcm90b3R5cGUuX2NhY2hlRWxlbWVudHMgPSBmdW5jdGlvbiBfY2FjaGVFbGVtZW50cyhlbCkge1xuICAgIHRoaXMuZWwgPSBlbDtcbiAgICB0aGlzLmlzRXhwYW5kZWQgPSAoMCwgX2hhc0NsYXNzMi5kZWZhdWx0KSh0aGlzLmVsLCAnZXhwYW5kZWQnKTtcbiAgfTtcblxuICAvKipcbiAgICogVXBkYXRlIGNsYXNzZXMgZm9yIHRoZSBleHBhbmQgb3IgY29sbGFwc2Ugc3RhdGUuXG4gICAqL1xuXG5cbiAgRXhwYW5kLnByb3RvdHlwZS5fdXBkYXRlQ2xhc3NlcyA9IGZ1bmN0aW9uIF91cGRhdGVDbGFzc2VzKCkge1xuICAgICgwLCBfdG9nZ2xlQ2xhc3MyLmRlZmF1bHQpKHRoaXMuZWwsICdleHBhbmRlZCcsIHRoaXMuaXNFeHBhbmRlZCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBib3VuZCB2ZXJzaW9ucyBvZiBldmVudCBsaXN0ZW5lciBjYWxsYmFja3MgYW5kIHN0b3JlIHRoZW0uXG4gICAqIE90aGVyd2lzZSB3ZSBjYW4ndCB1bmJpbmQgZnJvbSB0aGVzZSBldmVudHMgbGF0ZXIgYmVjYXVzZSB0aGVcbiAgICogZnVuY3Rpb24gc2lnbmF0dXJlcyB3b24ndCBtYXRjaC5cbiAgICovXG5cblxuICBFeHBhbmQucHJvdG90eXBlLl9iaW5kRXZlbnRMaXN0ZW5lckNhbGxiYWNrcyA9IGZ1bmN0aW9uIF9iaW5kRXZlbnRMaXN0ZW5lckNhbGxiYWNrcygpIHtcbiAgICB0aGlzLl9vbkNsaWNrQm91bmQgPSB0aGlzLl9vbkNsaWNrLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25LZXlkb3duQm91bmQgPSB0aGlzLl9vbktleWRvd24uYmluZCh0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogQWRkIGV2ZW50IGxpc3RlbmVycyBmb3IgRE9NIGV2ZW50cy5cbiAgICovXG5cblxuICBFeHBhbmQucHJvdG90eXBlLl9hZGRFdmVudExpc3RlbmVycyA9IGZ1bmN0aW9uIF9hZGRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb25DbGlja0JvdW5kKTtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9vbktleWRvd25Cb3VuZCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBldmVudCBsaXN0ZW5lcnMgZm9yIERPTSBldmVudHMuLlxuICAgKi9cblxuXG4gIEV4cGFuZC5wcm90b3R5cGUuX3JlbW92ZUV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9vbkNsaWNrQm91bmQpO1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX29uS2V5ZG93bkJvdW5kKTtcbiAgfTtcblxuICAvKipcbiAgICogV2hlbiB3ZSBhcmUgY2xpY2tlZCwgdG9nZ2xlIHRoZSBleHBhbmRlZCBzdGF0ZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IGVcbiAgICovXG5cblxuICBFeHBhbmQucHJvdG90eXBlLl9vbkNsaWNrID0gZnVuY3Rpb24gX29uQ2xpY2soZSkge1xuXG4gICAgaWYgKCEoMCwgX2dldFBhcmVudDIuZGVmYXVsdCkoZS50YXJnZXQsICcuc3BhcmstZXhwYW5kX190b2dnbGUsIFtkYXRhLXJvbGU9XCJ0b2dnbGVcIl0sIFtyb2xlPVwiaGVhZGluZ1wiXScsIHRoaXMuZWwpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMudG9nZ2xlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIHNwYWNlIG9yIGVudGVyIGtleSBpcyBwcmVzc2VkIG9uIHRoZSB0b2dnbGUsIHRvZ2dsZSFcbiAgICogQHBhcmFtIHtPYmplY3R9IGVcbiAgICovXG5cblxuICBFeHBhbmQucHJvdG90eXBlLl9vbktleWRvd24gPSBmdW5jdGlvbiBfb25LZXlkb3duKGUpIHtcblxuICAgIGlmICghKDAsIF9nZXRQYXJlbnQyLmRlZmF1bHQpKGUudGFyZ2V0LCAnLnNwYXJrLWV4cGFuZF9fdG9nZ2xlLCBbZGF0YS1yb2xlPVwidG9nZ2xlXCJdLCBbcm9sZT1cImhlYWRpbmdcIl0nLCB0aGlzLmVsKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBjb2RlID0gZS5rZXlDb2RlIHx8IGUud2hpY2g7XG5cbiAgICAvLyBTcGFjZSBvciBlbnRlclxuICAgIGlmIChjb2RlID09PSAzMiB8fCBjb2RlID09PSAxMykge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy50b2dnbGUoKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIEV4cGFuZDtcbn0oX2Jhc2UyLmRlZmF1bHQpO1xuXG4vKipcbiAqIFdoaXRlbGlzdGVkIHBhcmFtZXRlcnMgd2hpY2ggY2FuIGJlIHNldCBvbiBjb25zdHJ1Y3Rpb24uXG4gKiBAdHlwZSB7QXJyYXl9XG4gKi9cblxuXG5FeHBhbmQucHJvdG90eXBlLl93aGl0ZWxpc3RlZFBhcmFtcyA9IFsnb25CZWZvcmVFeHBhbmQnLCAnb25BZnRlckV4cGFuZCcsICdvbkJlZm9yZUNvbGxhcHNlJywgJ29uQWZ0ZXJDb2xsYXBzZSddO1xuXG4vKipcbiAqIERlZmF1bHQgdmFsdWVzIGZvciBpbnRlcm5hbCBwcm9wZXJ0aWVzIHdlIHdpbGwgYmUgc2V0dGluZy5cbiAqIFRoZXNlIGFyZSBzZXQgb24gZWFjaCBjb25zdHJ1Y3Rpb24gc28gd2UgZG9uJ3QgbGVhayBwcm9wZXJ0aWVzXG4gKiBpbnRvIHRoZSBwcm90b3R5cGUgY2hhaW4uXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5FeHBhbmQucHJvdG90eXBlLmRlZmF1bHRzID0ge1xuICBlbDogbnVsbCxcbiAgaXNFeHBhbmRlZDogZmFsc2UsXG4gIG9uQmVmb3JlRXhwYW5kOiBudWxsLFxuICBvbkFmdGVyRXhwYW5kOiBudWxsLFxuICBvbkJlZm9yZUNvbGxhcHNlOiBudWxsLFxuICBvbkFmdGVyQ29sbGFwc2U6IG51bGwsXG4gIF9vbkNsaWNrQm91bmQ6IG51bGwsXG4gIF9vbktleWRvd25Cb3VuZDogbnVsbFxufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gRXhwYW5kO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1leHBhbmQuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfYmFzZSA9IHJlcXVpcmUoJy4vYmFzZScpO1xuXG52YXIgX2Jhc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYmFzZSk7XG5cbnZhciBfZXhwYW5kID0gcmVxdWlyZSgnLi9leHBhbmQnKTtcblxudmFyIF9leHBhbmQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhwYW5kKTtcblxudmFyIF9zZXRDYXJldCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvZm9ybS9zZXQtY2FyZXQnKTtcblxudmFyIF9zZXRDYXJldDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZXRDYXJldCk7XG5cbnZhciBfZm9ybURhdGEgPSByZXF1aXJlKCcuLi9oZWxwZXJzL2Zvcm0vZm9ybS1kYXRhJyk7XG5cbnZhciBfZWFjaCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvdXRpbC9lYWNoJyk7XG5cbnZhciBfZWFjaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lYWNoKTtcblxudmFyIF9oYXNDbGFzcyA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvZG9tL2hhcy1jbGFzcycpO1xuXG52YXIgX2hhc0NsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hhc0NsYXNzKTtcblxudmFyIF90b2dnbGVDbGFzcyA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvZG9tL3RvZ2dsZS1jbGFzcycpO1xuXG52YXIgX3RvZ2dsZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RvZ2dsZUNsYXNzKTtcblxudmFyIF9hZGRDbGFzcyA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvZG9tL2FkZC1jbGFzcycpO1xuXG52YXIgX2FkZENsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FkZENsYXNzKTtcblxudmFyIF9yZW1vdmVDbGFzcyA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvZG9tL3JlbW92ZS1jbGFzcycpO1xuXG52YXIgX3JlbW92ZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlbW92ZUNsYXNzKTtcblxudmFyIF9nZXRQYXJlbnQgPSByZXF1aXJlKCcuLi9oZWxwZXJzL3RyYXZlcnNhbC9nZXQtcGFyZW50Jyk7XG5cbnZhciBfZ2V0UGFyZW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFBhcmVudCk7XG5cbnZhciBfZ2V0SW5kZXggPSByZXF1aXJlKCcuLi9oZWxwZXJzL3RyYXZlcnNhbC9nZXQtaW5kZXgnKTtcblxudmFyIF9nZXRJbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRJbmRleCk7XG5cbnZhciBfZ2V0U2libGluZ0JlZm9yZSA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvdHJhdmVyc2FsL2dldC1zaWJsaW5nLWJlZm9yZScpO1xuXG52YXIgX2dldFNpYmxpbmdCZWZvcmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0U2libGluZ0JlZm9yZSk7XG5cbnZhciBfZ2V0U2libGluZ0FmdGVyID0gcmVxdWlyZSgnLi4vaGVscGVycy90cmF2ZXJzYWwvZ2V0LXNpYmxpbmctYWZ0ZXInKTtcblxudmFyIF9nZXRTaWJsaW5nQWZ0ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0U2libGluZ0FmdGVyKTtcblxudmFyIF9tYXRjaGVzID0gcmVxdWlyZSgnLi4vaGVscGVycy90cmF2ZXJzYWwvbWF0Y2hlcycpO1xuXG52YXIgX21hdGNoZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWF0Y2hlcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH0gLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAjIFRhYmxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIG5ldyBUYWJsZShlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQG1vZHVsZSBjb21wb25lbnRzL3RhYmxlLmpzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cblxuXG52YXIgbm9vcCA9IGZ1bmN0aW9uIG5vb3AoKSB7fTtcblxudmFyIFRhYmxlID0gZnVuY3Rpb24gKF9CYXNlQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhUYWJsZSwgX0Jhc2VDb21wb25lbnQpO1xuXG4gIC8qKlxuICAgKiBUYWJsZSBjb25zdHJ1Y3Rvci5cbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zXG4gICAqL1xuICBmdW5jdGlvbiBUYWJsZShlbCkge1xuICAgIHZhciBfdGhpcztcblxuICAgIHZhciBwYXJhbXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRhYmxlKTtcblxuICAgIHBhcmFtcy5lbFJlcXVpcmVkID0gdHJ1ZTtcblxuICAgIGlmICghKF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX0Jhc2VDb21wb25lbnQuY2FsbCh0aGlzLCBlbCwgcGFyYW1zKSksIF90aGlzKSkge1xuICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzKTtcbiAgICB9XG5cbiAgICBfdGhpcy5fYmluZEV2ZW50TGlzdGVuZXJDYWxsYmFja3MoKTtcbiAgICBfdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIF90aGlzLl9pbml0Um93cygpO1xuXG4gICAgaWYgKF90aGlzLmlzU3ByZWFkc2hlZXQgfHwgX3RoaXMuaXNFZGl0Um93cykge1xuICAgICAgX3RoaXMuX2RlYWN0aXZhdGVBbGxJbnB1dHMoKTtcbiAgICB9XG5cbiAgICBpZiAoX3RoaXMuaXNSZXNpemFibGUpIHtcbiAgICAgIF90aGlzLl9pbml0UmVzaXplKCk7XG4gICAgfVxuXG4gICAgX3RoaXMuX2Rpc2FibGVSb3dzQ29sdW1uc0NlbGxzKCk7XG5cbiAgICBfdGhpcy5faW5pdEV4cGFuZHMoKTtcbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc2FibGUgdGhlIGZvcm0gZmllbGQgaW4gYSB0YWJsZSBjZWxsLlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqL1xuXG5cbiAgVGFibGUucHJvdG90eXBlLmRpc2FibGVDZWxsID0gZnVuY3Rpb24gZGlzYWJsZUNlbGwoZWwpIHtcbiAgICBlbC5kaXNhYmxlZCA9IHRydWU7XG4gICAgKDAsIF9hZGRDbGFzczIuZGVmYXVsdCkoKDAsIF9nZXRQYXJlbnQyLmRlZmF1bHQpKGVsLCAndGQnKSwgJ3NwYXJrLXRhYmxlX19kaXNhYmxlZC1jZWxsJyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEVuYWJsZSB0aGUgZm9ybSBmaWVsZCBpbiBhIHRhYmxlIGNlbGwuXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICovXG5cblxuICBUYWJsZS5wcm90b3R5cGUuZW5hYmxlQ2VsbCA9IGZ1bmN0aW9uIGVuYWJsZUNlbGwoZWwpIHtcbiAgICBlbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICgwLCBfcmVtb3ZlQ2xhc3MyLmRlZmF1bHQpKCgwLCBfZ2V0UGFyZW50Mi5kZWZhdWx0KShlbCwgJ3RkJyksICdzcGFyay10YWJsZV9fZGlzYWJsZWQtY2VsbCcpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBEaXNhYmxlIGEgcm93IGFuZCBhbGwgdGhlIGNlbGxzIGluc2lkZSBvZiBpdC5cbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKi9cblxuXG4gIFRhYmxlLnByb3RvdHlwZS5kaXNhYmxlUm93ID0gZnVuY3Rpb24gZGlzYWJsZVJvdyhlbCkge1xuICAgICgwLCBfYWRkQ2xhc3MyLmRlZmF1bHQpKGVsLCAnc3BhcmstdGFibGVfX2Rpc2FibGVkLXJvdycpO1xuICAgICgwLCBfZWFjaDIuZGVmYXVsdCkoZWwucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQsIGJ1dHRvbiwgYScpLCBmdW5jdGlvbiAoaSkge1xuICAgICAgaS5kaXNhYmxlZCA9IHRydWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEVuYWJsZSBhIHJvdyBhbmQgYWxsIHRoZSBjZWxscyBpbnNpZGUgb2YgaXQuXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICovXG5cblxuICBUYWJsZS5wcm90b3R5cGUuZW5hYmxlUm93ID0gZnVuY3Rpb24gZW5hYmxlUm93KGVsKSB7XG4gICAgKDAsIF9yZW1vdmVDbGFzczIuZGVmYXVsdCkoZWwsICdzcGFyay10YWJsZV9fZGlzYWJsZWQtcm93Jyk7XG4gICAgKDAsIF9lYWNoMi5kZWZhdWx0KShlbC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCwgYnV0dG9uLCBhJyksIGZ1bmN0aW9uIChpKSB7XG4gICAgICBpLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIERpc2FibGUgYSBjb2x1bW4gYW5kIGFsbCB0aGUgY2VsbHMgaW5zaWRlIG9mIGl0LlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqL1xuXG5cbiAgVGFibGUucHJvdG90eXBlLmRpc2FibGVDb2x1bW4gPSBmdW5jdGlvbiBkaXNhYmxlQ29sdW1uKGVsKSB7XG5cbiAgICB2YXIgaW5kZXggPSAoMCwgX2dldEluZGV4Mi5kZWZhdWx0KShlbC5wYXJlbnROb2RlLmNoaWxkcmVuLCBlbCk7XG5cbiAgICAoMCwgX2VhY2gyLmRlZmF1bHQpKHRoaXMudGFibGVFbC5xdWVyeVNlbGVjdG9yQWxsKCd0Ym9keSB0cicpLCBmdW5jdGlvbiAocm93KSB7XG4gICAgICB0aGlzLmRpc2FibGVDZWxsKHJvdy5jaGlsZHJlbltpbmRleF0ucXVlcnlTZWxlY3RvcignaW5wdXQnKSk7XG4gICAgfS5iaW5kKHRoaXMpKTtcblxuICAgICgwLCBfYWRkQ2xhc3MyLmRlZmF1bHQpKGVsLCAnc3BhcmstdGFibGVfX2Rpc2FibGVkLWNvbHVtbicpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEVuYWJsZSBhIGNvbHVtbiBhbmQgYWxsIHRoZSBjZWxscyBpbnNpZGUgb2YgaXQuXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICovXG5cblxuICBUYWJsZS5wcm90b3R5cGUuZW5hYmxlQ29sdW1uID0gZnVuY3Rpb24gZW5hYmxlQ29sdW1uKGVsKSB7XG5cbiAgICB2YXIgaW5kZXggPSAoMCwgX2dldEluZGV4Mi5kZWZhdWx0KShlbC5wYXJlbnROb2RlLmNoaWxkcmVuLCBlbCk7XG5cbiAgICAoMCwgX2VhY2gyLmRlZmF1bHQpKHRoaXMudGFibGVFbC5xdWVyeVNlbGVjdG9yQWxsKCd0Ym9keSB0cicpLCBmdW5jdGlvbiAocm93KSB7XG4gICAgICB0aGlzLmVuYWJsZUNlbGwocm93LmNoaWxkcmVuW2luZGV4XS5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpKTtcbiAgICB9LmJpbmQodGhpcykpO1xuXG4gICAgKDAsIF9yZW1vdmVDbGFzczIuZGVmYXVsdCkoZWwsICdzcGFyay10YWJsZV9fZGlzYWJsZWQtY29sdW1uJyk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSB0YWJsZSBhbmMgY2xlYW51cC5cbiAgICogQHBhcmFtIHtCb29sZWFufSBsZWF2ZUVsZW1lbnQgTGVhdmUgdGhlIGVsZW1lbnQgaW50YWN0LlxuICAgKi9cblxuXG4gIFRhYmxlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUobGVhdmVFbGVtZW50KSB7XG4gICAgKDAsIF9lYWNoMi5kZWZhdWx0KSh0aGlzLl9leHBhbmRzLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5yZW1vdmUobGVhdmVFbGVtZW50KTtcbiAgICB9KTtcbiAgICByZXR1cm4gX0Jhc2VDb21wb25lbnQucHJvdG90eXBlLnJlbW92ZS5jYWxsKHRoaXMsIGxlYXZlRWxlbWVudCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlIGEgcm93LlxuICAgKiBAcGFyYW0ge051bWJlcnxFbGVtZW50fSByb3dcbiAgICovXG5cblxuICBUYWJsZS5wcm90b3R5cGUuYWN0aXZhdGVSb3cgPSBmdW5jdGlvbiBhY3RpdmF0ZVJvdyhyb3cpIHtcbiAgICByb3cgPSB0eXBlb2Ygcm93ID09PSAnbnVtYmVyJyA/IHRoaXMudGFibGVFbC5xdWVyeVNlbGVjdG9yQWxsKCd0Ym9keSB0cicpW3Jvd10gOiByb3c7XG4gICAgaWYgKHJvdykgdGhpcy5fbWFrZVJvd0FjdGl2ZShyb3cpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBtdWx0aXBsZSByb3dzLlxuICAgKiBAcGFyYW0ge0FycmF5fSByb3dzXG4gICAqL1xuXG5cbiAgVGFibGUucHJvdG90eXBlLmFjdGl2YXRlUm93cyA9IGZ1bmN0aW9uIGFjdGl2YXRlUm93cyhyb3dzKSB7XG4gICAgKDAsIF9lYWNoMi5kZWZhdWx0KShyb3dzLCB0aGlzLmFjdGl2YXRlUm93LmJpbmQodGhpcykpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBEZWFjdGl2YXRlIGEgcm93LlxuICAgKiBAcGFyYW0ge051bWJlcnxFbGVtZW50fSByb3dcbiAgICovXG5cblxuICBUYWJsZS5wcm90b3R5cGUuZGVhY3RpdmF0ZVJvdyA9IGZ1bmN0aW9uIGRlYWN0aXZhdGVSb3cocm93KSB7XG4gICAgcm93ID0gdHlwZW9mIHJvdyA9PT0gJ251bWJlcicgPyB0aGlzLnRhYmxlRWwucXVlcnlTZWxlY3RvckFsbCgndGJvZHkgdHInKVtyb3ddIDogcm93O1xuICAgIGlmIChyb3cpIHRoaXMuX21ha2VSb3dJbkFjdGl2ZShyb3cpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBEZWFjdGl2YXRlIG11bHRpcGxlIHJvd3MuXG4gICAqIEBwYXJhbSB7QXJyYXl9IHJvd3NcbiAgICovXG5cblxuICBUYWJsZS5wcm90b3R5cGUuZGVhY3RpdmF0ZVJvd3MgPSBmdW5jdGlvbiBkZWFjdGl2YXRlUm93cyhyb3dzKSB7XG4gICAgKDAsIF9lYWNoMi5kZWZhdWx0KShyb3dzLCB0aGlzLmRlYWN0aXZhdGVSb3cuYmluZCh0aGlzKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCBhbiBhcnJheSBvZiBjdXJyZW50bHkgYWN0aXZlIHJvd3MuXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cblxuXG4gIFRhYmxlLnByb3RvdHlwZS5nZXRBY3RpdmVSb3dzID0gZnVuY3Rpb24gZ2V0QWN0aXZlUm93cygpIHtcblxuICAgIHZhciBhcnIgPSBbXTtcblxuICAgICgwLCBfZWFjaDIuZGVmYXVsdCkodGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKCd0Ym9keSB0ci5hY3RpdmUnKSwgZnVuY3Rpb24gKHRyKSB7XG4gICAgICBhcnIucHVzaCh0cik7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYXJyO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGNvbXBvbmVudCB0byB1c2UgYSBuZXcgZWxlbWVudCBvciByZXBhcnNlIGZyb21cbiAgICogdGhlIGV4aXN0aW5nIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWwgT3B0aW9uYWxcbiAgICovXG5cblxuICBUYWJsZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKGVsKSB7XG5cbiAgICB0aGlzLl9yZW1vdmVFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5fY2FjaGVFbGVtZW50cyhlbCB8fCB0aGlzLmVsKTtcbiAgICB0aGlzLl9wYXJzZVBhcmFtcygpO1xuXG4gICAgdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX2luaXRSb3dzKCk7XG5cbiAgICBpZiAodGhpcy5pc1NwcmVhZHNoZWV0IHx8IHRoaXMuaXNFZGl0Um93cykge1xuICAgICAgdGhpcy5fZGVhY3RpdmF0ZUFsbElucHV0cygpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzUmVzaXphYmxlKSB7XG4gICAgICB0aGlzLl9pbml0UmVzaXplKCk7XG4gICAgfVxuXG4gICAgdGhpcy5fZGlzYWJsZVJvd3NDb2x1bW5zQ2VsbHMoKTtcblxuICAgIHRoaXMuX2luaXRFeHBhbmRzKCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogU3RvcmUgYSByZWZlcmVuY2UgdG8gdGhlIHRhYnMgbGlzdCwgZWFjaCB0YWIgYW5kIGVhY2ggcGFuZWwuXG4gICAqIFNldCB3aGljaCB0YWIgaXMgYWN0aXZlLCBvciB1c2UgdGhlIGZpcnN0LlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqL1xuXG5cbiAgVGFibGUucHJvdG90eXBlLl9jYWNoZUVsZW1lbnRzID0gZnVuY3Rpb24gX2NhY2hlRWxlbWVudHMoZWwpIHtcbiAgICB0aGlzLmVsID0gZWw7XG4gICAgdGhpcy50YWJsZUVsID0gZWwucXVlcnlTZWxlY3RvcigndGFibGUnKTtcbiAgfTtcblxuICAvKipcbiAgICogUGFyc2UgcGFyYW1ldGVycyBmcm9tIHRoZSBlbGVtZW50cy5cbiAgICovXG5cblxuICBUYWJsZS5wcm90b3R5cGUuX3BhcnNlUGFyYW1zID0gZnVuY3Rpb24gX3BhcnNlUGFyYW1zKCkge1xuXG4gICAgaWYgKCF0aGlzLnRhYmxlRWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmlzU3ByZWFkc2hlZXQgPSB0aGlzLmlzU3ByZWFkc2hlZXQgIT09IG51bGwgPyB0aGlzLmlzU3ByZWFkc2hlZXQgOiAoMCwgX2hhc0NsYXNzMi5kZWZhdWx0KSh0aGlzLmVsLCAnc3BhcmstdGFibGUtLXNwcmVhZHNoZWV0JykgPyB0cnVlIDogZmFsc2U7XG4gICAgdGhpcy5pc0VkaXRSb3dzID0gdGhpcy5pc0VkaXRSb3dzICE9PSBudWxsID8gdGhpcy5pc0VkaXRSb3dzIDogKDAsIF9oYXNDbGFzczIuZGVmYXVsdCkodGhpcy5lbCwgJ3NwYXJrLXRhYmxlLS1lZGl0LXJvd3MnKSA/IHRydWUgOiBmYWxzZTtcbiAgICB0aGlzLmlzUmVzaXphYmxlID0gdGhpcy5pc1Jlc2l6YWJsZSAhPT0gbnVsbCA/IHRoaXMuaXNSZXNpemFibGUgOiAoMCwgX2hhc0NsYXNzMi5kZWZhdWx0KSh0aGlzLmVsLCAnc3BhcmstdGFibGUtLXJlc2l6YWJsZScpID8gdHJ1ZSA6IGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYm91bmQgdmVyc2lvbnMgb2YgZXZlbnQgbGlzdGVuZXIgY2FsbGJhY2tzIGFuZCBzdG9yZSB0aGVtLlxuICAgKiBPdGhlcndpc2Ugd2UgY2FuJ3QgdW5iaW5kIGZyb20gdGhlc2UgZXZlbnRzIGxhdGVyIGJlY2F1c2UgdGhlXG4gICAqIGZ1bmN0aW9uIHNpZ25hdHVyZXMgd29uJ3QgbWF0Y2guXG4gICAqL1xuXG5cbiAgVGFibGUucHJvdG90eXBlLl9iaW5kRXZlbnRMaXN0ZW5lckNhbGxiYWNrcyA9IGZ1bmN0aW9uIF9iaW5kRXZlbnRMaXN0ZW5lckNhbGxiYWNrcygpIHtcblxuICAgIHRoaXMuX29uQ2xpY2tCb3VuZCA9IHRoaXMuX29uQ2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vbkNoYW5nZUJvdW5kID0gdGhpcy5fb25DaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vbkZvY3VzQm91bmQgPSB0aGlzLl9vbkZvY3VzLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25CbHVyQm91bmQgPSB0aGlzLl9vbkJsdXIuYmluZCh0aGlzKTtcblxuICAgIHRoaXMuX29uVG91Y2hzdGFydEJvdW5kID0gdGhpcy5fb25Ub3VjaHN0YXJ0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25Ub3VjaGVuZEJvdW5kID0gdGhpcy5fb25Ub3VjaGVuZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uS2V5ZG93bkJvdW5kID0gdGhpcy5fb25LZXlkb3duLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLl9vbk1vdXNlRG93bkJvdW5kID0gdGhpcy5fb25Nb3VzZURvd24uYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vbk1vdXNlTW92ZUJvdW5kID0gdGhpcy5fb25Nb3VzZU1vdmUuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vbk1vdXNlVXBCb3VuZCA9IHRoaXMuX29uTW91c2VVcC5iaW5kKHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGQgZXZlbnQgbGlzdGVuZXJzIGZvciBET00gZXZlbnRzLlxuICAgKi9cblxuXG4gIFRhYmxlLnByb3RvdHlwZS5fYWRkRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbiBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XG5cbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb25DbGlja0JvdW5kLCBmYWxzZSk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLl9vbkNoYW5nZUJvdW5kLCBmYWxzZSk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX29uRm9jdXNCb3VuZCwgdHJ1ZSk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5fb25CbHVyQm91bmQsIHRydWUpO1xuXG4gICAgaWYgKHRoaXMuaXNTcHJlYWRzaGVldCkge1xuICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5fb25Ub3VjaHN0YXJ0Qm91bmQsIGZhbHNlKTtcbiAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9vblRvdWNoZW5kQm91bmQsIGZhbHNlKTtcbiAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX29uS2V5ZG93bkJvdW5kLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNSZXNpemFibGUpIHtcbiAgICAgIHRoaXMudGFibGVFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9vbk1vdXNlRG93bkJvdW5kLCBmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgZXZlbnQgbGlzdGVuZXJzIGZvciBET00gZXZlbnRzLi5cbiAgICovXG5cblxuICBUYWJsZS5wcm90b3R5cGUuX3JlbW92ZUV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xuXG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX29uQ2xpY2tCb3VuZCk7XG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLl9vbkNoYW5nZUJvdW5kKTtcbiAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fb25Gb2N1c0JvdW5kKTtcbiAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLl9vbkJsdXJCb3VuZCk7XG5cbiAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLl9vblRvdWNoc3RhcnRCb3VuZCk7XG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX29uVG91Y2hlbmRCb3VuZCk7XG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fb25LZXlkb3duQm91bmQpO1xuXG4gICAgdGhpcy50YWJsZUVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuX29uTW91c2VEb3duQm91bmQpO1xuXG4gICAgdGhpcy5fcmVtb3ZlUmVzaXplTGlzdGVuZXJzKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZCBsaXN0ZW5lcnMgZm9yIG1vdXNlbW92ZSBhbmQgbW91c2V1cCBldmVudHMuXG4gICAqL1xuXG5cbiAgVGFibGUucHJvdG90eXBlLl9hZGRSZXNpemVMaXN0ZW5lcnMgPSBmdW5jdGlvbiBfYWRkUmVzaXplTGlzdGVuZXJzKCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9vbk1vdXNlTW92ZUJvdW5kLCBmYWxzZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9vbk1vdXNlVXBCb3VuZCwgZmFsc2UpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgbGlzdGVuZXJzIGZvciBtb3N1ZW1vdmUgYW5kIG1vdXNldXAuXG4gICAqL1xuXG5cbiAgVGFibGUucHJvdG90eXBlLl9yZW1vdmVSZXNpemVMaXN0ZW5lcnMgPSBmdW5jdGlvbiBfcmVtb3ZlUmVzaXplTGlzdGVuZXJzKCkge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9vbk1vdXNlTW92ZUJvdW5kKTtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX29uTW91c2VVcEJvdW5kKTtcbiAgfTtcblxuICAvKipcbiAgICogVG9nZ2xlIHRoZSBhY3RpdmUgc3RhdGUgb24gYSByb3cuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSByb3dcbiAgICovXG5cblxuICBUYWJsZS5wcm90b3R5cGUuX3RvZ2dsZVJvd0FjdGl2ZSA9IGZ1bmN0aW9uIF90b2dnbGVSb3dBY3RpdmUocm93KSB7XG5cbiAgICBpZiAoKDAsIF9oYXNDbGFzczIuZGVmYXVsdCkocm93LCAnYWN0aXZlJykpIHtcbiAgICAgIHRoaXMuX21ha2VSb3dJbkFjdGl2ZShyb3cpO1xuICAgICAgdGhpcy5fdW5jaGVja1NlbGVjdEFsbCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9tYWtlUm93QWN0aXZlKHJvdyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBNYWtlIGEgcm93IGFjdGl2ZVxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHJvd1xuICAgKi9cblxuXG4gIFRhYmxlLnByb3RvdHlwZS5fbWFrZVJvd0FjdGl2ZSA9IGZ1bmN0aW9uIF9tYWtlUm93QWN0aXZlKHJvdykge1xuICAgICgwLCBfYWRkQ2xhc3MyLmRlZmF1bHQpKHJvdywgJ2FjdGl2ZScpO1xuICAgIChyb3cucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdOm5vdChbZGlzYWJsZWRdKScpIHx8IHt9KS5jaGVja2VkID0gdHJ1ZTtcbiAgfTtcblxuICAvKipcbiAgICogTWFrZSBhIHJvdyBhY3RpdmVcbiAgICogQHBhcmFtICB7RWxlbWVudH0gcm93XG4gICAqL1xuXG5cbiAgVGFibGUucHJvdG90eXBlLl9tYWtlUm93SW5BY3RpdmUgPSBmdW5jdGlvbiBfbWFrZVJvd0luQWN0aXZlKHJvdykge1xuICAgICgwLCBfcmVtb3ZlQ2xhc3MyLmRlZmF1bHQpKHJvdywgJ2FjdGl2ZScpO1xuICAgIChyb3cucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdOm5vdChbZGlzYWJsZWRdKScpIHx8IHt9KS5jaGVja2VkID0gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBhY3RpdmUgb24gZWFjaCByb3cuXG4gICAqIEBwYXJhbSB7Tm9kZUxpc3R9IHJvd3NcbiAgICogQHBhcmFtIHtCb29sZWFufSBhY3RpdmVcbiAgICovXG5cblxuICBUYWJsZS5wcm90b3R5cGUuX3RvZ2dsZVJvd3NBY3RpdmUgPSBmdW5jdGlvbiBfdG9nZ2xlUm93c0FjdGl2ZShyb3dzLCBhY3RpdmUpIHtcblxuICAgIHZhciBmdW5jID0gYWN0aXZlID8gJ19tYWtlUm93QWN0aXZlJyA6ICdfbWFrZVJvd0luQWN0aXZlJztcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGxlbiA9IHJvd3MubGVuZ3RoO1xuXG4gICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgdGhpc1tmdW5jXShyb3dzW2ldKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSB3aGV0aGVyIGV2ZXJ5dGhpbmcgc2hvdWxkIGJlIHNlbGVjdGVkLiBGaW5kIHRoZSBjaGVja2JveCBpbnB1dCBpbnNpZGUgb2YgdGhlXG4gICAqIGdpdmVuIGVsZW1lbnQgYW5kIGludmVydCBpdHMgc3RhdGUuXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICovXG5cblxuICBUYWJsZS5wcm90b3R5cGUuX3RvZ2dsZVNlbGVjdEFsbCA9IGZ1bmN0aW9uIF90b2dnbGVTZWxlY3RBbGwoZWwpIHtcblxuICAgIHZhciBjaGVja2JveCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpO1xuXG4gICAgaWYgKCFjaGVja2JveCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3RvZ2dsZVJvd3NBY3RpdmUodGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKCd0Ym9keSB0cicpLCAhY2hlY2tib3guY2hlY2tlZCk7XG5cbiAgICBjaGVja2JveC5jaGVja2VkID0gIWNoZWNrYm94LmNoZWNrZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVuY2hlY2sgdGhlIHNlbGVjdCBhbGwgY2hlY2tib3hlcy5cbiAgICovXG5cblxuICBUYWJsZS5wcm90b3R5cGUuX3VuY2hlY2tTZWxlY3RBbGwgPSBmdW5jdGlvbiBfdW5jaGVja1NlbGVjdEFsbCgpIHtcblxuICAgIHZhciBjaGVja2JveGVzID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKCcuc3BhcmstdGFibGVfX3NlbGVjdC1hbGwgaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJyk7XG4gICAgdmFyIGkgPSAwO1xuICAgIHZhciBsZW4gPSBjaGVja2JveGVzLmxlbmd0aDtcblxuICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGNoZWNrYm94ZXNbaV0uY2hlY2tlZCA9IGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRGVhY3RpdmF0ZSBlZGl0aW5nIGluIGFsbCBpbnB1dCBmaWVsZHMuXG4gICAqL1xuXG5cbiAgVGFibGUucHJvdG90eXBlLl9kZWFjdGl2YXRlQWxsSW5wdXRzID0gZnVuY3Rpb24gX2RlYWN0aXZhdGVBbGxJbnB1dHMoKSB7XG5cbiAgICBpZiAoIXRoaXMudGFibGVFbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2RlYWN0aXZhdGVJbnB1dHModGhpcy50YWJsZUVsKTtcbiAgfTtcblxuICAvKipcbiAgICogRGVhY3RpdmF0ZSBhbGwgdGhlIGlucHV0cyBpbnNpZGUgYW4gZWxlbWVudFxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqL1xuXG5cbiAgVGFibGUucHJvdG90eXBlLl9kZWFjdGl2YXRlSW5wdXRzID0gZnVuY3Rpb24gX2RlYWN0aXZhdGVJbnB1dHMoZWwpIHtcblxuICAgIHZhciBpbnB1dHMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dDpub3QoW3R5cGU9XCJjaGVja2JveFwiXSknKTtcbiAgICB2YXIgaSA9IDA7XG5cbiAgICB2YXIgbGVuID0gaW5wdXRzLmxlbmd0aDtcblxuICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHRoaXMuX2RlYWN0aXZhdGVJbnB1dChpbnB1dHNbaV0pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogTWFrZSBhbiBpbnB1dCBmaWVsZCByZWFkb25seS5cbiAgICogQHBhcmFtIHtFbGVtZW50fSBpbnB1dFxuICAgKi9cblxuXG4gIFRhYmxlLnByb3RvdHlwZS5fZGVhY3RpdmF0ZUlucHV0ID0gZnVuY3Rpb24gX2RlYWN0aXZhdGVJbnB1dChpbnB1dCkge1xuICAgIGlucHV0LnNldEF0dHJpYnV0ZSgncmVhZG9ubHknLCAnJyk7XG4gICAgKDAsIF9yZW1vdmVDbGFzczIuZGVmYXVsdCkoaW5wdXQucGFyZW50Tm9kZSwgJ2VkaXRpbmcnKTtcbiAgfTtcblxuICAvKipcbiAgICogQWN0aXZhdGUgYWxsIHRoZSBpbnB1dHMgaW5zaWRlIGFuIGVsZW1lbnRcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKi9cblxuXG4gIFRhYmxlLnByb3RvdHlwZS5fYWN0aXZhdGVJbnB1dHMgPSBmdW5jdGlvbiBfYWN0aXZhdGVJbnB1dHMoZWwpIHtcblxuICAgIHZhciBpbnB1dHMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dDpub3QoW3R5cGU9XCJjaGVja2JveFwiXSknKTtcbiAgICB2YXIgaSA9IDA7XG5cbiAgICB2YXIgbGVuID0gaW5wdXRzLmxlbmd0aDtcblxuICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHRoaXMuX2FjdGl2YXRlSW5wdXQoaW5wdXRzW2ldKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIE1ha2UgYW4gaW5wdXQgZmllbGQgcmVhZGFibGUuXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gaW5wdXRcbiAgICovXG5cblxuICBUYWJsZS5wcm90b3R5cGUuX2FjdGl2YXRlSW5wdXQgPSBmdW5jdGlvbiBfYWN0aXZhdGVJbnB1dChpbnB1dCkge1xuICAgIGlucHV0LnJlbW92ZUF0dHJpYnV0ZSgncmVhZG9ubHknKTtcbiAgICAoMCwgX2FkZENsYXNzMi5kZWZhdWx0KShpbnB1dC5wYXJlbnROb2RlLCAnZWRpdGluZycpO1xuICAgIGlmIChpbnB1dC50eXBlICE9PSAnY2hlY2tib3gnICYmIGlucHV0LnR5cGUgIT09ICdyYWRpbycpIHtcbiAgICAgICgwLCBfc2V0Q2FyZXQyLmRlZmF1bHQpKGlucHV0LCAtMSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBhbiBpbnB1dCwgdW5sZXNzIGl0J3MgYWxyZWFkeSBlbmFibGVkIGluIHdoaWNoIGNhc2VcbiAgICogdGhlIGZvY3VzIHNob3VsZCBtb3ZlIGRvd24gYSByb3cuXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gaW5wdXRcbiAgICovXG5cblxuICBUYWJsZS5wcm90b3R5cGUuX2FjdGl2YXRlSW5wdXRPckZvY3VzRG93biA9IGZ1bmN0aW9uIF9hY3RpdmF0ZUlucHV0T3JGb2N1c0Rvd24oaW5wdXQpIHtcblxuICAgIC8vIEN1cnJlbnRseSByZWFkb25seVxuICAgIGlmIChpbnB1dC5nZXRBdHRyaWJ1dGUoJ3JlYWRvbmx5JykgPT09ICcnKSB7XG4gICAgICB0aGlzLl9hY3RpdmF0ZUlucHV0KGlucHV0KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9mb2N1c0Rvd24oaW5wdXQsIHRydWUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBGaW5kIGFsbCB0aGUgcm93cywgY29sdW1ucyBhbmQgY2VsbHMgdGhhdCBzaG91bGQgYmUgZGlzYWJsZWQuXG4gICAqL1xuXG5cbiAgVGFibGUucHJvdG90eXBlLl9kaXNhYmxlUm93c0NvbHVtbnNDZWxscyA9IGZ1bmN0aW9uIF9kaXNhYmxlUm93c0NvbHVtbnNDZWxscygpIHtcbiAgICAoMCwgX2VhY2gyLmRlZmF1bHQpKHRoaXMudGFibGVFbC5xdWVyeVNlbGVjdG9yQWxsKCd0ZCBpbnB1dFtkaXNhYmxlZF0nKSwgdGhpcy5kaXNhYmxlQ2VsbC5iaW5kKHRoaXMpKTtcbiAgICAoMCwgX2VhY2gyLmRlZmF1bHQpKHRoaXMudGFibGVFbC5xdWVyeVNlbGVjdG9yQWxsKCcuc3BhcmstdGFibGVfX2Rpc2FibGVkLXJvdycpLCB0aGlzLmRpc2FibGVSb3cuYmluZCh0aGlzKSk7XG4gICAgKDAsIF9lYWNoMi5kZWZhdWx0KSh0aGlzLnRhYmxlRWwucXVlcnlTZWxlY3RvckFsbCgnLnNwYXJrLXRhYmxlX19kaXNhYmxlZC1jb2x1bW4nKSwgdGhpcy5kaXNhYmxlQ29sdW1uLmJpbmQodGhpcykpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBNb3ZlIG91ciBmb2N1cyB1cCBhIHJvdyBmcm9tIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGlucHV0XG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZm9yY2UgRm9yY2UgdGhlIG1vdmUgZXZlbiBpZiB0aGUgZWxlbWVudCBpcyBhY3RpdmUuXG4gICAqL1xuXG5cbiAgVGFibGUucHJvdG90eXBlLl9mb2N1c1VwID0gZnVuY3Rpb24gX2ZvY3VzVXAoaW5wdXQsIGZvcmNlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZvY3VzVXBEb3duKGlucHV0LCAndXAnLCBmb3JjZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1vdmUgb3VyIGZvY3VzIGRvd24gYSByb3cgZnJvbSB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICogQHBhcmFtIHtFbGVtZW50fSBpbnB1dFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGZvcmNlIEZvcmNlIHRoZSBtb3ZlIGV2ZW4gaWYgdGhlIGVsZW1lbnQgaXMgYWN0aXZlLlxuICAgKi9cblxuXG4gIFRhYmxlLnByb3RvdHlwZS5fZm9jdXNEb3duID0gZnVuY3Rpb24gX2ZvY3VzRG93bihpbnB1dCwgZm9yY2UpIHtcbiAgICByZXR1cm4gdGhpcy5fZm9jdXNVcERvd24oaW5wdXQsICdkb3duJywgZm9yY2UpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBGb2N1cyBvbiBhIHJvdyB1cCBvciBkb3duIGZyb20gdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gaW5wdXRcbiAgICogQHBhcmFtIHtTdHJpbmd9IGRpcmVjdGlvbiB1cHxkb3duXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZm9yY2UgRm9yY2UgdGhlIG1vdmUgZXZlbiBpZiB0aGUgZWxlbWVudCBpcyBhY3RpdmUuXG4gICAqL1xuXG5cbiAgVGFibGUucHJvdG90eXBlLl9mb2N1c1VwRG93biA9IGZ1bmN0aW9uIF9mb2N1c1VwRG93bihpbnB1dCwgZGlyZWN0aW9uLCBmb3JjZSkge1xuXG4gICAgLy8gSWYgd2UncmUgbm90IGJlaW5nIHRvbGQgdG8gZm9yY2UgYW5kIHRoZSBpdGVtIGlzIG5vdCByZWFkIG9ubHlcbiAgICBpZiAoIWZvcmNlICYmIGlucHV0LmdldEF0dHJpYnV0ZSgncmVhZG9ubHknKSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2RlYWN0aXZhdGVJbnB1dChpbnB1dCk7XG4gICAgdmFyIHRkID0gKDAsIF9nZXRQYXJlbnQyLmRlZmF1bHQpKGlucHV0LCAndGQnLCB0aGlzLmVsKTtcblxuICAgIGlmICghdGQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgaW5kZXggPSAoMCwgX2dldEluZGV4Mi5kZWZhdWx0KSh0ZC5wYXJlbnROb2RlLmNoaWxkcmVuLCB0ZCk7XG4gICAgdmFyIG5leHRSb3cgPSAoZGlyZWN0aW9uID09PSAndXAnID8gX2dldFNpYmxpbmdCZWZvcmUyLmRlZmF1bHQgOiBfZ2V0U2libGluZ0FmdGVyMi5kZWZhdWx0KSh0ZC5wYXJlbnROb2RlLCAndHInKTtcblxuICAgIGlmICghbmV4dFJvdykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBuZXdUZCA9IG5leHRSb3cuY2hpbGRyZW5baW5kZXhdO1xuXG4gICAgaWYgKCFuZXdUZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBuZXdJbnB1dCA9IG5ld1RkLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Om5vdChbdHlwZT1cImNoZWNrYm94XCJdKSwgc2VsZWN0Jyk7XG5cbiAgICBpZiAobmV3SW5wdXQpIHtcbiAgICAgIGlmIChuZXdJbnB1dC5kaXNhYmxlZCkge1xuICAgICAgICB0aGlzLl9mb2N1c1VwRG93bihuZXdJbnB1dCwgZGlyZWN0aW9uLCBmb3JjZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXdJbnB1dC5mb2N1cygpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogTW92ZSBvdXIgZm9jdXMgbGVmdCBhIGNlbGwgZnJvbSB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICogQHBhcmFtIHtFbGVtZW50fSBpbnB1dFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGZvcmNlIEZvcmNlIHRoZSBtb3ZlIGV2ZW4gaWYgdGhlIGVsZW1lbnQgaXMgYWN0aXZlLlxuICAgKi9cblxuXG4gIFRhYmxlLnByb3RvdHlwZS5fZm9jdXNMZWZ0ID0gZnVuY3Rpb24gX2ZvY3VzTGVmdChpbnB1dCwgZm9yY2UpIHtcbiAgICByZXR1cm4gdGhpcy5fZm9jdXNMZWZ0UmlnaHQoaW5wdXQsICdsZWZ0JywgZm9yY2UpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBNb3ZlIG91ciBmb2N1cyByaWdodCBhIGNlbGwgZnJvbSB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICogQHBhcmFtIHtFbGVtZW50fSBpbnB1dFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGZvcmNlIEZvcmNlIHRoZSBtb3ZlIGV2ZW4gaWYgdGhlIGVsZW1lbnQgaXMgYWN0aXZlLlxuICAgKi9cblxuXG4gIFRhYmxlLnByb3RvdHlwZS5fZm9jdXNSaWdodCA9IGZ1bmN0aW9uIF9mb2N1c1JpZ2h0KGlucHV0LCBmb3JjZSkge1xuICAgIHJldHVybiB0aGlzLl9mb2N1c0xlZnRSaWdodChpbnB1dCwgJ3JpZ2h0JywgZm9yY2UpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBGb2N1cyBvbiBhIGNlbGwgbGVmdCBvciBkb3duIGZyb20gdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gaW5wdXRcbiAgICogQHBhcmFtIHtTdHJpbmd9IGRpcmVjdGlvbiB1cHxkb3duXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZm9yY2UgRm9yY2UgdGhlIG1vdmUgZXZlbiBpZiB0aGUgZWxlbWVudCBpcyBhY3RpdmUuXG4gICAqL1xuXG5cbiAgVGFibGUucHJvdG90eXBlLl9mb2N1c0xlZnRSaWdodCA9IGZ1bmN0aW9uIF9mb2N1c0xlZnRSaWdodChpbnB1dCwgZGlyZWN0aW9uLCBmb3JjZSkge1xuXG4gICAgLy8gSWYgd2UncmUgbm90IGJlaW5nIHRvbGQgdG8gZm9yY2UgYW5kIHRoZSBpdGVtIGlzIG5vdCByZWFkIG9ubHlcbiAgICBpZiAoIWZvcmNlICYmIGlucHV0LmdldEF0dHJpYnV0ZSgncmVhZG9ubHknKSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2RlYWN0aXZhdGVJbnB1dChpbnB1dCk7XG4gICAgdmFyIHRkID0gKDAsIF9nZXRQYXJlbnQyLmRlZmF1bHQpKGlucHV0LCAndGQnLCB0aGlzLmVsKTtcblxuICAgIGlmICghdGQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbmV3VGQgPSAoZGlyZWN0aW9uID09PSAnbGVmdCcgPyBfZ2V0U2libGluZ0JlZm9yZTIuZGVmYXVsdCA6IF9nZXRTaWJsaW5nQWZ0ZXIyLmRlZmF1bHQpKHRkLCAndGQnKTtcblxuICAgIGlmICghbmV3VGQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbmV3SW5wdXQgPSBuZXdUZC5xdWVyeVNlbGVjdG9yKCdpbnB1dDpub3QoW3R5cGU9XCJjaGVja2JveFwiXSksIHNlbGVjdCcpO1xuXG4gICAgaWYgKG5ld0lucHV0KSB7XG4gICAgICBpZiAobmV3SW5wdXQuZGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy5fZm9jdXNMZWZ0UmlnaHQobmV3SW5wdXQsIGRpcmVjdGlvbiwgZm9yY2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3SW5wdXQuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIENoZWNrIGZvciB0d28gY2xpY2sgZXZlbnRzIG9uIHRoZSBzYW1lIGVsZW1lbnQgaW4gc2hvcnQgc3VjY2Vzc2lvbi5cbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKi9cblxuXG4gIFRhYmxlLnByb3RvdHlwZS5fY2hlY2tEb3VibGVDbGljayA9IGZ1bmN0aW9uIF9jaGVja0RvdWJsZUNsaWNrKGVsKSB7XG5cbiAgICB2YXIgbm93ID0gRGF0ZS5ub3coKTtcbiAgICB2YXIgbGFzdFRpbWUgPSB0aGlzLl9sYXN0Q2xpY2tUaW1lO1xuICAgIHZhciBsYXN0RWwgPSB0aGlzLl9sYXN0Q2xpY2tFbDtcblxuICAgIHRoaXMuX2xhc3RDbGlja1RpbWUgPSBub3c7XG4gICAgdGhpcy5fbGFzdENsaWNrRWwgPSBlbDtcblxuICAgIGlmIChlbCA9PT0gbGFzdEVsICYmIG5vdyAtIDUwMCA8IGxhc3RUaW1lKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVuc2V0IHRoZSBsYXN0IGNsaWNrZWQgZWxlbWVudC5cbiAgICovXG5cblxuICBUYWJsZS5wcm90b3R5cGUuX2NsZWFyQ2xpY2tlZCA9IGZ1bmN0aW9uIF9jbGVhckNsaWNrZWQoKSB7XG4gICAgdGhpcy5fbGFzdENsaWNrRWwgPSBudWxsO1xuICB9O1xuXG4gIC8qKlxuICAgKiBFbmFibGUgZWRpdGluZyBvbiBhIHJvdy5cbiAgICogQHBhcmFtIHtFbGVtZW50fSByb3dcbiAgICovXG5cblxuICBUYWJsZS5wcm90b3R5cGUuX2VkaXRSb3cgPSBmdW5jdGlvbiBfZWRpdFJvdyhyb3cpIHtcblxuICAgIGlmICghcm93KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fZWRpdGluZ0NvdW50Kys7XG5cbiAgICB0aGlzLl9hY3RpdmF0ZUlucHV0cyhyb3cpO1xuICAgICgwLCBfZm9ybURhdGEuc3RvcmUpKHJvdyk7XG4gICAgKDAsIF9hZGRDbGFzczIuZGVmYXVsdCkocm93LCAnZWRpdGluZycpO1xuICAgIHRoaXMuX3VwZGF0ZUJpbmRpbmdzKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENhbmNlbCBlZGl0aW5nIGEgcm93LlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHJvd1xuICAgKi9cblxuXG4gIFRhYmxlLnByb3RvdHlwZS5fY2FuY2VsUm93ID0gZnVuY3Rpb24gX2NhbmNlbFJvdyhyb3cpIHtcblxuICAgIGlmICghcm93KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fZWRpdGluZ0NvdW50LS07XG5cbiAgICB0aGlzLl9kZWFjdGl2YXRlSW5wdXRzKHJvdyk7XG4gICAgKDAsIF9mb3JtRGF0YS5yZXN0b3JlKShyb3cpO1xuICAgICgwLCBfcmVtb3ZlQ2xhc3MyLmRlZmF1bHQpKHJvdywgJ2VkaXRpbmcnKTtcbiAgICB0aGlzLl91cGRhdGVCaW5kaW5ncygpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTYXZlIGEgcm93LlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHJvd1xuICAgKi9cblxuXG4gIFRhYmxlLnByb3RvdHlwZS5fc2F2ZVJvdyA9IGZ1bmN0aW9uIF9zYXZlUm93KHJvdykge1xuXG4gICAgaWYgKCFyb3cpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9lZGl0aW5nQ291bnQtLTtcblxuICAgIHRoaXMuX2RlYWN0aXZhdGVJbnB1dHMocm93KTtcbiAgICAoMCwgX2Zvcm1EYXRhLmNsZWFyKShyb3cpO1xuICAgICgwLCBfcmVtb3ZlQ2xhc3MyLmRlZmF1bHQpKHJvdywgJ2VkaXRpbmcnKTtcbiAgICB0aGlzLl91cGRhdGVCaW5kaW5ncygpO1xuXG4gICAgKHRoaXMub25Sb3dTYXZlIHx8IG5vb3ApKCgwLCBfZ2V0SW5kZXgyLmRlZmF1bHQpKHJvdy5wYXJlbnROb2RlLmNoaWxkcmVuLCByb3cpLCByb3cpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBEZWxldGUgYSByb3cuXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gcm93XG4gICAqL1xuXG5cbiAgVGFibGUucHJvdG90eXBlLl9kZWxldGVSb3cgPSBmdW5jdGlvbiBfZGVsZXRlUm93KHJvdykge1xuXG4gICAgaWYgKCFyb3cpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAodGhpcy5vblJvd0RlbGV0ZSB8fCBub29wKSgoMCwgX2dldEluZGV4Mi5kZWZhdWx0KShyb3cucGFyZW50Tm9kZS5jaGlsZHJlbiwgcm93KSwgcm93KTtcbiAgICByb3cucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChyb3cpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDb25maXJtIHRoZSBkZWxldGlvbiBvZiBhIHJvdy5cbiAgICogQHBhcmFtIHtFbGVtZW50fSByb3dcbiAgICovXG5cblxuICBUYWJsZS5wcm90b3R5cGUuX2NvbmZpcm1EZWxldGUgPSBmdW5jdGlvbiBfY29uZmlybURlbGV0ZShyb3cpIHtcblxuICAgIGlmICghdGhpcy5jb25maXJtRGVsZXRlIHx8IHR5cGVvZiB0aGlzLmNvbmZpcm1EZWxldGUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuX2RlbGV0ZVJvdyhyb3cpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvbmZpcm1EZWxldGUocm93LCB0aGlzLl9kZWxldGVSb3cpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVXBkYXRlIGRhdGEgYmluZGluZ3MuXG4gICAqL1xuXG5cbiAgVGFibGUucHJvdG90eXBlLl91cGRhdGVCaW5kaW5ncyA9IGZ1bmN0aW9uIF91cGRhdGVCaW5kaW5ncygpIHtcbiAgICAoMCwgX3RvZ2dsZUNsYXNzMi5kZWZhdWx0KSh0aGlzLmVsLCAnZWRpdGluZycsIHRoaXMuX2VkaXRpbmdDb3VudCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZCBoYW5kbGVzIHRvIHRoZSBoZWFkZXIgdGhhdCBjYW4gYmUgZ3JhYmJlZCBmb3IgcmVzaXppbmcuXG4gICAqL1xuXG5cbiAgVGFibGUucHJvdG90eXBlLl9pbml0UmVzaXplID0gZnVuY3Rpb24gX2luaXRSZXNpemUoKSB7XG5cbiAgICB0aGlzLl9yZXNpemVFbHMgPSBbXTtcblxuICAgIHZhciB0aHMgPSB0aGlzLnRhYmxlRWwucXVlcnlTZWxlY3RvckFsbCgndGhlYWQgdGgnKTtcblxuICAgICgwLCBfZWFjaDIuZGVmYXVsdCkodGhzLCBmdW5jdGlvbiAodGgpIHtcbiAgICAgIHRoLmlubmVySFRNTCA9ICc8c3BhbiBjbGFzcz1cInNwYXJrLXRhYmxlX19yZXNpemUgc3BhcmstdGFibGVfX3Jlc2l6ZS0tbGVmdFwiPjwvc3Bhbj4nICsgdGguaW5uZXJIVE1MICsgJzxzcGFuIGNsYXNzPVwic3BhcmstdGFibGVfX3Jlc2l6ZSBzcGFyay10YWJsZV9fcmVzaXplLS1yaWdodFwiPjwvc3Bhbj4nO1xuICAgICAgdGhpcy5fcmVzaXplRWxzLnB1c2godGgpO1xuICAgIH0uYmluZCh0aGlzKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgcm93cyBhY3RpdmUgc3RhdGVzLlxuICAgKi9cblxuXG4gIFRhYmxlLnByb3RvdHlwZS5faW5pdFJvd3MgPSBmdW5jdGlvbiBfaW5pdFJvd3MoKSB7XG5cbiAgICAoMCwgX2VhY2gyLmRlZmF1bHQpKHRoaXMudGFibGVFbC5xdWVyeVNlbGVjdG9yQWxsKCd0ZC5zcGFyay10YWJsZV9fY2hlY2tib3ggaW5wdXQ6Y2hlY2tlZCcpLCBmdW5jdGlvbiAoYykge1xuICAgICAgdGhpcy5fbWFrZVJvd0FjdGl2ZSgoMCwgX2dldFBhcmVudDIuZGVmYXVsdCkoYywgJ3RyJykpO1xuICAgIH0uYmluZCh0aGlzKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgc2l6ZSBvZiBlYWNoIGNvbHVtbiBhcyBhIHBlcmNlbnRhZ2Ugc28gaXQgY2FuIGJlIGFkanVzdGVkXG4gICAqIHdoaWxlIGNlbGxzIGFyZSByZXNpemVkLlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdW5pdCBPcHRpb25hbFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGZvcmNlIE9wdGlvbmFsXG4gICAqL1xuXG5cbiAgVGFibGUucHJvdG90eXBlLl9zaXplQ29sdW1ucyA9IGZ1bmN0aW9uIF9zaXplQ29sdW1ucyh1bml0LCBmb3JjZSkge1xuXG4gICAgdW5pdCA9IHVuaXQgfHwgJyUnO1xuXG4gICAgaWYgKHRoaXMuX3NpemVDb2x1bW5zUnVuICYmICFmb3JjZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciB3aWR0aCA9IHRoaXMudGFibGVFbC5vZmZzZXRXaWR0aDtcblxuICAgICgwLCBfZWFjaDIuZGVmYXVsdCkodGhpcy50YWJsZUVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoZWFkIHRoJyksIGZ1bmN0aW9uICh0aCkge1xuICAgICAgaWYgKHVuaXQgPT09ICclJykgdGguc3R5bGUud2lkdGggPSBNYXRoLnJvdW5kKHRoLm9mZnNldFdpZHRoIC8gd2lkdGggKiAxMDAwMDApIC8gMTAwMDAwICogMTAwICsgJyUnO2Vsc2UgdGguc3R5bGUud2lkdGggPSB0aC5vZmZzZXRXaWR0aCArICdweCc7XG4gICAgfS5iaW5kKHRoaXMpKTtcblxuICAgIHRoaXMuX3NpemVDb2x1bW5zUnVuID0gdHJ1ZTtcbiAgfTtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBleHBhbmQvY29sbGFwc2Ugcm93cy5cbiAgICovXG5cblxuICBUYWJsZS5wcm90b3R5cGUuX2luaXRFeHBhbmRzID0gZnVuY3Rpb24gX2luaXRFeHBhbmRzKCkge1xuXG4gICAgdmFyIGV4cGFuZHMgPSB0aGlzLnRhYmxlRWwucXVlcnlTZWxlY3RvckFsbCgnLnNwYXJrLXRhYmxlLWV4cGFuZCcpO1xuXG4gICAgdGhpcy5fZXhwYW5kcyA9IFtdO1xuXG4gICAgKDAsIF9lYWNoMi5kZWZhdWx0KShleHBhbmRzLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fZXhwYW5kcy5wdXNoKG5ldyBfZXhwYW5kMi5kZWZhdWx0KGUsIHtcbiAgICAgICAgb25CZWZvcmVFeHBhbmQ6IHRoaXMuX29uQmVmb3JlRXhwYW5kLmJpbmQodGhpcylcbiAgICAgIH0pKTtcbiAgICB9LmJpbmQodGhpcykpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBCZWZvcmUgYW4gZXhwYW5kIGlzIGNhbGxlZCwgc2l6ZSBhbGwgdGhlIGNvbHVtbnMgc28gdGhhdFxuICAgKiB0aGUgZXhwYW5kIGRvZXMgY2F1c2Ugd2lkdGggY2hhbmdlcy5cbiAgICovXG5cblxuICBUYWJsZS5wcm90b3R5cGUuX29uQmVmb3JlRXhwYW5kID0gZnVuY3Rpb24gX29uQmVmb3JlRXhwYW5kKCkge1xuICAgIHRoaXMuX3NpemVDb2x1bW5zKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdoZW4gd2UgYXJlIGNsaWNrZWQgZGV0ZXJtaW5lIHRoZSBwcm9wZXIgYWN0aW9uIHRvIHRha2UuXG4gICAqIEBwYXJhbSAge09iamVjdH0gZVxuICAgKi9cblxuXG4gIFRhYmxlLnByb3RvdHlwZS5fb25DbGljayA9IGZ1bmN0aW9uIF9vbkNsaWNrKGUpIHtcblxuICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7XG4gICAgdmFyIHJvdztcbiAgICB2YXIgc2VsZWN0QWxsO1xuICAgIHZhciBhY3Rpb25UYWtlbiA9IGZhbHNlO1xuICAgIHZhciBjbGVhckNsaWNrZWQgPSB0cnVlO1xuXG4gICAgLy8gU2VsZWN0IGFsbCByb3dzIGNoZWNrYm94XG4gICAgaWYgKChzZWxlY3RBbGwgPSAoMCwgX2dldFBhcmVudDIuZGVmYXVsdCkodGFyZ2V0LCAnLnNwYXJrLXRhYmxlX19zZWxlY3QtYWxsJywgdGhpcy5lbCkpICYmICEoMCwgX21hdGNoZXMyLmRlZmF1bHQpKHRhcmdldCwgJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpKSB7XG4gICAgICB0aGlzLl90b2dnbGVTZWxlY3RBbGwoc2VsZWN0QWxsKTtcbiAgICAgIGFjdGlvblRha2VuID0gdHJ1ZTtcbiAgICB9XG4gICAgLy8gRWRpdGFibGUgZmllbGRcbiAgICBlbHNlIGlmICgoMCwgX21hdGNoZXMyLmRlZmF1bHQpKHRhcmdldCwgJ2lucHV0Om5vdChbdHlwZT1cImNoZWNrYm94XCJdKSwgc2VsZWN0JykpIHtcblxuICAgICAgICBpZiAoIXRhcmdldC5kaXNhYmxlZCkge1xuXG4gICAgICAgICAgLy8gTGlzdGVuIGZvciBkb3VibGUgY2xpY2tzIG9uIGEgc3ByZWFkc2hlZXRcbiAgICAgICAgICBpZiAodGhpcy5pc1NwcmVhZHNoZWV0KSB7XG4gICAgICAgICAgICBjbGVhckNsaWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jaGVja0RvdWJsZUNsaWNrKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgY2xlYXJDbGlja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgdGhpcy5fYWN0aXZhdGVJbnB1dCh0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGFjdGlvblRha2VuID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gRWRpdCBidXR0b25cbiAgICAgIGVsc2UgaWYgKCgwLCBfbWF0Y2hlczIuZGVmYXVsdCkodGFyZ2V0LCAnLnNwYXJrLXRhYmxlX19lZGl0LXJvdycpKSB7XG4gICAgICAgICAgdGhpcy5fZWRpdFJvdygoMCwgX2dldFBhcmVudDIuZGVmYXVsdCkodGFyZ2V0LCAndHInLCB0aGlzLmVsKSk7XG4gICAgICAgICAgYWN0aW9uVGFrZW4gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIERlbGV0ZSBidXR0b25cbiAgICAgICAgZWxzZSBpZiAoKDAsIF9tYXRjaGVzMi5kZWZhdWx0KSh0YXJnZXQsICcuc3BhcmstdGFibGVfX2RlbGV0ZS1yb3cnKSkge1xuICAgICAgICAgICAgdGhpcy5fY29uZmlybURlbGV0ZSgoMCwgX2dldFBhcmVudDIuZGVmYXVsdCkodGFyZ2V0LCAndHInLCB0aGlzLmVsKSk7XG4gICAgICAgICAgICBhY3Rpb25UYWtlbiA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFNhdmUgYnV0dG9uXG4gICAgICAgICAgZWxzZSBpZiAoKDAsIF9tYXRjaGVzMi5kZWZhdWx0KSh0YXJnZXQsICcuc3BhcmstdGFibGVfX2VkaXQtcm93LXNhdmUnKSkge1xuICAgICAgICAgICAgICB0aGlzLl9zYXZlUm93KCgwLCBfZ2V0UGFyZW50Mi5kZWZhdWx0KSh0YXJnZXQsICd0cicsIHRoaXMuZWwpKTtcbiAgICAgICAgICAgICAgYWN0aW9uVGFrZW4gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ2FuY2VsIGJ1dHRvblxuICAgICAgICAgICAgZWxzZSBpZiAoKDAsIF9tYXRjaGVzMi5kZWZhdWx0KSh0YXJnZXQsICcuc3BhcmstdGFibGVfX2VkaXQtcm93LWNhbmNlbCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FuY2VsUm93KCgwLCBfZ2V0UGFyZW50Mi5kZWZhdWx0KSh0YXJnZXQsICd0cicsIHRoaXMuZWwpKTtcbiAgICAgICAgICAgICAgICBhY3Rpb25UYWtlbiA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy8gU2VsZWN0IGEgcm93XG4gICAgICAgICAgICAgIGVsc2UgaWYgKCEoMCwgX2dldFBhcmVudDIuZGVmYXVsdCkodGFyZ2V0LCAnYnV0dG9uLCBhJywgdGhpcy5lbCkgJiYgISgwLCBfbWF0Y2hlczIuZGVmYXVsdCkodGFyZ2V0LCAnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJykgJiYgKHJvdyA9ICgwLCBfZ2V0UGFyZW50Mi5kZWZhdWx0KSh0YXJnZXQsICd0Ym9keSB0cicsIHRoaXMuZWwpKSkge1xuICAgICAgICAgICAgICAgICAgaWYgKCEocm93LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpIHx8IHt9KS5kaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVSb3dBY3RpdmUocm93KTtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uVGFrZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgIGlmIChjbGVhckNsaWNrZWQpIHtcbiAgICAgIHRoaXMuX2NsZWFyQ2xpY2tlZCgpO1xuICAgIH1cblxuICAgIGlmIChhY3Rpb25UYWtlbikge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogV2hlbiB0aGUgY2hhbmdlIGV2ZW50IGZpcmVzIG9uIG91ciBlbGVtZW50LlxuICAgKiBAcGFyYW0ge09iamVjdH0gZVxuICAgKi9cblxuXG4gIFRhYmxlLnByb3RvdHlwZS5fb25DaGFuZ2UgPSBmdW5jdGlvbiBfb25DaGFuZ2UoZSkge1xuXG4gICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcbiAgICB2YXIgcm93O1xuICAgIHZhciBzZWxlY3RBbGw7XG5cbiAgICAvLyBTZWxlY3QgYWxsIHJvd3MgY2hlY2tib3guIFdlIGhhdmUgdG8gaW52ZXJ0IHRoZSBjaGVja2VkIHZhbHVlIGhlcmUgYmVjYXVzZSBpdFxuICAgIC8vIGdldCB0b2dnbGVkIGJhY2sgaW4gdGhlIHNlbGVjdCBhbGwgY2FsbC5cbiAgICBpZiAoc2VsZWN0QWxsID0gKDAsIF9nZXRQYXJlbnQyLmRlZmF1bHQpKHRhcmdldCwgJy5zcGFyay10YWJsZV9fc2VsZWN0LWFsbCcsIHRoaXMuZWwpKSB7XG4gICAgICB0YXJnZXQuY2hlY2tlZCA9ICF0YXJnZXQuY2hlY2tlZDtcbiAgICAgIHRoaXMuX3RvZ2dsZVNlbGVjdEFsbChzZWxlY3RBbGwpO1xuICAgIH1cbiAgICAvLyBDaGVja2JveCBmb3IgYSByb3dcbiAgICBlbHNlIGlmICgoMCwgX21hdGNoZXMyLmRlZmF1bHQpKHRhcmdldCwgJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpICYmIChyb3cgPSAoMCwgX2dldFBhcmVudDIuZGVmYXVsdCkodGFyZ2V0LCAndGJvZHkgdHInLCB0aGlzLmVsKSkpIHtcbiAgICAgICAgdGhpcy5fdG9nZ2xlUm93QWN0aXZlKHJvdyk7XG4gICAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIElmIHRoaXMgaXMgYSBzcHJlYWRzaGVldCwgd2hlbmV2ZXIgYSBmaWVsZCBnYWlucyBmb2N1cywgaGlnaGxpZ2h0IGl0cyBwYXJlbnQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlXG4gICAqL1xuXG5cbiAgVGFibGUucHJvdG90eXBlLl9vbkZvY3VzID0gZnVuY3Rpb24gX29uRm9jdXMoZSkge1xuXG4gICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcblxuICAgIGlmICghdGhpcy5pc1NwcmVhZHNoZWV0IHx8ICEoMCwgX21hdGNoZXMyLmRlZmF1bHQpKHRhcmdldCwgJ2lucHV0Om5vdChbdHlwZT1cImNoZWNrYm94XCJdKSwgc2VsZWN0JykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgdGQgPSAoMCwgX2dldFBhcmVudDIuZGVmYXVsdCkodGFyZ2V0LCAndGQnLCB0aGlzLmVsKTtcbiAgICAoMCwgX2FkZENsYXNzMi5kZWZhdWx0KSh0ZCwgJ2ZvY3VzJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIElmIHRoaXMgaXMgYSBzcHJlYWRzaGVldCwgd2hlbmV2ZXIgYSBmaWVsZCBnYWlucyBmb2N1cywgaGlnaGxpZ2h0IGl0cyBwYXJlbnQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlXG4gICAqL1xuXG5cbiAgVGFibGUucHJvdG90eXBlLl9vbkJsdXIgPSBmdW5jdGlvbiBfb25CbHVyKGUpIHtcblxuICAgIGlmICghdGhpcy5pc1NwcmVhZHNoZWV0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcbiAgICB2YXIgdGQgPSAoMCwgX2dldFBhcmVudDIuZGVmYXVsdCkodGFyZ2V0LCAndGQnLCB0aGlzLmVsKTtcbiAgICAoMCwgX3JlbW92ZUNsYXNzMi5kZWZhdWx0KSh0ZCwgJ2ZvY3VzJyk7XG4gICAgdGhpcy5fZGVhY3RpdmF0ZUlucHV0KHRhcmdldCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdoZW4gYSBrZXkgaXMgcHJlc3NlZCwgaWYgdGhpcyBpcyBhIHNwcmVhZHNoZWV0IHRoZW4gd2Ugc2hvdWxkIGRldGVjdFxuICAgKiBlbnRlciBvciBhcnJvdyBrZXlzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZVxuICAgKi9cblxuXG4gIFRhYmxlLnByb3RvdHlwZS5fb25LZXlkb3duID0gZnVuY3Rpb24gX29uS2V5ZG93bihlKSB7XG5cbiAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50O1xuXG4gICAgaWYgKCF0aGlzLmlzU3ByZWFkc2hlZXQgfHwgISgwLCBfbWF0Y2hlczIuZGVmYXVsdCkodGFyZ2V0LCAnaW5wdXQ6bm90KFt0eXBlPVwiY2hlY2tib3hcIl0pLCBzZWxlY3QnKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBjb2RlID0gZS5rZXlDb2RlIHx8IGUud2hpY2g7XG5cbiAgICBzd2l0Y2ggKGNvZGUpIHtcbiAgICAgIGNhc2UgdGhpcy5fa2V5Q29kZXMuRU5URVI6XG4gICAgICAgIHRoaXMuX2FjdGl2YXRlSW5wdXRPckZvY3VzRG93bih0YXJnZXQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdGhpcy5fa2V5Q29kZXMuRVNDQVBFOlxuICAgICAgICB0aGlzLl9kZWFjdGl2YXRlSW5wdXQodGFyZ2V0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHRoaXMuX2tleUNvZGVzLkRPV046XG4gICAgICAgIHRoaXMuX2ZvY3VzRG93bih0YXJnZXQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdGhpcy5fa2V5Q29kZXMuVVA6XG4gICAgICAgIHRoaXMuX2ZvY3VzVXAodGFyZ2V0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHRoaXMuX2tleUNvZGVzLkxFRlQ6XG4gICAgICAgIHRoaXMuX2ZvY3VzTGVmdCh0YXJnZXQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdGhpcy5fa2V5Q29kZXMuUklHSFQ6XG4gICAgICAgIHRoaXMuX2ZvY3VzUmlnaHQodGFyZ2V0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBMaXN0ZW4gZm9yIGEgdG91Y2ggYW5kIGhvbGQgb24gYW4gaW5wdXQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlXG4gICAqL1xuXG5cbiAgVGFibGUucHJvdG90eXBlLl9vblRvdWNoc3RhcnQgPSBmdW5jdGlvbiBfb25Ub3VjaHN0YXJ0KGUpIHtcblxuICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7XG5cbiAgICBpZiAoIXRoaXMuaXNTcHJlYWRzaGVldCB8fCAhKDAsIF9tYXRjaGVzMi5kZWZhdWx0KSh0YXJnZXQsICdpbnB1dDpub3QoW3R5cGU9XCJjaGVja2JveFwiXSknKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3RvdWNoU3RhcnRFbCA9IHRhcmdldDtcbiAgICB0aGlzLl90b3VjaFN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgdGhpcy5fdG91Y2hTdGFydFRpbWVyID0gc2V0VGltZW91dCh0aGlzLl9vblRvdWNoSG9sZC5iaW5kKHRoaXMpLCAxMDAwKTtcbiAgfTtcblxuICAvKipcbiAgICogTGlzdGVuIGZvciB0aGUgZW5kIG9mIGEgdG91Y2ggdG8gY2FuY2VsIHRoZSBob2xkIHRpbWVyLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZVxuICAgKi9cblxuXG4gIFRhYmxlLnByb3RvdHlwZS5fb25Ub3VjaGVuZCA9IGZ1bmN0aW9uIF9vblRvdWNoZW5kKGUpIHtcblxuICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7XG5cbiAgICBpZiAoIXRoaXMuX3RvdWNoU3RhcnRFbCB8fCB0YXJnZXQgIT09IHRoaXMuX3RvdWNoU3RhcnRFbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3RvdWNoU3RhcnRFbCA9IG51bGw7XG4gICAgdGhpcy5fdG91Y2hTdGFydFRpbWUgPSBudWxsO1xuICAgIGNsZWFyVGltZW91dCh0aGlzLl90b3VjaFN0YXJ0VGltZXIpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSB1c2VyIGhhcyBoZWxkIG9uIGFuIGlucHV0IGZvciB0aGUgZGVmaW5lZCBhbW91bnQgb2YgdGltZS5cbiAgICovXG5cblxuICBUYWJsZS5wcm90b3R5cGUuX29uVG91Y2hIb2xkID0gZnVuY3Rpb24gX29uVG91Y2hIb2xkKCkge1xuXG4gICAgdGhpcy5fYWN0aXZhdGVJbnB1dCh0aGlzLl90b3VjaFN0YXJ0RWwpO1xuXG4gICAgdGhpcy5fdG91Y2hTdGFydEVsID0gbnVsbDtcbiAgICB0aGlzLl90b3VjaFN0YXJ0VGltZSA9IG51bGw7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RvdWNoU3RhcnRUaW1lcik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIG1vdXNlIGlzIGRlcHJlc3NlZC5cbiAgICogQHBhcmFtIHtPYmplY3R9IGVcbiAgICovXG5cblxuICBUYWJsZS5wcm90b3R5cGUuX29uTW91c2VEb3duID0gZnVuY3Rpb24gX29uTW91c2VEb3duKGUpIHtcblxuICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7XG5cbiAgICBpZiAoIXRoaXMuaXNSZXNpemFibGUgfHwgISgwLCBfbWF0Y2hlczIuZGVmYXVsdCkodGFyZ2V0LCAnLnNwYXJrLXRhYmxlX19yZXNpemUnKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIHRoaXMuX2xhc3RTY3JlZW5YID0gZS5zY3JlZW5YO1xuXG4gICAgdGhpcy5fc2l6ZUNvbHVtbnMoJ3B4JywgdHJ1ZSk7XG5cbiAgICB0aGlzLl9yZXNpemluZ0VsID0gdGFyZ2V0LnBhcmVudE5vZGU7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5fcmVzaXplRWxzLmluZGV4T2YodGhpcy5fcmVzaXppbmdFbCk7XG5cbiAgICBpZiAoKDAsIF9oYXNDbGFzczIuZGVmYXVsdCkodGFyZ2V0LCAnc3BhcmstdGFibGVfX3Jlc2l6ZS0tbGVmdCcpKSB7XG4gICAgICB0aGlzLl9yZXNpemluZ0VsID0gdGhpcy5fcmVzaXplRWxzW2luZGV4IC0gMV07XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9yZXNpemluZ0VsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fYWRkUmVzaXplTGlzdGVuZXJzKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIG1vdXNlIG1vdmVzIGFmdGVyIGJlaW5nIGRlcHJlc3NlZCwgcmVzaXplIHRoZSBjb2x1bW5zLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZVxuICAgKi9cblxuXG4gIFRhYmxlLnByb3RvdHlwZS5fb25Nb3VzZU1vdmUgPSBmdW5jdGlvbiBfb25Nb3VzZU1vdmUoZSkge1xuXG4gICAgdmFyIHggPSBlLnNjcmVlblg7XG4gICAgdmFyIGQgPSB4IC0gdGhpcy5fbGFzdFNjcmVlblg7XG5cbiAgICAvLyBObyBkZWx0YSBjaGFuZ2VcbiAgICBpZiAoIWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB2YXIgdyA9IHRoaXMuX3Jlc2l6aW5nRWwub2Zmc2V0V2lkdGg7XG4gICAgdmFyIHRXID0gdGhpcy50YWJsZUVsLm9mZnNldFdpZHRoO1xuICAgIHZhciBuZXdXID0gdyArIGQ7XG4gICAgdmFyIG5ld1RXID0gdFcgKyBkO1xuXG4gICAgdGhpcy5fcmVzaXppbmdFbC5zdHlsZS53aWR0aCA9IG5ld1cgKyAncHgnO1xuICAgIHRoaXMudGFibGVFbC5zdHlsZS53aWR0aCA9IG5ld1RXICsgJ3B4JztcblxuICAgIC8vIFNpemUgd2FzIG5vdCBhZmZlY3RlZCBiZWNhdXNlIHdlJ3JlIHRvbyBzbWFsbFxuICAgIGlmICh0aGlzLl9yZXNpemluZ0VsLm9mZnNldFdpZHRoID09PSB3IHx8IHRoaXMudGFibGVFbC5vZmZzZXRXaWR0aCA8IHRoaXMudGFibGVFbC5wYXJlbnROb2RlLm9mZnNldFdpZHRoKSB7XG4gICAgICB0aGlzLl9yZXNpemluZ0VsLnN0eWxlLndpZHRoID0gdyArICdweCc7XG4gICAgICB0aGlzLnRhYmxlRWwuc3R5bGUud2lkdGggPSB0VyArICdweCc7XG4gICAgfVxuXG4gICAgdGhpcy5fbGFzdFNjcmVlblggPSB4O1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSBtb3VzZSBpcyByZWxlYXNlZCwgc3RvcCB0cmFja2luZyBtb3VzZSBtb3ZlIGV2ZW50cyBhbmRcbiAgICogY29udmVydCB0YWJsZSBzaXplcyB0byBwZXJjZW50YWdlcy5cbiAgICogQHBhcmFtIHtPYmplY3R9IGVcbiAgICovXG5cblxuICBUYWJsZS5wcm90b3R5cGUuX29uTW91c2VVcCA9IGZ1bmN0aW9uIF9vbk1vdXNlVXAoKSB7XG4gICAgdGhpcy5fc2l6ZUNvbHVtbnMoJyUnLCB0cnVlKTtcbiAgICB0aGlzLnRhYmxlRWwuc3R5bGUud2lkdGggPSB0aGlzLnRhYmxlRWwub2Zmc2V0V2lkdGggLyB0aGlzLnRhYmxlRWwucGFyZW50Tm9kZS5vZmZzZXRXaWR0aCAqIDEwMCArICclJztcbiAgICB0aGlzLl9yZW1vdmVSZXNpemVMaXN0ZW5lcnMoKTtcbiAgfTtcblxuICByZXR1cm4gVGFibGU7XG59KF9iYXNlMi5kZWZhdWx0KTtcblxuLyoqXG4gKiBXaGl0ZWxpc3RlZCBwYXJhbWV0ZXJzIHdoaWNoIGNhbiBiZSBzZXQgb24gY29uc3RydWN0aW9uLlxuICogQHR5cGUge0FycmF5fVxuICovXG5cblxuVGFibGUucHJvdG90eXBlLl93aGl0ZWxpc3RlZFBhcmFtcyA9IFsnaXNTcHJlYWRzaGVldCcsICdpc0VkaXRSb3dzJywgJ2lzUmVzaXphYmxlJywgJ2NvbmZpcm1EZWxldGUnLCAnb25Sb3dTYXZlJywgJ29uUm93RGVsZXRlJ107XG5cbi8qKlxuICogRGVmYXVsdCB2YWx1ZXMgZm9yIGludGVybmFsIHByb3BlcnRpZXMgd2Ugd2lsbCBiZSBzZXR0aW5nLlxuICogVGhlc2UgYXJlIHNldCBvbiBlYWNoIGNvbnN0cnVjdGlvbiBzbyB3ZSBkb24ndCBsZWFrIHByb3BlcnRpZXNcbiAqIGludG8gdGhlIHByb3RvdHlwZSBjaGFpbi5cbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cblRhYmxlLnByb3RvdHlwZS5kZWZhdWx0cyA9IHtcbiAgZWw6IG51bGwsXG4gIHRhYmxlRWw6IG51bGwsXG4gIGlzU3ByZWFkc2hlZXQ6IG51bGwsXG4gIGlzRWRpdFJvd3M6IG51bGwsXG4gIGlzUmVzaXphYmxlOiBudWxsLFxuICBvblJvd1NhdmU6IG51bGwsXG4gIG9uUm93RGVsZXRlOiBudWxsLFxuICBjb25maXJtRGVsZXRlOiBudWxsLFxuICBfZXhwYW5kczogbnVsbCxcbiAgX2tleUNvZGVzOiB7XG4gICAgRU5URVI6IDEzLFxuICAgIFVQOiAzOCxcbiAgICBET1dOOiA0MCxcbiAgICBMRUZUOiAzNyxcbiAgICBSSUdIVDogMzksXG4gICAgRVNDQVBFOiAyN1xuICB9LFxuICBfZWRpdGluZ0NvdW50OiAwLFxuICBfbGFzdENsaWNrVGltZTogMCxcbiAgX2xhc3RDbGlja0VsOiBudWxsLFxuICBfbGFzdFNjcmVlblg6IDAsXG4gIF90b3VjaFN0YXJ0VGltZTogMCxcbiAgX3RvdWNoU3RhcnRFbDogbnVsbCxcbiAgX3Jlc2l6ZUVsczogbnVsbCxcbiAgX3Jlc2l6aW5nRWw6IG51bGwsXG4gIF9zaXplQ29sdW1uc1J1bjogZmFsc2UsXG4gIF9vbkNsaWNrQm91bmQ6IG51bGwsXG4gIF9vbkNoYW5nZUJvdW5kOiBudWxsLFxuICBfb25Gb2N1c0JvdW5kOiBudWxsLFxuICBfb25CbHVyQm91bmQ6IG51bGwsXG4gIF9vbktleWRvd25Cb3VuZDogbnVsbCxcbiAgX29uVG91Y2hzdGFydEJvdW5kOiBudWxsLFxuICBfb25Ub3VjaGVuZEJvdW5kOiBudWxsLFxuICBfb25Nb3VzZURvd25Cb3VuZDogbnVsbCxcbiAgX29uTW91c2VNb3ZlQm91bmQ6IG51bGwsXG4gIF9vbk1vdXNlVXBCb3VuZDogbnVsbFxufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gVGFibGU7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRhYmxlLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX291dGVySGVpZ2h0ID0gcmVxdWlyZSgnLi4vZG9tL291dGVyLWhlaWdodCcpO1xuXG52YXIgX291dGVySGVpZ2h0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX291dGVySGVpZ2h0KTtcblxudmFyIF9hZGRDbGFzcyA9IHJlcXVpcmUoJy4uL2RvbS9hZGQtY2xhc3MnKTtcblxudmFyIF9hZGRDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hZGRDbGFzcyk7XG5cbnZhciBfcmVtb3ZlQ2xhc3MgPSByZXF1aXJlKCcuLi9kb20vcmVtb3ZlLWNsYXNzJyk7XG5cbnZhciBfcmVtb3ZlQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVtb3ZlQ2xhc3MpO1xuXG52YXIgX2hhc0NsYXNzID0gcmVxdWlyZSgnLi4vZG9tL2hhcy1jbGFzcycpO1xuXG52YXIgX2hhc0NsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hhc0NsYXNzKTtcblxudmFyIF90b2dnbGVDbGFzcyA9IHJlcXVpcmUoJy4uL2RvbS90b2dnbGUtY2xhc3MnKTtcblxudmFyIF90b2dnbGVDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90b2dnbGVDbGFzcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBub29wID0gZnVuY3Rpb24gbm9vcCgpIHt9OyAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAjIEFuaW1hdGUgSGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQW5pbWF0ZSB0aGUgaGVpZ2h0IG9mIGFuIGVsZW1lbnQgc2luY2Ugd2UgY2FuJ3QgZG8gdGhpcyB3LyBwdXJlIENTUy4gU2lnaC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogYW5pbWF0ZUhlaWdodCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogICBlbDogLi4uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgdG9nZ2xlRWw6IC4uLixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAgIC8vIE9wdGlvbmFsIHBhcmFtc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgYWN0aW9uOiAnY29sbGFwc2UnfCdleHBhbmQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgaGVpZ2h0QW5pbWF0aW9uQ2xhc3M6ICdzcGFyay1hbmltYXRlLWhlaWdodCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogICBvcGFjaXR5QW5pbWF0aW9uQ2xhc3M6ICdzcGFyay1hbmltYXRlLW9wYWNpdHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgdG9nZ2xlUHJvcGVydHk6ICdkaXNwbGF5J3wnb3ZlcmZsb3cnfCd2aXNpYmlsaXR5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAgIHRvZ2dsZVZhbHVlOiAnYmxvY2snfCdub25lJ3wndmlzaWJsZSd8J2hpZGRlbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogICBhbmltYXRpb25EdXJhdGlvbjogMjUwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAbW9kdWxlIGhlbHBlcnMvYW5pbWF0aW9uL2hlaWdodC5qc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuXG52YXIgcnVubmluZ0FuaW1hdGlvbnMgPSB7XG4gIGVsczogW10sXG4gIGNvbXBsZXRlQ2FsbGJhY2tzOiBbXVxufTtcblxuLyoqXG4gKiBHZXQgdGhlIGludmVyc2UgdG9nZ2xlIHZhbHVlXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHByb3BlcnR5XG4gKiBAcGFyYW0gIHtTdHJpbmd9IG9yaWdpbmFsVmFsdWVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZ2V0SW52ZXJzZVRvZ2dsZVZhbHVlKGVsLCBwcm9wZXJ0eSwgb3JpZ2luYWxWYWx1ZSkge1xuXG4gIC8vIEdldCB0aGUgdmFsdWUgdG8gdG9nZ2xlIHRvIGZvciB0aGUgZ2l2ZW4gcHJvcGVydHlcbiAgc3dpdGNoIChwcm9wZXJ0eSkge1xuICAgIGNhc2UgJ292ZXJmbG93JzpcbiAgICBjYXNlICd2aXNpYmlsaXR5JzpcbiAgICAgIHJldHVybiBvcmlnaW5hbFZhbHVlID09PSAndmlzaWJsZScgPyAnaGlkZGVuJyA6ICd2aXNpYmxlJztcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG9yaWdpbmFsVmFsdWUgPT09ICdibG9jaycgfHwgb3JpZ2luYWxWYWx1ZSA9PT0gJ2lubGluZS1ibG9jaycgPyAnbm9uZScgOiAnYmxvY2snO1xuICB9XG59XG5cbi8qKlxuICogV2hlbiBhbiBhbmltYXRpb24gaXMgY29tcGxldGUsIGNsZWFuIHVwIGFuZCBydW4gdGhlIGNhbGxiYWNrLlxuICogQHBhcmFtICB7T2JqZWN0fSBwYXJhbXNcbiAqL1xuZnVuY3Rpb24gb25Db21wbGV0ZShwYXJhbXMpIHtcblxuICAvLyBSZXNldCB0b2dnbGUgZWwgdmlzaWJpbGl0eVxuICBpZiAocGFyYW1zLnRvZ2dsZUNsYXNzTmFtZSkge1xuICAgICgwLCBfdG9nZ2xlQ2xhc3MyLmRlZmF1bHQpKHBhcmFtcy5lbCwgcGFyYW1zLnRvZ2dsZUNsYXNzTmFtZSwgIXBhcmFtcy5jb2xsYXBzZSk7XG4gIH0gZWxzZSB7XG4gICAgcGFyYW1zLnRvZ2dsZUVsLnN0eWxlW3BhcmFtcy50b2dnbGVQcm9wZXJ0eV0gPSAnJztcbiAgfVxuXG4gIC8vIFJlbW92ZSB0aGUgaGVpZ2h0IHByb3BlcnR5XG4gIHBhcmFtcy5lbC5zdHlsZS5oZWlnaHQgPSAnJztcbiAgcGFyYW1zLnRvZ2dsZUVsLnN0eWxlLmhlaWdodCA9ICcnO1xuICBwYXJhbXMudG9nZ2xlRWwuc3R5bGUubWFyZ2luQm90dG9tID0gJyc7XG4gIHBhcmFtcy50b2dnbGVFbC5zdHlsZS5tYXJnaW5Ub3AgPSAnJztcblxuICAvLyBSZW1vdmUgdGhlIHNwYXJrLWFuaW1hdGUtaGVpZ2h0IGNsYXNzIHNvIHRoZSB0cmFuc2l0aW9ucyBubyBsb25nZXIgYXBwbHlcbiAgKDAsIF9yZW1vdmVDbGFzczIuZGVmYXVsdCkocGFyYW1zLmVsLCBwYXJhbXMuaGVpZ2h0QW5pbWF0aW9uQ2xhc3MpO1xuICAoMCwgX3JlbW92ZUNsYXNzMi5kZWZhdWx0KShwYXJhbXMudG9nZ2xlRWwsIHBhcmFtcy5oZWlnaHRBbmltYXRpb25DbGFzcyk7XG5cbiAgLy8gUnVuIHRoZSBjYWxsYmFja1xuICBwYXJhbXMub25Db21wbGV0ZSgpO1xuXG4gIC8vIFJlbW92ZSB0aGUgZWxlbWVudCBhbmQgY2FsbGJhY2sgZnJvbSB0aGVpciByZXNwZWN0aXZlIGFycmF5c1xuICB2YXIgcnVubmluZ0luZGV4ID0gcnVubmluZ0FuaW1hdGlvbnMuZWxzLmluZGV4T2YocGFyYW1zLmVsKTtcbiAgcnVubmluZ0FuaW1hdGlvbnMuZWxzLnNwbGljZShydW5uaW5nSW5kZXgsIDEpO1xuICBydW5uaW5nQW5pbWF0aW9ucy5jb21wbGV0ZUNhbGxiYWNrcy5zcGxpY2UocnVubmluZ0luZGV4LCAxKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zXG4gKi9cbmZ1bmN0aW9uIGFuaW1hdGVIZWlnaHQocGFyYW1zKSB7XG5cbiAgcGFyYW1zID0gcGFyYW1zIHx8IHt9O1xuXG4gIHZhciBlbCA9IHBhcmFtcy5lbDtcblxuICBpZiAoIWVsKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGNvbGxhcHNlID0gcGFyYW1zLmFjdGlvbiAmJiBwYXJhbXMuYWN0aW9uID09PSAnY29sbGFwc2UnO1xuICB2YXIgaGVpZ2h0QW5pbWF0aW9uQ2xhc3MgPSBwYXJhbXMuaGVpZ2h0QW5pbWF0aW9uQ2xhc3MgfHwgJ3NwYXJrLWFuaW1hdGUtaGVpZ2h0JztcblxuICAvLyBBbGxvdyBmb3IgZWxlbWVudHMgdG8gYmUgcGFzc2VkIG9yIHNlbGVjdG9yIHN0cmluZ3NcbiAgdmFyIHRvZ2dsZUVsID0gdHlwZW9mIHBhcmFtcy50b2dnbGVFbCA9PT0gJ3N0cmluZycgPyBlbC5xdWVyeVNlbGVjdG9yKHBhcmFtcy50b2dnbGVFbCkgOiBwYXJhbXMudG9nZ2xlRWw7XG5cbiAgLy8gTm8gZWxlbWVudCB0byBiZSBzd2l0Y2hpbmcgd2l0aCB0b2dnbGluZyBzbyB3ZSBjYW4ndCBkZXRlcm1pbmUgdGhlIGRlc2lyZWQgaGVpZ2h0IHRvIGFuaW1hdGUgdG8uXG4gIGlmICghdG9nZ2xlRWwgfHwgKDAsIF9oYXNDbGFzczIuZGVmYXVsdCkoZWwsICdzcGFyay1uby1hbmltYXRlJykpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgdG9nZ2xlQ2xhc3NOYW1lID0gcGFyYW1zLnRvZ2dsZUNsYXNzO1xuXG4gIC8vIFRoZSBzdHlsZSBwcm9wZXJ0eSB0byB1c2Ugd2hlbiB0b2dnbGluZyB2aXNpYmlsaXR5XG4gIHZhciB0b2dnbGVQcm9wZXJ0eSA9IHBhcmFtcy50b2dnbGVQcm9wZXJ0eSB8fCAnZGlzcGxheSc7XG4gIHZhciB0b2dnbGVTdHlsZXMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0b2dnbGVFbCk7XG4gIHZhciBvcmlnaW5hbFRvZ2dsZVZhbHVlID0gdG9nZ2xlU3R5bGVzW3RvZ2dsZVByb3BlcnR5XTtcbiAgdmFyIHRvZ2dsZVZhbHVlID0gcGFyYW1zLnRvZ2dsZVZhbHVlIHx8IGdldEludmVyc2VUb2dnbGVWYWx1ZSh0b2dnbGVQcm9wZXJ0eSwgb3JpZ2luYWxUb2dnbGVWYWx1ZSk7XG5cbiAgLy8gSWYgd2UgYXJlIGFscmVhZHkgYW5pbWF0aW5nLCBzdG9wIG5vdy5cbiAgdmFyIHJ1bm5pbmdJbmRleCA9IHJ1bm5pbmdBbmltYXRpb25zLmVscy5pbmRleE9mKGVsKTtcbiAgaWYgKHJ1bm5pbmdJbmRleCAhPT0gLTEpIHtcblxuICAgIHZhciBjb21wbGV0ZUNhbGxiYWNrID0gcnVubmluZ0FuaW1hdGlvbnMuY29tcGxldGVDYWxsYmFja3NbcnVubmluZ0luZGV4XTtcbiAgICBpZiAoY29tcGxldGVDYWxsYmFjaykge1xuICAgICAgY2xlYXJUaW1lb3V0KGNvbXBsZXRlQ2FsbGJhY2spO1xuICAgIH1cblxuICAgIG9uQ29tcGxldGUoe1xuICAgICAgZWw6IGVsLFxuICAgICAgdG9nZ2xlRWw6IHRvZ2dsZUVsLFxuICAgICAgb25Db21wbGV0ZTogcGFyYW1zLm9uQ29tcGxldGUgfHwgbm9vcCxcbiAgICAgIGNvbGxhcHNlOiBjb2xsYXBzZSxcbiAgICAgIHRvZ2dsZVByb3BlcnR5OiB0b2dnbGVQcm9wZXJ0eSxcbiAgICAgIHRvZ2dsZUNsYXNzTmFtZTogdG9nZ2xlQ2xhc3NOYW1lLFxuICAgICAgdG9nZ2xlVmFsdWU6IHRvZ2dsZVZhbHVlLFxuICAgICAgaGVpZ2h0QW5pbWF0aW9uQ2xhc3M6IGhlaWdodEFuaW1hdGlvbkNsYXNzXG4gICAgfSk7XG4gIH1cblxuICAvLyBTdG9yZSB0aGUgY3VycmVudCBoZWlnaHRcbiAgdmFyIG9yaWdpbmFsSGVpZ2h0ID0gKDAsIF9vdXRlckhlaWdodDIuZGVmYXVsdCkoZWwpO1xuXG4gIC8vIFRvZ2dsZSB0aGUgdmlzaWJsZSBwcm9wZXJ0eVxuICBpZiAodG9nZ2xlQ2xhc3NOYW1lKSB7XG4gICAgKDAsIF90b2dnbGVDbGFzczIuZGVmYXVsdCkoZWwsIHRvZ2dsZUNsYXNzTmFtZSwgIWNvbGxhcHNlKTtcbiAgfSBlbHNlIHtcbiAgICB0b2dnbGVFbC5zdHlsZVt0b2dnbGVQcm9wZXJ0eV0gPSB0b2dnbGVWYWx1ZTtcbiAgfVxuXG4gIC8vIFdoZW4gbWVhc3VyaW5nIHRoZSBzaXplIGZvciBhIGNvbGxhcHNlLCB3ZSBoYXZlIHRvIHdhaXQgYSB0aWMgZm9yIGl0IHRvIGJlXG4gIC8vIGFjY3VyYXRlLiBOb3Qgc3VyZSB3aHkuIFVnaC5cbiAgaWYgKGNvbGxhcHNlKSB7XG4gICAgc2V0VGltZW91dChydW5BbmltYXRpb24sIDApO1xuICB9IGVsc2Uge1xuICAgIHJ1bkFuaW1hdGlvbigpO1xuICB9XG5cbiAgZnVuY3Rpb24gcnVuQW5pbWF0aW9uKCkge1xuXG4gICAgLy8gTm93IHRoYXQgdGhlIHRvZ2dsZSBlbCBpcyB0YWtpbmcgdXAgc3BhY2UsIGdldCB0aGUgbmV3IGhlaWdodCB3aGljaCB3ZSB3aWxsIGJlIGFuaW1hdGluZyB0b1xuICAgIHZhciB0YXJnZXRFbEhlaWdodCA9ICgwLCBfb3V0ZXJIZWlnaHQyLmRlZmF1bHQpKGVsKTtcblxuICAgIC8vIFdlIG5lZWQgdG8gc3RvcmUgdGhlIG9yaWdpbmFsIGFuZCB0YXJnZXQgdG9nZ2xlIGVsZW1lbnQgaGVpZ2h0cy4gVGhleSBkaWZmZXIgZGVwZW5kaW5nIG9uXG4gICAgLy8gd2hldGhlciB3ZSBhcmUgZ29pbmcgdG8gZXhwYW5kIG9yIGNvbGxhcHNlLlxuICAgIHZhciB0YXJnZXRUb2dnbGVFbEhlaWdodCA9IHZvaWQgMDtcbiAgICB2YXIgb3JpZ2luYWxUb2dnbGVFbEhlaWdodCA9IHZvaWQgMDtcblxuICAgIC8vIElmIHdlIGFyZSBjb2xsYXBzaW5nLCByZXNldCB0aGUgdG9nZ2xlIHN0eWxlIGFuZCBzZXQgaXQgd2hlbiB3ZSdyZSBkb25lLiBTZXQgdGhlIGhlaWdodCBzb1xuICAgIC8vIHRoYXQgd2UgY2FuIGFuaW1hdGUgZG93biB0byAwIG9yIHVwIHRvIHRoZSB0YXJnZXQgaGVpZ2h0LlxuICAgIGlmIChjb2xsYXBzZSkge1xuXG4gICAgICBpZiAodG9nZ2xlQ2xhc3NOYW1lKSB7XG4gICAgICAgICgwLCBfcmVtb3ZlQ2xhc3MyLmRlZmF1bHQpKGVsLCB0b2dnbGVDbGFzc05hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9nZ2xlRWwuc3R5bGVbdG9nZ2xlUHJvcGVydHldID0gb3JpZ2luYWxUb2dnbGVWYWx1ZTtcbiAgICAgIH1cblxuICAgICAgb3JpZ2luYWxUb2dnbGVFbEhlaWdodCA9ICgwLCBfb3V0ZXJIZWlnaHQyLmRlZmF1bHQpKHRvZ2dsZUVsLCB0b2dnbGVTdHlsZXMpO1xuICAgICAgdGFyZ2V0VG9nZ2xlRWxIZWlnaHQgPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXRUb2dnbGVFbEhlaWdodCA9ICgwLCBfb3V0ZXJIZWlnaHQyLmRlZmF1bHQpKHRvZ2dsZUVsLCB0b2dnbGVTdHlsZXMpO1xuICAgICAgb3JpZ2luYWxUb2dnbGVFbEhlaWdodCA9IDA7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBvcmlnaW5hbCBoZWlnaHRcbiAgICBlbC5zdHlsZS5oZWlnaHQgPSBvcmlnaW5hbEhlaWdodCArICdweCc7XG4gICAgdG9nZ2xlRWwuc3R5bGUuaGVpZ2h0ID0gb3JpZ2luYWxUb2dnbGVFbEhlaWdodCArICdweCc7XG4gICAgdG9nZ2xlRWwuc3R5bGUubWFyZ2luQm90dG9tID0gJzBweCc7XG4gICAgdG9nZ2xlRWwuc3R5bGUubWFyZ2luVG9wID0gJzBweCc7XG5cbiAgICAvLyBBZGQgdGhlIHNwYXJrLWFuaW1hdGUtaGVpZ2h0IGNsYXNzIHdoaWNoIHdpbGwgc2V0dXAgdGhlIHRyYW5zaXRpb24tcHJvcGVydHkgYW5kIGR1cmF0aW9uXG4gICAgKDAsIF9hZGRDbGFzczIuZGVmYXVsdCkoZWwsIGhlaWdodEFuaW1hdGlvbkNsYXNzKTtcbiAgICAoMCwgX2FkZENsYXNzMi5kZWZhdWx0KSh0b2dnbGVFbCwgaGVpZ2h0QW5pbWF0aW9uQ2xhc3MpO1xuXG4gICAgcnVubmluZ0FuaW1hdGlvbnMuZWxzLnB1c2goZWwpO1xuXG4gICAgLy8gV2UgbmVlZCB0byB3YWl0IGEgdGljayB0byB0b2dnbGUgdGhlIGhlaWdodCBvciBlbHNlIHRoZSBhbmltYXRpb24gY2xhc3Mgd29uJ3QgZnVuY3Rpb25cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblxuICAgICAgLy8gU2V0IHRoZSBoZWlnaHQgdG8gdGhlIHRhcmdldCBoZWlnaHRcbiAgICAgIGVsLnN0eWxlLmhlaWdodCA9IHRhcmdldEVsSGVpZ2h0ICsgJ3B4JztcbiAgICAgIHRvZ2dsZUVsLnN0eWxlLmhlaWdodCA9IHRhcmdldFRvZ2dsZUVsSGVpZ2h0ICsgJ3B4JztcblxuICAgICAgLy8gUmVtb3ZlIGlubGluZSBzdHlsZXMgYWZ0ZXIgdGhlIGFuaW1hdGlvbiBpcyBjb21wbGV0ZVxuICAgICAgcnVubmluZ0FuaW1hdGlvbnMuY29tcGxldGVDYWxsYmFja3MucHVzaChzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgb25Db21wbGV0ZSh7XG4gICAgICAgICAgZWw6IGVsLFxuICAgICAgICAgIHRvZ2dsZUVsOiB0b2dnbGVFbCxcbiAgICAgICAgICBvbkNvbXBsZXRlOiBwYXJhbXMub25Db21wbGV0ZSB8fCBub29wLFxuICAgICAgICAgIGNvbGxhcHNlOiBjb2xsYXBzZSxcbiAgICAgICAgICB0b2dnbGVQcm9wZXJ0eTogdG9nZ2xlUHJvcGVydHksXG4gICAgICAgICAgdG9nZ2xlQ2xhc3NOYW1lOiB0b2dnbGVDbGFzc05hbWUsXG4gICAgICAgICAgdG9nZ2xlVmFsdWU6IHRvZ2dsZVZhbHVlLFxuICAgICAgICAgIGhlaWdodEFuaW1hdGlvbkNsYXNzOiBoZWlnaHRBbmltYXRpb25DbGFzc1xuICAgICAgICB9KTtcbiAgICAgIH0sIHBhcmFtcy5hbmltYXRpb25EdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gcGFyYW1zLmFuaW1hdGlvbkR1cmF0aW9uIDogMjAxKSk7XG4gICAgfSwgMCk7XG4gIH1cbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gYW5pbWF0ZUhlaWdodDtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGVpZ2h0LmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3RyaW0gPSByZXF1aXJlKCcuLi91dGlsL3RyaW0nKTtcblxudmFyIF90cmltMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RyaW0pO1xuXG52YXIgX2hhc0NsYXNzID0gcmVxdWlyZSgnLi9oYXMtY2xhc3MnKTtcblxudmFyIF9oYXNDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oYXNDbGFzcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKlxuICogIyBBZGQgQ2xhc3NcbiAqIEFkZCBhIGNsYXNzIG9uIGFuIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fEFycmF5fSBlbCBBbiBlbGVtZW50IG9yIGFycmF5IG9mIGVsZW1lbnRzIHRvIHVwZGF0ZS5cbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJuIHtFbGVtZW50fVxuICpcbiAqIEBtb2R1bGUgaGVscGVycy9kb20vYWRkLWNsYXNzLmpzXG4gKi9cblxudmFyIHdzID0gL1xccysvO1xudmFyIGNsZWFudXAgPSAvXFxzezIsfS9nO1xuXG5mdW5jdGlvbiBhZGRDbGFzcyhlbCwgbmFtZSkge1xuXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyICYmIHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJykge1xuICAgIG5hbWUgPSAoMCwgX3RyaW0yLmRlZmF1bHQpKG5hbWUpLnNwbGl0KHdzKTtcbiAgfSBlbHNlIHtcbiAgICBuYW1lID0gbmFtZSBpbnN0YW5jZW9mIEFycmF5ID8gbmFtZSA6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gIH1cblxuICAvLyBvcHRpbWl6ZSBmb3IgYmVzdCwgbW9zdCBjb21tb24gY2FzZVxuICBpZiAobmFtZS5sZW5ndGggPT09IDEgJiYgZWwuY2xhc3NMaXN0KSB7XG4gICAgaWYgKG5hbWVbMF0pIHtcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQobmFtZVswXSk7XG4gICAgfVxuICAgIHJldHVybiBlbDtcbiAgfVxuXG4gIHZhciB0b0FkZCA9IFtdO1xuICB2YXIgaSA9IDA7XG4gIHZhciBsID0gbmFtZS5sZW5ndGg7XG4gIHZhciBpdGVtID0gdm9pZCAwO1xuICB2YXIgY2xzTmFtZSA9IHR5cGVvZiBlbC5jbGFzc05hbWUgPT09ICdzdHJpbmcnID8gZWwuY2xhc3NOYW1lIDogZWwuZ2V0QXR0cmlidXRlID8gZWwuZ2V0QXR0cmlidXRlKCdjbGFzcycpIDogJyc7XG5cbiAgLy8gc2VlIGlmIHdlIGhhdmUgYW55dGhpbmcgdG8gYWRkXG4gIGZvciAoOyBpIDwgbDsgaSsrKSB7XG4gICAgaXRlbSA9IG5hbWVbaV07XG4gICAgaWYgKGl0ZW0gJiYgISgwLCBfaGFzQ2xhc3MyLmRlZmF1bHQpKGNsc05hbWUsIGl0ZW0pKSB7XG4gICAgICB0b0FkZC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0b0FkZC5sZW5ndGgpIHtcbiAgICBpZiAodHlwZW9mIGVsLmNsYXNzTmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVsLmNsYXNzTmFtZSA9ICgwLCBfdHJpbTIuZGVmYXVsdCkoKGNsc05hbWUgKyAnICcgKyB0b0FkZC5qb2luKCcgJykpLnJlcGxhY2UoY2xlYW51cCwgJyAnKSk7XG4gICAgfSBlbHNlIGlmIChlbC5zZXRBdHRyaWJ1dGUpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAoMCwgX3RyaW0yLmRlZmF1bHQpKChjbHNOYW1lICsgJyAnICsgdG9BZGQuam9pbignICcpKS5yZXBsYWNlKGNsZWFudXAsICcgJykpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZWw7XG59XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGFkZENsYXNzO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZGQtY2xhc3MuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuLyoqXG4gKiAjIEhhcyBDbGFzc1xuICogU2VlIGlmIGFuIGVsZW1lbnQgaGFzIGEgY2xhc3MuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fFN0cmluZ30gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICpcbiAqIEBtb2R1bGUgaGVscGVycy9kb20vaGFzLWNsYXNzLmpzXG4gKi9cbmZ1bmN0aW9uIGhhc0NsYXNzKGVsLCBuYW1lKSB7XG4gIHZhciBjTmFtZSA9ICgodHlwZW9mIGVsID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihlbCkpID09PSAnb2JqZWN0JyA/IGVsLmNsYXNzTmFtZSB8fCBlbC5nZXRBdHRyaWJ1dGUgJiYgZWwuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnIDogZWwgfHwgJycpLnJlcGxhY2UoL1tcXHRcXHJcXG5cXGZdL2csICcgJyk7XG4gIHJldHVybiAoJyAnICsgY05hbWUgKyAnICcpLmluZGV4T2YoJyAnICsgbmFtZSArICcgJykgIT09IC0xO1xufVxuXG5leHBvcnRzLmRlZmF1bHQgPSBoYXNDbGFzcztcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFzLWNsYXNzLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2VhY2ggPSByZXF1aXJlKCcuLi91dGlsL2VhY2gnKTtcblxudmFyIF9lYWNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2VhY2gpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgcHJvcHMgPSBbJ21hcmdpblRvcCcsICdtYXJnaW5Cb3R0b20nLCAnYm9yZGVyVG9wJywgJ2JvcmRlckJvdHRvbSddOyAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICMgT3V0ZXIgSGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBHZXQgdGhlIG91dGVyIGhlaWdodCBvZiBhbiBlbGVtZW50IChpbmNsdWRpbmcgbWFyZ2luIGFuZCBib3JkZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHN0eWxlcyBPcHRpb25hbCBBbHJlYWR5IGhhdmUgY29tcHV0ZWQgc3R5bGVzPyBQYXNzIHRoZW0gaW4uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIG91dGVySGVpZ2h0KGVsLCBjb21wdXRlZFN0eWxlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQG1vZHVsZSBoZWxwZXJzL291dGVyLWhlaWdodC5qc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG5cblxuZnVuY3Rpb24gb3V0ZXJIZWlnaHQoZWwsIHN0eWxlcykge1xuXG4gIHN0eWxlcyA9IHN0eWxlcyB8fCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbCk7XG5cbiAgdmFyIGhlaWdodCA9IGVsLmNsaWVudEhlaWdodDtcblxuICAoMCwgX2VhY2gyLmRlZmF1bHQpKHByb3BzLCBmdW5jdGlvbiAocHJvcCkge1xuICAgIGhlaWdodCArPSBwYXJzZUludChzdHlsZXNbcHJvcF0gfHwgMCwgMTApO1xuICB9KTtcblxuICByZXR1cm4gaGVpZ2h0O1xufVxuXG5leHBvcnRzLmRlZmF1bHQgPSBvdXRlckhlaWdodDtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3V0ZXItaGVpZ2h0LmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3RyaW0gPSByZXF1aXJlKCcuLi91dGlsL3RyaW0nKTtcblxudmFyIF90cmltMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RyaW0pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgd3MgPSAvXFxzKy87IC8qKlxuICAgICAgICAgICAgICAgICAqICMgUmVtb3ZlIENsYXNzXG4gICAgICAgICAgICAgICAgICogUmVtb3ZlIGEgY2xhc3Mgb24gYW4gZWxlbWVudC5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RWxlbWVudHxBcnJheX0gZWwgQW4gZWxlbWVudCBvciBhcnJheSBvZiBlbGVtZW50cyB0byB1cGRhdGUuXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogQG1vZHVsZSBoZWxwZXJzL2RvbS9yZW1vdmUtY2xhc3MuanNcbiAgICAgICAgICAgICAgICAgKi9cblxudmFyIGNsZWFudXAgPSAvXFxzezIsfS9nO1xuXG5mdW5jdGlvbiByZW1vdmVDbGFzcyhlbCwgbmFtZSkge1xuXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyICYmIHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJykge1xuICAgIG5hbWUgPSAoMCwgX3RyaW0yLmRlZmF1bHQpKG5hbWUpLnNwbGl0KHdzKTtcbiAgfSBlbHNlIHtcbiAgICBuYW1lID0gbmFtZSBpbnN0YW5jZW9mIEFycmF5ID8gbmFtZSA6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gIH1cblxuICAvLyBvcHRpbWl6ZSBmb3IgYmVzdCwgbW9zdCBjb21tb24gY2FzZVxuICBpZiAobmFtZS5sZW5ndGggPT09IDEgJiYgZWwuY2xhc3NMaXN0KSB7XG4gICAgaWYgKG5hbWVbMF0pIGVsLmNsYXNzTGlzdC5yZW1vdmUobmFtZVswXSk7XG4gICAgcmV0dXJuIGVsO1xuICB9XG5cbiAgLy8gc3RvcmUgdHdvIGNvcGllc1xuICB2YXIgY2xzTmFtZSA9ICcgJyArICh0eXBlb2YgZWwuY2xhc3NOYW1lID09PSAnc3RyaW5nJyA/IGVsLmNsYXNzTmFtZSA6IGVsLmdldEF0dHJpYnV0ZSA/IGVsLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSA6ICcnKSArICcgJztcbiAgdmFyIHJlc3VsdCA9IGNsc05hbWU7XG4gIHZhciBjdXJyZW50ID0gdm9pZCAwO1xuICB2YXIgc3RhcnQgPSB2b2lkIDA7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gbmFtZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBjdXJyZW50ID0gbmFtZVtpXTtcbiAgICBzdGFydCA9IGN1cnJlbnQgPyByZXN1bHQuaW5kZXhPZignICcgKyBjdXJyZW50ICsgJyAnKSA6IC0xO1xuICAgIGlmIChzdGFydCAhPT0gLTEpIHtcbiAgICAgIHN0YXJ0ICs9IDE7XG4gICAgICByZXN1bHQgPSByZXN1bHQuc2xpY2UoMCwgc3RhcnQpICsgcmVzdWx0LnNsaWNlKHN0YXJ0ICsgY3VycmVudC5sZW5ndGgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIG9ubHkgd3JpdGUgaWYgbW9kaWZpZWRcbiAgaWYgKGNsc05hbWUgIT09IHJlc3VsdCkge1xuICAgIGlmICh0eXBlb2YgZWwuY2xhc3NOYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgZWwuY2xhc3NOYW1lID0gKDAsIF90cmltMi5kZWZhdWx0KShyZXN1bHQucmVwbGFjZShjbGVhbnVwLCAnICcpKTtcbiAgICB9IGVsc2UgaWYgKGVsLnNldEF0dHJpYnV0ZSkge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsICgwLCBfdHJpbTIuZGVmYXVsdCkocmVzdWx0LnJlcGxhY2UoY2xlYW51cCwgJyAnKSkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBlbDtcbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gcmVtb3ZlQ2xhc3M7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlbW92ZS1jbGFzcy5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9oYXNDbGFzcyA9IHJlcXVpcmUoJy4vaGFzLWNsYXNzJyk7XG5cbnZhciBfaGFzQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaGFzQ2xhc3MpO1xuXG52YXIgX2FkZENsYXNzID0gcmVxdWlyZSgnLi9hZGQtY2xhc3MnKTtcblxudmFyIF9hZGRDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hZGRDbGFzcyk7XG5cbnZhciBfcmVtb3ZlQ2xhc3MgPSByZXF1aXJlKCcuL3JlbW92ZS1jbGFzcycpO1xuXG52YXIgX3JlbW92ZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlbW92ZUNsYXNzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoZWwsIG5hbWUsIGVuYWJsZSkge1xuXG4gIGlmICghZWwpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBJZiB3ZSdyZSBwYXNzZWQgYW4gYXJyYXksIHRvZ2dsZSB0aGUgY2xhc3Mgb24gZWFjaC5cbiAgaWYgKGVsIGluc3RhbmNlb2YgTm9kZUxpc3QgfHwgZWwgaW5zdGFuY2VvZiBBcnJheSkge1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGVsLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB0b2dnbGVDbGFzcyhlbFtpXSwgbmFtZSwgZW5hYmxlKTtcbiAgICB9XG5cbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgYWN0aW9uID0gdm9pZCAwO1xuICBpZiAoZW5hYmxlICE9PSB1bmRlZmluZWQpIHtcbiAgICBlbmFibGUgPSB0eXBlb2YgZW5hYmxlID09PSAnZnVuY3Rpb24nID8gZW5hYmxlLmNhbGwobnVsbCwgZWwpIDogZW5hYmxlO1xuICAgIGFjdGlvbiA9IGVuYWJsZSA/ICdhZGQnIDogJ3JlbW92ZSc7XG4gIH0gZWxzZSB7XG4gICAgYWN0aW9uID0gKDAsIF9oYXNDbGFzczIuZGVmYXVsdCkoZWwsIG5hbWUpID8gJ3JlbW92ZScgOiAnYWRkJztcbiAgfVxuXG4gIHJldHVybiAoYWN0aW9uID09PSAnYWRkJyA/IF9hZGRDbGFzczIuZGVmYXVsdCA6IF9yZW1vdmVDbGFzczIuZGVmYXVsdCkoZWwsIG5hbWUpO1xufSAvKipcbiAgICogIyBUb2dnbGUgQ2xhc3NcbiAgICogVG9nZ2xlIGEgY2xhc3Mgb24gYW4gZWxlbWVudCBnaXZlbiBhIGNvbmRpdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fEFycmF5fSBlbCBBbiBlbGVtZW50IG9yIGFycmF5IG9mIGVsZW1lbnRzIHRvIHVwZGF0ZS5cbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICogQHBhcmFtIHtCb29sZWFufSBlbmFibGVcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICpcbiAgICogQG1vZHVsZSAgaGVscGVycy9kb20vdG9nZ2xlLWNsYXNzLmpzXG4gICAqL1xuXG5leHBvcnRzLmRlZmF1bHQgPSB0b2dnbGVDbGFzcztcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9nZ2xlLWNsYXNzLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5jbGVhciA9IGV4cG9ydHMucmVzdG9yZSA9IGV4cG9ydHMuc3RvcmUgPSB1bmRlZmluZWQ7XG5cbnZhciBfZWFjaCA9IHJlcXVpcmUoJy4uL3V0aWwvZWFjaCcpO1xuXG52YXIgX2VhY2gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZWFjaCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKlxuICogRmluZCBhbGwgdGhlIGZvcm0gZWxlbWVudHMgaW5zaWRlIGEgZ2l2ZW4gZWxlbWVudCBhbmQgcnVuIGEgY2FsbGJhY2sgb24gZWFjaC5cbiAqIEBwYXJhbSAge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gY2JcbiAqL1xuZnVuY3Rpb24gZmluZEFsbChlbCwgY2IpIHtcbiAgKDAsIF9lYWNoMi5kZWZhdWx0KShlbC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYScpLCBmdW5jdGlvbiAoaSkge1xuICAgIGNiKGkpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBGaW5kIGFsbCB0aGUgZm9ybSBlbGVtZW50cyBpbnNpZGUgYSBnaXZlbiBlbGVtZW50IGFuZCBzdG9yZSB0aGVpciBjdXJyZW50XG4gKiB2YWx1ZSBhcyBhIGRhdGEgYXR0cmlidXRlLlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICovXG4vKipcbiAqICMgRm9ybSBEYXRhXG4gKiBTdG9yZSBhbmQgcmVzdG9yZSB0aGUgZGF0YSBvZiBmb3JtIGZpZWxkcyBpbmxpbmUgc28gaXQgY2FuIGJlIHJldmVydGVkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBmb3JtRGF0YS5zdG9yZShlbCk7XG4gKiBmb3JtRGF0YS5yZXZlcnQoZWwpO1xuICpcbiAqIEBtb2R1bGUgaGVscGVycy9mb3JtL2Zvcm0tZGF0YS5qc1xuICovXG5cbmZ1bmN0aW9uIHN0b3JlKGVsKSB7XG5cbiAgZmluZEFsbChlbCwgZnVuY3Rpb24gKGlucHV0KSB7XG5cbiAgICB2YXIgbmFtZSA9IGlucHV0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgdmFyIHZhbHVlID0gdm9pZCAwO1xuXG4gICAgc3dpdGNoIChuYW1lKSB7XG4gICAgICBjYXNlICdzZWxlY3QnOlxuICAgICAgICB2YWx1ZSA9IGlucHV0LnNlbGVjdGVkSW5kZXg7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdmFsdWUgPSBlbmNvZGVVUkkoaW5wdXQudmFsdWUpO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3RvcmVkLXZhbHVlJywgdmFsdWUpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBSZXZlcnQgYWxsIHRoZSBmb3JtIGVsZW1lbnRzIGluc2lkZSBvZiBhIGdpdmVuIGVsZW1lbnQuXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKi9cbmZ1bmN0aW9uIHJlc3RvcmUoZWwpIHtcblxuICBmaW5kQWxsKGVsLCBmdW5jdGlvbiAoaW5wdXQpIHtcblxuICAgIHZhciBuYW1lID0gaW5wdXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICB2YXIgdmFsdWUgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3RvcmVkLXZhbHVlJyk7XG5cbiAgICAvLyBObyBzdG9yZWQgdmFsdWVcbiAgICBpZiAoIXZhbHVlICYmIHZhbHVlICE9PSAnJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN3aXRjaCAobmFtZSkge1xuICAgICAgY2FzZSAnc2VsZWN0JzpcbiAgICAgICAgaW5wdXQub3B0aW9uc1t2YWx1ZV0uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlucHV0LnZhbHVlID0gZGVjb2RlVVJJKHZhbHVlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgaW5wdXQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXN0b3JlZC12YWx1ZScpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBDbGVhciB0aGUgc3RvcmVkIGRhdGEgb24gYWxsIHRoZSBmb3JtIGVsZW1lbnRzIGluc2lkZSBvZiBhIGdpdmVuIGVsZW1lbnQuXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKi9cbmZ1bmN0aW9uIGNsZWFyKGVsKSB7XG4gIGZpbmRBbGwoZWwsIGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIGlucHV0LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1zdG9yZWQtdmFsdWUnKTtcbiAgfSk7XG59XG5cbmV4cG9ydHMuc3RvcmUgPSBzdG9yZTtcbmV4cG9ydHMucmVzdG9yZSA9IHJlc3RvcmU7XG5leHBvcnRzLmNsZWFyID0gY2xlYXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mb3JtLWRhdGEuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG4vKipcbiAqICMgU2V0IENhcmV0XG4gKiBTZXQgdGhlIGNhcmV0IHBvc2l0aW9uIGluIGFuIGlucHV0LlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7TnVtYmVyfSBzdGFydFxuICogQHBhcmFtIHtOdW1iZXJ9IGVuZFxuICpcbiAqIEBleGFtcGxlXG4gKiBzZXRDYXJldChlbCwgLTEpO1xuICogc2V0Q2FyZXQoZWwsIDIpO1xuICpcbiAqIEBtb2R1bGUgaGVscGVycy9mb3JtL3NldC1jYXJldC5qc1xuICovXG5mdW5jdGlvbiBzZXRDYXJldChlbCwgc3RhcnQsIGVuZCkge1xuXG4gIHZhciBvcmlnaW5hbEFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuXG4gIHN0YXJ0ID0gc3RhcnQgPCAwID8gZWwudmFsdWUubGVuZ3RoICsgc3RhcnQgKyAxIDogc3RhcnQ7XG4gIGVuZCA9IGVuZCA8IDAgPyBlbC52YWx1ZS5sZW5ndGggKyBlbmQgKyAxIDogZW5kO1xuXG4gIC8vIElFIHN1cHBvcnRcbiAgaWYgKGRvY3VtZW50LnNlbGVjdGlvbikge1xuICAgIGVsLmZvY3VzKCk7XG4gICAgdmFyIHNlbCA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuICAgIHNlbC5tb3ZlU3RhcnQoJ2NoYXJhY3RlcicsIC1lbC52YWx1ZS5sZW5ndGgpO1xuICAgIHNlbC5tb3ZlU3RhcnQoJ2NoYXJhY3RlcicsIHN0YXJ0KTtcbiAgICBzZWwubW92ZUVuZCgnY2hhcmFjdGVyJywgZW5kICE9PSB1bmRlZmluZWQgPyBlbmQgOiBzdGFydCk7XG4gICAgc2VsLnNlbGVjdCgpO1xuICB9IGVsc2UgaWYgKGVsLnNlbGVjdGlvblN0YXJ0IHx8IGVsLnNlbGVjdGlvblN0YXJ0ID09PSAwKSB7XG4gICAgZWwuc2VsZWN0aW9uU3RhcnQgPSBzdGFydDtcbiAgICBlbC5zZWxlY3Rpb25FbmQgPSBlbmQgIT09IHVuZGVmaW5lZCA/IGVuZCA6IHN0YXJ0O1xuICB9XG5cbiAgLy8gSWYgd2UgZGlkbid0IGhhdmUgZm9jdXMsIGdvIGJhY2sgdG8gZm9jdXNpbmcgb24gdGhlIG9yaWdpbmFsXG4gIGlmIChvcmlnaW5hbEFjdGl2ZUVsZW1lbnQgIT09IGVsKSB7XG4gICAgZWwuYmx1cigpO1xuICAgIG9yaWdpbmFsQWN0aXZlRWxlbWVudC5mb2N1cygpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzdGFydDogc3RhcnQsXG4gICAgZW5kOiBlbmRcbiAgfTtcbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gc2V0Q2FyZXQ7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNldC1jYXJldC5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuLyoqXG4gKiAjIEdldCBJbmRleFxuICogR2V0IHRoZSBpbmRleCBvZiBhbiBlbGVtZW50IGluIGEgbm9kZWxpc3QuXG4gKlxuICogQHBhcmFtIHtOb2RlTGlzdH0gZWxzXG4gKiBAcGFyYW0ge05vZGV9IGVsXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKlxuICogQG1vZHVsZSBoZWxwZXJzL3RyYXZlcnNhbC9nZXQtaW5kZXguanNcbiAqL1xuZnVuY3Rpb24gZ2V0SW5kZXgoZWxzLCBlbCkge1xuICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChlbHMsIGVsKTtcbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gZ2V0SW5kZXg7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0LWluZGV4LmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX21hdGNoZXMgPSByZXF1aXJlKCcuL21hdGNoZXMnKTtcblxudmFyIF9tYXRjaGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21hdGNoZXMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBnZXRQYXJlbnQocGFyZW50LCBxdWVyeSwgbGltaXRFbCkge1xuXG4gIGxpbWl0RWwgPSBsaW1pdEVsIGluc3RhbmNlb2YgQXJyYXkgPyBsaW1pdEVsIDogW2xpbWl0RWwgfHwgZG9jdW1lbnQuYm9keV07XG5cbiAgd2hpbGUgKHBhcmVudCkge1xuXG4gICAgaWYgKCgwLCBfbWF0Y2hlczIuZGVmYXVsdCkocGFyZW50LCBxdWVyeSkpIHtcbiAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgfVxuXG4gICAgaWYgKGxpbWl0RWwuaW5kZXhPZihwYXJlbnQpICE9PSAtMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnROb2RlO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufSAvKipcbiAgICogIyBHZXQgUGFyZW50XG4gICAqIFNlZSBpZiBhbiBlbGVtZW50IGhhcyBhbm90aGVyIGVsZW1lbnQgZm9yIGEgcGFyZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHBhcmVudFxuICAgKiBAcGFyYW0ge1N0cmluZ30gcXVlcnlcbiAgICogQHBhcmFtIHtBcnJheXxFbGVtZW50fSBsaW1pdEVsIFRoZSBsYXN0IGVsZW1lbnQgd2Ugc2hvdWxkIGNoZWNrLlxuICAgKiBAcmV0dXJuIHtCb29sZWFufEVsZW1lbnR9XG4gICAqXG4gICAqIEBtb2R1bGUgaGVscGVycy90cmF2ZXJzYWwvZ2V0LXBhcmVudC5qc1xuICAgKi9cblxuZXhwb3J0cy5kZWZhdWx0ID0gZ2V0UGFyZW50O1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXQtcGFyZW50LmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX21hdGNoZXMgPSByZXF1aXJlKCcuL21hdGNoZXMnKTtcblxudmFyIF9tYXRjaGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21hdGNoZXMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBnZXRTaWJsaW5nQWZ0ZXIoZWwsIHF1ZXJ5KSB7XG5cbiAgd2hpbGUgKGVsID0gZWwubmV4dEVsZW1lbnRTaWJsaW5nKSB7XG4gICAgaWYgKCgwLCBfbWF0Y2hlczIuZGVmYXVsdCkoZWwsIHF1ZXJ5KSkge1xuICAgICAgcmV0dXJuIGVsO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufSAvKipcbiAgICogIyBHZXQgU2libGluZyBBZnRlclxuICAgKiBHZXQgYSBuZWFyZXN0IHNpYmxpbmcgYWZ0ZXIgdGhlIGdpdmVuIGVsZW1lbnQgd2hpY2ggbWF0Y2hlc1xuICAgKiB0aGUgZ2l2ZW4gcXVlcnkgc2VsZWN0b3IuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICogQHBhcmFtIHtTdHJpbmd9IHF1ZXJ5XG4gICAqIEByZXR1cm4ge0VsZW1lbnR8TnVsbH1cbiAgICpcbiAgICogQG1vZHVsZSBoZWxwZXJzL3RyYXZlcnNhbC9nZXQtc2libGluZy1hZnRlci5qc1xuICAgKi9cblxuZXhwb3J0cy5kZWZhdWx0ID0gZ2V0U2libGluZ0FmdGVyO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXQtc2libGluZy1hZnRlci5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9tYXRjaGVzID0gcmVxdWlyZSgnLi9tYXRjaGVzJyk7XG5cbnZhciBfbWF0Y2hlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tYXRjaGVzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gZ2V0U2libGluZ0JlZm9yZShlbCwgcXVlcnkpIHtcblxuICB3aGlsZSAoZWwgPSBlbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKSB7XG4gICAgaWYgKCgwLCBfbWF0Y2hlczIuZGVmYXVsdCkoZWwsIHF1ZXJ5KSkge1xuICAgICAgcmV0dXJuIGVsO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufSAvKipcbiAgICogIyBHZXQgU2libGluZyBCZWZvcmVcbiAgICogR2V0IGEgbmVhcmVzdCBzaWJsaW5nIGJlZm9yZSB0aGUgZ2l2ZW4gZWxlbWVudCB3aGljaCBtYXRjaGVzXG4gICAqIHRoZSBnaXZlbiBxdWVyeSBzZWxlY3Rvci5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiBAcGFyYW0ge1N0cmluZ30gcXVlcnlcbiAgICogQHJldHVybiB7RWxlbWVudHxOdWxsfVxuICAgKlxuICAgKiBAbW9kdWxlIGhlbHBlcnMvdHJhdmVyc2FsL2dldC1zaWJsaW5nLWJlZm9yZS5qc1xuICAgKi9cblxuZXhwb3J0cy5kZWZhdWx0ID0gZ2V0U2libGluZ0JlZm9yZTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0LXNpYmxpbmctYmVmb3JlLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuLyoqXG4gKiAjIE1hdGNoZXNcbiAqIFNlZSBpZiBhbiBlbGVtZW50IG1hdGNoZXMgYSBxdWVyeSBzZWxlY3Rvci5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gcXVlcnlcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKlxuICogQG1vZHVsZSBoZWxwZXJzL3RyYXZlcnNhbC9tYXRjaGVzLmpzXG4gKi9cbnZhciB2ZW5kb3JNYXRjaCA9IHR5cGVvZiBFbGVtZW50ICE9PSAndW5kZWZpbmVkJyAmJiAoRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcyB8fCBFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8IEVsZW1lbnQucHJvdG90eXBlLm1vek1hdGNoZXNTZWxlY3RvciB8fCBFbGVtZW50LnByb3RvdHlwZS5tc01hdGNoZXNTZWxlY3RvciB8fCBFbGVtZW50LnByb3RvdHlwZS5vTWF0Y2hlc1NlbGVjdG9yKTtcblxuZnVuY3Rpb24gbWF0Y2hlcyhlbCwgcXVlcnkpIHtcblxuICBpZiAodmVuZG9yTWF0Y2gpIHJldHVybiB2ZW5kb3JNYXRjaC5jYWxsKGVsLCBxdWVyeSk7XG5cbiAgdmFyIG5vZGVzID0gZWwucGFyZW50Tm9kZSA/IGVsLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbChxdWVyeSkgOiBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKG5vZGVzW2ldID09PSBlbCkgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydHMuZGVmYXVsdCA9IG1hdGNoZXM7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hdGNoZXMuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG4vKipcbiAqICMgRWFjaFxuICogQXBwbHkgYSBjYWxsYmFjayBmdW5jdGlvbiB0byBhIGxpc3Qgb2YgYW55IGtpbmQ6IEFycmF5LCBOb2RlTGlzdCwgSFRNTENvbGxlY3Rpb24gb3IgT2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7QXJyYXl8Tm9kZUxpc3R8SFRNTENvbGxlY3Rpb258T2JqZWN0fSBsaXN0XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICpcbiAqIEBleGFtcGxlXG4gKiBlYWNoKFtdLCBjYWxsYmFjayk7XG4gKiBlYWNoKGVsLmNoaWxkcmVuLCBjYWxsYmFjayk7XG4gKiBlYWNoKGVsLmNoaWxkTm9kZXMsIGNhbGxiYWNrKTtcbiAqIGVhY2goe30sIGNhbGxiYWNrKTtcbiAqXG4gKiBAbW9kdWxlIGhlbHBlcnMvdXRpbC9lYWNoLmpzXG4gKi9cbmZ1bmN0aW9uIGVhY2gobGlzdCwgY2IpIHtcblxuICBpZiAoIWxpc3QpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAodHlwZW9mIGNiICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgaW52b2tlIGBlYWNoYCB3aXRob3V0IGEgY2FsbGJhY2shJyk7XG4gIH1cblxuICB2YXIgaSA9IDA7XG4gIHZhciBsZW4gPSBsaXN0Lmxlbmd0aDtcblxuICAvLyBPYmplY3RcbiAgaWYgKGxlbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZm9yIChpIGluIGxpc3QpIHtcbiAgICAgIGlmIChpICE9PSAncHJvdG90eXBlJyAmJiBsaXN0Lmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgIGNiKGksIGxpc3RbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvLyBBcnJheS1saWtlXG4gIGVsc2Uge1xuICAgICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBjYihsaXN0W2ldKTtcbiAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGVhY2g7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVhY2guanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG4vKipcbiAqICMgVHJpbVxuICogVHJpbSB3aGl0ZXNwYWNlIG9uIGEgc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqXG4gKiBAbW9kdWxlIGhlbHBlcnMvdXRpbC90cmltLmpzXG4gKi9cblxudmFyIHRyaW1SRSA9IC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZztcblxuZnVuY3Rpb24gdHJpbShzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKHRyaW1SRSwgJycpO1xufVxuXG5leHBvcnRzLmRlZmF1bHQgPSB0cmltO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmltLmpzLm1hcFxuIl19"}