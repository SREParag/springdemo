/* sabre-spark - v2.2.0 - 2017-4-25 DO NOT MODIFY THIS FILE DIRECTLY OR YOU WILL NOT BE ABLE TO UPDATE YOUR VERSION OF SPARK. */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.Spark||(e.Spark={})).ScrollToTop=t()}}(function(){return function t(e,o,i){function n(r,l){if(!o[r]){if(!e[r]){var u="function"==typeof require&&require;if(!l&&u)return u(r,!0);if(s)return s(r,!0);var a=new Error("Cannot find module '"+r+"'");throw a.code="MODULE_NOT_FOUND",a}var c=o[r]={exports:{}};e[r][0].call(c.exports,function(t){var o=e[r][1][t];return n(o||t)},c,c.exports,t,e,o,i)}return o[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)n(i[r]);return n}({1:[function(t,e,o){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(o,"__esModule",{value:!0});var n=t("../helpers/util/each"),s=function(t){return t&&t.__esModule?t:{default:t}}(n),r=function(){},l=function(){function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),o.elRequired&&!e||(this.setParams(this.defaults||{},!0),this.setParams(o),(this._cacheElements||r).call(this,e,o),(this._parseParams||r).call(this))}return t.prototype.remove=function(t){return this._removeEventListeners&&this._removeEventListeners(),!t&&this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.unsetParams(this.defaults),this},t.prototype.update=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._removeEventListeners&&this._removeEventListeners(),(this._cacheElements||r).call(this,t||this.el,e),(this._parseParams||r).call(this),this._addEventListeners&&this._addEventListeners(),this},t.prototype.setParams=function(t,e){var o=this;return(0,s.default)(t,function(t,i){(-1!==o._whitelistedParams.indexOf(t)||e)&&(o[t]=i)}),this},t.prototype.unsetParams=function(t,e){return t=t instanceof Array?t:Object.keys(t),e=e||this,(0,s.default)(t,function(t){delete e[t]}),this},t}();l.prototype._whitelistedParams=[],l.prototype.defaults={},o.default=l,e.exports=o.default},{"../helpers/util/each":12}],2:[function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(o,"__esModule",{value:!0});var l=t("./base"),u=i(l),a=t("../helpers/dom/toggle-class"),c=i(a),f=t("../helpers/animation/scroll-to"),d=i(f),h=t("../helpers/dom/offset"),p=i(h),_=t("../helpers/util/debounce"),v=i(_),m=t("../helpers/util/each"),b=i(m),y=function(){},w="undefined"!=typeof MutationObserver,g=function(t){function e(o){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(this,e),r.elRequired=!0,(i=s(this,t.call(this,o,r)))?(i._bindEventListenerCallbacks(),i._addEventListeners(),i._cacheSizes(),i._clearRecomputeDebounced=(0,v.default)(i._clearRecompute.bind(i),50),i._recomputeDebounced=(0,v.default)(i._recompute.bind(i),50),i._checkScrollPosition(),s(i)):s(i)}return r(e,t),e.prototype.scrollToTop=function(t){return(0,d.default)(this.scrollToEl||0,{callback:t||y}),this},e.prototype.update=function(t){return this._removeEventListeners(),this._cacheElements(t),this._addEventListeners(),this._cacheSizes(),this._checkScrollPosition(),this},e.prototype._cacheElements=function(t){this.el=t,this.containerEl=this.containerEl||t.parentNode},e.prototype._cacheSizes=function(){var t=(0,p.default)(this.containerEl),e=document.body.clientWidth,o=window.innerHeight,i=t.top,n=t.left,s=e-n-this.containerEl.offsetWidth;this._windowHeight=o,this._containerBottom=this.containerEl.offsetHeight+i,this._visibleThreshold=i+1.5*o;var r=this._isAtBottom;this._isAtBottom=!1,this._right=0,this._updateBindings(),this._right=e-this.el.offsetLeft-this.el.offsetWidth+s,this._isAtBottom=r,this._updateBindings()},e.prototype._checkScrollPosition=function(){var t=this._isVisible,e=this._isAtBottom,o=void 0!==window.scrollY?window.scrollY:window.pageYOffset,i=o+this._windowHeight;this._isVisible=o+this._windowHeight>=this._visibleThreshold,this._isAtBottom=this._containerBottom<=i,this._isAtBottom===e&&this._isVisible===t||this._updateBindings()},e.prototype._updateBindings=function(){(0,c.default)(this.el,"visible",this._isVisible),(0,c.default)(this.el,"at-bottom",this._isAtBottom),this.el.style.right=this._isAtBottom||!this._right?"":this._right+"px"},e.prototype._bindEventListenerCallbacks=function(){this._onClickBound=this._onClick.bind(this),this._onScrollBound=this._onScroll.bind(this),this._onResizeBound=this._onResize.bind(this),this._onVisibleBound=this._onVisible.bind(this),this._onMutateBound=this._onMutate.bind(this)},e.prototype._addEventListeners=function(){this.el.addEventListener("click",this._onClickBound),window.addEventListener("scroll",this._onScrollBound),window.addEventListener("orientationchange",this._onScrollBound),document.addEventListener("spark.visible-children",this._onVisibleBound,!0),w?this._addMutationObserver():window.addEventListener("resize",this._onResizeBound,!1)},e.prototype._removeEventListeners=function(){this.el.removeEventListener("click",this._onClickBound),window.removeEventListener("scroll",this._onScrollBound),window.removeEventListener("orientationchange",this._onScrollBound),document.removeEventListener("spark.visible-children",this._onVisibleBound,!0),w?this._removeMutationObserver():window.removeEventListener("resize",this._onResizeBound)},e.prototype._addMutationObserver=function(){this._observer=new MutationObserver(this._onMutateBound),this._observer.observe(this.containerEl,{childList:!0,attributes:!0,characterData:!0,subtree:!0})},e.prototype._removeMutationObserver=function(){this._observer&&this._observer.disconnect()},e.prototype._recompute=function(){this._cacheSizes(),this._checkScrollPosition()},e.prototype._recomputeThrottled=function(){this._recomputeRun||(this._recompute(),this._recomputeRun=!0),this._clearRecomputeDebounced()},e.prototype._clearRecompute=function(){this._recomputeRun=!1},e.prototype._onScroll=function(){this._recomputeThrottled(),this._checkScrollPosition()},e.prototype._onResize=function(){this._recomputeDebounced()},e.prototype._onClick=function(){this.scrollToTop()},e.prototype._onVisible=function(t){t.target.contains(this.el)&&window.setTimeout(function(){this._cacheSizes(),this._checkScrollPosition()}.bind(this),0)},e.prototype._onMutate=function(t){(0,b.default)(t,function(t){t.target!==this.el&&this._recomputeDebounced()}.bind(this))},e}(u.default);g.prototype._whitelistedParams=["containerEl","scrollToEl"],g.prototype.defaults={el:null,containerEl:null,scrollToEl:null,_isVisible:!1,_isAtBottom:!1,_containerBottom:0,_visibleThreshold:0,_windowHeight:0,_right:0,_recomputeRun:!1,_observer:null,_onClickBound:null,_onScrollBound:null,_onVisibleBound:null,_onResizeBound:null,_onMutateBound:null},o.default=g,e.exports=o.default},{"../helpers/animation/scroll-to":4,"../helpers/dom/offset":8,"../helpers/dom/toggle-class":10,"../helpers/util/debounce":11,"../helpers/util/each":12,"./base":1}],3:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(){var t=Date.now(),e=t;return function(o){var i=Date.now(),n=Math.max(0,1e3/60-(i-e)),s=i+n;return e=s,window.setTimeout(function(){o(s-t)},n)}}();o.default=i,e.exports=o.default},{}],4:[function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){t=t||{};var e=void 0,o=void 0,i=void 0,n=t.target||window,s=n!==window?n.scrollLeft:n.pageXOffset,l=n!==window?n.scrollTop:n.pageYOffset;t instanceof HTMLElement?(e=(0,r.default)(t),o=e.left,i=e.top,t=arguments[1]||{}):(o=t.x||0,i=t.y||0),(0,u.default)({target:n,prop:"scrollTo",start:[s,l],end:[o,i],duration:t.duration,callback:t.callback})}Object.defineProperty(o,"__esModule",{value:!0});var s=t("../dom/offset"),r=i(s),l=t("./tween"),u=i(l);o.default=n,e.exports=o.default},{"../dom/offset":8,"./tween":5}],5:[function(t,e,o){"use strict";function i(t){t=t||{};var e,o=t.target;if(!o)throw new Error("Cannot tween without a target!");var i="string"==typeof t.prop?[t.prop]:t.prop,n="number"==typeof t.start?[t.start]:t.start,l="number"==typeof t.end?[t.end]:t.end,u=t.duration||250,a=t.callback||r;if(n.length!==l.length)throw new Error("Cannot tween two different sets of parameters!");var c=function t(r){e||(e=r);for(var c=r-e,f=Math.min(c/u,1),d=[],h=0,p=n.length;h<p;h++)d[h]=n[h]+(l[h]-n[h])*f;h=0,p=i.length;for(var _;h<p;h++)_=h+1===p&&d.length-1>h?d.slice(h):d[h],"function"==typeof o[i[h]]?o[i[h]].apply(o,_):o[i[h]]=_;c<u?(0,s.default)(t):a()};return(0,s.default)(c)}Object.defineProperty(o,"__esModule",{value:!0});var n=t("./request"),s=function(t){return t&&t.__esModule?t:{default:t}}(n),r=function(){};o.default=i,e.exports=o.default},{"./request":3}],6:[function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(e=2===arguments.length&&"string"==typeof e?(0,r.default)(e).split(a):e instanceof Array?e:Array.prototype.slice.call(arguments,1),1===e.length&&t.classList)return e[0]&&t.classList.add(e[0]),t;for(var o=[],i=0,n=e.length,s=void 0,l="string"==typeof t.className?t.className:t.getAttribute?t.getAttribute("class"):"";i<n;i++)(s=e[i])&&!(0,u.default)(l,s)&&o.push(s);return o.length&&("string"==typeof t.className?t.className=(0,r.default)((l+" "+o.join(" ")).replace(c," ")):t.setAttribute&&t.setAttribute("class",(0,r.default)((l+" "+o.join(" ")).replace(c," ")))),t}Object.defineProperty(o,"__esModule",{value:!0});var s=t("../util/trim"),r=i(s),l=t("./has-class"),u=i(l),a=/\s+/,c=/\s{2,}/g;o.default=n,e.exports=o.default},{"../util/trim":13,"./has-class":7}],7:[function(t,e,o){"use strict";function i(t,e){return-1!==(" "+("object"===(void 0===t?"undefined":n(t))?t.className||t.getAttribute&&t.getAttribute("class")||"":t||"").replace(/[\t\r\n\f]/g," ")+" ").indexOf(" "+e+" ")}Object.defineProperty(o,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};o.default=i,e.exports=o.default},{}],8:[function(t,e,o){"use strict";function i(t,e){var o={top:0,left:0};if(t.getBoundingClientRect){var i=t.getBoundingClientRect();o.left=i.left,o.top=i.top,e||(o.left+=void 0!==window.scrollX?window.scrollX:window.pageXOffset,o.top+=void 0!==window.scrollY?window.scrollY:window.pageYOffset)}else{var n=0,s=0;do{n+=t.offsetLeft-(e?0:t.scrollLeft),s+=t.offsetTop-(e?0:t.scrollTop)}while(t=t.offsetParent);o.left=n,o.top=s}return o}Object.defineProperty(o,"__esModule",{value:!0}),o.default=i,e.exports=o.default},{}],9:[function(t,e,o){"use strict";function i(t,e){if(e=2===arguments.length&&"string"==typeof e?(0,s.default)(e).split(r):e instanceof Array?e:Array.prototype.slice.call(arguments,1),1===e.length&&t.classList)return e[0]&&t.classList.remove(e[0]),t;for(var o=" "+("string"==typeof t.className?t.className:t.getAttribute?t.getAttribute("class"):"")+" ",i=o,n=void 0,u=void 0,a=0,c=e.length;a<c;a++)n=e[a],-1!==(u=n?i.indexOf(" "+n+" "):-1)&&(u+=1,i=i.slice(0,u)+i.slice(u+n.length));return o!==i&&("string"==typeof t.className?t.className=(0,s.default)(i.replace(l," ")):t.setAttribute&&t.setAttribute("class",(0,s.default)(i.replace(l," ")))),t}Object.defineProperty(o,"__esModule",{value:!0});var n=t("../util/trim"),s=function(t){return t&&t.__esModule?t:{default:t}}(n),r=/\s+/,l=/\s{2,}/g;o.default=i,e.exports=o.default},{"../util/trim":13}],10:[function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e,o){if(t){if(!(t instanceof NodeList||t instanceof Array)){var i=void 0;return void 0!==o?(o="function"==typeof o?o.call(null,t):o,i=o?"add":"remove"):i=(0,r.default)(t,e)?"remove":"add",("add"===i?u.default:c.default)(t,e)}for(var s=0,l=t.length;s<l;s++)n(t[s],e,o)}}Object.defineProperty(o,"__esModule",{value:!0});var s=t("./has-class"),r=i(s),l=t("./add-class"),u=i(l),a=t("./remove-class"),c=i(a);o.default=n,e.exports=o.default},{"./add-class":6,"./has-class":7,"./remove-class":9}],11:[function(t,e,o){"use strict";function i(t,e){var o=void 0;return function(){var i=arguments;o&&window.clearTimeout(o),o=window.setTimeout(function(){t.apply(this,i)},e)}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=i,e.exports=o.default},{}],12:[function(t,e,o){"use strict";function i(t,e){if(t){if("function"!=typeof e)throw new Error("Cannot invoke `each` without a callback!");var o=0,i=t.length;if(void 0===i)for(o in t)"prototype"!==o&&t.hasOwnProperty(o)&&e(o,t[o]);else for(;o<i;o++)e(t[o])}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=i,e.exports=o.default},{}],13:[function(t,e,o){"use strict";function i(t){return t.replace(n,"")}Object.defineProperty(o,"__esModule",{value:!0});var n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;o.default=i,e.exports=o.default},{}]},{},[2])(2)});