{"version":3,"sources":["js/dist/components/node_modules/browser-pack/_prelude.js","js/dist/components/js/dist/components/base.js","js/dist/components/js/dist/components/expand.js","js/dist/components/js/dist/components/filter-module.js","js/dist/components/js/dist/components/filter.js","js/dist/components/js/dist/components/modal.js","js/dist/components/js/dist/helpers/animation/height.js","js/dist/components/js/dist/helpers/dom/add-class.js","js/dist/components/js/dist/helpers/dom/breakpoint.js","js/dist/components/js/dist/helpers/dom/has-class.js","js/dist/components/js/dist/helpers/dom/outer-height.js","js/dist/components/js/dist/helpers/dom/remove-class.js","js/dist/components/js/dist/helpers/dom/toggle-class.js","js/dist/components/js/dist/helpers/traversal/get-parent.js","js/dist/components/js/dist/helpers/traversal/matches.js","js/dist/components/js/dist/helpers/util/each.js","js/dist/components/js/dist/helpers/util/trim.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"filter.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _each = require('../helpers/util/each');\n\nvar _each2 = _interopRequireDefault(_each);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } /**\n                                                                                                                                                           * # Base Component\n                                                                                                                                                           * The base class for Spark JS components. This class should never be\n                                                                                                                                                           * instantiated directly.\n                                                                                                                                                           *\n                                                                                                                                                           * @param {Element} el\n                                                                                                                                                           * @param {Object} params\n                                                                                                                                                           *\n                                                                                                                                                           * @module components/base.js\n                                                                                                                                                           */\n\nvar noop = function noop() {};\n\nvar Base = function () {\n\n  /**\n   * Set parameters and cache elements.\n   */\n  function Base(el) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Base);\n\n    if (params.elRequired && !el) {\n      return;\n    }\n\n    this.setParams(this.defaults || {}, true);\n    this.setParams(params);\n    (this._cacheElements || noop).call(this, el, params);\n    (this._parseParams || noop).call(this);\n  }\n\n  /**\n   * Remove the component from the DOM and prepare for garbage collection by dereferencing values.\n   * @param {Boolean} leaveElement Leave the element intact.\n   */\n\n\n  Base.prototype.remove = function remove(leaveElement) {\n\n    if (this._removeEventListeners) {\n      this._removeEventListeners();\n    }\n\n    if (!leaveElement && this.el && this.el.parentNode) {\n      this.el.parentNode.removeChild(this.el);\n    }\n\n    this.unsetParams(this.defaults);\n\n    return this;\n  };\n\n  /**\n   * Update the component to use a new element or reparse from\n   * the existing element.\n   * @param {Element} el Optional\n   * @param {Object} params Optional\n   */\n\n\n  Base.prototype.update = function update(el) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\n    if (this._removeEventListeners) {\n      this._removeEventListeners();\n    }\n\n    (this._cacheElements || noop).call(this, el || this.el, params);\n    (this._parseParams || noop).call(this);\n\n    if (this._addEventListeners) {\n      this._addEventListeners();\n    }\n\n    return this;\n  };\n\n  /**\n   * Set a hash of parameters if they're whitelisted or we're told to force the set.\n   * This is used to set initial values as well as set passed parameters.\n   * @param {Object} params\n   * @param {Boolean} force Force setting even if the param is not whitelisted.\n   */\n\n\n  Base.prototype.setParams = function setParams(params, force) {\n    var _this = this;\n\n    (0, _each2.default)(params, function (k, v) {\n      if (_this._whitelistedParams.indexOf(k) !== -1 || force) {\n        _this[k] = v;\n      }\n    });\n\n    return this;\n  };\n\n  /**\n   * Unset all parameters.\n   * @param {Array|Object} keys\n   * @param {Object} scope The object to unset the params from. Defaults to `this`.\n   */\n\n\n  Base.prototype.unsetParams = function unsetParams(keys, scope) {\n\n    keys = keys instanceof Array ? keys : Object.keys(keys);\n    scope = scope || this;\n    (0, _each2.default)(keys, function (k) {\n      delete scope[k];\n    });\n\n    return this;\n  };\n\n  return Base;\n}();\n\n/**\n * Whitelisted parameters which can be set on construction.\n * @type {Array}\n */\n\n\nBase.prototype._whitelistedParams = [];\n\n/**\n * Default values for internal properties we will be setting.\n * These are set on each construction so we don't leak properties\n * into the prototype chain.\n * @type {Object}\n */\nBase.prototype.defaults = {};\n\nexports.default = Base;\nmodule.exports = exports['default'];\n//# sourceMappingURL=base.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _base = require('./base');\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _height = require('../helpers/animation/height');\n\nvar _height2 = _interopRequireDefault(_height);\n\nvar _toggleClass = require('../helpers/dom/toggle-class');\n\nvar _toggleClass2 = _interopRequireDefault(_toggleClass);\n\nvar _hasClass = require('../helpers/dom/has-class');\n\nvar _hasClass2 = _interopRequireDefault(_hasClass);\n\nvar _getParent = require('../helpers/traversal/get-parent');\n\nvar _getParent2 = _interopRequireDefault(_getParent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * # Expand\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Expand and collapse an element.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @example\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * new Expand(el);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @module components/expand.js\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar noop = function noop() {};\n\nvar Expand = function (_BaseComponent) {\n  _inherits(Expand, _BaseComponent);\n\n  /**\n   * Expand constructor.\n   * @param {Element} el\n   * @param {Object} params\n   */\n  function Expand(el) {\n    var _this;\n\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Expand);\n\n    params.elRequired = true;\n\n    if (!(_this = _possibleConstructorReturn(this, _BaseComponent.call(this, el, params)), _this)) {\n      return _possibleConstructorReturn(_this);\n    }\n\n    _this._bindEventListenerCallbacks();\n    _this._addEventListeners();\n    return _possibleConstructorReturn(_this);\n  }\n\n  /**\n   * Expand\n   */\n\n\n  Expand.prototype.expand = function expand() {\n\n    (this.onBeforeExpand || noop)();\n\n    (0, _height2.default)({\n      el: this.el,\n      toggleClass: 'expanded',\n      toggleEl: '.spark-expand__content, .spark-panel__content'\n    });\n\n    this.isExpanded = true;\n    this._updateClasses();\n    var e = document.createEvent('Event');\n    e.initEvent('spark.visible-children', true, true);\n    this.el.dispatchEvent(e);\n\n    // If the expand element have input, focus on the first one.\n    if (this.el.querySelector('input')) {\n      this.el.querySelector('input').focus();\n    }\n\n    (this.onAfterExpand || noop)();\n\n    return this;\n  };\n\n  /**\n   * Collapse\n   */\n\n\n  Expand.prototype.collapse = function collapse() {\n\n    (this.onBeforeCollapse || noop)();\n\n    (0, _height2.default)({\n      el: this.el,\n      toggleEl: '.spark-expand__content, .spark-panel__content',\n      toggleValue: 'none',\n      action: 'collapse'\n    });\n\n    this.isExpanded = false;\n    this._updateClasses();\n\n    (this.onAfterCollapse || noop)();\n\n    return this;\n  };\n\n  /**\n   * Toggle the expand state.\n   */\n\n\n  Expand.prototype.toggle = function toggle() {\n    return this[this.isExpanded ? 'collapse' : 'expand']();\n  };\n\n  /**\n   * Store a reference to the element.\n   * @param {Element} el\n   */\n\n\n  Expand.prototype._cacheElements = function _cacheElements(el) {\n    this.el = el;\n    this.isExpanded = (0, _hasClass2.default)(this.el, 'expanded');\n  };\n\n  /**\n   * Update classes for the expand or collapse state.\n   */\n\n\n  Expand.prototype._updateClasses = function _updateClasses() {\n    (0, _toggleClass2.default)(this.el, 'expanded', this.isExpanded);\n  };\n\n  /**\n   * Create bound versions of event listener callbacks and store them.\n   * Otherwise we can't unbind from these events later because the\n   * function signatures won't match.\n   */\n\n\n  Expand.prototype._bindEventListenerCallbacks = function _bindEventListenerCallbacks() {\n    this._onClickBound = this._onClick.bind(this);\n    this._onKeydownBound = this._onKeydown.bind(this);\n  };\n\n  /**\n   * Add event listeners for DOM events.\n   */\n\n\n  Expand.prototype._addEventListeners = function _addEventListeners() {\n    this.el.addEventListener('click', this._onClickBound);\n    this.el.addEventListener('keydown', this._onKeydownBound);\n  };\n\n  /**\n   * Remove event listeners for DOM events..\n   */\n\n\n  Expand.prototype._removeEventListeners = function _removeEventListeners() {\n    this.el.removeEventListener('click', this._onClickBound);\n    this.el.removeEventListener('keydown', this._onKeydownBound);\n  };\n\n  /**\n   * When we are clicked, toggle the expanded state.\n   * @param {Object} e\n   */\n\n\n  Expand.prototype._onClick = function _onClick(e) {\n\n    if (!(0, _getParent2.default)(e.target, '.spark-expand__toggle, [data-role=\"toggle\"], [role=\"heading\"]', this.el)) {\n      return;\n    }\n\n    e.preventDefault();\n    this.toggle();\n  };\n\n  /**\n   * When the space or enter key is pressed on the toggle, toggle!\n   * @param {Object} e\n   */\n\n\n  Expand.prototype._onKeydown = function _onKeydown(e) {\n\n    if (!(0, _getParent2.default)(e.target, '.spark-expand__toggle, [data-role=\"toggle\"], [role=\"heading\"]', this.el)) {\n      return;\n    }\n\n    var code = e.keyCode || e.which;\n\n    // Space or enter\n    if (code === 32 || code === 13) {\n      e.preventDefault();\n      this.toggle();\n    }\n  };\n\n  return Expand;\n}(_base2.default);\n\n/**\n * Whitelisted parameters which can be set on construction.\n * @type {Array}\n */\n\n\nExpand.prototype._whitelistedParams = ['onBeforeExpand', 'onAfterExpand', 'onBeforeCollapse', 'onAfterCollapse'];\n\n/**\n * Default values for internal properties we will be setting.\n * These are set on each construction so we don't leak properties\n * into the prototype chain.\n * @type {Object}\n */\nExpand.prototype.defaults = {\n  el: null,\n  isExpanded: false,\n  onBeforeExpand: null,\n  onAfterExpand: null,\n  onBeforeCollapse: null,\n  onAfterCollapse: null,\n  _onClickBound: null,\n  _onKeydownBound: null\n};\n\nexports.default = Expand;\nmodule.exports = exports['default'];\n//# sourceMappingURL=expand.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _base = require('./base');\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _toggleClass = require('../helpers/dom/toggle-class');\n\nvar _toggleClass2 = _interopRequireDefault(_toggleClass);\n\nvar _removeClass = require('../helpers/dom/remove-class');\n\nvar _removeClass2 = _interopRequireDefault(_removeClass);\n\nvar _addClass = require('../helpers/dom/add-class');\n\nvar _addClass2 = _interopRequireDefault(_addClass);\n\nvar _hasClass = require('../helpers/dom/has-class');\n\nvar _hasClass2 = _interopRequireDefault(_hasClass);\n\nvar _expand = require('./expand');\n\nvar _expand2 = _interopRequireDefault(_expand);\n\nvar _modal = require('./modal');\n\nvar _modal2 = _interopRequireDefault(_modal);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * # Filter Module\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Module that contains an individual (or related) filters such as checkboxes\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @example\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * new FilterModule(el, params);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @module components/filter-module.js\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar noop = function noop() {};\n\nvar FilterModule = function (_BaseComponent) {\n  _inherits(FilterModule, _BaseComponent);\n\n  /**\n   * Filter Module constructor.\n   * @param {Element} el\n   * @param {Object} params\n   */\n  function FilterModule(el) {\n    var _this;\n\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, FilterModule);\n\n    params.elRequired = true;\n\n    if (!(_this = _possibleConstructorReturn(this, _BaseComponent.call(this, el, params)), _this)) {\n      return _possibleConstructorReturn(_this);\n    }\n\n    _this._bindEventListenerCallbacks();\n    _this._addEventListeners();\n    return _possibleConstructorReturn(_this);\n  }\n\n  /**\n   * Store a reference to the need elements\n   * @param {Element} el\n   */\n\n\n  FilterModule.prototype._cacheElements = function _cacheElements(el) {\n    this.el = el;\n    this._showAllEl = this.el.querySelector('.spark-filter-module__show-all');\n    if (this._showAllEl) {\n      this._showAllToggleable = this._showAllEl.querySelector('span');\n    }\n\n    this._clearEls = this.el.querySelectorAll('.spark-filter-module__clear');\n    this._hiddenEls = Array.prototype.slice.call(this.el.querySelectorAll('.spark-filter-module--hide'));\n    this._headerEl = this.el.querySelector('.spark-filter-module__header');\n    this._bodyEl = this.el.querySelector('.spark-filter-module__body');\n    this._modalEl = this.el.querySelector('.spark-modal');\n    this._modalSaveBtn = this.el.querySelector('.spark-filter-module__show-all__modal-button');\n    this._modalClasses = [];\n\n    if (this.onShowAll === 'modal') {\n      this.modalInst = new _modal2.default(this._modalEl);\n    }\n  };\n\n  /**\n   * Create bound versions of event listener callbacks and store them.\n   * Otherwise we can't unbind from these events later because the\n   * function signatures won't match.\n   */\n\n\n  FilterModule.prototype._bindEventListenerCallbacks = function _bindEventListenerCallbacks() {\n    this._onShowAllBound = this._onShowAll.bind(this);\n    this._onClearBound = this._onClear.bind(this);\n    this._onCloseModalBound = this._onCloseModal.bind(this);\n  };\n\n  /**\n   * Add event listeners for touchstart and mouse click.\n   */\n\n\n  FilterModule.prototype._addEventListeners = function _addEventListeners() {\n    !this._showAllEl || this._showAllEl.addEventListener('click', this._onShowAllBound);\n    !this._modalSaveBtn || this._modalSaveBtn.addEventListener('click', this._onCloseModalBound);\n\n    for (var i = 0; i < this._clearEls.length; i++) {\n      !this._clearEls[i] || this._clearEls[i].addEventListener('click', this._onClearBound);\n    }\n  };\n\n  /**\n   * Remove event listeners for touchstart and mouse click.\n   */\n\n\n  FilterModule.prototype._removeEventListeners = function _removeEventListeners() {\n    if (this._showAllEl) {\n      this._showAllEl.removeEventListener('click', this._onShowAllBound);\n      this._modalSaveBtn.removeEventListener('click', this._onCloseModalBound);\n\n      for (var i = 0; i < this._clearEls.length; i++) {\n        !this._clearEls[i] || this._clearEls[i].removeEventListener('click', this._onClearBound);\n      }\n    }\n  };\n\n  /**\n   * Show any hidden filters within a module or run provided function if available\n   */\n\n\n  FilterModule.prototype._onShowAll = function _onShowAll() {\n    if (typeof this.onShowAll === 'function') {\n      (this.onShowAll || noop)(this);\n    } else {\n      if (this.onShowAll === 'toggle' || this.onShowAll === 'modal' && this._isExpand) {\n        this._toggleShowAllLabel();\n        this.toggleHiddenContent();\n      } else if (this.onShowAll === 'modal' && !this._isExpand) {\n        this.modalInst.open();\n      }\n\n      (this.onShowAllComplete || noop)();\n    }\n  };\n\n  /**\n   * Toggle Show More label text\n   */\n\n\n  FilterModule.prototype._toggleShowAllLabel = function _toggleShowAllLabel() {\n    this._showAllToggleable.innerHTML = this._showAllToggleable.innerHTML === 'more' ? 'fewer' : 'more';\n  };\n\n  /**\n   * Callback after clicking `Clear` button\n   */\n\n\n  FilterModule.prototype._onClear = function _onClear() {\n    (this.onClear || noop)(this);\n  };\n\n  /**\n   * Callback after clicking `Save` button\n   */\n\n\n  FilterModule.prototype._onCloseModal = function _onCloseModal() {\n    (this.onModalClose || noop)();\n\n    this.modalInst.close();\n  };\n\n  /**\n   * Enable clear button\n   */\n\n\n  FilterModule.prototype.enableClearBtn = function enableClearBtn() {\n    for (var i = 0; i < this._clearEls.length; i++) {\n      (0, _removeClass2.default)(this._clearEls[i], 'spark-filter-module__clear--disabled');\n      (0, _removeClass2.default)(this._clearEls[i], 'spark-filter-module__clear--hidden');\n    }\n  };\n\n  /**\n   * Disable clear button\n   */\n\n\n  FilterModule.prototype.disableClearBtn = function disableClearBtn() {\n    for (var i = 0; i < this._clearEls.length; i++) {\n      (0, _addClass2.default)(this._clearEls[i], 'spark-filter-module__clear--disabled');\n    }\n  };\n\n  /**\n   * Hide clear button\n   */\n\n\n  FilterModule.prototype.hideClearBtn = function hideClearBtn() {\n    for (var i = 0; i < this._clearEls.length; i++) {\n      (0, _addClass2.default)(this._clearEls[i], 'spark-filter-module__clear--hidden');\n    }\n  };\n\n  /**\n   * Determine if Clear button is hidden or disabled\n   */\n\n\n  FilterModule.prototype.getClearButtonStatus = function getClearButtonStatus() {\n    var buttonEnabled = false;\n\n    for (var i = 0; i < this._clearEls.length; i++) {\n      if ((0, _hasClass2.default)(this._clearEls[i], 'spark-filter-module__clear--hidden') || (0, _hasClass2.default)(this._clearEls[i], 'spark-filter-module__clear--disabled')) {\n        buttonEnabled = false;\n      } else {\n        buttonEnabled = true;\n      }\n    }\n\n    return buttonEnabled;\n  };\n\n  /**\n   * Hide or show extra filters elements as triggered by Show more/fewer\n   */\n\n\n  FilterModule.prototype.toggleHiddenContent = function toggleHiddenContent() {\n    for (var i = 0; i < this._hiddenEls.length; i++) {\n      (0, _toggleClass2.default)(this._hiddenEls[i], 'show');\n    }\n  };\n\n  /**\n   * Change filter-module to expand/collapse variation\n   * This occurs when the filter is at the xs breakpoint\n   */\n\n\n  FilterModule.prototype._applyExpand = function _applyExpand() {\n    if (this._modalEl) {\n      var modalClsNames = ['spark-filter-module--hide', '', '', ''];\n\n      this._hiddenEls.push(this._modalEl);\n      var curEl = this._modalEl;\n\n      for (var i = 0; i < modalClsNames.length; i++) {\n        this._modalClasses[i] = curEl.className;\n        curEl.className = modalClsNames[i];\n        curEl = curEl.firstElementChild;\n      }\n\n      if ((0, _hasClass2.default)(document.body, 'spark-modal-open')) {\n        (0, _removeClass2.default)(document.body, 'spark-modal-open');\n      }\n\n      this.modalInst.remove(true);\n    }\n\n    (0, _addClass2.default)(this.el, 'spark-panel', 'spark-panel--expand');\n    (0, _addClass2.default)(this._headerEl, 'spark-panel__header');\n    this._headerEl.setAttribute('role', 'heading');\n    this._headerEl.setAttribute('tabindex', '0');\n    (0, _addClass2.default)(this._bodyEl, 'spark-panel__content');\n\n    this._expandInst = new _expand2.default(this.el, {\n      onAfterExpand: this.onAfterExpand,\n      onAfterCollapse: this.onAfterCollapse\n    });\n\n    this._isExpand = true;\n  };\n\n  /**\n   * Change filter-module from expand/collapse to horizontal variation\n   */\n\n\n  FilterModule.prototype._disapplyExpand = function _disapplyExpand() {\n    if (this._modalEl) {\n\n      if ((0, _hasClass2.default)(this._modalEl, 'show')) {\n        this._toggleShowAllLabel();\n      }\n\n      this._hiddenEls.pop();\n      var curEl = this._modalEl;\n\n      for (var i = 0; i < this._modalClasses.length; i++) {\n        curEl.className = this._modalClasses[i];\n        curEl = curEl.firstElementChild;\n      }\n\n      this.modalInst = new _modal2.default(this._modalEl);\n    }\n\n    (0, _removeClass2.default)(this.el, 'spark-panel', 'spark-panel--expand');\n    (0, _removeClass2.default)(this._headerEl, 'spark-panel__header');\n    this._headerEl.removeAttribute('role');\n    this._headerEl.removeAttribute('tabindex');\n    (0, _removeClass2.default)(this._bodyEl, 'spark-panel__content');\n    this._expandInst.remove(true);\n    this._isExpand = false;\n  };\n\n  return FilterModule;\n}(_base2.default);\n\n/**\n * Whitelisted parameters which can be set on construction.\n * @type {Array}\n */\n\n\nFilterModule.prototype._whitelistedParams = ['onShowAll', 'onShowAllComplete', 'onModalClose', 'onClear', 'onAfterExpand', 'onAfterCollapse'];\n\n/**\n * Default values for internal properties we will be setting.\n * These are set on each construction so we don't leak properties\n * into the prototype chain.\n * @type {Object}\n */\nFilterModule.prototype.defaults = {\n  el: null,\n  onShowAll: noop,\n  onShowAllComplete: noop,\n  onModalClose: noop,\n  onClear: noop,\n  onAfterExpand: noop,\n  onAfterCollapse: noop,\n  modalInst: null,\n  _onShowAllBound: null,\n  _onClearBound: null,\n  _showAllEl: null,\n  _clearEl: null,\n  _hiddenEls: [],\n  _headerEl: null,\n  _bodyEl: null,\n  _modalEl: null,\n  _expandInst: null,\n  _isExpand: false,\n  dataSet: {}\n};\n\nexports.default = FilterModule;\nmodule.exports = exports['default'];\n//# sourceMappingURL=filter-module.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _base = require('./base');\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _addClass = require('../helpers/dom/add-class');\n\nvar _addClass2 = _interopRequireDefault(_addClass);\n\nvar _hasClass = require('../helpers/dom/has-class');\n\nvar _hasClass2 = _interopRequireDefault(_hasClass);\n\nvar _toggleClass = require('../helpers/dom/toggle-class');\n\nvar _toggleClass2 = _interopRequireDefault(_toggleClass);\n\nvar _removeClass = require('../helpers/dom/remove-class');\n\nvar _removeClass2 = _interopRequireDefault(_removeClass);\n\nvar _filterModule = require('./filter-module');\n\nvar _filterModule2 = _interopRequireDefault(_filterModule);\n\nvar _height = require('../helpers/animation/height');\n\nvar _height2 = _interopRequireDefault(_height);\n\nvar _breakpoint = require('../helpers/dom/breakpoint');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * # Filter\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * A container for a set of form fields used to filter a data set or search results\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @example\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * new Filter(el);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @module components/filter.js\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar noop = function noop() {};\n\nvar Filter = function (_BaseComponent) {\n  _inherits(Filter, _BaseComponent);\n\n  /**\n   * Filter constructor.\n   * @param {Element} el\n   * @param {Object} params\n   */\n  function Filter(el) {\n    var _this;\n\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Filter);\n\n    params.elRequired = true;\n\n    if (!(_this = _possibleConstructorReturn(this, _BaseComponent.call(this, el, params)), _this)) {\n      return _possibleConstructorReturn(_this);\n    }\n\n    _this._bindEventListenerCallbacks();\n    _this._addEventListeners();\n    _this._initFilterDisplay();\n    return _possibleConstructorReturn(_this);\n  }\n\n  /**\n   * Store a reference to the needed elements\n   * @param {Element} el\n   */\n\n\n  Filter.prototype._cacheElements = function _cacheElements(el) {\n    this.el = el;\n    this.moduleEls = this.el.querySelectorAll('.spark-filter-module');\n\n    // These options are here so that the modules can communicate with the filter to do certain tasks\n    var defaultOption = {\n      onAfterExpand: this._onAfterExpand.bind(this),\n      onAfterCollapse: this._onAfterCollapse.bind(this)\n    };\n\n    if (this.moduleEls.length > 0) {\n      for (var i = 0; i < this.moduleEls.length; i++) {\n        if (typeof this.moduleOptions[i] !== 'undefined') {\n          for (var key in defaultOption) {\n            this.moduleOptions[i][key] = defaultOption[key];\n          }\n          this.moduleInsts[i] = new _filterModule2.default(this.moduleEls[i], this.moduleOptions[i]);\n        } else {\n          this.moduleInsts[i] = new _filterModule2.default(this.moduleEls[i], defaultOption);\n        }\n      }\n    }\n\n    this._filterToggleContainer = this.el.querySelector('.spark-filter__toggle-container');\n    this._toggleFilterButton = this.el.querySelector('.spark-filter__toggle-button');\n    this._toggleFilterLabel = this.el.querySelector('.spark-filter__toggle-button span');\n    this._tagsContainer = this.el.querySelector('.spark-filter__tags-container');\n    this._tagsCounter = this.el.querySelector('.spark-filter__applied-filters-counter');\n    this._clearAllButton = this.el.querySelector('.spark-filter__clear-all');\n    this._filterContent = this.el.querySelector('.spark-filter__content');\n    this._modulesContainer = this.el.querySelector('.spark-filter__modules-container');\n    this._viewMoreButton = this.el.querySelector('.spark-filter__view-more-filters');\n    this._viewLessButton = this.el.querySelector('.spark-filter__view-less-filters');\n    this._filterFooter = this.el.querySelector('.spark-filter__footer');\n    this._buttonGroupEl = this.el.querySelector('.spark-filter__apply-btn-container');\n    this._applyFiltersButton = this.el.querySelector('.spark-filter__btn-apply');\n  };\n\n  /**\n   * Create bound versions of event listener callbacks and store them.\n   * Otherwise we can't unbind from these events later because the\n   * function signatures won't match.\n   */\n\n\n  Filter.prototype._bindEventListenerCallbacks = function _bindEventListenerCallbacks() {\n    this._onResizeBound = this._onResize.bind(this);\n    this._toggleViewBound = this._toggleView.bind(this);\n    this._toggleFilterClickBound = this.toggleFilterClick.bind(this);\n    this._onClearAllBound = this._onClearAll.bind(this);\n    this._onScrollBound = this._onScroll.bind(this);\n  };\n\n  /**\n   * Add event listeners\n   */\n\n\n  Filter.prototype._addEventListeners = function _addEventListeners() {\n    window.addEventListener('resize', this._onResizeBound);\n    window.addEventListener('scroll', this._onScrollBound);\n    !this._viewMoreButton || this._viewMoreButton.addEventListener('click', this._toggleViewBound);\n    !this._viewLessButton || this._viewLessButton.addEventListener('click', this._toggleViewBound);\n    !this._toggleFilterButton || this._toggleFilterButton.addEventListener('click', this._toggleFilterClickBound);\n    !this._clearAllButton || this._clearAllButton.addEventListener('click', this._onClearAllBound);\n  };\n\n  /**\n   * Remove event listeners\n   */\n\n\n  Filter.prototype._removeEventListeners = function _removeEventListeners() {\n    window.removeEventListener('resize', this._onResizeBound);\n    window.removeEventListener('scroll', this._onScrollBound);\n    !this._viewMoreButton || this._viewMoreButton.removeEventListener('click', this._toggleViewBound);\n    !this._viewLessButton || this._viewLessButton.removeEventListener('click', this._toggleViewBound);\n    !this._toggleFilterButton || this._toggleFilterButton.removeEventListener('click', this._toggleFilterClickBound);\n    !this._clearAllButton || this._clearAllButton.removeEventListener('click', this._onClearAllBound);\n  };\n\n  /**\n   * Initialize filter\n   */\n\n\n  Filter.prototype._initFilterDisplay = function _initFilterDisplay() {\n    this.initializingFilter = true;\n\n    if (this.moduleEls.length > 0) {\n      this.extraModulesExpanded = false;\n    }\n\n    (0, _addClass2.default)(this.el, 'spark-filter--initializing');\n\n    this._determineFilterLayout();\n  };\n\n  /**\n   * Determine which filter layout should be displayed i.e. Expand/Collapse view or Wide view\n   */\n\n\n  Filter.prototype._determineFilterLayout = function _determineFilterLayout() {\n    this.currentBreakpoint = (0, _breakpoint.get)(window.innerWidth);\n\n    switch (this.currentBreakpoint) {\n      case 'xs':\n        this._curCol = 1;\n        break;\n      case 'sm':\n        this._curCol = 2;\n        break;\n      case 'md':\n        this._curCol = 3;\n        break;\n      default:\n        this._curCol = 4;\n        break;\n    }\n\n    if (this._curCol <= 1) {\n      // Display expand-collapse filter\n      if (!this._isDropdownState) {\n        this._applyExpandCollapseLayout();\n        this._showModule();\n      }\n    } else {\n      // Display wide-screen filter\n      if (this._expandCollapseState) {\n        this._removeExpandCollapseLayout();\n      }\n\n      if ((0, _hasClass2.default)(this._buttonGroupEl, 'is-fixed')) {\n        clearTimeout(this._timeout);\n        this._filterFooter.removeAttribute('style');\n        this._buttonGroupEl.removeAttribute('style');\n        (0, _removeClass2.default)(this._buttonGroupEl, 'is-fixed');\n      }\n\n      this._showModule();\n\n      if (!this.extraModulesExpanded) {\n        this._hideModule(this._curCol, this._maxCol - 1);\n      }\n    }\n  };\n\n  /**\n   * Update the filter layout as necessary\n   */\n\n\n  Filter.prototype._updateFilterLayout = function _updateFilterLayout() {\n    this._determineFilterLayout();\n  };\n\n  /**\n   * Expand or collapse extra filters\n   */\n\n\n  Filter.prototype._toggleView = function _toggleView() {\n    if (this._isFilterExpanded && !this.extraModulesExpanded) {\n      this._showModule();\n    } else if (this._isFilterExpanded && this.extraModulesExpanded) {\n      this._hideModule(this._curCol, this._maxCol - 1);\n    }\n\n    this.extraModulesExpanded = !this.extraModulesExpanded;\n    (0, _toggleClass2.default)(this._viewMoreButton, 'hide');\n    (0, _toggleClass2.default)(this._viewLessButton, 'hide');\n  };\n\n  /**\n   * Handle click event when filter toggles are clicked\n   */\n\n\n  Filter.prototype.toggleFilterClick = function toggleFilterClick() {\n    if (this.initializingFilter) {\n      this.initializingFilter = false;\n    }\n\n    this.toggleFilter();\n  };\n\n  /**\n   * To hide or show filter module\n   * @params {String} toggle; collapse; expand;\n   * @params {Boolean} Change the value of `this._isFilterExpanded` based on the boolean value\n   */\n\n\n  Filter.prototype.toggleFilter = function toggleFilter(option, noStateChange) {\n    if ((0, _hasClass2.default)(this.el, 'spark-filter--initializing') && !this.initializingFilter) {\n      (0, _removeClass2.default)(this.el, 'spark-filter--initializing');\n      (0, _addClass2.default)(this.el, 'spark-filter--initialized');\n    }\n\n    if (option === 'expand') {\n      if (!this.initializingFilter) {\n        (0, _removeClass2.default)(this._filterContent, 'hide');\n\n        (0, _height2.default)({\n          el: this.el,\n          toggleEl: '.spark-filter__content',\n          toggleClass: 'filter-expanded',\n          action: 'expand'\n        });\n\n        this._toggleFilterLabel.innerHTML = 'Hide';\n      } else {\n        (0, _removeClass2.default)(this._filterContent, 'hide');\n      }\n\n      if (!noStateChange) {\n        this._isFilterExpanded = true;\n      }\n    } else if (option === 'collapse') {\n      if (!this.initializingFilter) {\n        (0, _addClass2.default)(this._filterContent, 'hide');\n\n        (0, _height2.default)({\n          el: this.el,\n          toggleEl: '.spark-filter__content',\n          toggleClass: 'filter-expanded',\n          action: 'collapse'\n        });\n\n        this._toggleFilterLabel.innerHTML = 'Show';\n      } else {\n        (0, _addClass2.default)(this._filterContent, 'hide');\n      }\n\n      if (!noStateChange) {\n        this._isFilterExpanded = false;\n      }\n    } else {\n      (0, _toggleClass2.default)(this._filterContent, 'hide');\n\n      if ((0, _hasClass2.default)(this.el, 'filter-expanded')) {\n        (0, _height2.default)({\n          el: this.el,\n          toggleEl: '.spark-filter__content',\n          toggleClass: 'filter-expanded',\n          action: 'collapse'\n        });\n\n        this._toggleFilterLabel.innerHTML = 'Show';\n      } else {\n        (0, _height2.default)({\n          el: this.el,\n          toggleEl: '.spark-filter__content',\n          toggleClass: 'filter-expanded',\n          action: 'expand'\n        });\n\n        this._toggleFilterLabel.innerHTML = 'Hide';\n      }\n\n      if (!noStateChange) {\n        this._isFilterExpanded = !this._isFilterExpanded;\n\n        if ((0, _hasClass2.default)(this.el, 'spark-filter--dropdown') && !(0, _hasClass2.default)(this._filterContent, 'hide')) {\n          this._calculateApplyBtnPosition();\n        }\n      }\n    }\n\n    if (!(0, _hasClass2.default)(this.el, 'spark-filter--dropdown') && (0, _hasClass2.default)(this._buttonGroupEl, 'is-fixed')) {\n      clearTimeout(this._timeout);\n      this._filterFooter.removeAttribute('style');\n      this._buttonGroupEl.removeAttribute('style');\n      (0, _removeClass2.default)(this._buttonGroupEl, 'is-fixed');\n    }\n  };\n\n  /**\n   * On-resize handler that updates layout as needed based on screen dimensions\n   */\n\n\n  Filter.prototype._onResize = function _onResize() {\n    this._updateFilterLayout();\n  };\n\n  /**\n   * On-scroll handler that determines Apply button positioning at the xs breakpoint\n   */\n\n\n  Filter.prototype._onScroll = function _onScroll() {\n    if (this._isDropdownState) {\n      this._timeout = setTimeout(this._calculateApplyBtnPosition.bind(this), 300);\n    }\n  };\n\n  /**\n   * Callback triggered after the expansion of a module at the xs breakpoint\n   */\n\n\n  Filter.prototype._onAfterExpand = function _onAfterExpand() {\n    if (!(0, _hasClass2.default)(this._buttonGroupEl, 'is-fixed')) {\n      this._timeout = setTimeout(this._calculateApplyBtnPosition.bind(this), 300);\n    }\n  };\n\n  /**\n   * Callback triggered after the collapse of a module at the xs breakpoint\n   */\n\n\n  Filter.prototype._onAfterCollapse = function _onAfterCollapse() {\n    this._timeout = setTimeout(this._calculateApplyBtnPosition.bind(this), 300);\n  };\n\n  /**\n   * Callback triggered after Show all is complete at the xs breakpoint\n   */\n\n  /* TODO: This is not required anymore as show all is not available at the xs breakpoint anymore\n  _onShowAllComplete() {\n    if(this._isDropdownState) {\n      this._timeout = setTimeout(this._calculateApplyBtnPosition.bind(this), 300);\n    }\n  }\n  */\n\n  /**\n   * Calculate the position of the Apply button at the xs breakpoint\n   */\n\n\n  Filter.prototype._calculateApplyBtnPosition = function _calculateApplyBtnPosition() {\n\n    var filterOffsets = this.el.getBoundingClientRect();\n\n    if (filterOffsets.height > 255) {\n      // 3 collapsed module heights + filter header height = 255\n      var windowHeight = window.innerHeight;\n      var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\n      var filterHiddenBefore = scrollTop - (filterOffsets.top + document.body.scrollTop);\n      var filterHiddenAfter = filterOffsets.top + document.body.scrollTop + filterOffsets.height - (scrollTop + windowHeight);\n\n      if (!(scrollTop > filterOffsets.top + document.body.scrollTop + filterOffsets.height || filterOffsets.top + document.body.scrollTop > scrollTop + window.innerHeight)) {\n        var percentInView = 100;\n        var inViewport;\n        var hiddenBefore = 0;\n        var hiddenAfter = 0;\n\n        if (filterHiddenBefore > 0) {\n          percentInView -= filterHiddenBefore * 100 / filterOffsets.height;\n          hiddenBefore = filterHiddenBefore;\n        }\n\n        if (filterHiddenAfter > 0) {\n          percentInView -= filterHiddenAfter * 100 / filterOffsets.height;\n          hiddenAfter = filterHiddenAfter;\n        }\n\n        inViewport = (filterOffsets.height - (hiddenAfter + hiddenBefore)) / windowHeight * 100;\n      }\n\n      if (filterOffsets.bottom > (window.innerHeight || document.documentElement.clientHeight) && (percentInView > 45 || inViewport > 50)) {\n        var buttonGroupHeight = this._buttonGroupEl.offsetHeight;\n        var filterWidth = filterOffsets.width;\n\n        this._filterFooter.style.height = buttonGroupHeight + 'px';\n        (0, _addClass2.default)(this._buttonGroupEl, 'is-fixed');\n        this._buttonGroupEl.style.width = filterWidth - 2 + 'px'; // accounting for border width\n        this._buttonGroupEl.style.left = filterOffsets.left + 1 + 'px'; // accounting for left border\n\n        this._applyBtnPositionFixed();\n      } else {\n        this._applyBtnPositionRelative();\n      }\n    }\n  };\n\n  /**\n   * Set position:relative for the Apply button\n   */\n\n\n  Filter.prototype._applyBtnPositionRelative = function _applyBtnPositionRelative() {\n\n    //function attachApplyBtn(){\n    var currentButtonPosition = parseInt(getComputedStyle(this._buttonGroupEl).bottom);\n    var listBottom = this._modulesContainer.getBoundingClientRect().bottom;\n    var viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n    var buttonGroupHeight = this._buttonGroupEl.getBoundingClientRect().height;\n    var distanceToMove = viewportHeight - (listBottom + buttonGroupHeight);\n\n    if (!isNaN(currentButtonPosition)) {\n      var animationListener = function animationListener() {\n        this._filterFooter.removeAttribute('style');\n        this._buttonGroupEl.removeAttribute('style');\n        (0, _removeClass2.default)(this._buttonGroupEl, 'is-fixed');\n        (0, _removeClass2.default)(this._buttonGroupEl, 'spark-filter__apply-btn-container--animate');\n        this._buttonGroupEl.removeEventListener('animationend', animationListener);\n      };\n\n      this._buttonGroupEl.addEventListener('animationend', animationListener.bind(this), false);\n\n      var keyframe = '-webkit-transform: translateY(-' + distanceToMove + 'px); transform: translateY(-' + distanceToMove + 'px);';\n\n      this._buttonGroupEl.setAttribute('style', this._buttonGroupEl.getAttribute('style') + ' ' + keyframe);\n      (0, _addClass2.default)(this._buttonGroupEl, 'spark-filter__apply-btn-container--animate');\n    }\n  };\n\n  /**\n   * Set position:fixed for the Apply button\n   */\n\n\n  Filter.prototype._applyBtnPositionFixed = function _applyBtnPositionFixed() {\n    var requestID = requestAnimationFrame(moveApplyBtn.bind(this));\n    var incrementer = .1;\n\n    function moveApplyBtn() {\n      incrementer += .01;\n      var currentButtonPosition = parseInt(getComputedStyle(this._buttonGroupEl).bottom);\n      var buttonHeight = parseInt(getComputedStyle(this._buttonGroupEl).height);\n\n      if (currentButtonPosition < buttonHeight * -1) {\n        currentButtonPosition = buttonHeight * -1;\n      }\n\n      if (currentButtonPosition > -1) {\n        this._buttonGroupEl.style.bottom = '0px';\n        cancelAnimationFrame(requestID);\n      } else if (currentButtonPosition < 0) {\n        currentButtonPosition += 1 / incrementer;\n        this._buttonGroupEl.style.bottom = currentButtonPosition + 'px';\n        requestAnimationFrame(moveApplyBtn.bind(this));\n      }\n    }\n  };\n\n  /**\n   * Callback for Clear all\n   */\n\n\n  Filter.prototype._onClearAll = function _onClearAll() {\n    (this.onClearAll || noop)();\n  };\n\n  /**\n   * Show all modules\n   */\n\n\n  Filter.prototype._showModule = function _showModule() {\n    for (var i = 0; i < this.moduleEls.length; i++) {\n      (0, _removeClass2.default)(this.moduleEls[i], 'hide');\n    }\n  };\n\n  /**\n   * Hide certain modules\n   * @param {Number} start index\n   * @param {Number} end index\n   */\n\n\n  Filter.prototype._hideModule = function _hideModule(start, end) {\n    end = end || this.moduleEls.length - 1;\n    for (var i = start; i <= end; i++) {\n      (0, _addClass2.default)(this.moduleEls[i], 'hide');\n    }\n  };\n\n  /**\n   * Apply Expand/Collapse layout for the filter\n   * Used when the filter gets to the xs breakpoint\n   */\n\n\n  Filter.prototype._applyExpandCollapseLayout = function _applyExpandCollapseLayout() {\n    (0, _addClass2.default)(this.el, 'spark-filter--dropdown');\n    this._expandCollapseState = true;\n\n    var tags = this._tagsContainer.querySelectorAll('.spark-filter__tag');\n    if (tags.length > 0) {\n      for (var i = 0; i < tags.length; i++) {\n        (0, _addClass2.default)(tags[i], 'hide');\n      }\n      (0, _removeClass2.default)(this._tagsCounter, 'hide');\n    }\n\n    (0, _addClass2.default)(this._viewMoreButton, 'hide');\n    (0, _addClass2.default)(this._viewLessButton, 'hide');\n\n    if (this._applyFiltersButton) {\n      (0, _removeClass2.default)(this._applyFiltersButton, 'spark-btn--sm');\n      (0, _addClass2.default)(this._applyFiltersButton, 'spark-btn--block');\n    }\n\n    for (var j = 0; j < this.moduleInsts.length; j++) {\n      this.moduleInsts[j]._applyExpand();\n    }\n\n    this._isDropdownState = true;\n    this._timeout = setTimeout(this._calculateApplyBtnPosition.bind(this), 300);\n  };\n\n  /**\n   * Remove Expand/Collapse layout and apply the horizontal layout for the filter\n   * Used when the screen size is larger than the xs breakpoint\n   */\n\n\n  Filter.prototype._removeExpandCollapseLayout = function _removeExpandCollapseLayout() {\n\n    (0, _removeClass2.default)(this.el, 'spark-filter--dropdown');\n    this._expandCollapseState = false;\n    this._filterFooter.removeAttribute('style');\n    this._buttonGroupEl.removeAttribute('style');\n    (0, _removeClass2.default)(this._buttonGroupEl, 'is-fixed');\n\n    var tags = this._tagsContainer.querySelectorAll('.spark-filter__tag');\n    if (tags.length > 0) {\n      for (var i = 0; i < tags.length; i++) {\n        (0, _removeClass2.default)(tags[i], 'hide');\n      }\n      (0, _addClass2.default)(this._tagsCounter, 'hide');\n    }\n\n    if (this.extraModulesExpanded) {\n      (0, _removeClass2.default)(this._viewLessButton, 'hide');\n    } else {\n      (0, _removeClass2.default)(this._viewMoreButton, 'hide');\n    }\n\n    if (this._applyFiltersButton) {\n      (0, _addClass2.default)(this._applyFiltersButton, 'spark-btn--sm');\n      (0, _removeClass2.default)(this._applyFiltersButton, 'spark-btn--block');\n    }\n\n    for (var j = 0; j < this.moduleInsts.length; j++) {\n      this.moduleInsts[j]._disapplyExpand();\n    }\n    this._isDropdownState = false;\n  };\n\n  /**\n   * Generate a tag element in filter, which will be directly posted inside `.spark-filter__tags-container`\n   * @param {string} input name - Name of the input to allow any callbacks to target input specifically\n   * @param {string} tag label - The label to be displayed in the tag. This could be the input's label or another user defined label\n   * @param {function} callback function for `X` button\n   */\n\n\n  Filter.prototype.createTagEl = function createTagEl(input, label, clearCallback) {\n    var tagEl = document.createElement('div');\n    tagEl.className = (0, _hasClass2.default)(this.el, 'spark-filter--dropdown') ? 'spark-filter__tag hide' : 'spark-filter__tag';\n    tagEl.setAttribute('data-filter-name', input);\n    tagEl.innerHTML = '<span class=\"spark-filter__tag__label\">' + label + '</span><i class=\"spark-icon spark-filter__tag__close\"></i>';\n\n    this._tagsContainer.insertBefore(tagEl, this._clearAllButton);\n\n    // create event listener after adding element to DOM\n    tagEl.querySelector('.spark-filter__tag__close').addEventListener('click', clearCallback || noop);\n\n    (0, _removeClass2.default)(this._clearAllButton, 'hide');\n\n    // Show tag count if on small screen and this is initial application of filters\n    if ((0, _hasClass2.default)(this.el, 'spark-filter--dropdown')) (0, _removeClass2.default)(this._tagsCounter, 'hide');\n  };\n\n  /**\n   * Remove all tags\n   */\n\n\n  Filter.prototype.clearAllTagEls = function clearAllTagEls() {\n    var tags = this._tagsContainer.querySelectorAll('.spark-filter__tag');\n    for (var i = 0; i < tags.length; i++) {\n      this._tagsContainer.removeChild(tags[i]);\n    }\n\n    // Reset counter\n    var counter = this._tagsContainer.querySelector('span');\n    counter.innerHTML = '0';\n\n    (0, _addClass2.default)(this._clearAllButton, 'hide');\n    (0, _addClass2.default)(this._tagsCounter, 'hide');\n  };\n\n  /**\n   * Show Module Clear Button\n   * @param {Element} moduleName An identifier for the module being targeted\n   */\n\n\n  Filter.prototype.showModuleClearButton = function showModuleClearButton(moduleName) {\n    for (var i = 0; i < this.moduleInsts.length; i++) {\n      if (this.moduleInsts[i].el.getAttribute('data-filter-module') === moduleName) {\n        this.moduleInsts[i].enableClearBtn();\n      }\n    }\n  };\n\n  /**\n   * Disable Module Clear Button\n   * @param {Element} moduleName An identifier for the module being targeted\n   */\n\n\n  Filter.prototype.disableModuleClearButton = function disableModuleClearButton(moduleName) {\n    for (var i = 0; i < this.moduleInsts.length; i++) {\n      if (this.moduleInsts[i].el.getAttribute('data-filter-module') === moduleName) {\n        this.moduleInsts[i].disableClearBtn();\n      }\n    }\n  };\n\n  /**\n   * Hide Module Clear Button\n   * @param {Element} moduleName An identifier for the module being targeted\n   */\n\n\n  Filter.prototype.hideModuleClearButton = function hideModuleClearButton(moduleName) {\n    for (var i = 0; i < this.moduleInsts.length; i++) {\n      if (this.moduleInsts[i].el.getAttribute('data-filter-module') === moduleName) {\n        this.moduleInsts[i].hideClearBtn();\n      }\n    }\n  };\n\n  /**\n   * Get Module Clear button status\n   *  @param {Element} moduleName An identifier for the module being targeted\n   */\n\n\n  Filter.prototype.moduleClearButtonStatus = function moduleClearButtonStatus(moduleName) {\n    for (var i = 0; i < this.moduleInsts.length; i++) {\n      if (this.moduleInsts[i].el.getAttribute('data-filter-module') === moduleName) {\n        return this.moduleInsts[i].getClearButtonStatus();\n      }\n    }\n  };\n\n  return Filter;\n}(_base2.default);\n\n/**\n * Whitelisted parameters which can be set on construction.\n * @type {Array}\n */\n\n\nFilter.prototype._whitelistedParams = ['onClearAll', 'moduleOptions'];\n\n/**\n * Default values for internal properties we will be setting.\n * These are set on each construction so we don't leak properties\n * into the prototype chain.\n * @type {Object}\n */\nFilter.prototype.defaults = {\n  el: null,\n  moduleEls: [],\n  _filterToggleContainer: null,\n  _toggleFilterButton: null,\n  _toggleFilterLabel: null,\n  _tagsContainer: null,\n  _tagsCounter: null,\n  _clearAllButton: null,\n  _filterContent: null,\n  _modulesContainer: null,\n  _viewMoreButton: null,\n  _viewLessButton: null,\n  _filterFooter: null,\n  _buttonGroupEl: null,\n  _applyFiltersButton: null,\n  moduleInsts: [],\n  moduleOptions: [],\n  maxCol: 4,\n  onClearAll: noop,\n  extraModulesExpanded: false,\n  _isFilterExpanded: false,\n  _isDropdownState: false,\n  _isModuleExpand: true,\n  _curCol: 4,\n  _onResizeBound: null,\n  _toggleViewBound: null,\n  _toggleFilterClickBound: null,\n  _onClearAllBound: null,\n  _onScrollBound: null\n};\n\nexports.default = Filter;\nmodule.exports = exports['default'];\n//# sourceMappingURL=filter.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _base = require('./base');\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _toggleClass = require('../helpers/dom/toggle-class');\n\nvar _toggleClass2 = _interopRequireDefault(_toggleClass);\n\nvar _addClass = require('../helpers/dom/add-class');\n\nvar _addClass2 = _interopRequireDefault(_addClass);\n\nvar _removeClass = require('../helpers/dom/remove-class');\n\nvar _removeClass2 = _interopRequireDefault(_removeClass);\n\nvar _hasClass = require('../helpers/dom/has-class');\n\nvar _hasClass2 = _interopRequireDefault(_hasClass);\n\nvar _getParent = require('../helpers/traversal/get-parent');\n\nvar _getParent2 = _interopRequireDefault(_getParent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * # Modal\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Show content in a modal.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @example\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * new Modal(el);\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @module components/modal.js\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar Modal = function (_BaseComponent) {\n  _inherits(Modal, _BaseComponent);\n\n  /**\n   * Modal constructor.\n   * @param {Element} el\n   * @param {Object} params\n   */\n  function Modal(el) {\n    var _this;\n\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Modal);\n\n    params.elRequired = true;\n\n    if (!(_this = _possibleConstructorReturn(this, _BaseComponent.call(this, el, params)), _this)) {\n      return _possibleConstructorReturn(_this);\n    }\n\n    _this._bindEventListenerCallbacks();\n    _this._addEventListeners();\n    return _possibleConstructorReturn(_this);\n  }\n\n  /**\n   * Open\n   */\n\n\n  Modal.prototype.open = function open() {\n\n    this.isActive = true;\n    this._addWindowEventListeners();\n    this._updateClasses();\n    (0, _addClass2.default)(document.body, 'spark-modal-open');\n\n    return this;\n  };\n\n  /**\n   * Close\n   */\n\n\n  Modal.prototype.close = function close() {\n\n    this.isActive = false;\n    this._removeWindowEventListeners();\n    this._updateClasses();\n    (0, _removeClass2.default)(document.body, 'spark-modal-open');\n\n    return this;\n  };\n\n  /**\n   * Update the component to use a new element or reparse from\n   * the existing element.\n   * @param {Element} el Optional\n   * @param {Object} params\n   */\n\n\n  Modal.prototype.update = function update(el) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\n    this._removeEventListeners();\n    this._cacheElements(el || this.el, params);\n    this._addEventListeners();\n    this._updateClasses();\n    this._removeWindowEventListeners();\n\n    if (this.isActive) {\n      this._addWindowEventListeners();\n    }\n\n    return this;\n  };\n\n  /**\n   * Store a reference to the element. Either a modal itself\n   * or a button referencing a modal may be passed.\n   * @param {Element} el\n   * @param {Element} params @optional\n   */\n\n\n  Modal.prototype._cacheElements = function _cacheElements(el, params) {\n\n    var modalPassed = (0, _hasClass2.default)(el, 'spark-modal');\n    var modalEl = params.modalEl;\n\n    if (modalPassed) {\n      this.modalEl = el;\n    } else {\n      this.el = el;\n      this.modalEl = modalEl || document.querySelector(el.getAttribute('data-modal'));\n    }\n\n    this.scrollEl = this.modalEl.querySelector('.spark-modal__scroll') || this.modalEl;\n\n    this.isActive = (0, _hasClass2.default)(this.el || this.modalEl, 'active');\n  };\n\n  /**\n   * Update classes for the open or close state.\n   */\n\n\n  Modal.prototype._updateClasses = function _updateClasses() {\n    (0, _toggleClass2.default)(this.modalEl, 'active', this.isActive);\n  };\n\n  /**\n   * Create bound versions of event listener callbacks and store them.\n   * Otherwise we can't unbind from these events later because the\n   * function signatures won't match.\n   */\n\n\n  Modal.prototype._bindEventListenerCallbacks = function _bindEventListenerCallbacks() {\n    this._onClickBound = this._onClick.bind(this);\n    this._onKeyupBound = this._onKeyup.bind(this);\n    this._onModalClickBound = this._onModalClick.bind(this);\n  };\n\n  /**\n   * Add event listeners for DOM events.\n   */\n\n\n  Modal.prototype._addEventListeners = function _addEventListeners() {\n    if (this.el) this.el.addEventListener('click', this._onClickBound);\n    if (this.modalEl) this.modalEl.addEventListener('click', this._onModalClickBound);\n  };\n\n  /**\n   * Remove event listeners for DOM events..\n   */\n\n\n  Modal.prototype._removeEventListeners = function _removeEventListeners() {\n    if (this.el) this.el.removeEventListener('click', this._onClickBound);\n    if (this.modalEl) this.modalEl.removeEventListener('click', this._onModalClickBound);\n  };\n\n  /**\n   * Add event listeners for DOM events.\n   */\n\n\n  Modal.prototype._addWindowEventListeners = function _addWindowEventListeners() {\n    this._removeWindowEventListeners();\n    window.addEventListener('keyup', this._onKeyupBound);\n  };\n\n  /**\n   * Remove event listeners for DOM events..\n   */\n\n\n  Modal.prototype._removeWindowEventListeners = function _removeWindowEventListeners() {\n    window.removeEventListener('keyup', this._onKeyupBound);\n  };\n\n  /**\n   * When the button is clicked.\n   * @param {Object} e\n   */\n\n\n  Modal.prototype._onClick = function _onClick() {\n    this.open();\n  };\n\n  /**\n   * When we are clicked, toggle the opened state.\n   * @param {Object} e\n   */\n\n\n  Modal.prototype._onModalClick = function _onModalClick(e) {\n\n    // The close button is clicked or the actual modal (gray area)\n    if (e.target === this.scrollEl || e.target === this.modalEl || (0, _getParent2.default)(e.target, '.spark-modal__close, .spark-modal__dismiss', this.scrollEl)) {\n      e.preventDefault();\n      this.close();\n    }\n  };\n\n  /**\n   * When a key is pressed on the window and it's an ESC, close the modal.\n   * @param {Object} e\n   */\n\n\n  Modal.prototype._onKeyup = function _onKeyup(e) {\n    if (e.keyCode === 27) {\n      this.close();\n    }\n  };\n\n  return Modal;\n}(_base2.default);\n\n/**\n * Default values for internal properties we will be setting.\n * These are set on each construction so we don't leak properties\n * into the prototype chain.\n * @type {Object}\n */\n\n\nModal.prototype.defaults = {\n  el: null,\n  modalEl: null,\n  scrollEl: null,\n  isActive: false,\n  _onClickBound: null,\n  _onKeyupBound: null,\n  _onModalClickBound: null\n};\n\nexports.default = Modal;\nmodule.exports = exports['default'];\n//# sourceMappingURL=modal.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _outerHeight = require('../dom/outer-height');\n\nvar _outerHeight2 = _interopRequireDefault(_outerHeight);\n\nvar _addClass = require('../dom/add-class');\n\nvar _addClass2 = _interopRequireDefault(_addClass);\n\nvar _removeClass = require('../dom/remove-class');\n\nvar _removeClass2 = _interopRequireDefault(_removeClass);\n\nvar _hasClass = require('../dom/has-class');\n\nvar _hasClass2 = _interopRequireDefault(_hasClass);\n\nvar _toggleClass = require('../dom/toggle-class');\n\nvar _toggleClass2 = _interopRequireDefault(_toggleClass);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar noop = function noop() {}; /**\n                                * # Animate Height\n                                * Animate the height of an element since we can't do this w/ pure CSS. Sigh.\n                                *\n                                * @example\n                                * animateHeight({\n                                *   el: ...,\n                                *   toggleEl: ...,\n                                *   // Optional params\n                                *   action: 'collapse'|'expand',\n                                *   heightAnimationClass: 'spark-animate-height',\n                                *   opacityAnimationClass: 'spark-animate-opacity',\n                                *   toggleProperty: 'display'|'overflow'|'visibility',\n                                *   toggleValue: 'block'|'none'|'visible'|'hidden',\n                                *   animationDuration: 250\n                                * });\n                                *\n                                * @module helpers/animation/height.js\n                                */\n\nvar runningAnimations = {\n  els: [],\n  completeCallbacks: []\n};\n\n/**\n * Get the inverse toggle value\n * @param  {String} property\n * @param  {String} originalValue\n * @return {String}\n */\nfunction getInverseToggleValue(el, property, originalValue) {\n\n  // Get the value to toggle to for the given property\n  switch (property) {\n    case 'overflow':\n    case 'visibility':\n      return originalValue === 'visible' ? 'hidden' : 'visible';\n    default:\n      return originalValue === 'block' || originalValue === 'inline-block' ? 'none' : 'block';\n  }\n}\n\n/**\n * When an animation is complete, clean up and run the callback.\n * @param  {Object} params\n */\nfunction onComplete(params) {\n\n  // Reset toggle el visibility\n  if (params.toggleClassName) {\n    (0, _toggleClass2.default)(params.el, params.toggleClassName, !params.collapse);\n  } else {\n    params.toggleEl.style[params.toggleProperty] = '';\n  }\n\n  // Remove the height property\n  params.el.style.height = '';\n  params.toggleEl.style.height = '';\n  params.toggleEl.style.marginBottom = '';\n  params.toggleEl.style.marginTop = '';\n\n  // Remove the spark-animate-height class so the transitions no longer apply\n  (0, _removeClass2.default)(params.el, params.heightAnimationClass);\n  (0, _removeClass2.default)(params.toggleEl, params.heightAnimationClass);\n\n  // Run the callback\n  params.onComplete();\n\n  // Remove the element and callback from their respective arrays\n  var runningIndex = runningAnimations.els.indexOf(params.el);\n  runningAnimations.els.splice(runningIndex, 1);\n  runningAnimations.completeCallbacks.splice(runningIndex, 1);\n}\n\n/**\n * @param {Object} params\n */\nfunction animateHeight(params) {\n\n  params = params || {};\n\n  var el = params.el;\n\n  if (!el) {\n    return;\n  }\n\n  var collapse = params.action && params.action === 'collapse';\n  var heightAnimationClass = params.heightAnimationClass || 'spark-animate-height';\n\n  // Allow for elements to be passed or selector strings\n  var toggleEl = typeof params.toggleEl === 'string' ? el.querySelector(params.toggleEl) : params.toggleEl;\n\n  // No element to be switching with toggling so we can't determine the desired height to animate to.\n  if (!toggleEl || (0, _hasClass2.default)(el, 'spark-no-animate')) {\n    return;\n  }\n\n  var toggleClassName = params.toggleClass;\n\n  // The style property to use when toggling visibility\n  var toggleProperty = params.toggleProperty || 'display';\n  var toggleStyles = window.getComputedStyle(toggleEl);\n  var originalToggleValue = toggleStyles[toggleProperty];\n  var toggleValue = params.toggleValue || getInverseToggleValue(toggleProperty, originalToggleValue);\n\n  // If we are already animating, stop now.\n  var runningIndex = runningAnimations.els.indexOf(el);\n  if (runningIndex !== -1) {\n\n    var completeCallback = runningAnimations.completeCallbacks[runningIndex];\n    if (completeCallback) {\n      clearTimeout(completeCallback);\n    }\n\n    onComplete({\n      el: el,\n      toggleEl: toggleEl,\n      onComplete: params.onComplete || noop,\n      collapse: collapse,\n      toggleProperty: toggleProperty,\n      toggleClassName: toggleClassName,\n      toggleValue: toggleValue,\n      heightAnimationClass: heightAnimationClass\n    });\n  }\n\n  // Store the current height\n  var originalHeight = (0, _outerHeight2.default)(el);\n\n  // Toggle the visible property\n  if (toggleClassName) {\n    (0, _toggleClass2.default)(el, toggleClassName, !collapse);\n  } else {\n    toggleEl.style[toggleProperty] = toggleValue;\n  }\n\n  // When measuring the size for a collapse, we have to wait a tic for it to be\n  // accurate. Not sure why. Ugh.\n  if (collapse) {\n    setTimeout(runAnimation, 0);\n  } else {\n    runAnimation();\n  }\n\n  function runAnimation() {\n\n    // Now that the toggle el is taking up space, get the new height which we will be animating to\n    var targetElHeight = (0, _outerHeight2.default)(el);\n\n    // We need to store the original and target toggle element heights. They differ depending on\n    // whether we are going to expand or collapse.\n    var targetToggleElHeight = void 0;\n    var originalToggleElHeight = void 0;\n\n    // If we are collapsing, reset the toggle style and set it when we're done. Set the height so\n    // that we can animate down to 0 or up to the target height.\n    if (collapse) {\n\n      if (toggleClassName) {\n        (0, _removeClass2.default)(el, toggleClassName);\n      } else {\n        toggleEl.style[toggleProperty] = originalToggleValue;\n      }\n\n      originalToggleElHeight = (0, _outerHeight2.default)(toggleEl, toggleStyles);\n      targetToggleElHeight = 0;\n    } else {\n      targetToggleElHeight = (0, _outerHeight2.default)(toggleEl, toggleStyles);\n      originalToggleElHeight = 0;\n    }\n\n    // Set the original height\n    el.style.height = originalHeight + 'px';\n    toggleEl.style.height = originalToggleElHeight + 'px';\n    toggleEl.style.marginBottom = '0px';\n    toggleEl.style.marginTop = '0px';\n\n    // Add the spark-animate-height class which will setup the transition-property and duration\n    (0, _addClass2.default)(el, heightAnimationClass);\n    (0, _addClass2.default)(toggleEl, heightAnimationClass);\n\n    runningAnimations.els.push(el);\n\n    // We need to wait a tick to toggle the height or else the animation class won't function\n    setTimeout(function () {\n\n      // Set the height to the target height\n      el.style.height = targetElHeight + 'px';\n      toggleEl.style.height = targetToggleElHeight + 'px';\n\n      // Remove inline styles after the animation is complete\n      runningAnimations.completeCallbacks.push(setTimeout(function () {\n        onComplete({\n          el: el,\n          toggleEl: toggleEl,\n          onComplete: params.onComplete || noop,\n          collapse: collapse,\n          toggleProperty: toggleProperty,\n          toggleClassName: toggleClassName,\n          toggleValue: toggleValue,\n          heightAnimationClass: heightAnimationClass\n        });\n      }, params.animationDuration !== undefined ? params.animationDuration : 201));\n    }, 0);\n  }\n}\n\nexports.default = animateHeight;\nmodule.exports = exports['default'];\n//# sourceMappingURL=height.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _trim = require('../util/trim');\n\nvar _trim2 = _interopRequireDefault(_trim);\n\nvar _hasClass = require('./has-class');\n\nvar _hasClass2 = _interopRequireDefault(_hasClass);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * # Add Class\n * Add a class on an element.\n *\n * @param {Element|Array} el An element or array of elements to update.\n * @param {String} name\n * @return {Element}\n *\n * @module helpers/dom/add-class.js\n */\n\nvar ws = /\\s+/;\nvar cleanup = /\\s{2,}/g;\n\nfunction addClass(el, name) {\n\n  if (arguments.length === 2 && typeof name === 'string') {\n    name = (0, _trim2.default)(name).split(ws);\n  } else {\n    name = name instanceof Array ? name : Array.prototype.slice.call(arguments, 1);\n  }\n\n  // optimize for best, most common case\n  if (name.length === 1 && el.classList) {\n    if (name[0]) {\n      el.classList.add(name[0]);\n    }\n    return el;\n  }\n\n  var toAdd = [];\n  var i = 0;\n  var l = name.length;\n  var item = void 0;\n  var clsName = typeof el.className === 'string' ? el.className : el.getAttribute ? el.getAttribute('class') : '';\n\n  // see if we have anything to add\n  for (; i < l; i++) {\n    item = name[i];\n    if (item && !(0, _hasClass2.default)(clsName, item)) {\n      toAdd.push(item);\n    }\n  }\n\n  if (toAdd.length) {\n    if (typeof el.className === 'string') {\n      el.className = (0, _trim2.default)((clsName + ' ' + toAdd.join(' ')).replace(cleanup, ' '));\n    } else if (el.setAttribute) {\n      el.setAttribute('class', (0, _trim2.default)((clsName + ' ' + toAdd.join(' ')).replace(cleanup, ' ')));\n    }\n  }\n\n  return el;\n}\n\nexports.default = addClass;\nmodule.exports = exports['default'];\n//# sourceMappingURL=add-class.js.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Breakpoint Helpers\n * Find the active breakpoint.\n *\n * @param {Number} width\n *\n * @module helpers/dom/breakpoint.js\n */\n\n/**\n * Breakpoints being used in the CSS.\n * @type {Object}\n */\nvar defaultBreakpoints = {\n  xs: {\n    min: 0,\n    max: 543\n  },\n  sm: {\n    min: 544,\n    max: 795\n  },\n  md: {\n    min: 796,\n    max: 1047\n  },\n  lg: {\n    min: 1048,\n    max: 1799\n  },\n  xl: {\n    min: 1800,\n    max: Infinity\n  }\n};\n\nfunction get(width, breakpoints) {\n\n  breakpoints = breakpoints || defaultBreakpoints;\n\n  var i = void 0;\n\n  for (i in breakpoints) {\n    if (width >= breakpoints[i].min && width <= breakpoints[i].max) {\n      return i;\n    }\n  }\n}\n\nexports.get = get;\n//# sourceMappingURL=breakpoint.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/**\n * # Has Class\n * See if an element has a class.\n *\n * @param {Element|String} el\n * @param {String} name\n * @return {Boolean}\n *\n * @module helpers/dom/has-class.js\n */\nfunction hasClass(el, name) {\n  var cName = ((typeof el === 'undefined' ? 'undefined' : _typeof(el)) === 'object' ? el.className || el.getAttribute && el.getAttribute('class') || '' : el || '').replace(/[\\t\\r\\n\\f]/g, ' ');\n  return (' ' + cName + ' ').indexOf(' ' + name + ' ') !== -1;\n}\n\nexports.default = hasClass;\nmodule.exports = exports['default'];\n//# sourceMappingURL=has-class.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _each = require('../util/each');\n\nvar _each2 = _interopRequireDefault(_each);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar props = ['marginTop', 'marginBottom', 'borderTop', 'borderBottom']; /**\n                                                                         * # Outer Height\n                                                                         * Get the outer height of an element (including margin and border)\n                                                                         *\n                                                                         * @param {Element} el\n                                                                         * @param {Object} styles Optional Already have computed styles? Pass them in.\n                                                                         *\n                                                                         * @example\n                                                                         * outerHeight(el, computedStyles);\n                                                                         *\n                                                                         * @module helpers/outer-height.js\n                                                                         */\n\n\nfunction outerHeight(el, styles) {\n\n  styles = styles || window.getComputedStyle(el);\n\n  var height = el.clientHeight;\n\n  (0, _each2.default)(props, function (prop) {\n    height += parseInt(styles[prop] || 0, 10);\n  });\n\n  return height;\n}\n\nexports.default = outerHeight;\nmodule.exports = exports['default'];\n//# sourceMappingURL=outer-height.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _trim = require('../util/trim');\n\nvar _trim2 = _interopRequireDefault(_trim);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ws = /\\s+/; /**\n                 * # Remove Class\n                 * Remove a class on an element.\n                 *\n                 * @param {Element|Array} el An element or array of elements to update.\n                 * @param {String} name\n                 * @return {Element}\n                 *\n                 * @module helpers/dom/remove-class.js\n                 */\n\nvar cleanup = /\\s{2,}/g;\n\nfunction removeClass(el, name) {\n\n  if (arguments.length === 2 && typeof name === 'string') {\n    name = (0, _trim2.default)(name).split(ws);\n  } else {\n    name = name instanceof Array ? name : Array.prototype.slice.call(arguments, 1);\n  }\n\n  // optimize for best, most common case\n  if (name.length === 1 && el.classList) {\n    if (name[0]) el.classList.remove(name[0]);\n    return el;\n  }\n\n  // store two copies\n  var clsName = ' ' + (typeof el.className === 'string' ? el.className : el.getAttribute ? el.getAttribute('class') : '') + ' ';\n  var result = clsName;\n  var current = void 0;\n  var start = void 0;\n  for (var i = 0, l = name.length; i < l; i++) {\n    current = name[i];\n    start = current ? result.indexOf(' ' + current + ' ') : -1;\n    if (start !== -1) {\n      start += 1;\n      result = result.slice(0, start) + result.slice(start + current.length);\n    }\n  }\n\n  // only write if modified\n  if (clsName !== result) {\n    if (typeof el.className === 'string') {\n      el.className = (0, _trim2.default)(result.replace(cleanup, ' '));\n    } else if (el.setAttribute) {\n      el.setAttribute('class', (0, _trim2.default)(result.replace(cleanup, ' ')));\n    }\n  }\n\n  return el;\n}\n\nexports.default = removeClass;\nmodule.exports = exports['default'];\n//# sourceMappingURL=remove-class.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _hasClass = require('./has-class');\n\nvar _hasClass2 = _interopRequireDefault(_hasClass);\n\nvar _addClass = require('./add-class');\n\nvar _addClass2 = _interopRequireDefault(_addClass);\n\nvar _removeClass = require('./remove-class');\n\nvar _removeClass2 = _interopRequireDefault(_removeClass);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction toggleClass(el, name, enable) {\n\n  if (!el) {\n    return;\n  }\n\n  // If we're passed an array, toggle the class on each.\n  if (el instanceof NodeList || el instanceof Array) {\n\n    for (var i = 0, len = el.length; i < len; i++) {\n      toggleClass(el[i], name, enable);\n    }\n\n    return;\n  }\n\n  var action = void 0;\n  if (enable !== undefined) {\n    enable = typeof enable === 'function' ? enable.call(null, el) : enable;\n    action = enable ? 'add' : 'remove';\n  } else {\n    action = (0, _hasClass2.default)(el, name) ? 'remove' : 'add';\n  }\n\n  return (action === 'add' ? _addClass2.default : _removeClass2.default)(el, name);\n} /**\n   * # Toggle Class\n   * Toggle a class on an element given a condition.\n   *\n   * @param {Element|Array} el An element or array of elements to update.\n   * @param {String} name\n   * @param {Boolean} enable\n   * @return {Element}\n   *\n   * @module  helpers/dom/toggle-class.js\n   */\n\nexports.default = toggleClass;\nmodule.exports = exports['default'];\n//# sourceMappingURL=toggle-class.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _matches = require('./matches');\n\nvar _matches2 = _interopRequireDefault(_matches);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getParent(parent, query, limitEl) {\n\n  limitEl = limitEl instanceof Array ? limitEl : [limitEl || document.body];\n\n  while (parent) {\n\n    if ((0, _matches2.default)(parent, query)) {\n      return parent;\n    }\n\n    if (limitEl.indexOf(parent) !== -1) {\n      return false;\n    }\n\n    parent = parent.parentNode;\n  }\n\n  return false;\n} /**\n   * # Get Parent\n   * See if an element has another element for a parent.\n   *\n   * @param {Element} parent\n   * @param {String} query\n   * @param {Array|Element} limitEl The last element we should check.\n   * @return {Boolean|Element}\n   *\n   * @module helpers/traversal/get-parent.js\n   */\n\nexports.default = getParent;\nmodule.exports = exports['default'];\n//# sourceMappingURL=get-parent.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Matches\n * See if an element matches a query selector.\n *\n * @param {Element} el\n * @param {String} query\n * @return {Boolean}\n *\n * @module helpers/traversal/matches.js\n */\nvar vendorMatch = typeof Element !== 'undefined' && (Element.prototype.matches || Element.prototype.matchesSelector || Element.prototype.webkitMatchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.oMatchesSelector);\n\nfunction matches(el, query) {\n\n  if (vendorMatch) return vendorMatch.call(el, query);\n\n  var nodes = el.parentNode ? el.parentNode.querySelectorAll(query) : [];\n\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i] === el) return true;\n  }\n\n  return false;\n}\n\nexports.default = matches;\nmodule.exports = exports['default'];\n//# sourceMappingURL=matches.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Each\n * Apply a callback function to a list of any kind: Array, NodeList, HTMLCollection or Object.\n *\n * @param {Array|NodeList|HTMLCollection|Object} list\n * @param {Function} cb\n *\n * @example\n * each([], callback);\n * each(el.children, callback);\n * each(el.childNodes, callback);\n * each({}, callback);\n *\n * @module helpers/util/each.js\n */\nfunction each(list, cb) {\n\n  if (!list) {\n    return;\n  }\n\n  if (typeof cb !== 'function') {\n    throw new Error('Cannot invoke `each` without a callback!');\n  }\n\n  var i = 0;\n  var len = list.length;\n\n  // Object\n  if (len === undefined) {\n    for (i in list) {\n      if (i !== 'prototype' && list.hasOwnProperty(i)) {\n        cb(i, list[i]);\n      }\n    }\n  }\n  // Array-like\n  else {\n      for (; i < len; i++) {\n        cb(list[i]);\n      }\n    }\n}\n\nexports.default = each;\nmodule.exports = exports['default'];\n//# sourceMappingURL=each.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * # Trim\n * Trim whitespace on a string.\n *\n * @param {String} str\n *\n * @module helpers/util/trim.js\n */\n\nvar trimRE = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;\n\nfunction trim(str) {\n  return str.replace(trimRE, '');\n}\n\nexports.default = trim;\nmodule.exports = exports['default'];\n//# sourceMappingURL=trim.js.map\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9kaXN0L2NvbXBvbmVudHMvYmFzZS5qcyIsImpzL2Rpc3QvY29tcG9uZW50cy9leHBhbmQuanMiLCJqcy9kaXN0L2NvbXBvbmVudHMvZmlsdGVyLW1vZHVsZS5qcyIsImpzL2Rpc3QvY29tcG9uZW50cy9maWx0ZXIuanMiLCJqcy9kaXN0L2NvbXBvbmVudHMvbW9kYWwuanMiLCJqcy9kaXN0L2hlbHBlcnMvYW5pbWF0aW9uL2hlaWdodC5qcyIsImpzL2Rpc3QvaGVscGVycy9kb20vYWRkLWNsYXNzLmpzIiwianMvZGlzdC9oZWxwZXJzL2RvbS9icmVha3BvaW50LmpzIiwianMvZGlzdC9oZWxwZXJzL2RvbS9oYXMtY2xhc3MuanMiLCJqcy9kaXN0L2hlbHBlcnMvZG9tL291dGVyLWhlaWdodC5qcyIsImpzL2Rpc3QvaGVscGVycy9kb20vcmVtb3ZlLWNsYXNzLmpzIiwianMvZGlzdC9oZWxwZXJzL2RvbS90b2dnbGUtY2xhc3MuanMiLCJqcy9kaXN0L2hlbHBlcnMvdHJhdmVyc2FsL2dldC1wYXJlbnQuanMiLCJqcy9kaXN0L2hlbHBlcnMvdHJhdmVyc2FsL21hdGNoZXMuanMiLCJqcy9kaXN0L2hlbHBlcnMvdXRpbC9lYWNoLmpzIiwianMvZGlzdC9oZWxwZXJzL3V0aWwvdHJpbS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaFBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZWFjaCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvdXRpbC9lYWNoJyk7XG5cbnZhciBfZWFjaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lYWNoKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH0gLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogIyBCYXNlIENvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFRoZSBiYXNlIGNsYXNzIGZvciBTcGFyayBKUyBjb21wb25lbnRzLiBUaGlzIGNsYXNzIHNob3VsZCBuZXZlciBiZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGluc3RhbnRpYXRlZCBkaXJlY3RseS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAbW9kdWxlIGNvbXBvbmVudHMvYmFzZS5qc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuXG52YXIgbm9vcCA9IGZ1bmN0aW9uIG5vb3AoKSB7fTtcblxudmFyIEJhc2UgPSBmdW5jdGlvbiAoKSB7XG5cbiAgLyoqXG4gICAqIFNldCBwYXJhbWV0ZXJzIGFuZCBjYWNoZSBlbGVtZW50cy5cbiAgICovXG4gIGZ1bmN0aW9uIEJhc2UoZWwpIHtcbiAgICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCYXNlKTtcblxuICAgIGlmIChwYXJhbXMuZWxSZXF1aXJlZCAmJiAhZWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnNldFBhcmFtcyh0aGlzLmRlZmF1bHRzIHx8IHt9LCB0cnVlKTtcbiAgICB0aGlzLnNldFBhcmFtcyhwYXJhbXMpO1xuICAgICh0aGlzLl9jYWNoZUVsZW1lbnRzIHx8IG5vb3ApLmNhbGwodGhpcywgZWwsIHBhcmFtcyk7XG4gICAgKHRoaXMuX3BhcnNlUGFyYW1zIHx8IG5vb3ApLmNhbGwodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBjb21wb25lbnQgZnJvbSB0aGUgRE9NIGFuZCBwcmVwYXJlIGZvciBnYXJiYWdlIGNvbGxlY3Rpb24gYnkgZGVyZWZlcmVuY2luZyB2YWx1ZXMuXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gbGVhdmVFbGVtZW50IExlYXZlIHRoZSBlbGVtZW50IGludGFjdC5cbiAgICovXG5cblxuICBCYXNlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUobGVhdmVFbGVtZW50KSB7XG5cbiAgICBpZiAodGhpcy5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMpIHtcbiAgICAgIHRoaXMuX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgaWYgKCFsZWF2ZUVsZW1lbnQgJiYgdGhpcy5lbCAmJiB0aGlzLmVsLnBhcmVudE5vZGUpIHtcbiAgICAgIHRoaXMuZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsKTtcbiAgICB9XG5cbiAgICB0aGlzLnVuc2V0UGFyYW1zKHRoaXMuZGVmYXVsdHMpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgY29tcG9uZW50IHRvIHVzZSBhIG5ldyBlbGVtZW50IG9yIHJlcGFyc2UgZnJvbVxuICAgKiB0aGUgZXhpc3RpbmcgZWxlbWVudC5cbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbCBPcHRpb25hbFxuICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIE9wdGlvbmFsXG4gICAqL1xuXG5cbiAgQmFzZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKGVsKSB7XG4gICAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cblxuICAgIGlmICh0aGlzLl9yZW1vdmVFdmVudExpc3RlbmVycykge1xuICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICAodGhpcy5fY2FjaGVFbGVtZW50cyB8fCBub29wKS5jYWxsKHRoaXMsIGVsIHx8IHRoaXMuZWwsIHBhcmFtcyk7XG4gICAgKHRoaXMuX3BhcnNlUGFyYW1zIHx8IG5vb3ApLmNhbGwodGhpcyk7XG5cbiAgICBpZiAodGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMpIHtcbiAgICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCBhIGhhc2ggb2YgcGFyYW1ldGVycyBpZiB0aGV5J3JlIHdoaXRlbGlzdGVkIG9yIHdlJ3JlIHRvbGQgdG8gZm9yY2UgdGhlIHNldC5cbiAgICogVGhpcyBpcyB1c2VkIHRvIHNldCBpbml0aWFsIHZhbHVlcyBhcyB3ZWxsIGFzIHNldCBwYXNzZWQgcGFyYW1ldGVycy5cbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtc1xuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGZvcmNlIEZvcmNlIHNldHRpbmcgZXZlbiBpZiB0aGUgcGFyYW0gaXMgbm90IHdoaXRlbGlzdGVkLlxuICAgKi9cblxuXG4gIEJhc2UucHJvdG90eXBlLnNldFBhcmFtcyA9IGZ1bmN0aW9uIHNldFBhcmFtcyhwYXJhbXMsIGZvcmNlKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICgwLCBfZWFjaDIuZGVmYXVsdCkocGFyYW1zLCBmdW5jdGlvbiAoaywgdikge1xuICAgICAgaWYgKF90aGlzLl93aGl0ZWxpc3RlZFBhcmFtcy5pbmRleE9mKGspICE9PSAtMSB8fCBmb3JjZSkge1xuICAgICAgICBfdGhpc1trXSA9IHY7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogVW5zZXQgYWxsIHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBrZXlzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzY29wZSBUaGUgb2JqZWN0IHRvIHVuc2V0IHRoZSBwYXJhbXMgZnJvbS4gRGVmYXVsdHMgdG8gYHRoaXNgLlxuICAgKi9cblxuXG4gIEJhc2UucHJvdG90eXBlLnVuc2V0UGFyYW1zID0gZnVuY3Rpb24gdW5zZXRQYXJhbXMoa2V5cywgc2NvcGUpIHtcblxuICAgIGtleXMgPSBrZXlzIGluc3RhbmNlb2YgQXJyYXkgPyBrZXlzIDogT2JqZWN0LmtleXMoa2V5cyk7XG4gICAgc2NvcGUgPSBzY29wZSB8fCB0aGlzO1xuICAgICgwLCBfZWFjaDIuZGVmYXVsdCkoa2V5cywgZnVuY3Rpb24gKGspIHtcbiAgICAgIGRlbGV0ZSBzY29wZVtrXTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHJldHVybiBCYXNlO1xufSgpO1xuXG4vKipcbiAqIFdoaXRlbGlzdGVkIHBhcmFtZXRlcnMgd2hpY2ggY2FuIGJlIHNldCBvbiBjb25zdHJ1Y3Rpb24uXG4gKiBAdHlwZSB7QXJyYXl9XG4gKi9cblxuXG5CYXNlLnByb3RvdHlwZS5fd2hpdGVsaXN0ZWRQYXJhbXMgPSBbXTtcblxuLyoqXG4gKiBEZWZhdWx0IHZhbHVlcyBmb3IgaW50ZXJuYWwgcHJvcGVydGllcyB3ZSB3aWxsIGJlIHNldHRpbmcuXG4gKiBUaGVzZSBhcmUgc2V0IG9uIGVhY2ggY29uc3RydWN0aW9uIHNvIHdlIGRvbid0IGxlYWsgcHJvcGVydGllc1xuICogaW50byB0aGUgcHJvdG90eXBlIGNoYWluLlxuICogQHR5cGUge09iamVjdH1cbiAqL1xuQmFzZS5wcm90b3R5cGUuZGVmYXVsdHMgPSB7fTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gQmFzZTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmFzZS5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9iYXNlID0gcmVxdWlyZSgnLi9iYXNlJyk7XG5cbnZhciBfYmFzZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9iYXNlKTtcblxudmFyIF9oZWlnaHQgPSByZXF1aXJlKCcuLi9oZWxwZXJzL2FuaW1hdGlvbi9oZWlnaHQnKTtcblxudmFyIF9oZWlnaHQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaGVpZ2h0KTtcblxudmFyIF90b2dnbGVDbGFzcyA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvZG9tL3RvZ2dsZS1jbGFzcycpO1xuXG52YXIgX3RvZ2dsZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RvZ2dsZUNsYXNzKTtcblxudmFyIF9oYXNDbGFzcyA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvZG9tL2hhcy1jbGFzcycpO1xuXG52YXIgX2hhc0NsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hhc0NsYXNzKTtcblxudmFyIF9nZXRQYXJlbnQgPSByZXF1aXJlKCcuLi9oZWxwZXJzL3RyYXZlcnNhbC9nZXQtcGFyZW50Jyk7XG5cbnZhciBfZ2V0UGFyZW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFBhcmVudCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH0gLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAjIEV4cGFuZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogRXhwYW5kIGFuZCBjb2xsYXBzZSBhbiBlbGVtZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBuZXcgRXhwYW5kKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAbW9kdWxlIGNvbXBvbmVudHMvZXhwYW5kLmpzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cblxuXG52YXIgbm9vcCA9IGZ1bmN0aW9uIG5vb3AoKSB7fTtcblxudmFyIEV4cGFuZCA9IGZ1bmN0aW9uIChfQmFzZUNvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoRXhwYW5kLCBfQmFzZUNvbXBvbmVudCk7XG5cbiAgLyoqXG4gICAqIEV4cGFuZCBjb25zdHJ1Y3Rvci5cbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zXG4gICAqL1xuICBmdW5jdGlvbiBFeHBhbmQoZWwpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFeHBhbmQpO1xuXG4gICAgcGFyYW1zLmVsUmVxdWlyZWQgPSB0cnVlO1xuXG4gICAgaWYgKCEoX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfQmFzZUNvbXBvbmVudC5jYWxsKHRoaXMsIGVsLCBwYXJhbXMpKSwgX3RoaXMpKSB7XG4gICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMpO1xuICAgIH1cblxuICAgIF90aGlzLl9iaW5kRXZlbnRMaXN0ZW5lckNhbGxiYWNrcygpO1xuICAgIF90aGlzLl9hZGRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogRXhwYW5kXG4gICAqL1xuXG5cbiAgRXhwYW5kLnByb3RvdHlwZS5leHBhbmQgPSBmdW5jdGlvbiBleHBhbmQoKSB7XG5cbiAgICAodGhpcy5vbkJlZm9yZUV4cGFuZCB8fCBub29wKSgpO1xuXG4gICAgKDAsIF9oZWlnaHQyLmRlZmF1bHQpKHtcbiAgICAgIGVsOiB0aGlzLmVsLFxuICAgICAgdG9nZ2xlQ2xhc3M6ICdleHBhbmRlZCcsXG4gICAgICB0b2dnbGVFbDogJy5zcGFyay1leHBhbmRfX2NvbnRlbnQsIC5zcGFyay1wYW5lbF9fY29udGVudCdcbiAgICB9KTtcblxuICAgIHRoaXMuaXNFeHBhbmRlZCA9IHRydWU7XG4gICAgdGhpcy5fdXBkYXRlQ2xhc3NlcygpO1xuICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG4gICAgZS5pbml0RXZlbnQoJ3NwYXJrLnZpc2libGUtY2hpbGRyZW4nLCB0cnVlLCB0cnVlKTtcbiAgICB0aGlzLmVsLmRpc3BhdGNoRXZlbnQoZSk7XG5cbiAgICAvLyBJZiB0aGUgZXhwYW5kIGVsZW1lbnQgaGF2ZSBpbnB1dCwgZm9jdXMgb24gdGhlIGZpcnN0IG9uZS5cbiAgICBpZiAodGhpcy5lbC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpKSB7XG4gICAgICB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JykuZm9jdXMoKTtcbiAgICB9XG5cbiAgICAodGhpcy5vbkFmdGVyRXhwYW5kIHx8IG5vb3ApKCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQ29sbGFwc2VcbiAgICovXG5cblxuICBFeHBhbmQucHJvdG90eXBlLmNvbGxhcHNlID0gZnVuY3Rpb24gY29sbGFwc2UoKSB7XG5cbiAgICAodGhpcy5vbkJlZm9yZUNvbGxhcHNlIHx8IG5vb3ApKCk7XG5cbiAgICAoMCwgX2hlaWdodDIuZGVmYXVsdCkoe1xuICAgICAgZWw6IHRoaXMuZWwsXG4gICAgICB0b2dnbGVFbDogJy5zcGFyay1leHBhbmRfX2NvbnRlbnQsIC5zcGFyay1wYW5lbF9fY29udGVudCcsXG4gICAgICB0b2dnbGVWYWx1ZTogJ25vbmUnLFxuICAgICAgYWN0aW9uOiAnY29sbGFwc2UnXG4gICAgfSk7XG5cbiAgICB0aGlzLmlzRXhwYW5kZWQgPSBmYWxzZTtcbiAgICB0aGlzLl91cGRhdGVDbGFzc2VzKCk7XG5cbiAgICAodGhpcy5vbkFmdGVyQ29sbGFwc2UgfHwgbm9vcCkoKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUb2dnbGUgdGhlIGV4cGFuZCBzdGF0ZS5cbiAgICovXG5cblxuICBFeHBhbmQucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uIHRvZ2dsZSgpIHtcbiAgICByZXR1cm4gdGhpc1t0aGlzLmlzRXhwYW5kZWQgPyAnY29sbGFwc2UnIDogJ2V4cGFuZCddKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0b3JlIGEgcmVmZXJlbmNlIHRvIHRoZSBlbGVtZW50LlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqL1xuXG5cbiAgRXhwYW5kLnByb3RvdHlwZS5fY2FjaGVFbGVtZW50cyA9IGZ1bmN0aW9uIF9jYWNoZUVsZW1lbnRzKGVsKSB7XG4gICAgdGhpcy5lbCA9IGVsO1xuICAgIHRoaXMuaXNFeHBhbmRlZCA9ICgwLCBfaGFzQ2xhc3MyLmRlZmF1bHQpKHRoaXMuZWwsICdleHBhbmRlZCcpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGUgY2xhc3NlcyBmb3IgdGhlIGV4cGFuZCBvciBjb2xsYXBzZSBzdGF0ZS5cbiAgICovXG5cblxuICBFeHBhbmQucHJvdG90eXBlLl91cGRhdGVDbGFzc2VzID0gZnVuY3Rpb24gX3VwZGF0ZUNsYXNzZXMoKSB7XG4gICAgKDAsIF90b2dnbGVDbGFzczIuZGVmYXVsdCkodGhpcy5lbCwgJ2V4cGFuZGVkJywgdGhpcy5pc0V4cGFuZGVkKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlIGJvdW5kIHZlcnNpb25zIG9mIGV2ZW50IGxpc3RlbmVyIGNhbGxiYWNrcyBhbmQgc3RvcmUgdGhlbS5cbiAgICogT3RoZXJ3aXNlIHdlIGNhbid0IHVuYmluZCBmcm9tIHRoZXNlIGV2ZW50cyBsYXRlciBiZWNhdXNlIHRoZVxuICAgKiBmdW5jdGlvbiBzaWduYXR1cmVzIHdvbid0IG1hdGNoLlxuICAgKi9cblxuXG4gIEV4cGFuZC5wcm90b3R5cGUuX2JpbmRFdmVudExpc3RlbmVyQ2FsbGJhY2tzID0gZnVuY3Rpb24gX2JpbmRFdmVudExpc3RlbmVyQ2FsbGJhY2tzKCkge1xuICAgIHRoaXMuX29uQ2xpY2tCb3VuZCA9IHRoaXMuX29uQ2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vbktleWRvd25Cb3VuZCA9IHRoaXMuX29uS2V5ZG93bi5iaW5kKHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGQgZXZlbnQgbGlzdGVuZXJzIGZvciBET00gZXZlbnRzLlxuICAgKi9cblxuXG4gIEV4cGFuZC5wcm90b3R5cGUuX2FkZEV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gX2FkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9vbkNsaWNrQm91bmQpO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX29uS2V5ZG93bkJvdW5kKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIGV2ZW50IGxpc3RlbmVycyBmb3IgRE9NIGV2ZW50cy4uXG4gICAqL1xuXG5cbiAgRXhwYW5kLnByb3RvdHlwZS5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX29uQ2xpY2tCb3VuZCk7XG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fb25LZXlkb3duQm91bmQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaGVuIHdlIGFyZSBjbGlja2VkLCB0b2dnbGUgdGhlIGV4cGFuZGVkIHN0YXRlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZVxuICAgKi9cblxuXG4gIEV4cGFuZC5wcm90b3R5cGUuX29uQ2xpY2sgPSBmdW5jdGlvbiBfb25DbGljayhlKSB7XG5cbiAgICBpZiAoISgwLCBfZ2V0UGFyZW50Mi5kZWZhdWx0KShlLnRhcmdldCwgJy5zcGFyay1leHBhbmRfX3RvZ2dsZSwgW2RhdGEtcm9sZT1cInRvZ2dsZVwiXSwgW3JvbGU9XCJoZWFkaW5nXCJdJywgdGhpcy5lbCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy50b2dnbGUoKTtcbiAgfTtcblxuICAvKipcbiAgICogV2hlbiB0aGUgc3BhY2Ugb3IgZW50ZXIga2V5IGlzIHByZXNzZWQgb24gdGhlIHRvZ2dsZSwgdG9nZ2xlIVxuICAgKiBAcGFyYW0ge09iamVjdH0gZVxuICAgKi9cblxuXG4gIEV4cGFuZC5wcm90b3R5cGUuX29uS2V5ZG93biA9IGZ1bmN0aW9uIF9vbktleWRvd24oZSkge1xuXG4gICAgaWYgKCEoMCwgX2dldFBhcmVudDIuZGVmYXVsdCkoZS50YXJnZXQsICcuc3BhcmstZXhwYW5kX190b2dnbGUsIFtkYXRhLXJvbGU9XCJ0b2dnbGVcIl0sIFtyb2xlPVwiaGVhZGluZ1wiXScsIHRoaXMuZWwpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGNvZGUgPSBlLmtleUNvZGUgfHwgZS53aGljaDtcblxuICAgIC8vIFNwYWNlIG9yIGVudGVyXG4gICAgaWYgKGNvZGUgPT09IDMyIHx8IGNvZGUgPT09IDEzKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnRvZ2dsZSgpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gRXhwYW5kO1xufShfYmFzZTIuZGVmYXVsdCk7XG5cbi8qKlxuICogV2hpdGVsaXN0ZWQgcGFyYW1ldGVycyB3aGljaCBjYW4gYmUgc2V0IG9uIGNvbnN0cnVjdGlvbi5cbiAqIEB0eXBlIHtBcnJheX1cbiAqL1xuXG5cbkV4cGFuZC5wcm90b3R5cGUuX3doaXRlbGlzdGVkUGFyYW1zID0gWydvbkJlZm9yZUV4cGFuZCcsICdvbkFmdGVyRXhwYW5kJywgJ29uQmVmb3JlQ29sbGFwc2UnLCAnb25BZnRlckNvbGxhcHNlJ107XG5cbi8qKlxuICogRGVmYXVsdCB2YWx1ZXMgZm9yIGludGVybmFsIHByb3BlcnRpZXMgd2Ugd2lsbCBiZSBzZXR0aW5nLlxuICogVGhlc2UgYXJlIHNldCBvbiBlYWNoIGNvbnN0cnVjdGlvbiBzbyB3ZSBkb24ndCBsZWFrIHByb3BlcnRpZXNcbiAqIGludG8gdGhlIHByb3RvdHlwZSBjaGFpbi5cbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbkV4cGFuZC5wcm90b3R5cGUuZGVmYXVsdHMgPSB7XG4gIGVsOiBudWxsLFxuICBpc0V4cGFuZGVkOiBmYWxzZSxcbiAgb25CZWZvcmVFeHBhbmQ6IG51bGwsXG4gIG9uQWZ0ZXJFeHBhbmQ6IG51bGwsXG4gIG9uQmVmb3JlQ29sbGFwc2U6IG51bGwsXG4gIG9uQWZ0ZXJDb2xsYXBzZTogbnVsbCxcbiAgX29uQ2xpY2tCb3VuZDogbnVsbCxcbiAgX29uS2V5ZG93bkJvdW5kOiBudWxsXG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBFeHBhbmQ7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV4cGFuZC5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9iYXNlID0gcmVxdWlyZSgnLi9iYXNlJyk7XG5cbnZhciBfYmFzZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9iYXNlKTtcblxudmFyIF90b2dnbGVDbGFzcyA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvZG9tL3RvZ2dsZS1jbGFzcycpO1xuXG52YXIgX3RvZ2dsZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RvZ2dsZUNsYXNzKTtcblxudmFyIF9yZW1vdmVDbGFzcyA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvZG9tL3JlbW92ZS1jbGFzcycpO1xuXG52YXIgX3JlbW92ZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlbW92ZUNsYXNzKTtcblxudmFyIF9hZGRDbGFzcyA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvZG9tL2FkZC1jbGFzcycpO1xuXG52YXIgX2FkZENsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FkZENsYXNzKTtcblxudmFyIF9oYXNDbGFzcyA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvZG9tL2hhcy1jbGFzcycpO1xuXG52YXIgX2hhc0NsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hhc0NsYXNzKTtcblxudmFyIF9leHBhbmQgPSByZXF1aXJlKCcuL2V4cGFuZCcpO1xuXG52YXIgX2V4cGFuZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHBhbmQpO1xuXG52YXIgX21vZGFsID0gcmVxdWlyZSgnLi9tb2RhbCcpO1xuXG52YXIgX21vZGFsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21vZGFsKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfSAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICMgRmlsdGVyIE1vZHVsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogTW9kdWxlIHRoYXQgY29udGFpbnMgYW4gaW5kaXZpZHVhbCAob3IgcmVsYXRlZCkgZmlsdGVycyBzdWNoIGFzIGNoZWNrYm94ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogbmV3IEZpbHRlck1vZHVsZShlbCwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAbW9kdWxlIGNvbXBvbmVudHMvZmlsdGVyLW1vZHVsZS5qc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG5cblxudmFyIG5vb3AgPSBmdW5jdGlvbiBub29wKCkge307XG5cbnZhciBGaWx0ZXJNb2R1bGUgPSBmdW5jdGlvbiAoX0Jhc2VDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKEZpbHRlck1vZHVsZSwgX0Jhc2VDb21wb25lbnQpO1xuXG4gIC8qKlxuICAgKiBGaWx0ZXIgTW9kdWxlIGNvbnN0cnVjdG9yLlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXNcbiAgICovXG4gIGZ1bmN0aW9uIEZpbHRlck1vZHVsZShlbCkge1xuICAgIHZhciBfdGhpcztcblxuICAgIHZhciBwYXJhbXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbHRlck1vZHVsZSk7XG5cbiAgICBwYXJhbXMuZWxSZXF1aXJlZCA9IHRydWU7XG5cbiAgICBpZiAoIShfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9CYXNlQ29tcG9uZW50LmNhbGwodGhpcywgZWwsIHBhcmFtcykpLCBfdGhpcykpIHtcbiAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcyk7XG4gICAgfVxuXG4gICAgX3RoaXMuX2JpbmRFdmVudExpc3RlbmVyQ2FsbGJhY2tzKCk7XG4gICAgX3RoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9yZSBhIHJlZmVyZW5jZSB0byB0aGUgbmVlZCBlbGVtZW50c1xuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqL1xuXG5cbiAgRmlsdGVyTW9kdWxlLnByb3RvdHlwZS5fY2FjaGVFbGVtZW50cyA9IGZ1bmN0aW9uIF9jYWNoZUVsZW1lbnRzKGVsKSB7XG4gICAgdGhpcy5lbCA9IGVsO1xuICAgIHRoaXMuX3Nob3dBbGxFbCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLnNwYXJrLWZpbHRlci1tb2R1bGVfX3Nob3ctYWxsJyk7XG4gICAgaWYgKHRoaXMuX3Nob3dBbGxFbCkge1xuICAgICAgdGhpcy5fc2hvd0FsbFRvZ2dsZWFibGUgPSB0aGlzLl9zaG93QWxsRWwucXVlcnlTZWxlY3Rvcignc3BhbicpO1xuICAgIH1cblxuICAgIHRoaXMuX2NsZWFyRWxzID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKCcuc3BhcmstZmlsdGVyLW1vZHVsZV9fY2xlYXInKTtcbiAgICB0aGlzLl9oaWRkZW5FbHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zcGFyay1maWx0ZXItbW9kdWxlLS1oaWRlJykpO1xuICAgIHRoaXMuX2hlYWRlckVsID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcuc3BhcmstZmlsdGVyLW1vZHVsZV9faGVhZGVyJyk7XG4gICAgdGhpcy5fYm9keUVsID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcuc3BhcmstZmlsdGVyLW1vZHVsZV9fYm9keScpO1xuICAgIHRoaXMuX21vZGFsRWwgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5zcGFyay1tb2RhbCcpO1xuICAgIHRoaXMuX21vZGFsU2F2ZUJ0biA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLnNwYXJrLWZpbHRlci1tb2R1bGVfX3Nob3ctYWxsX19tb2RhbC1idXR0b24nKTtcbiAgICB0aGlzLl9tb2RhbENsYXNzZXMgPSBbXTtcblxuICAgIGlmICh0aGlzLm9uU2hvd0FsbCA9PT0gJ21vZGFsJykge1xuICAgICAgdGhpcy5tb2RhbEluc3QgPSBuZXcgX21vZGFsMi5kZWZhdWx0KHRoaXMuX21vZGFsRWwpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlIGJvdW5kIHZlcnNpb25zIG9mIGV2ZW50IGxpc3RlbmVyIGNhbGxiYWNrcyBhbmQgc3RvcmUgdGhlbS5cbiAgICogT3RoZXJ3aXNlIHdlIGNhbid0IHVuYmluZCBmcm9tIHRoZXNlIGV2ZW50cyBsYXRlciBiZWNhdXNlIHRoZVxuICAgKiBmdW5jdGlvbiBzaWduYXR1cmVzIHdvbid0IG1hdGNoLlxuICAgKi9cblxuXG4gIEZpbHRlck1vZHVsZS5wcm90b3R5cGUuX2JpbmRFdmVudExpc3RlbmVyQ2FsbGJhY2tzID0gZnVuY3Rpb24gX2JpbmRFdmVudExpc3RlbmVyQ2FsbGJhY2tzKCkge1xuICAgIHRoaXMuX29uU2hvd0FsbEJvdW5kID0gdGhpcy5fb25TaG93QWxsLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25DbGVhckJvdW5kID0gdGhpcy5fb25DbGVhci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uQ2xvc2VNb2RhbEJvdW5kID0gdGhpcy5fb25DbG9zZU1vZGFsLmJpbmQodGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZCBldmVudCBsaXN0ZW5lcnMgZm9yIHRvdWNoc3RhcnQgYW5kIG1vdXNlIGNsaWNrLlxuICAgKi9cblxuXG4gIEZpbHRlck1vZHVsZS5wcm90b3R5cGUuX2FkZEV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gX2FkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICF0aGlzLl9zaG93QWxsRWwgfHwgdGhpcy5fc2hvd0FsbEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb25TaG93QWxsQm91bmQpO1xuICAgICF0aGlzLl9tb2RhbFNhdmVCdG4gfHwgdGhpcy5fbW9kYWxTYXZlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb25DbG9zZU1vZGFsQm91bmQpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9jbGVhckVscy5sZW5ndGg7IGkrKykge1xuICAgICAgIXRoaXMuX2NsZWFyRWxzW2ldIHx8IHRoaXMuX2NsZWFyRWxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb25DbGVhckJvdW5kKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBldmVudCBsaXN0ZW5lcnMgZm9yIHRvdWNoc3RhcnQgYW5kIG1vdXNlIGNsaWNrLlxuICAgKi9cblxuXG4gIEZpbHRlck1vZHVsZS5wcm90b3R5cGUuX3JlbW92ZUV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGlmICh0aGlzLl9zaG93QWxsRWwpIHtcbiAgICAgIHRoaXMuX3Nob3dBbGxFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX29uU2hvd0FsbEJvdW5kKTtcbiAgICAgIHRoaXMuX21vZGFsU2F2ZUJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX29uQ2xvc2VNb2RhbEJvdW5kKTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9jbGVhckVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAhdGhpcy5fY2xlYXJFbHNbaV0gfHwgdGhpcy5fY2xlYXJFbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9vbkNsZWFyQm91bmQpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2hvdyBhbnkgaGlkZGVuIGZpbHRlcnMgd2l0aGluIGEgbW9kdWxlIG9yIHJ1biBwcm92aWRlZCBmdW5jdGlvbiBpZiBhdmFpbGFibGVcbiAgICovXG5cblxuICBGaWx0ZXJNb2R1bGUucHJvdG90eXBlLl9vblNob3dBbGwgPSBmdW5jdGlvbiBfb25TaG93QWxsKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5vblNob3dBbGwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICh0aGlzLm9uU2hvd0FsbCB8fCBub29wKSh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMub25TaG93QWxsID09PSAndG9nZ2xlJyB8fCB0aGlzLm9uU2hvd0FsbCA9PT0gJ21vZGFsJyAmJiB0aGlzLl9pc0V4cGFuZCkge1xuICAgICAgICB0aGlzLl90b2dnbGVTaG93QWxsTGFiZWwoKTtcbiAgICAgICAgdGhpcy50b2dnbGVIaWRkZW5Db250ZW50KCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMub25TaG93QWxsID09PSAnbW9kYWwnICYmICF0aGlzLl9pc0V4cGFuZCkge1xuICAgICAgICB0aGlzLm1vZGFsSW5zdC5vcGVuKCk7XG4gICAgICB9XG5cbiAgICAgICh0aGlzLm9uU2hvd0FsbENvbXBsZXRlIHx8IG5vb3ApKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBUb2dnbGUgU2hvdyBNb3JlIGxhYmVsIHRleHRcbiAgICovXG5cblxuICBGaWx0ZXJNb2R1bGUucHJvdG90eXBlLl90b2dnbGVTaG93QWxsTGFiZWwgPSBmdW5jdGlvbiBfdG9nZ2xlU2hvd0FsbExhYmVsKCkge1xuICAgIHRoaXMuX3Nob3dBbGxUb2dnbGVhYmxlLmlubmVySFRNTCA9IHRoaXMuX3Nob3dBbGxUb2dnbGVhYmxlLmlubmVySFRNTCA9PT0gJ21vcmUnID8gJ2Zld2VyJyA6ICdtb3JlJztcbiAgfTtcblxuICAvKipcbiAgICogQ2FsbGJhY2sgYWZ0ZXIgY2xpY2tpbmcgYENsZWFyYCBidXR0b25cbiAgICovXG5cblxuICBGaWx0ZXJNb2R1bGUucHJvdG90eXBlLl9vbkNsZWFyID0gZnVuY3Rpb24gX29uQ2xlYXIoKSB7XG4gICAgKHRoaXMub25DbGVhciB8fCBub29wKSh0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogQ2FsbGJhY2sgYWZ0ZXIgY2xpY2tpbmcgYFNhdmVgIGJ1dHRvblxuICAgKi9cblxuXG4gIEZpbHRlck1vZHVsZS5wcm90b3R5cGUuX29uQ2xvc2VNb2RhbCA9IGZ1bmN0aW9uIF9vbkNsb3NlTW9kYWwoKSB7XG4gICAgKHRoaXMub25Nb2RhbENsb3NlIHx8IG5vb3ApKCk7XG5cbiAgICB0aGlzLm1vZGFsSW5zdC5jbG9zZSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBFbmFibGUgY2xlYXIgYnV0dG9uXG4gICAqL1xuXG5cbiAgRmlsdGVyTW9kdWxlLnByb3RvdHlwZS5lbmFibGVDbGVhckJ0biA9IGZ1bmN0aW9uIGVuYWJsZUNsZWFyQnRuKCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fY2xlYXJFbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICgwLCBfcmVtb3ZlQ2xhc3MyLmRlZmF1bHQpKHRoaXMuX2NsZWFyRWxzW2ldLCAnc3BhcmstZmlsdGVyLW1vZHVsZV9fY2xlYXItLWRpc2FibGVkJyk7XG4gICAgICAoMCwgX3JlbW92ZUNsYXNzMi5kZWZhdWx0KSh0aGlzLl9jbGVhckVsc1tpXSwgJ3NwYXJrLWZpbHRlci1tb2R1bGVfX2NsZWFyLS1oaWRkZW4nKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERpc2FibGUgY2xlYXIgYnV0dG9uXG4gICAqL1xuXG5cbiAgRmlsdGVyTW9kdWxlLnByb3RvdHlwZS5kaXNhYmxlQ2xlYXJCdG4gPSBmdW5jdGlvbiBkaXNhYmxlQ2xlYXJCdG4oKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9jbGVhckVscy5sZW5ndGg7IGkrKykge1xuICAgICAgKDAsIF9hZGRDbGFzczIuZGVmYXVsdCkodGhpcy5fY2xlYXJFbHNbaV0sICdzcGFyay1maWx0ZXItbW9kdWxlX19jbGVhci0tZGlzYWJsZWQnKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEhpZGUgY2xlYXIgYnV0dG9uXG4gICAqL1xuXG5cbiAgRmlsdGVyTW9kdWxlLnByb3RvdHlwZS5oaWRlQ2xlYXJCdG4gPSBmdW5jdGlvbiBoaWRlQ2xlYXJCdG4oKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9jbGVhckVscy5sZW5ndGg7IGkrKykge1xuICAgICAgKDAsIF9hZGRDbGFzczIuZGVmYXVsdCkodGhpcy5fY2xlYXJFbHNbaV0sICdzcGFyay1maWx0ZXItbW9kdWxlX19jbGVhci0taGlkZGVuJyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgaWYgQ2xlYXIgYnV0dG9uIGlzIGhpZGRlbiBvciBkaXNhYmxlZFxuICAgKi9cblxuXG4gIEZpbHRlck1vZHVsZS5wcm90b3R5cGUuZ2V0Q2xlYXJCdXR0b25TdGF0dXMgPSBmdW5jdGlvbiBnZXRDbGVhckJ1dHRvblN0YXR1cygpIHtcbiAgICB2YXIgYnV0dG9uRW5hYmxlZCA9IGZhbHNlO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9jbGVhckVscy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCgwLCBfaGFzQ2xhc3MyLmRlZmF1bHQpKHRoaXMuX2NsZWFyRWxzW2ldLCAnc3BhcmstZmlsdGVyLW1vZHVsZV9fY2xlYXItLWhpZGRlbicpIHx8ICgwLCBfaGFzQ2xhc3MyLmRlZmF1bHQpKHRoaXMuX2NsZWFyRWxzW2ldLCAnc3BhcmstZmlsdGVyLW1vZHVsZV9fY2xlYXItLWRpc2FibGVkJykpIHtcbiAgICAgICAgYnV0dG9uRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnV0dG9uRW5hYmxlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGJ1dHRvbkVuYWJsZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEhpZGUgb3Igc2hvdyBleHRyYSBmaWx0ZXJzIGVsZW1lbnRzIGFzIHRyaWdnZXJlZCBieSBTaG93IG1vcmUvZmV3ZXJcbiAgICovXG5cblxuICBGaWx0ZXJNb2R1bGUucHJvdG90eXBlLnRvZ2dsZUhpZGRlbkNvbnRlbnQgPSBmdW5jdGlvbiB0b2dnbGVIaWRkZW5Db250ZW50KCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5faGlkZGVuRWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAoMCwgX3RvZ2dsZUNsYXNzMi5kZWZhdWx0KSh0aGlzLl9oaWRkZW5FbHNbaV0sICdzaG93Jyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDaGFuZ2UgZmlsdGVyLW1vZHVsZSB0byBleHBhbmQvY29sbGFwc2UgdmFyaWF0aW9uXG4gICAqIFRoaXMgb2NjdXJzIHdoZW4gdGhlIGZpbHRlciBpcyBhdCB0aGUgeHMgYnJlYWtwb2ludFxuICAgKi9cblxuXG4gIEZpbHRlck1vZHVsZS5wcm90b3R5cGUuX2FwcGx5RXhwYW5kID0gZnVuY3Rpb24gX2FwcGx5RXhwYW5kKCkge1xuICAgIGlmICh0aGlzLl9tb2RhbEVsKSB7XG4gICAgICB2YXIgbW9kYWxDbHNOYW1lcyA9IFsnc3BhcmstZmlsdGVyLW1vZHVsZS0taGlkZScsICcnLCAnJywgJyddO1xuXG4gICAgICB0aGlzLl9oaWRkZW5FbHMucHVzaCh0aGlzLl9tb2RhbEVsKTtcbiAgICAgIHZhciBjdXJFbCA9IHRoaXMuX21vZGFsRWw7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9kYWxDbHNOYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLl9tb2RhbENsYXNzZXNbaV0gPSBjdXJFbC5jbGFzc05hbWU7XG4gICAgICAgIGN1ckVsLmNsYXNzTmFtZSA9IG1vZGFsQ2xzTmFtZXNbaV07XG4gICAgICAgIGN1ckVsID0gY3VyRWwuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICB9XG5cbiAgICAgIGlmICgoMCwgX2hhc0NsYXNzMi5kZWZhdWx0KShkb2N1bWVudC5ib2R5LCAnc3BhcmstbW9kYWwtb3BlbicpKSB7XG4gICAgICAgICgwLCBfcmVtb3ZlQ2xhc3MyLmRlZmF1bHQpKGRvY3VtZW50LmJvZHksICdzcGFyay1tb2RhbC1vcGVuJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMubW9kYWxJbnN0LnJlbW92ZSh0cnVlKTtcbiAgICB9XG5cbiAgICAoMCwgX2FkZENsYXNzMi5kZWZhdWx0KSh0aGlzLmVsLCAnc3BhcmstcGFuZWwnLCAnc3BhcmstcGFuZWwtLWV4cGFuZCcpO1xuICAgICgwLCBfYWRkQ2xhc3MyLmRlZmF1bHQpKHRoaXMuX2hlYWRlckVsLCAnc3BhcmstcGFuZWxfX2hlYWRlcicpO1xuICAgIHRoaXMuX2hlYWRlckVsLnNldEF0dHJpYnV0ZSgncm9sZScsICdoZWFkaW5nJyk7XG4gICAgdGhpcy5faGVhZGVyRWwuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gICAgKDAsIF9hZGRDbGFzczIuZGVmYXVsdCkodGhpcy5fYm9keUVsLCAnc3BhcmstcGFuZWxfX2NvbnRlbnQnKTtcblxuICAgIHRoaXMuX2V4cGFuZEluc3QgPSBuZXcgX2V4cGFuZDIuZGVmYXVsdCh0aGlzLmVsLCB7XG4gICAgICBvbkFmdGVyRXhwYW5kOiB0aGlzLm9uQWZ0ZXJFeHBhbmQsXG4gICAgICBvbkFmdGVyQ29sbGFwc2U6IHRoaXMub25BZnRlckNvbGxhcHNlXG4gICAgfSk7XG5cbiAgICB0aGlzLl9pc0V4cGFuZCA9IHRydWU7XG4gIH07XG5cbiAgLyoqXG4gICAqIENoYW5nZSBmaWx0ZXItbW9kdWxlIGZyb20gZXhwYW5kL2NvbGxhcHNlIHRvIGhvcml6b250YWwgdmFyaWF0aW9uXG4gICAqL1xuXG5cbiAgRmlsdGVyTW9kdWxlLnByb3RvdHlwZS5fZGlzYXBwbHlFeHBhbmQgPSBmdW5jdGlvbiBfZGlzYXBwbHlFeHBhbmQoKSB7XG4gICAgaWYgKHRoaXMuX21vZGFsRWwpIHtcblxuICAgICAgaWYgKCgwLCBfaGFzQ2xhc3MyLmRlZmF1bHQpKHRoaXMuX21vZGFsRWwsICdzaG93JykpIHtcbiAgICAgICAgdGhpcy5fdG9nZ2xlU2hvd0FsbExhYmVsKCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2hpZGRlbkVscy5wb3AoKTtcbiAgICAgIHZhciBjdXJFbCA9IHRoaXMuX21vZGFsRWw7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fbW9kYWxDbGFzc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGN1ckVsLmNsYXNzTmFtZSA9IHRoaXMuX21vZGFsQ2xhc3Nlc1tpXTtcbiAgICAgICAgY3VyRWwgPSBjdXJFbC5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgIH1cblxuICAgICAgdGhpcy5tb2RhbEluc3QgPSBuZXcgX21vZGFsMi5kZWZhdWx0KHRoaXMuX21vZGFsRWwpO1xuICAgIH1cblxuICAgICgwLCBfcmVtb3ZlQ2xhc3MyLmRlZmF1bHQpKHRoaXMuZWwsICdzcGFyay1wYW5lbCcsICdzcGFyay1wYW5lbC0tZXhwYW5kJyk7XG4gICAgKDAsIF9yZW1vdmVDbGFzczIuZGVmYXVsdCkodGhpcy5faGVhZGVyRWwsICdzcGFyay1wYW5lbF9faGVhZGVyJyk7XG4gICAgdGhpcy5faGVhZGVyRWwucmVtb3ZlQXR0cmlidXRlKCdyb2xlJyk7XG4gICAgdGhpcy5faGVhZGVyRWwucmVtb3ZlQXR0cmlidXRlKCd0YWJpbmRleCcpO1xuICAgICgwLCBfcmVtb3ZlQ2xhc3MyLmRlZmF1bHQpKHRoaXMuX2JvZHlFbCwgJ3NwYXJrLXBhbmVsX19jb250ZW50Jyk7XG4gICAgdGhpcy5fZXhwYW5kSW5zdC5yZW1vdmUodHJ1ZSk7XG4gICAgdGhpcy5faXNFeHBhbmQgPSBmYWxzZTtcbiAgfTtcblxuICByZXR1cm4gRmlsdGVyTW9kdWxlO1xufShfYmFzZTIuZGVmYXVsdCk7XG5cbi8qKlxuICogV2hpdGVsaXN0ZWQgcGFyYW1ldGVycyB3aGljaCBjYW4gYmUgc2V0IG9uIGNvbnN0cnVjdGlvbi5cbiAqIEB0eXBlIHtBcnJheX1cbiAqL1xuXG5cbkZpbHRlck1vZHVsZS5wcm90b3R5cGUuX3doaXRlbGlzdGVkUGFyYW1zID0gWydvblNob3dBbGwnLCAnb25TaG93QWxsQ29tcGxldGUnLCAnb25Nb2RhbENsb3NlJywgJ29uQ2xlYXInLCAnb25BZnRlckV4cGFuZCcsICdvbkFmdGVyQ29sbGFwc2UnXTtcblxuLyoqXG4gKiBEZWZhdWx0IHZhbHVlcyBmb3IgaW50ZXJuYWwgcHJvcGVydGllcyB3ZSB3aWxsIGJlIHNldHRpbmcuXG4gKiBUaGVzZSBhcmUgc2V0IG9uIGVhY2ggY29uc3RydWN0aW9uIHNvIHdlIGRvbid0IGxlYWsgcHJvcGVydGllc1xuICogaW50byB0aGUgcHJvdG90eXBlIGNoYWluLlxuICogQHR5cGUge09iamVjdH1cbiAqL1xuRmlsdGVyTW9kdWxlLnByb3RvdHlwZS5kZWZhdWx0cyA9IHtcbiAgZWw6IG51bGwsXG4gIG9uU2hvd0FsbDogbm9vcCxcbiAgb25TaG93QWxsQ29tcGxldGU6IG5vb3AsXG4gIG9uTW9kYWxDbG9zZTogbm9vcCxcbiAgb25DbGVhcjogbm9vcCxcbiAgb25BZnRlckV4cGFuZDogbm9vcCxcbiAgb25BZnRlckNvbGxhcHNlOiBub29wLFxuICBtb2RhbEluc3Q6IG51bGwsXG4gIF9vblNob3dBbGxCb3VuZDogbnVsbCxcbiAgX29uQ2xlYXJCb3VuZDogbnVsbCxcbiAgX3Nob3dBbGxFbDogbnVsbCxcbiAgX2NsZWFyRWw6IG51bGwsXG4gIF9oaWRkZW5FbHM6IFtdLFxuICBfaGVhZGVyRWw6IG51bGwsXG4gIF9ib2R5RWw6IG51bGwsXG4gIF9tb2RhbEVsOiBudWxsLFxuICBfZXhwYW5kSW5zdDogbnVsbCxcbiAgX2lzRXhwYW5kOiBmYWxzZSxcbiAgZGF0YVNldDoge31cbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IEZpbHRlck1vZHVsZTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmlsdGVyLW1vZHVsZS5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9iYXNlID0gcmVxdWlyZSgnLi9iYXNlJyk7XG5cbnZhciBfYmFzZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9iYXNlKTtcblxudmFyIF9hZGRDbGFzcyA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvZG9tL2FkZC1jbGFzcycpO1xuXG52YXIgX2FkZENsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FkZENsYXNzKTtcblxudmFyIF9oYXNDbGFzcyA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvZG9tL2hhcy1jbGFzcycpO1xuXG52YXIgX2hhc0NsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hhc0NsYXNzKTtcblxudmFyIF90b2dnbGVDbGFzcyA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvZG9tL3RvZ2dsZS1jbGFzcycpO1xuXG52YXIgX3RvZ2dsZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RvZ2dsZUNsYXNzKTtcblxudmFyIF9yZW1vdmVDbGFzcyA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvZG9tL3JlbW92ZS1jbGFzcycpO1xuXG52YXIgX3JlbW92ZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlbW92ZUNsYXNzKTtcblxudmFyIF9maWx0ZXJNb2R1bGUgPSByZXF1aXJlKCcuL2ZpbHRlci1tb2R1bGUnKTtcblxudmFyIF9maWx0ZXJNb2R1bGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZmlsdGVyTW9kdWxlKTtcblxudmFyIF9oZWlnaHQgPSByZXF1aXJlKCcuLi9oZWxwZXJzL2FuaW1hdGlvbi9oZWlnaHQnKTtcblxudmFyIF9oZWlnaHQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaGVpZ2h0KTtcblxudmFyIF9icmVha3BvaW50ID0gcmVxdWlyZSgnLi4vaGVscGVycy9kb20vYnJlYWtwb2ludCcpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9IC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogIyBGaWx0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEEgY29udGFpbmVyIGZvciBhIHNldCBvZiBmb3JtIGZpZWxkcyB1c2VkIHRvIGZpbHRlciBhIGRhdGEgc2V0IG9yIHNlYXJjaCByZXN1bHRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIG5ldyBGaWx0ZXIoZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBtb2R1bGUgY29tcG9uZW50cy9maWx0ZXIuanNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuXG5cbnZhciBub29wID0gZnVuY3Rpb24gbm9vcCgpIHt9O1xuXG52YXIgRmlsdGVyID0gZnVuY3Rpb24gKF9CYXNlQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhGaWx0ZXIsIF9CYXNlQ29tcG9uZW50KTtcblxuICAvKipcbiAgICogRmlsdGVyIGNvbnN0cnVjdG9yLlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXNcbiAgICovXG4gIGZ1bmN0aW9uIEZpbHRlcihlbCkge1xuICAgIHZhciBfdGhpcztcblxuICAgIHZhciBwYXJhbXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbHRlcik7XG5cbiAgICBwYXJhbXMuZWxSZXF1aXJlZCA9IHRydWU7XG5cbiAgICBpZiAoIShfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9CYXNlQ29tcG9uZW50LmNhbGwodGhpcywgZWwsIHBhcmFtcykpLCBfdGhpcykpIHtcbiAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcyk7XG4gICAgfVxuXG4gICAgX3RoaXMuX2JpbmRFdmVudExpc3RlbmVyQ2FsbGJhY2tzKCk7XG4gICAgX3RoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgX3RoaXMuX2luaXRGaWx0ZXJEaXNwbGF5KCk7XG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9yZSBhIHJlZmVyZW5jZSB0byB0aGUgbmVlZGVkIGVsZW1lbnRzXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICovXG5cblxuICBGaWx0ZXIucHJvdG90eXBlLl9jYWNoZUVsZW1lbnRzID0gZnVuY3Rpb24gX2NhY2hlRWxlbWVudHMoZWwpIHtcbiAgICB0aGlzLmVsID0gZWw7XG4gICAgdGhpcy5tb2R1bGVFbHMgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zcGFyay1maWx0ZXItbW9kdWxlJyk7XG5cbiAgICAvLyBUaGVzZSBvcHRpb25zIGFyZSBoZXJlIHNvIHRoYXQgdGhlIG1vZHVsZXMgY2FuIGNvbW11bmljYXRlIHdpdGggdGhlIGZpbHRlciB0byBkbyBjZXJ0YWluIHRhc2tzXG4gICAgdmFyIGRlZmF1bHRPcHRpb24gPSB7XG4gICAgICBvbkFmdGVyRXhwYW5kOiB0aGlzLl9vbkFmdGVyRXhwYW5kLmJpbmQodGhpcyksXG4gICAgICBvbkFmdGVyQ29sbGFwc2U6IHRoaXMuX29uQWZ0ZXJDb2xsYXBzZS5iaW5kKHRoaXMpXG4gICAgfTtcblxuICAgIGlmICh0aGlzLm1vZHVsZUVscy5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubW9kdWxlRWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5tb2R1bGVPcHRpb25zW2ldICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGZvciAodmFyIGtleSBpbiBkZWZhdWx0T3B0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLm1vZHVsZU9wdGlvbnNbaV1ba2V5XSA9IGRlZmF1bHRPcHRpb25ba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5tb2R1bGVJbnN0c1tpXSA9IG5ldyBfZmlsdGVyTW9kdWxlMi5kZWZhdWx0KHRoaXMubW9kdWxlRWxzW2ldLCB0aGlzLm1vZHVsZU9wdGlvbnNbaV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubW9kdWxlSW5zdHNbaV0gPSBuZXcgX2ZpbHRlck1vZHVsZTIuZGVmYXVsdCh0aGlzLm1vZHVsZUVsc1tpXSwgZGVmYXVsdE9wdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9maWx0ZXJUb2dnbGVDb250YWluZXIgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5zcGFyay1maWx0ZXJfX3RvZ2dsZS1jb250YWluZXInKTtcbiAgICB0aGlzLl90b2dnbGVGaWx0ZXJCdXR0b24gPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5zcGFyay1maWx0ZXJfX3RvZ2dsZS1idXR0b24nKTtcbiAgICB0aGlzLl90b2dnbGVGaWx0ZXJMYWJlbCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLnNwYXJrLWZpbHRlcl9fdG9nZ2xlLWJ1dHRvbiBzcGFuJyk7XG4gICAgdGhpcy5fdGFnc0NvbnRhaW5lciA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLnNwYXJrLWZpbHRlcl9fdGFncy1jb250YWluZXInKTtcbiAgICB0aGlzLl90YWdzQ291bnRlciA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLnNwYXJrLWZpbHRlcl9fYXBwbGllZC1maWx0ZXJzLWNvdW50ZXInKTtcbiAgICB0aGlzLl9jbGVhckFsbEJ1dHRvbiA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLnNwYXJrLWZpbHRlcl9fY2xlYXItYWxsJyk7XG4gICAgdGhpcy5fZmlsdGVyQ29udGVudCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLnNwYXJrLWZpbHRlcl9fY29udGVudCcpO1xuICAgIHRoaXMuX21vZHVsZXNDb250YWluZXIgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5zcGFyay1maWx0ZXJfX21vZHVsZXMtY29udGFpbmVyJyk7XG4gICAgdGhpcy5fdmlld01vcmVCdXR0b24gPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5zcGFyay1maWx0ZXJfX3ZpZXctbW9yZS1maWx0ZXJzJyk7XG4gICAgdGhpcy5fdmlld0xlc3NCdXR0b24gPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5zcGFyay1maWx0ZXJfX3ZpZXctbGVzcy1maWx0ZXJzJyk7XG4gICAgdGhpcy5fZmlsdGVyRm9vdGVyID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcuc3BhcmstZmlsdGVyX19mb290ZXInKTtcbiAgICB0aGlzLl9idXR0b25Hcm91cEVsID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcuc3BhcmstZmlsdGVyX19hcHBseS1idG4tY29udGFpbmVyJyk7XG4gICAgdGhpcy5fYXBwbHlGaWx0ZXJzQnV0dG9uID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcuc3BhcmstZmlsdGVyX19idG4tYXBwbHknKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlIGJvdW5kIHZlcnNpb25zIG9mIGV2ZW50IGxpc3RlbmVyIGNhbGxiYWNrcyBhbmQgc3RvcmUgdGhlbS5cbiAgICogT3RoZXJ3aXNlIHdlIGNhbid0IHVuYmluZCBmcm9tIHRoZXNlIGV2ZW50cyBsYXRlciBiZWNhdXNlIHRoZVxuICAgKiBmdW5jdGlvbiBzaWduYXR1cmVzIHdvbid0IG1hdGNoLlxuICAgKi9cblxuXG4gIEZpbHRlci5wcm90b3R5cGUuX2JpbmRFdmVudExpc3RlbmVyQ2FsbGJhY2tzID0gZnVuY3Rpb24gX2JpbmRFdmVudExpc3RlbmVyQ2FsbGJhY2tzKCkge1xuICAgIHRoaXMuX29uUmVzaXplQm91bmQgPSB0aGlzLl9vblJlc2l6ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX3RvZ2dsZVZpZXdCb3VuZCA9IHRoaXMuX3RvZ2dsZVZpZXcuYmluZCh0aGlzKTtcbiAgICB0aGlzLl90b2dnbGVGaWx0ZXJDbGlja0JvdW5kID0gdGhpcy50b2dnbGVGaWx0ZXJDbGljay5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uQ2xlYXJBbGxCb3VuZCA9IHRoaXMuX29uQ2xlYXJBbGwuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vblNjcm9sbEJvdW5kID0gdGhpcy5fb25TY3JvbGwuYmluZCh0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogQWRkIGV2ZW50IGxpc3RlbmVyc1xuICAgKi9cblxuXG4gIEZpbHRlci5wcm90b3R5cGUuX2FkZEV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gX2FkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9vblJlc2l6ZUJvdW5kKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5fb25TY3JvbGxCb3VuZCk7XG4gICAgIXRoaXMuX3ZpZXdNb3JlQnV0dG9uIHx8IHRoaXMuX3ZpZXdNb3JlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fdG9nZ2xlVmlld0JvdW5kKTtcbiAgICAhdGhpcy5fdmlld0xlc3NCdXR0b24gfHwgdGhpcy5fdmlld0xlc3NCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl90b2dnbGVWaWV3Qm91bmQpO1xuICAgICF0aGlzLl90b2dnbGVGaWx0ZXJCdXR0b24gfHwgdGhpcy5fdG9nZ2xlRmlsdGVyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fdG9nZ2xlRmlsdGVyQ2xpY2tCb3VuZCk7XG4gICAgIXRoaXMuX2NsZWFyQWxsQnV0dG9uIHx8IHRoaXMuX2NsZWFyQWxsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb25DbGVhckFsbEJvdW5kKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIGV2ZW50IGxpc3RlbmVyc1xuICAgKi9cblxuXG4gIEZpbHRlci5wcm90b3R5cGUuX3JlbW92ZUV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9vblJlc2l6ZUJvdW5kKTtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5fb25TY3JvbGxCb3VuZCk7XG4gICAgIXRoaXMuX3ZpZXdNb3JlQnV0dG9uIHx8IHRoaXMuX3ZpZXdNb3JlQnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fdG9nZ2xlVmlld0JvdW5kKTtcbiAgICAhdGhpcy5fdmlld0xlc3NCdXR0b24gfHwgdGhpcy5fdmlld0xlc3NCdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl90b2dnbGVWaWV3Qm91bmQpO1xuICAgICF0aGlzLl90b2dnbGVGaWx0ZXJCdXR0b24gfHwgdGhpcy5fdG9nZ2xlRmlsdGVyQnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fdG9nZ2xlRmlsdGVyQ2xpY2tCb3VuZCk7XG4gICAgIXRoaXMuX2NsZWFyQWxsQnV0dG9uIHx8IHRoaXMuX2NsZWFyQWxsQnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb25DbGVhckFsbEJvdW5kKTtcbiAgfTtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBmaWx0ZXJcbiAgICovXG5cblxuICBGaWx0ZXIucHJvdG90eXBlLl9pbml0RmlsdGVyRGlzcGxheSA9IGZ1bmN0aW9uIF9pbml0RmlsdGVyRGlzcGxheSgpIHtcbiAgICB0aGlzLmluaXRpYWxpemluZ0ZpbHRlciA9IHRydWU7XG5cbiAgICBpZiAodGhpcy5tb2R1bGVFbHMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5leHRyYU1vZHVsZXNFeHBhbmRlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgICgwLCBfYWRkQ2xhc3MyLmRlZmF1bHQpKHRoaXMuZWwsICdzcGFyay1maWx0ZXItLWluaXRpYWxpemluZycpO1xuXG4gICAgdGhpcy5fZGV0ZXJtaW5lRmlsdGVyTGF5b3V0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIERldGVybWluZSB3aGljaCBmaWx0ZXIgbGF5b3V0IHNob3VsZCBiZSBkaXNwbGF5ZWQgaS5lLiBFeHBhbmQvQ29sbGFwc2UgdmlldyBvciBXaWRlIHZpZXdcbiAgICovXG5cblxuICBGaWx0ZXIucHJvdG90eXBlLl9kZXRlcm1pbmVGaWx0ZXJMYXlvdXQgPSBmdW5jdGlvbiBfZGV0ZXJtaW5lRmlsdGVyTGF5b3V0KCkge1xuICAgIHRoaXMuY3VycmVudEJyZWFrcG9pbnQgPSAoMCwgX2JyZWFrcG9pbnQuZ2V0KSh3aW5kb3cuaW5uZXJXaWR0aCk7XG5cbiAgICBzd2l0Y2ggKHRoaXMuY3VycmVudEJyZWFrcG9pbnQpIHtcbiAgICAgIGNhc2UgJ3hzJzpcbiAgICAgICAgdGhpcy5fY3VyQ29sID0gMTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzbSc6XG4gICAgICAgIHRoaXMuX2N1ckNvbCA9IDI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbWQnOlxuICAgICAgICB0aGlzLl9jdXJDb2wgPSAzO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRoaXMuX2N1ckNvbCA9IDQ7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9jdXJDb2wgPD0gMSkge1xuICAgICAgLy8gRGlzcGxheSBleHBhbmQtY29sbGFwc2UgZmlsdGVyXG4gICAgICBpZiAoIXRoaXMuX2lzRHJvcGRvd25TdGF0ZSkge1xuICAgICAgICB0aGlzLl9hcHBseUV4cGFuZENvbGxhcHNlTGF5b3V0KCk7XG4gICAgICAgIHRoaXMuX3Nob3dNb2R1bGUoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRGlzcGxheSB3aWRlLXNjcmVlbiBmaWx0ZXJcbiAgICAgIGlmICh0aGlzLl9leHBhbmRDb2xsYXBzZVN0YXRlKSB7XG4gICAgICAgIHRoaXMuX3JlbW92ZUV4cGFuZENvbGxhcHNlTGF5b3V0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICgoMCwgX2hhc0NsYXNzMi5kZWZhdWx0KSh0aGlzLl9idXR0b25Hcm91cEVsLCAnaXMtZml4ZWQnKSkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZW91dCk7XG4gICAgICAgIHRoaXMuX2ZpbHRlckZvb3Rlci5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgIHRoaXMuX2J1dHRvbkdyb3VwRWwucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAoMCwgX3JlbW92ZUNsYXNzMi5kZWZhdWx0KSh0aGlzLl9idXR0b25Hcm91cEVsLCAnaXMtZml4ZWQnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fc2hvd01vZHVsZSgpO1xuXG4gICAgICBpZiAoIXRoaXMuZXh0cmFNb2R1bGVzRXhwYW5kZWQpIHtcbiAgICAgICAgdGhpcy5faGlkZU1vZHVsZSh0aGlzLl9jdXJDb2wsIHRoaXMuX21heENvbCAtIDEpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVXBkYXRlIHRoZSBmaWx0ZXIgbGF5b3V0IGFzIG5lY2Vzc2FyeVxuICAgKi9cblxuXG4gIEZpbHRlci5wcm90b3R5cGUuX3VwZGF0ZUZpbHRlckxheW91dCA9IGZ1bmN0aW9uIF91cGRhdGVGaWx0ZXJMYXlvdXQoKSB7XG4gICAgdGhpcy5fZGV0ZXJtaW5lRmlsdGVyTGF5b3V0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEV4cGFuZCBvciBjb2xsYXBzZSBleHRyYSBmaWx0ZXJzXG4gICAqL1xuXG5cbiAgRmlsdGVyLnByb3RvdHlwZS5fdG9nZ2xlVmlldyA9IGZ1bmN0aW9uIF90b2dnbGVWaWV3KCkge1xuICAgIGlmICh0aGlzLl9pc0ZpbHRlckV4cGFuZGVkICYmICF0aGlzLmV4dHJhTW9kdWxlc0V4cGFuZGVkKSB7XG4gICAgICB0aGlzLl9zaG93TW9kdWxlKCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9pc0ZpbHRlckV4cGFuZGVkICYmIHRoaXMuZXh0cmFNb2R1bGVzRXhwYW5kZWQpIHtcbiAgICAgIHRoaXMuX2hpZGVNb2R1bGUodGhpcy5fY3VyQ29sLCB0aGlzLl9tYXhDb2wgLSAxKTtcbiAgICB9XG5cbiAgICB0aGlzLmV4dHJhTW9kdWxlc0V4cGFuZGVkID0gIXRoaXMuZXh0cmFNb2R1bGVzRXhwYW5kZWQ7XG4gICAgKDAsIF90b2dnbGVDbGFzczIuZGVmYXVsdCkodGhpcy5fdmlld01vcmVCdXR0b24sICdoaWRlJyk7XG4gICAgKDAsIF90b2dnbGVDbGFzczIuZGVmYXVsdCkodGhpcy5fdmlld0xlc3NCdXR0b24sICdoaWRlJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBjbGljayBldmVudCB3aGVuIGZpbHRlciB0b2dnbGVzIGFyZSBjbGlja2VkXG4gICAqL1xuXG5cbiAgRmlsdGVyLnByb3RvdHlwZS50b2dnbGVGaWx0ZXJDbGljayA9IGZ1bmN0aW9uIHRvZ2dsZUZpbHRlckNsaWNrKCkge1xuICAgIGlmICh0aGlzLmluaXRpYWxpemluZ0ZpbHRlcikge1xuICAgICAgdGhpcy5pbml0aWFsaXppbmdGaWx0ZXIgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB0aGlzLnRvZ2dsZUZpbHRlcigpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUbyBoaWRlIG9yIHNob3cgZmlsdGVyIG1vZHVsZVxuICAgKiBAcGFyYW1zIHtTdHJpbmd9IHRvZ2dsZTsgY29sbGFwc2U7IGV4cGFuZDtcbiAgICogQHBhcmFtcyB7Qm9vbGVhbn0gQ2hhbmdlIHRoZSB2YWx1ZSBvZiBgdGhpcy5faXNGaWx0ZXJFeHBhbmRlZGAgYmFzZWQgb24gdGhlIGJvb2xlYW4gdmFsdWVcbiAgICovXG5cblxuICBGaWx0ZXIucHJvdG90eXBlLnRvZ2dsZUZpbHRlciA9IGZ1bmN0aW9uIHRvZ2dsZUZpbHRlcihvcHRpb24sIG5vU3RhdGVDaGFuZ2UpIHtcbiAgICBpZiAoKDAsIF9oYXNDbGFzczIuZGVmYXVsdCkodGhpcy5lbCwgJ3NwYXJrLWZpbHRlci0taW5pdGlhbGl6aW5nJykgJiYgIXRoaXMuaW5pdGlhbGl6aW5nRmlsdGVyKSB7XG4gICAgICAoMCwgX3JlbW92ZUNsYXNzMi5kZWZhdWx0KSh0aGlzLmVsLCAnc3BhcmstZmlsdGVyLS1pbml0aWFsaXppbmcnKTtcbiAgICAgICgwLCBfYWRkQ2xhc3MyLmRlZmF1bHQpKHRoaXMuZWwsICdzcGFyay1maWx0ZXItLWluaXRpYWxpemVkJyk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbiA9PT0gJ2V4cGFuZCcpIHtcbiAgICAgIGlmICghdGhpcy5pbml0aWFsaXppbmdGaWx0ZXIpIHtcbiAgICAgICAgKDAsIF9yZW1vdmVDbGFzczIuZGVmYXVsdCkodGhpcy5fZmlsdGVyQ29udGVudCwgJ2hpZGUnKTtcblxuICAgICAgICAoMCwgX2hlaWdodDIuZGVmYXVsdCkoe1xuICAgICAgICAgIGVsOiB0aGlzLmVsLFxuICAgICAgICAgIHRvZ2dsZUVsOiAnLnNwYXJrLWZpbHRlcl9fY29udGVudCcsXG4gICAgICAgICAgdG9nZ2xlQ2xhc3M6ICdmaWx0ZXItZXhwYW5kZWQnLFxuICAgICAgICAgIGFjdGlvbjogJ2V4cGFuZCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fdG9nZ2xlRmlsdGVyTGFiZWwuaW5uZXJIVE1MID0gJ0hpZGUnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgKDAsIF9yZW1vdmVDbGFzczIuZGVmYXVsdCkodGhpcy5fZmlsdGVyQ29udGVudCwgJ2hpZGUnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFub1N0YXRlQ2hhbmdlKSB7XG4gICAgICAgIHRoaXMuX2lzRmlsdGVyRXhwYW5kZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAob3B0aW9uID09PSAnY29sbGFwc2UnKSB7XG4gICAgICBpZiAoIXRoaXMuaW5pdGlhbGl6aW5nRmlsdGVyKSB7XG4gICAgICAgICgwLCBfYWRkQ2xhc3MyLmRlZmF1bHQpKHRoaXMuX2ZpbHRlckNvbnRlbnQsICdoaWRlJyk7XG5cbiAgICAgICAgKDAsIF9oZWlnaHQyLmRlZmF1bHQpKHtcbiAgICAgICAgICBlbDogdGhpcy5lbCxcbiAgICAgICAgICB0b2dnbGVFbDogJy5zcGFyay1maWx0ZXJfX2NvbnRlbnQnLFxuICAgICAgICAgIHRvZ2dsZUNsYXNzOiAnZmlsdGVyLWV4cGFuZGVkJyxcbiAgICAgICAgICBhY3Rpb246ICdjb2xsYXBzZSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fdG9nZ2xlRmlsdGVyTGFiZWwuaW5uZXJIVE1MID0gJ1Nob3cnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgKDAsIF9hZGRDbGFzczIuZGVmYXVsdCkodGhpcy5fZmlsdGVyQ29udGVudCwgJ2hpZGUnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFub1N0YXRlQ2hhbmdlKSB7XG4gICAgICAgIHRoaXMuX2lzRmlsdGVyRXhwYW5kZWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgKDAsIF90b2dnbGVDbGFzczIuZGVmYXVsdCkodGhpcy5fZmlsdGVyQ29udGVudCwgJ2hpZGUnKTtcblxuICAgICAgaWYgKCgwLCBfaGFzQ2xhc3MyLmRlZmF1bHQpKHRoaXMuZWwsICdmaWx0ZXItZXhwYW5kZWQnKSkge1xuICAgICAgICAoMCwgX2hlaWdodDIuZGVmYXVsdCkoe1xuICAgICAgICAgIGVsOiB0aGlzLmVsLFxuICAgICAgICAgIHRvZ2dsZUVsOiAnLnNwYXJrLWZpbHRlcl9fY29udGVudCcsXG4gICAgICAgICAgdG9nZ2xlQ2xhc3M6ICdmaWx0ZXItZXhwYW5kZWQnLFxuICAgICAgICAgIGFjdGlvbjogJ2NvbGxhcHNlJ1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLl90b2dnbGVGaWx0ZXJMYWJlbC5pbm5lckhUTUwgPSAnU2hvdyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAoMCwgX2hlaWdodDIuZGVmYXVsdCkoe1xuICAgICAgICAgIGVsOiB0aGlzLmVsLFxuICAgICAgICAgIHRvZ2dsZUVsOiAnLnNwYXJrLWZpbHRlcl9fY29udGVudCcsXG4gICAgICAgICAgdG9nZ2xlQ2xhc3M6ICdmaWx0ZXItZXhwYW5kZWQnLFxuICAgICAgICAgIGFjdGlvbjogJ2V4cGFuZCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fdG9nZ2xlRmlsdGVyTGFiZWwuaW5uZXJIVE1MID0gJ0hpZGUnO1xuICAgICAgfVxuXG4gICAgICBpZiAoIW5vU3RhdGVDaGFuZ2UpIHtcbiAgICAgICAgdGhpcy5faXNGaWx0ZXJFeHBhbmRlZCA9ICF0aGlzLl9pc0ZpbHRlckV4cGFuZGVkO1xuXG4gICAgICAgIGlmICgoMCwgX2hhc0NsYXNzMi5kZWZhdWx0KSh0aGlzLmVsLCAnc3BhcmstZmlsdGVyLS1kcm9wZG93bicpICYmICEoMCwgX2hhc0NsYXNzMi5kZWZhdWx0KSh0aGlzLl9maWx0ZXJDb250ZW50LCAnaGlkZScpKSB7XG4gICAgICAgICAgdGhpcy5fY2FsY3VsYXRlQXBwbHlCdG5Qb3NpdGlvbigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCEoMCwgX2hhc0NsYXNzMi5kZWZhdWx0KSh0aGlzLmVsLCAnc3BhcmstZmlsdGVyLS1kcm9wZG93bicpICYmICgwLCBfaGFzQ2xhc3MyLmRlZmF1bHQpKHRoaXMuX2J1dHRvbkdyb3VwRWwsICdpcy1maXhlZCcpKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZW91dCk7XG4gICAgICB0aGlzLl9maWx0ZXJGb290ZXIucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgdGhpcy5fYnV0dG9uR3JvdXBFbC5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAoMCwgX3JlbW92ZUNsYXNzMi5kZWZhdWx0KSh0aGlzLl9idXR0b25Hcm91cEVsLCAnaXMtZml4ZWQnKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIE9uLXJlc2l6ZSBoYW5kbGVyIHRoYXQgdXBkYXRlcyBsYXlvdXQgYXMgbmVlZGVkIGJhc2VkIG9uIHNjcmVlbiBkaW1lbnNpb25zXG4gICAqL1xuXG5cbiAgRmlsdGVyLnByb3RvdHlwZS5fb25SZXNpemUgPSBmdW5jdGlvbiBfb25SZXNpemUoKSB7XG4gICAgdGhpcy5fdXBkYXRlRmlsdGVyTGF5b3V0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIE9uLXNjcm9sbCBoYW5kbGVyIHRoYXQgZGV0ZXJtaW5lcyBBcHBseSBidXR0b24gcG9zaXRpb25pbmcgYXQgdGhlIHhzIGJyZWFrcG9pbnRcbiAgICovXG5cblxuICBGaWx0ZXIucHJvdG90eXBlLl9vblNjcm9sbCA9IGZ1bmN0aW9uIF9vblNjcm9sbCgpIHtcbiAgICBpZiAodGhpcy5faXNEcm9wZG93blN0YXRlKSB7XG4gICAgICB0aGlzLl90aW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLl9jYWxjdWxhdGVBcHBseUJ0blBvc2l0aW9uLmJpbmQodGhpcyksIDMwMCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB0cmlnZ2VyZWQgYWZ0ZXIgdGhlIGV4cGFuc2lvbiBvZiBhIG1vZHVsZSBhdCB0aGUgeHMgYnJlYWtwb2ludFxuICAgKi9cblxuXG4gIEZpbHRlci5wcm90b3R5cGUuX29uQWZ0ZXJFeHBhbmQgPSBmdW5jdGlvbiBfb25BZnRlckV4cGFuZCgpIHtcbiAgICBpZiAoISgwLCBfaGFzQ2xhc3MyLmRlZmF1bHQpKHRoaXMuX2J1dHRvbkdyb3VwRWwsICdpcy1maXhlZCcpKSB7XG4gICAgICB0aGlzLl90aW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLl9jYWxjdWxhdGVBcHBseUJ0blBvc2l0aW9uLmJpbmQodGhpcyksIDMwMCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB0cmlnZ2VyZWQgYWZ0ZXIgdGhlIGNvbGxhcHNlIG9mIGEgbW9kdWxlIGF0IHRoZSB4cyBicmVha3BvaW50XG4gICAqL1xuXG5cbiAgRmlsdGVyLnByb3RvdHlwZS5fb25BZnRlckNvbGxhcHNlID0gZnVuY3Rpb24gX29uQWZ0ZXJDb2xsYXBzZSgpIHtcbiAgICB0aGlzLl90aW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLl9jYWxjdWxhdGVBcHBseUJ0blBvc2l0aW9uLmJpbmQodGhpcyksIDMwMCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIHRyaWdnZXJlZCBhZnRlciBTaG93IGFsbCBpcyBjb21wbGV0ZSBhdCB0aGUgeHMgYnJlYWtwb2ludFxuICAgKi9cblxuICAvKiBUT0RPOiBUaGlzIGlzIG5vdCByZXF1aXJlZCBhbnltb3JlIGFzIHNob3cgYWxsIGlzIG5vdCBhdmFpbGFibGUgYXQgdGhlIHhzIGJyZWFrcG9pbnQgYW55bW9yZVxuICBfb25TaG93QWxsQ29tcGxldGUoKSB7XG4gICAgaWYodGhpcy5faXNEcm9wZG93blN0YXRlKSB7XG4gICAgICB0aGlzLl90aW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLl9jYWxjdWxhdGVBcHBseUJ0blBvc2l0aW9uLmJpbmQodGhpcyksIDMwMCk7XG4gICAgfVxuICB9XG4gICovXG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIEFwcGx5IGJ1dHRvbiBhdCB0aGUgeHMgYnJlYWtwb2ludFxuICAgKi9cblxuXG4gIEZpbHRlci5wcm90b3R5cGUuX2NhbGN1bGF0ZUFwcGx5QnRuUG9zaXRpb24gPSBmdW5jdGlvbiBfY2FsY3VsYXRlQXBwbHlCdG5Qb3NpdGlvbigpIHtcblxuICAgIHZhciBmaWx0ZXJPZmZzZXRzID0gdGhpcy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgIGlmIChmaWx0ZXJPZmZzZXRzLmhlaWdodCA+IDI1NSkge1xuICAgICAgLy8gMyBjb2xsYXBzZWQgbW9kdWxlIGhlaWdodHMgKyBmaWx0ZXIgaGVhZGVyIGhlaWdodCA9IDI1NVxuICAgICAgdmFyIHdpbmRvd0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgIHZhciBzY3JvbGxUb3AgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCB8fCAwO1xuICAgICAgdmFyIGZpbHRlckhpZGRlbkJlZm9yZSA9IHNjcm9sbFRvcCAtIChmaWx0ZXJPZmZzZXRzLnRvcCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wKTtcbiAgICAgIHZhciBmaWx0ZXJIaWRkZW5BZnRlciA9IGZpbHRlck9mZnNldHMudG9wICsgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgKyBmaWx0ZXJPZmZzZXRzLmhlaWdodCAtIChzY3JvbGxUb3AgKyB3aW5kb3dIZWlnaHQpO1xuXG4gICAgICBpZiAoIShzY3JvbGxUb3AgPiBmaWx0ZXJPZmZzZXRzLnRvcCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wICsgZmlsdGVyT2Zmc2V0cy5oZWlnaHQgfHwgZmlsdGVyT2Zmc2V0cy50b3AgKyBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCA+IHNjcm9sbFRvcCArIHdpbmRvdy5pbm5lckhlaWdodCkpIHtcbiAgICAgICAgdmFyIHBlcmNlbnRJblZpZXcgPSAxMDA7XG4gICAgICAgIHZhciBpblZpZXdwb3J0O1xuICAgICAgICB2YXIgaGlkZGVuQmVmb3JlID0gMDtcbiAgICAgICAgdmFyIGhpZGRlbkFmdGVyID0gMDtcblxuICAgICAgICBpZiAoZmlsdGVySGlkZGVuQmVmb3JlID4gMCkge1xuICAgICAgICAgIHBlcmNlbnRJblZpZXcgLT0gZmlsdGVySGlkZGVuQmVmb3JlICogMTAwIC8gZmlsdGVyT2Zmc2V0cy5oZWlnaHQ7XG4gICAgICAgICAgaGlkZGVuQmVmb3JlID0gZmlsdGVySGlkZGVuQmVmb3JlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpbHRlckhpZGRlbkFmdGVyID4gMCkge1xuICAgICAgICAgIHBlcmNlbnRJblZpZXcgLT0gZmlsdGVySGlkZGVuQWZ0ZXIgKiAxMDAgLyBmaWx0ZXJPZmZzZXRzLmhlaWdodDtcbiAgICAgICAgICBoaWRkZW5BZnRlciA9IGZpbHRlckhpZGRlbkFmdGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgaW5WaWV3cG9ydCA9IChmaWx0ZXJPZmZzZXRzLmhlaWdodCAtIChoaWRkZW5BZnRlciArIGhpZGRlbkJlZm9yZSkpIC8gd2luZG93SGVpZ2h0ICogMTAwO1xuICAgICAgfVxuXG4gICAgICBpZiAoZmlsdGVyT2Zmc2V0cy5ib3R0b20gPiAod2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpICYmIChwZXJjZW50SW5WaWV3ID4gNDUgfHwgaW5WaWV3cG9ydCA+IDUwKSkge1xuICAgICAgICB2YXIgYnV0dG9uR3JvdXBIZWlnaHQgPSB0aGlzLl9idXR0b25Hcm91cEVsLm9mZnNldEhlaWdodDtcbiAgICAgICAgdmFyIGZpbHRlcldpZHRoID0gZmlsdGVyT2Zmc2V0cy53aWR0aDtcblxuICAgICAgICB0aGlzLl9maWx0ZXJGb290ZXIuc3R5bGUuaGVpZ2h0ID0gYnV0dG9uR3JvdXBIZWlnaHQgKyAncHgnO1xuICAgICAgICAoMCwgX2FkZENsYXNzMi5kZWZhdWx0KSh0aGlzLl9idXR0b25Hcm91cEVsLCAnaXMtZml4ZWQnKTtcbiAgICAgICAgdGhpcy5fYnV0dG9uR3JvdXBFbC5zdHlsZS53aWR0aCA9IGZpbHRlcldpZHRoIC0gMiArICdweCc7IC8vIGFjY291bnRpbmcgZm9yIGJvcmRlciB3aWR0aFxuICAgICAgICB0aGlzLl9idXR0b25Hcm91cEVsLnN0eWxlLmxlZnQgPSBmaWx0ZXJPZmZzZXRzLmxlZnQgKyAxICsgJ3B4JzsgLy8gYWNjb3VudGluZyBmb3IgbGVmdCBib3JkZXJcblxuICAgICAgICB0aGlzLl9hcHBseUJ0blBvc2l0aW9uRml4ZWQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2FwcGx5QnRuUG9zaXRpb25SZWxhdGl2ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2V0IHBvc2l0aW9uOnJlbGF0aXZlIGZvciB0aGUgQXBwbHkgYnV0dG9uXG4gICAqL1xuXG5cbiAgRmlsdGVyLnByb3RvdHlwZS5fYXBwbHlCdG5Qb3NpdGlvblJlbGF0aXZlID0gZnVuY3Rpb24gX2FwcGx5QnRuUG9zaXRpb25SZWxhdGl2ZSgpIHtcblxuICAgIC8vZnVuY3Rpb24gYXR0YWNoQXBwbHlCdG4oKXtcbiAgICB2YXIgY3VycmVudEJ1dHRvblBvc2l0aW9uID0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLl9idXR0b25Hcm91cEVsKS5ib3R0b20pO1xuICAgIHZhciBsaXN0Qm90dG9tID0gdGhpcy5fbW9kdWxlc0NvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b207XG4gICAgdmFyIHZpZXdwb3J0SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gICAgdmFyIGJ1dHRvbkdyb3VwSGVpZ2h0ID0gdGhpcy5fYnV0dG9uR3JvdXBFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG4gICAgdmFyIGRpc3RhbmNlVG9Nb3ZlID0gdmlld3BvcnRIZWlnaHQgLSAobGlzdEJvdHRvbSArIGJ1dHRvbkdyb3VwSGVpZ2h0KTtcblxuICAgIGlmICghaXNOYU4oY3VycmVudEJ1dHRvblBvc2l0aW9uKSkge1xuICAgICAgdmFyIGFuaW1hdGlvbkxpc3RlbmVyID0gZnVuY3Rpb24gYW5pbWF0aW9uTGlzdGVuZXIoKSB7XG4gICAgICAgIHRoaXMuX2ZpbHRlckZvb3Rlci5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgIHRoaXMuX2J1dHRvbkdyb3VwRWwucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAoMCwgX3JlbW92ZUNsYXNzMi5kZWZhdWx0KSh0aGlzLl9idXR0b25Hcm91cEVsLCAnaXMtZml4ZWQnKTtcbiAgICAgICAgKDAsIF9yZW1vdmVDbGFzczIuZGVmYXVsdCkodGhpcy5fYnV0dG9uR3JvdXBFbCwgJ3NwYXJrLWZpbHRlcl9fYXBwbHktYnRuLWNvbnRhaW5lci0tYW5pbWF0ZScpO1xuICAgICAgICB0aGlzLl9idXR0b25Hcm91cEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsIGFuaW1hdGlvbkxpc3RlbmVyKTtcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuX2J1dHRvbkdyb3VwRWwuYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgYW5pbWF0aW9uTGlzdGVuZXIuYmluZCh0aGlzKSwgZmFsc2UpO1xuXG4gICAgICB2YXIga2V5ZnJhbWUgPSAnLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLScgKyBkaXN0YW5jZVRvTW92ZSArICdweCk7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtJyArIGRpc3RhbmNlVG9Nb3ZlICsgJ3B4KTsnO1xuXG4gICAgICB0aGlzLl9idXR0b25Hcm91cEVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCB0aGlzLl9idXR0b25Hcm91cEVsLmdldEF0dHJpYnV0ZSgnc3R5bGUnKSArICcgJyArIGtleWZyYW1lKTtcbiAgICAgICgwLCBfYWRkQ2xhc3MyLmRlZmF1bHQpKHRoaXMuX2J1dHRvbkdyb3VwRWwsICdzcGFyay1maWx0ZXJfX2FwcGx5LWJ0bi1jb250YWluZXItLWFuaW1hdGUnKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCBwb3NpdGlvbjpmaXhlZCBmb3IgdGhlIEFwcGx5IGJ1dHRvblxuICAgKi9cblxuXG4gIEZpbHRlci5wcm90b3R5cGUuX2FwcGx5QnRuUG9zaXRpb25GaXhlZCA9IGZ1bmN0aW9uIF9hcHBseUJ0blBvc2l0aW9uRml4ZWQoKSB7XG4gICAgdmFyIHJlcXVlc3RJRCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShtb3ZlQXBwbHlCdG4uYmluZCh0aGlzKSk7XG4gICAgdmFyIGluY3JlbWVudGVyID0gLjE7XG5cbiAgICBmdW5jdGlvbiBtb3ZlQXBwbHlCdG4oKSB7XG4gICAgICBpbmNyZW1lbnRlciArPSAuMDE7XG4gICAgICB2YXIgY3VycmVudEJ1dHRvblBvc2l0aW9uID0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLl9idXR0b25Hcm91cEVsKS5ib3R0b20pO1xuICAgICAgdmFyIGJ1dHRvbkhlaWdodCA9IHBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUodGhpcy5fYnV0dG9uR3JvdXBFbCkuaGVpZ2h0KTtcblxuICAgICAgaWYgKGN1cnJlbnRCdXR0b25Qb3NpdGlvbiA8IGJ1dHRvbkhlaWdodCAqIC0xKSB7XG4gICAgICAgIGN1cnJlbnRCdXR0b25Qb3NpdGlvbiA9IGJ1dHRvbkhlaWdodCAqIC0xO1xuICAgICAgfVxuXG4gICAgICBpZiAoY3VycmVudEJ1dHRvblBvc2l0aW9uID4gLTEpIHtcbiAgICAgICAgdGhpcy5fYnV0dG9uR3JvdXBFbC5zdHlsZS5ib3R0b20gPSAnMHB4JztcbiAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUocmVxdWVzdElEKTtcbiAgICAgIH0gZWxzZSBpZiAoY3VycmVudEJ1dHRvblBvc2l0aW9uIDwgMCkge1xuICAgICAgICBjdXJyZW50QnV0dG9uUG9zaXRpb24gKz0gMSAvIGluY3JlbWVudGVyO1xuICAgICAgICB0aGlzLl9idXR0b25Hcm91cEVsLnN0eWxlLmJvdHRvbSA9IGN1cnJlbnRCdXR0b25Qb3NpdGlvbiArICdweCc7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShtb3ZlQXBwbHlCdG4uYmluZCh0aGlzKSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmb3IgQ2xlYXIgYWxsXG4gICAqL1xuXG5cbiAgRmlsdGVyLnByb3RvdHlwZS5fb25DbGVhckFsbCA9IGZ1bmN0aW9uIF9vbkNsZWFyQWxsKCkge1xuICAgICh0aGlzLm9uQ2xlYXJBbGwgfHwgbm9vcCkoKTtcbiAgfTtcblxuICAvKipcbiAgICogU2hvdyBhbGwgbW9kdWxlc1xuICAgKi9cblxuXG4gIEZpbHRlci5wcm90b3R5cGUuX3Nob3dNb2R1bGUgPSBmdW5jdGlvbiBfc2hvd01vZHVsZSgpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubW9kdWxlRWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAoMCwgX3JlbW92ZUNsYXNzMi5kZWZhdWx0KSh0aGlzLm1vZHVsZUVsc1tpXSwgJ2hpZGUnKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEhpZGUgY2VydGFpbiBtb2R1bGVzXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBzdGFydCBpbmRleFxuICAgKiBAcGFyYW0ge051bWJlcn0gZW5kIGluZGV4XG4gICAqL1xuXG5cbiAgRmlsdGVyLnByb3RvdHlwZS5faGlkZU1vZHVsZSA9IGZ1bmN0aW9uIF9oaWRlTW9kdWxlKHN0YXJ0LCBlbmQpIHtcbiAgICBlbmQgPSBlbmQgfHwgdGhpcy5tb2R1bGVFbHMubGVuZ3RoIC0gMTtcbiAgICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPD0gZW5kOyBpKyspIHtcbiAgICAgICgwLCBfYWRkQ2xhc3MyLmRlZmF1bHQpKHRoaXMubW9kdWxlRWxzW2ldLCAnaGlkZScpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQXBwbHkgRXhwYW5kL0NvbGxhcHNlIGxheW91dCBmb3IgdGhlIGZpbHRlclxuICAgKiBVc2VkIHdoZW4gdGhlIGZpbHRlciBnZXRzIHRvIHRoZSB4cyBicmVha3BvaW50XG4gICAqL1xuXG5cbiAgRmlsdGVyLnByb3RvdHlwZS5fYXBwbHlFeHBhbmRDb2xsYXBzZUxheW91dCA9IGZ1bmN0aW9uIF9hcHBseUV4cGFuZENvbGxhcHNlTGF5b3V0KCkge1xuICAgICgwLCBfYWRkQ2xhc3MyLmRlZmF1bHQpKHRoaXMuZWwsICdzcGFyay1maWx0ZXItLWRyb3Bkb3duJyk7XG4gICAgdGhpcy5fZXhwYW5kQ29sbGFwc2VTdGF0ZSA9IHRydWU7XG5cbiAgICB2YXIgdGFncyA9IHRoaXMuX3RhZ3NDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnNwYXJrLWZpbHRlcl9fdGFnJyk7XG4gICAgaWYgKHRhZ3MubGVuZ3RoID4gMCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YWdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICgwLCBfYWRkQ2xhc3MyLmRlZmF1bHQpKHRhZ3NbaV0sICdoaWRlJyk7XG4gICAgICB9XG4gICAgICAoMCwgX3JlbW92ZUNsYXNzMi5kZWZhdWx0KSh0aGlzLl90YWdzQ291bnRlciwgJ2hpZGUnKTtcbiAgICB9XG5cbiAgICAoMCwgX2FkZENsYXNzMi5kZWZhdWx0KSh0aGlzLl92aWV3TW9yZUJ1dHRvbiwgJ2hpZGUnKTtcbiAgICAoMCwgX2FkZENsYXNzMi5kZWZhdWx0KSh0aGlzLl92aWV3TGVzc0J1dHRvbiwgJ2hpZGUnKTtcblxuICAgIGlmICh0aGlzLl9hcHBseUZpbHRlcnNCdXR0b24pIHtcbiAgICAgICgwLCBfcmVtb3ZlQ2xhc3MyLmRlZmF1bHQpKHRoaXMuX2FwcGx5RmlsdGVyc0J1dHRvbiwgJ3NwYXJrLWJ0bi0tc20nKTtcbiAgICAgICgwLCBfYWRkQ2xhc3MyLmRlZmF1bHQpKHRoaXMuX2FwcGx5RmlsdGVyc0J1dHRvbiwgJ3NwYXJrLWJ0bi0tYmxvY2snKTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMubW9kdWxlSW5zdHMubGVuZ3RoOyBqKyspIHtcbiAgICAgIHRoaXMubW9kdWxlSW5zdHNbal0uX2FwcGx5RXhwYW5kKCk7XG4gICAgfVxuXG4gICAgdGhpcy5faXNEcm9wZG93blN0YXRlID0gdHJ1ZTtcbiAgICB0aGlzLl90aW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLl9jYWxjdWxhdGVBcHBseUJ0blBvc2l0aW9uLmJpbmQodGhpcyksIDMwMCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBFeHBhbmQvQ29sbGFwc2UgbGF5b3V0IGFuZCBhcHBseSB0aGUgaG9yaXpvbnRhbCBsYXlvdXQgZm9yIHRoZSBmaWx0ZXJcbiAgICogVXNlZCB3aGVuIHRoZSBzY3JlZW4gc2l6ZSBpcyBsYXJnZXIgdGhhbiB0aGUgeHMgYnJlYWtwb2ludFxuICAgKi9cblxuXG4gIEZpbHRlci5wcm90b3R5cGUuX3JlbW92ZUV4cGFuZENvbGxhcHNlTGF5b3V0ID0gZnVuY3Rpb24gX3JlbW92ZUV4cGFuZENvbGxhcHNlTGF5b3V0KCkge1xuXG4gICAgKDAsIF9yZW1vdmVDbGFzczIuZGVmYXVsdCkodGhpcy5lbCwgJ3NwYXJrLWZpbHRlci0tZHJvcGRvd24nKTtcbiAgICB0aGlzLl9leHBhbmRDb2xsYXBzZVN0YXRlID0gZmFsc2U7XG4gICAgdGhpcy5fZmlsdGVyRm9vdGVyLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICB0aGlzLl9idXR0b25Hcm91cEVsLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAoMCwgX3JlbW92ZUNsYXNzMi5kZWZhdWx0KSh0aGlzLl9idXR0b25Hcm91cEVsLCAnaXMtZml4ZWQnKTtcblxuICAgIHZhciB0YWdzID0gdGhpcy5fdGFnc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc3BhcmstZmlsdGVyX190YWcnKTtcbiAgICBpZiAodGFncy5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgKDAsIF9yZW1vdmVDbGFzczIuZGVmYXVsdCkodGFnc1tpXSwgJ2hpZGUnKTtcbiAgICAgIH1cbiAgICAgICgwLCBfYWRkQ2xhc3MyLmRlZmF1bHQpKHRoaXMuX3RhZ3NDb3VudGVyLCAnaGlkZScpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmV4dHJhTW9kdWxlc0V4cGFuZGVkKSB7XG4gICAgICAoMCwgX3JlbW92ZUNsYXNzMi5kZWZhdWx0KSh0aGlzLl92aWV3TGVzc0J1dHRvbiwgJ2hpZGUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgKDAsIF9yZW1vdmVDbGFzczIuZGVmYXVsdCkodGhpcy5fdmlld01vcmVCdXR0b24sICdoaWRlJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2FwcGx5RmlsdGVyc0J1dHRvbikge1xuICAgICAgKDAsIF9hZGRDbGFzczIuZGVmYXVsdCkodGhpcy5fYXBwbHlGaWx0ZXJzQnV0dG9uLCAnc3BhcmstYnRuLS1zbScpO1xuICAgICAgKDAsIF9yZW1vdmVDbGFzczIuZGVmYXVsdCkodGhpcy5fYXBwbHlGaWx0ZXJzQnV0dG9uLCAnc3BhcmstYnRuLS1ibG9jaycpO1xuICAgIH1cblxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5tb2R1bGVJbnN0cy5sZW5ndGg7IGorKykge1xuICAgICAgdGhpcy5tb2R1bGVJbnN0c1tqXS5fZGlzYXBwbHlFeHBhbmQoKTtcbiAgICB9XG4gICAgdGhpcy5faXNEcm9wZG93blN0YXRlID0gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGEgdGFnIGVsZW1lbnQgaW4gZmlsdGVyLCB3aGljaCB3aWxsIGJlIGRpcmVjdGx5IHBvc3RlZCBpbnNpZGUgYC5zcGFyay1maWx0ZXJfX3RhZ3MtY29udGFpbmVyYFxuICAgKiBAcGFyYW0ge3N0cmluZ30gaW5wdXQgbmFtZSAtIE5hbWUgb2YgdGhlIGlucHV0IHRvIGFsbG93IGFueSBjYWxsYmFja3MgdG8gdGFyZ2V0IGlucHV0IHNwZWNpZmljYWxseVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnIGxhYmVsIC0gVGhlIGxhYmVsIHRvIGJlIGRpc3BsYXllZCBpbiB0aGUgdGFnLiBUaGlzIGNvdWxkIGJlIHRoZSBpbnB1dCdzIGxhYmVsIG9yIGFub3RoZXIgdXNlciBkZWZpbmVkIGxhYmVsXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIGZ1bmN0aW9uIGZvciBgWGAgYnV0dG9uXG4gICAqL1xuXG5cbiAgRmlsdGVyLnByb3RvdHlwZS5jcmVhdGVUYWdFbCA9IGZ1bmN0aW9uIGNyZWF0ZVRhZ0VsKGlucHV0LCBsYWJlbCwgY2xlYXJDYWxsYmFjaykge1xuICAgIHZhciB0YWdFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRhZ0VsLmNsYXNzTmFtZSA9ICgwLCBfaGFzQ2xhc3MyLmRlZmF1bHQpKHRoaXMuZWwsICdzcGFyay1maWx0ZXItLWRyb3Bkb3duJykgPyAnc3BhcmstZmlsdGVyX190YWcgaGlkZScgOiAnc3BhcmstZmlsdGVyX190YWcnO1xuICAgIHRhZ0VsLnNldEF0dHJpYnV0ZSgnZGF0YS1maWx0ZXItbmFtZScsIGlucHV0KTtcbiAgICB0YWdFbC5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJzcGFyay1maWx0ZXJfX3RhZ19fbGFiZWxcIj4nICsgbGFiZWwgKyAnPC9zcGFuPjxpIGNsYXNzPVwic3BhcmstaWNvbiBzcGFyay1maWx0ZXJfX3RhZ19fY2xvc2VcIj7vhKM8L2k+JztcblxuICAgIHRoaXMuX3RhZ3NDb250YWluZXIuaW5zZXJ0QmVmb3JlKHRhZ0VsLCB0aGlzLl9jbGVhckFsbEJ1dHRvbik7XG5cbiAgICAvLyBjcmVhdGUgZXZlbnQgbGlzdGVuZXIgYWZ0ZXIgYWRkaW5nIGVsZW1lbnQgdG8gRE9NXG4gICAgdGFnRWwucXVlcnlTZWxlY3RvcignLnNwYXJrLWZpbHRlcl9fdGFnX19jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xlYXJDYWxsYmFjayB8fCBub29wKTtcblxuICAgICgwLCBfcmVtb3ZlQ2xhc3MyLmRlZmF1bHQpKHRoaXMuX2NsZWFyQWxsQnV0dG9uLCAnaGlkZScpO1xuXG4gICAgLy8gU2hvdyB0YWcgY291bnQgaWYgb24gc21hbGwgc2NyZWVuIGFuZCB0aGlzIGlzIGluaXRpYWwgYXBwbGljYXRpb24gb2YgZmlsdGVyc1xuICAgIGlmICgoMCwgX2hhc0NsYXNzMi5kZWZhdWx0KSh0aGlzLmVsLCAnc3BhcmstZmlsdGVyLS1kcm9wZG93bicpKSAoMCwgX3JlbW92ZUNsYXNzMi5kZWZhdWx0KSh0aGlzLl90YWdzQ291bnRlciwgJ2hpZGUnKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIGFsbCB0YWdzXG4gICAqL1xuXG5cbiAgRmlsdGVyLnByb3RvdHlwZS5jbGVhckFsbFRhZ0VscyA9IGZ1bmN0aW9uIGNsZWFyQWxsVGFnRWxzKCkge1xuICAgIHZhciB0YWdzID0gdGhpcy5fdGFnc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc3BhcmstZmlsdGVyX190YWcnKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuX3RhZ3NDb250YWluZXIucmVtb3ZlQ2hpbGQodGFnc1tpXSk7XG4gICAgfVxuXG4gICAgLy8gUmVzZXQgY291bnRlclxuICAgIHZhciBjb3VudGVyID0gdGhpcy5fdGFnc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdzcGFuJyk7XG4gICAgY291bnRlci5pbm5lckhUTUwgPSAnMCc7XG5cbiAgICAoMCwgX2FkZENsYXNzMi5kZWZhdWx0KSh0aGlzLl9jbGVhckFsbEJ1dHRvbiwgJ2hpZGUnKTtcbiAgICAoMCwgX2FkZENsYXNzMi5kZWZhdWx0KSh0aGlzLl90YWdzQ291bnRlciwgJ2hpZGUnKTtcbiAgfTtcblxuICAvKipcbiAgICogU2hvdyBNb2R1bGUgQ2xlYXIgQnV0dG9uXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gbW9kdWxlTmFtZSBBbiBpZGVudGlmaWVyIGZvciB0aGUgbW9kdWxlIGJlaW5nIHRhcmdldGVkXG4gICAqL1xuXG5cbiAgRmlsdGVyLnByb3RvdHlwZS5zaG93TW9kdWxlQ2xlYXJCdXR0b24gPSBmdW5jdGlvbiBzaG93TW9kdWxlQ2xlYXJCdXR0b24obW9kdWxlTmFtZSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tb2R1bGVJbnN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMubW9kdWxlSW5zdHNbaV0uZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWZpbHRlci1tb2R1bGUnKSA9PT0gbW9kdWxlTmFtZSkge1xuICAgICAgICB0aGlzLm1vZHVsZUluc3RzW2ldLmVuYWJsZUNsZWFyQnRuKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBEaXNhYmxlIE1vZHVsZSBDbGVhciBCdXR0b25cbiAgICogQHBhcmFtIHtFbGVtZW50fSBtb2R1bGVOYW1lIEFuIGlkZW50aWZpZXIgZm9yIHRoZSBtb2R1bGUgYmVpbmcgdGFyZ2V0ZWRcbiAgICovXG5cblxuICBGaWx0ZXIucHJvdG90eXBlLmRpc2FibGVNb2R1bGVDbGVhckJ1dHRvbiA9IGZ1bmN0aW9uIGRpc2FibGVNb2R1bGVDbGVhckJ1dHRvbihtb2R1bGVOYW1lKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1vZHVsZUluc3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5tb2R1bGVJbnN0c1tpXS5lbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZmlsdGVyLW1vZHVsZScpID09PSBtb2R1bGVOYW1lKSB7XG4gICAgICAgIHRoaXMubW9kdWxlSW5zdHNbaV0uZGlzYWJsZUNsZWFyQnRuKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBIaWRlIE1vZHVsZSBDbGVhciBCdXR0b25cbiAgICogQHBhcmFtIHtFbGVtZW50fSBtb2R1bGVOYW1lIEFuIGlkZW50aWZpZXIgZm9yIHRoZSBtb2R1bGUgYmVpbmcgdGFyZ2V0ZWRcbiAgICovXG5cblxuICBGaWx0ZXIucHJvdG90eXBlLmhpZGVNb2R1bGVDbGVhckJ1dHRvbiA9IGZ1bmN0aW9uIGhpZGVNb2R1bGVDbGVhckJ1dHRvbihtb2R1bGVOYW1lKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1vZHVsZUluc3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5tb2R1bGVJbnN0c1tpXS5lbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZmlsdGVyLW1vZHVsZScpID09PSBtb2R1bGVOYW1lKSB7XG4gICAgICAgIHRoaXMubW9kdWxlSW5zdHNbaV0uaGlkZUNsZWFyQnRuKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgTW9kdWxlIENsZWFyIGJ1dHRvbiBzdGF0dXNcbiAgICogIEBwYXJhbSB7RWxlbWVudH0gbW9kdWxlTmFtZSBBbiBpZGVudGlmaWVyIGZvciB0aGUgbW9kdWxlIGJlaW5nIHRhcmdldGVkXG4gICAqL1xuXG5cbiAgRmlsdGVyLnByb3RvdHlwZS5tb2R1bGVDbGVhckJ1dHRvblN0YXR1cyA9IGZ1bmN0aW9uIG1vZHVsZUNsZWFyQnV0dG9uU3RhdHVzKG1vZHVsZU5hbWUpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubW9kdWxlSW5zdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLm1vZHVsZUluc3RzW2ldLmVsLmdldEF0dHJpYnV0ZSgnZGF0YS1maWx0ZXItbW9kdWxlJykgPT09IG1vZHVsZU5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubW9kdWxlSW5zdHNbaV0uZ2V0Q2xlYXJCdXR0b25TdGF0dXMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIEZpbHRlcjtcbn0oX2Jhc2UyLmRlZmF1bHQpO1xuXG4vKipcbiAqIFdoaXRlbGlzdGVkIHBhcmFtZXRlcnMgd2hpY2ggY2FuIGJlIHNldCBvbiBjb25zdHJ1Y3Rpb24uXG4gKiBAdHlwZSB7QXJyYXl9XG4gKi9cblxuXG5GaWx0ZXIucHJvdG90eXBlLl93aGl0ZWxpc3RlZFBhcmFtcyA9IFsnb25DbGVhckFsbCcsICdtb2R1bGVPcHRpb25zJ107XG5cbi8qKlxuICogRGVmYXVsdCB2YWx1ZXMgZm9yIGludGVybmFsIHByb3BlcnRpZXMgd2Ugd2lsbCBiZSBzZXR0aW5nLlxuICogVGhlc2UgYXJlIHNldCBvbiBlYWNoIGNvbnN0cnVjdGlvbiBzbyB3ZSBkb24ndCBsZWFrIHByb3BlcnRpZXNcbiAqIGludG8gdGhlIHByb3RvdHlwZSBjaGFpbi5cbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbkZpbHRlci5wcm90b3R5cGUuZGVmYXVsdHMgPSB7XG4gIGVsOiBudWxsLFxuICBtb2R1bGVFbHM6IFtdLFxuICBfZmlsdGVyVG9nZ2xlQ29udGFpbmVyOiBudWxsLFxuICBfdG9nZ2xlRmlsdGVyQnV0dG9uOiBudWxsLFxuICBfdG9nZ2xlRmlsdGVyTGFiZWw6IG51bGwsXG4gIF90YWdzQ29udGFpbmVyOiBudWxsLFxuICBfdGFnc0NvdW50ZXI6IG51bGwsXG4gIF9jbGVhckFsbEJ1dHRvbjogbnVsbCxcbiAgX2ZpbHRlckNvbnRlbnQ6IG51bGwsXG4gIF9tb2R1bGVzQ29udGFpbmVyOiBudWxsLFxuICBfdmlld01vcmVCdXR0b246IG51bGwsXG4gIF92aWV3TGVzc0J1dHRvbjogbnVsbCxcbiAgX2ZpbHRlckZvb3RlcjogbnVsbCxcbiAgX2J1dHRvbkdyb3VwRWw6IG51bGwsXG4gIF9hcHBseUZpbHRlcnNCdXR0b246IG51bGwsXG4gIG1vZHVsZUluc3RzOiBbXSxcbiAgbW9kdWxlT3B0aW9uczogW10sXG4gIG1heENvbDogNCxcbiAgb25DbGVhckFsbDogbm9vcCxcbiAgZXh0cmFNb2R1bGVzRXhwYW5kZWQ6IGZhbHNlLFxuICBfaXNGaWx0ZXJFeHBhbmRlZDogZmFsc2UsXG4gIF9pc0Ryb3Bkb3duU3RhdGU6IGZhbHNlLFxuICBfaXNNb2R1bGVFeHBhbmQ6IHRydWUsXG4gIF9jdXJDb2w6IDQsXG4gIF9vblJlc2l6ZUJvdW5kOiBudWxsLFxuICBfdG9nZ2xlVmlld0JvdW5kOiBudWxsLFxuICBfdG9nZ2xlRmlsdGVyQ2xpY2tCb3VuZDogbnVsbCxcbiAgX29uQ2xlYXJBbGxCb3VuZDogbnVsbCxcbiAgX29uU2Nyb2xsQm91bmQ6IG51bGxcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IEZpbHRlcjtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmlsdGVyLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2Jhc2UgPSByZXF1aXJlKCcuL2Jhc2UnKTtcblxudmFyIF9iYXNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Jhc2UpO1xuXG52YXIgX3RvZ2dsZUNsYXNzID0gcmVxdWlyZSgnLi4vaGVscGVycy9kb20vdG9nZ2xlLWNsYXNzJyk7XG5cbnZhciBfdG9nZ2xlQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdG9nZ2xlQ2xhc3MpO1xuXG52YXIgX2FkZENsYXNzID0gcmVxdWlyZSgnLi4vaGVscGVycy9kb20vYWRkLWNsYXNzJyk7XG5cbnZhciBfYWRkQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYWRkQ2xhc3MpO1xuXG52YXIgX3JlbW92ZUNsYXNzID0gcmVxdWlyZSgnLi4vaGVscGVycy9kb20vcmVtb3ZlLWNsYXNzJyk7XG5cbnZhciBfcmVtb3ZlQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVtb3ZlQ2xhc3MpO1xuXG52YXIgX2hhc0NsYXNzID0gcmVxdWlyZSgnLi4vaGVscGVycy9kb20vaGFzLWNsYXNzJyk7XG5cbnZhciBfaGFzQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaGFzQ2xhc3MpO1xuXG52YXIgX2dldFBhcmVudCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvdHJhdmVyc2FsL2dldC1wYXJlbnQnKTtcblxudmFyIF9nZXRQYXJlbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UGFyZW50KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfSAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICMgTW9kYWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFNob3cgY29udGVudCBpbiBhIG1vZGFsLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBuZXcgTW9kYWwoZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBtb2R1bGUgY29tcG9uZW50cy9tb2RhbC5qc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG5cblxudmFyIE1vZGFsID0gZnVuY3Rpb24gKF9CYXNlQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhNb2RhbCwgX0Jhc2VDb21wb25lbnQpO1xuXG4gIC8qKlxuICAgKiBNb2RhbCBjb25zdHJ1Y3Rvci5cbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zXG4gICAqL1xuICBmdW5jdGlvbiBNb2RhbChlbCkge1xuICAgIHZhciBfdGhpcztcblxuICAgIHZhciBwYXJhbXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1vZGFsKTtcblxuICAgIHBhcmFtcy5lbFJlcXVpcmVkID0gdHJ1ZTtcblxuICAgIGlmICghKF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX0Jhc2VDb21wb25lbnQuY2FsbCh0aGlzLCBlbCwgcGFyYW1zKSksIF90aGlzKSkge1xuICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzKTtcbiAgICB9XG5cbiAgICBfdGhpcy5fYmluZEV2ZW50TGlzdGVuZXJDYWxsYmFja3MoKTtcbiAgICBfdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9wZW5cbiAgICovXG5cblxuICBNb2RhbC5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uIG9wZW4oKSB7XG5cbiAgICB0aGlzLmlzQWN0aXZlID0gdHJ1ZTtcbiAgICB0aGlzLl9hZGRXaW5kb3dFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3VwZGF0ZUNsYXNzZXMoKTtcbiAgICAoMCwgX2FkZENsYXNzMi5kZWZhdWx0KShkb2N1bWVudC5ib2R5LCAnc3BhcmstbW9kYWwtb3BlbicpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIENsb3NlXG4gICAqL1xuXG5cbiAgTW9kYWwucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gY2xvc2UoKSB7XG5cbiAgICB0aGlzLmlzQWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy5fcmVtb3ZlV2luZG93RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl91cGRhdGVDbGFzc2VzKCk7XG4gICAgKDAsIF9yZW1vdmVDbGFzczIuZGVmYXVsdCkoZG9jdW1lbnQuYm9keSwgJ3NwYXJrLW1vZGFsLW9wZW4nKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGNvbXBvbmVudCB0byB1c2UgYSBuZXcgZWxlbWVudCBvciByZXBhcnNlIGZyb21cbiAgICogdGhlIGV4aXN0aW5nIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWwgT3B0aW9uYWxcbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtc1xuICAgKi9cblxuXG4gIE1vZGFsLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoZWwpIHtcbiAgICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuXG4gICAgdGhpcy5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9jYWNoZUVsZW1lbnRzKGVsIHx8IHRoaXMuZWwsIHBhcmFtcyk7XG4gICAgdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl91cGRhdGVDbGFzc2VzKCk7XG4gICAgdGhpcy5fcmVtb3ZlV2luZG93RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIGlmICh0aGlzLmlzQWN0aXZlKSB7XG4gICAgICB0aGlzLl9hZGRXaW5kb3dFdmVudExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTdG9yZSBhIHJlZmVyZW5jZSB0byB0aGUgZWxlbWVudC4gRWl0aGVyIGEgbW9kYWwgaXRzZWxmXG4gICAqIG9yIGEgYnV0dG9uIHJlZmVyZW5jaW5nIGEgbW9kYWwgbWF5IGJlIHBhc3NlZC5cbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHBhcmFtcyBAb3B0aW9uYWxcbiAgICovXG5cblxuICBNb2RhbC5wcm90b3R5cGUuX2NhY2hlRWxlbWVudHMgPSBmdW5jdGlvbiBfY2FjaGVFbGVtZW50cyhlbCwgcGFyYW1zKSB7XG5cbiAgICB2YXIgbW9kYWxQYXNzZWQgPSAoMCwgX2hhc0NsYXNzMi5kZWZhdWx0KShlbCwgJ3NwYXJrLW1vZGFsJyk7XG4gICAgdmFyIG1vZGFsRWwgPSBwYXJhbXMubW9kYWxFbDtcblxuICAgIGlmIChtb2RhbFBhc3NlZCkge1xuICAgICAgdGhpcy5tb2RhbEVsID0gZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWwgPSBlbDtcbiAgICAgIHRoaXMubW9kYWxFbCA9IG1vZGFsRWwgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbW9kYWwnKSk7XG4gICAgfVxuXG4gICAgdGhpcy5zY3JvbGxFbCA9IHRoaXMubW9kYWxFbC5xdWVyeVNlbGVjdG9yKCcuc3BhcmstbW9kYWxfX3Njcm9sbCcpIHx8IHRoaXMubW9kYWxFbDtcblxuICAgIHRoaXMuaXNBY3RpdmUgPSAoMCwgX2hhc0NsYXNzMi5kZWZhdWx0KSh0aGlzLmVsIHx8IHRoaXMubW9kYWxFbCwgJ2FjdGl2ZScpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGUgY2xhc3NlcyBmb3IgdGhlIG9wZW4gb3IgY2xvc2Ugc3RhdGUuXG4gICAqL1xuXG5cbiAgTW9kYWwucHJvdG90eXBlLl91cGRhdGVDbGFzc2VzID0gZnVuY3Rpb24gX3VwZGF0ZUNsYXNzZXMoKSB7XG4gICAgKDAsIF90b2dnbGVDbGFzczIuZGVmYXVsdCkodGhpcy5tb2RhbEVsLCAnYWN0aXZlJywgdGhpcy5pc0FjdGl2ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBib3VuZCB2ZXJzaW9ucyBvZiBldmVudCBsaXN0ZW5lciBjYWxsYmFja3MgYW5kIHN0b3JlIHRoZW0uXG4gICAqIE90aGVyd2lzZSB3ZSBjYW4ndCB1bmJpbmQgZnJvbSB0aGVzZSBldmVudHMgbGF0ZXIgYmVjYXVzZSB0aGVcbiAgICogZnVuY3Rpb24gc2lnbmF0dXJlcyB3b24ndCBtYXRjaC5cbiAgICovXG5cblxuICBNb2RhbC5wcm90b3R5cGUuX2JpbmRFdmVudExpc3RlbmVyQ2FsbGJhY2tzID0gZnVuY3Rpb24gX2JpbmRFdmVudExpc3RlbmVyQ2FsbGJhY2tzKCkge1xuICAgIHRoaXMuX29uQ2xpY2tCb3VuZCA9IHRoaXMuX29uQ2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vbktleXVwQm91bmQgPSB0aGlzLl9vbktleXVwLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25Nb2RhbENsaWNrQm91bmQgPSB0aGlzLl9vbk1vZGFsQ2xpY2suYmluZCh0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogQWRkIGV2ZW50IGxpc3RlbmVycyBmb3IgRE9NIGV2ZW50cy5cbiAgICovXG5cblxuICBNb2RhbC5wcm90b3R5cGUuX2FkZEV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gX2FkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGlmICh0aGlzLmVsKSB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb25DbGlja0JvdW5kKTtcbiAgICBpZiAodGhpcy5tb2RhbEVsKSB0aGlzLm1vZGFsRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9vbk1vZGFsQ2xpY2tCb3VuZCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBldmVudCBsaXN0ZW5lcnMgZm9yIERPTSBldmVudHMuLlxuICAgKi9cblxuXG4gIE1vZGFsLnByb3RvdHlwZS5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgaWYgKHRoaXMuZWwpIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9vbkNsaWNrQm91bmQpO1xuICAgIGlmICh0aGlzLm1vZGFsRWwpIHRoaXMubW9kYWxFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX29uTW9kYWxDbGlja0JvdW5kKTtcbiAgfTtcblxuICAvKipcbiAgICogQWRkIGV2ZW50IGxpc3RlbmVycyBmb3IgRE9NIGV2ZW50cy5cbiAgICovXG5cblxuICBNb2RhbC5wcm90b3R5cGUuX2FkZFdpbmRvd0V2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gX2FkZFdpbmRvd0V2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3JlbW92ZVdpbmRvd0V2ZW50TGlzdGVuZXJzKCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5fb25LZXl1cEJvdW5kKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIGV2ZW50IGxpc3RlbmVycyBmb3IgRE9NIGV2ZW50cy4uXG4gICAqL1xuXG5cbiAgTW9kYWwucHJvdG90eXBlLl9yZW1vdmVXaW5kb3dFdmVudExpc3RlbmVycyA9IGZ1bmN0aW9uIF9yZW1vdmVXaW5kb3dFdmVudExpc3RlbmVycygpIHtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9vbktleXVwQm91bmQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaGVuIHRoZSBidXR0b24gaXMgY2xpY2tlZC5cbiAgICogQHBhcmFtIHtPYmplY3R9IGVcbiAgICovXG5cblxuICBNb2RhbC5wcm90b3R5cGUuX29uQ2xpY2sgPSBmdW5jdGlvbiBfb25DbGljaygpIHtcbiAgICB0aGlzLm9wZW4oKTtcbiAgfTtcblxuICAvKipcbiAgICogV2hlbiB3ZSBhcmUgY2xpY2tlZCwgdG9nZ2xlIHRoZSBvcGVuZWQgc3RhdGUuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlXG4gICAqL1xuXG5cbiAgTW9kYWwucHJvdG90eXBlLl9vbk1vZGFsQ2xpY2sgPSBmdW5jdGlvbiBfb25Nb2RhbENsaWNrKGUpIHtcblxuICAgIC8vIFRoZSBjbG9zZSBidXR0b24gaXMgY2xpY2tlZCBvciB0aGUgYWN0dWFsIG1vZGFsIChncmF5IGFyZWEpXG4gICAgaWYgKGUudGFyZ2V0ID09PSB0aGlzLnNjcm9sbEVsIHx8IGUudGFyZ2V0ID09PSB0aGlzLm1vZGFsRWwgfHwgKDAsIF9nZXRQYXJlbnQyLmRlZmF1bHQpKGUudGFyZ2V0LCAnLnNwYXJrLW1vZGFsX19jbG9zZSwgLnNwYXJrLW1vZGFsX19kaXNtaXNzJywgdGhpcy5zY3JvbGxFbCkpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFdoZW4gYSBrZXkgaXMgcHJlc3NlZCBvbiB0aGUgd2luZG93IGFuZCBpdCdzIGFuIEVTQywgY2xvc2UgdGhlIG1vZGFsLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZVxuICAgKi9cblxuXG4gIE1vZGFsLnByb3RvdHlwZS5fb25LZXl1cCA9IGZ1bmN0aW9uIF9vbktleXVwKGUpIHtcbiAgICBpZiAoZS5rZXlDb2RlID09PSAyNykge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gTW9kYWw7XG59KF9iYXNlMi5kZWZhdWx0KTtcblxuLyoqXG4gKiBEZWZhdWx0IHZhbHVlcyBmb3IgaW50ZXJuYWwgcHJvcGVydGllcyB3ZSB3aWxsIGJlIHNldHRpbmcuXG4gKiBUaGVzZSBhcmUgc2V0IG9uIGVhY2ggY29uc3RydWN0aW9uIHNvIHdlIGRvbid0IGxlYWsgcHJvcGVydGllc1xuICogaW50byB0aGUgcHJvdG90eXBlIGNoYWluLlxuICogQHR5cGUge09iamVjdH1cbiAqL1xuXG5cbk1vZGFsLnByb3RvdHlwZS5kZWZhdWx0cyA9IHtcbiAgZWw6IG51bGwsXG4gIG1vZGFsRWw6IG51bGwsXG4gIHNjcm9sbEVsOiBudWxsLFxuICBpc0FjdGl2ZTogZmFsc2UsXG4gIF9vbkNsaWNrQm91bmQ6IG51bGwsXG4gIF9vbktleXVwQm91bmQ6IG51bGwsXG4gIF9vbk1vZGFsQ2xpY2tCb3VuZDogbnVsbFxufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gTW9kYWw7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vZGFsLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX291dGVySGVpZ2h0ID0gcmVxdWlyZSgnLi4vZG9tL291dGVyLWhlaWdodCcpO1xuXG52YXIgX291dGVySGVpZ2h0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX291dGVySGVpZ2h0KTtcblxudmFyIF9hZGRDbGFzcyA9IHJlcXVpcmUoJy4uL2RvbS9hZGQtY2xhc3MnKTtcblxudmFyIF9hZGRDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hZGRDbGFzcyk7XG5cbnZhciBfcmVtb3ZlQ2xhc3MgPSByZXF1aXJlKCcuLi9kb20vcmVtb3ZlLWNsYXNzJyk7XG5cbnZhciBfcmVtb3ZlQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVtb3ZlQ2xhc3MpO1xuXG52YXIgX2hhc0NsYXNzID0gcmVxdWlyZSgnLi4vZG9tL2hhcy1jbGFzcycpO1xuXG52YXIgX2hhc0NsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hhc0NsYXNzKTtcblxudmFyIF90b2dnbGVDbGFzcyA9IHJlcXVpcmUoJy4uL2RvbS90b2dnbGUtY2xhc3MnKTtcblxudmFyIF90b2dnbGVDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90b2dnbGVDbGFzcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBub29wID0gZnVuY3Rpb24gbm9vcCgpIHt9OyAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAjIEFuaW1hdGUgSGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQW5pbWF0ZSB0aGUgaGVpZ2h0IG9mIGFuIGVsZW1lbnQgc2luY2Ugd2UgY2FuJ3QgZG8gdGhpcyB3LyBwdXJlIENTUy4gU2lnaC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogYW5pbWF0ZUhlaWdodCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogICBlbDogLi4uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgdG9nZ2xlRWw6IC4uLixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAgIC8vIE9wdGlvbmFsIHBhcmFtc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgYWN0aW9uOiAnY29sbGFwc2UnfCdleHBhbmQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgaGVpZ2h0QW5pbWF0aW9uQ2xhc3M6ICdzcGFyay1hbmltYXRlLWhlaWdodCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogICBvcGFjaXR5QW5pbWF0aW9uQ2xhc3M6ICdzcGFyay1hbmltYXRlLW9wYWNpdHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgdG9nZ2xlUHJvcGVydHk6ICdkaXNwbGF5J3wnb3ZlcmZsb3cnfCd2aXNpYmlsaXR5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAgIHRvZ2dsZVZhbHVlOiAnYmxvY2snfCdub25lJ3wndmlzaWJsZSd8J2hpZGRlbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogICBhbmltYXRpb25EdXJhdGlvbjogMjUwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAbW9kdWxlIGhlbHBlcnMvYW5pbWF0aW9uL2hlaWdodC5qc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuXG52YXIgcnVubmluZ0FuaW1hdGlvbnMgPSB7XG4gIGVsczogW10sXG4gIGNvbXBsZXRlQ2FsbGJhY2tzOiBbXVxufTtcblxuLyoqXG4gKiBHZXQgdGhlIGludmVyc2UgdG9nZ2xlIHZhbHVlXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHByb3BlcnR5XG4gKiBAcGFyYW0gIHtTdHJpbmd9IG9yaWdpbmFsVmFsdWVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZ2V0SW52ZXJzZVRvZ2dsZVZhbHVlKGVsLCBwcm9wZXJ0eSwgb3JpZ2luYWxWYWx1ZSkge1xuXG4gIC8vIEdldCB0aGUgdmFsdWUgdG8gdG9nZ2xlIHRvIGZvciB0aGUgZ2l2ZW4gcHJvcGVydHlcbiAgc3dpdGNoIChwcm9wZXJ0eSkge1xuICAgIGNhc2UgJ292ZXJmbG93JzpcbiAgICBjYXNlICd2aXNpYmlsaXR5JzpcbiAgICAgIHJldHVybiBvcmlnaW5hbFZhbHVlID09PSAndmlzaWJsZScgPyAnaGlkZGVuJyA6ICd2aXNpYmxlJztcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG9yaWdpbmFsVmFsdWUgPT09ICdibG9jaycgfHwgb3JpZ2luYWxWYWx1ZSA9PT0gJ2lubGluZS1ibG9jaycgPyAnbm9uZScgOiAnYmxvY2snO1xuICB9XG59XG5cbi8qKlxuICogV2hlbiBhbiBhbmltYXRpb24gaXMgY29tcGxldGUsIGNsZWFuIHVwIGFuZCBydW4gdGhlIGNhbGxiYWNrLlxuICogQHBhcmFtICB7T2JqZWN0fSBwYXJhbXNcbiAqL1xuZnVuY3Rpb24gb25Db21wbGV0ZShwYXJhbXMpIHtcblxuICAvLyBSZXNldCB0b2dnbGUgZWwgdmlzaWJpbGl0eVxuICBpZiAocGFyYW1zLnRvZ2dsZUNsYXNzTmFtZSkge1xuICAgICgwLCBfdG9nZ2xlQ2xhc3MyLmRlZmF1bHQpKHBhcmFtcy5lbCwgcGFyYW1zLnRvZ2dsZUNsYXNzTmFtZSwgIXBhcmFtcy5jb2xsYXBzZSk7XG4gIH0gZWxzZSB7XG4gICAgcGFyYW1zLnRvZ2dsZUVsLnN0eWxlW3BhcmFtcy50b2dnbGVQcm9wZXJ0eV0gPSAnJztcbiAgfVxuXG4gIC8vIFJlbW92ZSB0aGUgaGVpZ2h0IHByb3BlcnR5XG4gIHBhcmFtcy5lbC5zdHlsZS5oZWlnaHQgPSAnJztcbiAgcGFyYW1zLnRvZ2dsZUVsLnN0eWxlLmhlaWdodCA9ICcnO1xuICBwYXJhbXMudG9nZ2xlRWwuc3R5bGUubWFyZ2luQm90dG9tID0gJyc7XG4gIHBhcmFtcy50b2dnbGVFbC5zdHlsZS5tYXJnaW5Ub3AgPSAnJztcblxuICAvLyBSZW1vdmUgdGhlIHNwYXJrLWFuaW1hdGUtaGVpZ2h0IGNsYXNzIHNvIHRoZSB0cmFuc2l0aW9ucyBubyBsb25nZXIgYXBwbHlcbiAgKDAsIF9yZW1vdmVDbGFzczIuZGVmYXVsdCkocGFyYW1zLmVsLCBwYXJhbXMuaGVpZ2h0QW5pbWF0aW9uQ2xhc3MpO1xuICAoMCwgX3JlbW92ZUNsYXNzMi5kZWZhdWx0KShwYXJhbXMudG9nZ2xlRWwsIHBhcmFtcy5oZWlnaHRBbmltYXRpb25DbGFzcyk7XG5cbiAgLy8gUnVuIHRoZSBjYWxsYmFja1xuICBwYXJhbXMub25Db21wbGV0ZSgpO1xuXG4gIC8vIFJlbW92ZSB0aGUgZWxlbWVudCBhbmQgY2FsbGJhY2sgZnJvbSB0aGVpciByZXNwZWN0aXZlIGFycmF5c1xuICB2YXIgcnVubmluZ0luZGV4ID0gcnVubmluZ0FuaW1hdGlvbnMuZWxzLmluZGV4T2YocGFyYW1zLmVsKTtcbiAgcnVubmluZ0FuaW1hdGlvbnMuZWxzLnNwbGljZShydW5uaW5nSW5kZXgsIDEpO1xuICBydW5uaW5nQW5pbWF0aW9ucy5jb21wbGV0ZUNhbGxiYWNrcy5zcGxpY2UocnVubmluZ0luZGV4LCAxKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zXG4gKi9cbmZ1bmN0aW9uIGFuaW1hdGVIZWlnaHQocGFyYW1zKSB7XG5cbiAgcGFyYW1zID0gcGFyYW1zIHx8IHt9O1xuXG4gIHZhciBlbCA9IHBhcmFtcy5lbDtcblxuICBpZiAoIWVsKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGNvbGxhcHNlID0gcGFyYW1zLmFjdGlvbiAmJiBwYXJhbXMuYWN0aW9uID09PSAnY29sbGFwc2UnO1xuICB2YXIgaGVpZ2h0QW5pbWF0aW9uQ2xhc3MgPSBwYXJhbXMuaGVpZ2h0QW5pbWF0aW9uQ2xhc3MgfHwgJ3NwYXJrLWFuaW1hdGUtaGVpZ2h0JztcblxuICAvLyBBbGxvdyBmb3IgZWxlbWVudHMgdG8gYmUgcGFzc2VkIG9yIHNlbGVjdG9yIHN0cmluZ3NcbiAgdmFyIHRvZ2dsZUVsID0gdHlwZW9mIHBhcmFtcy50b2dnbGVFbCA9PT0gJ3N0cmluZycgPyBlbC5xdWVyeVNlbGVjdG9yKHBhcmFtcy50b2dnbGVFbCkgOiBwYXJhbXMudG9nZ2xlRWw7XG5cbiAgLy8gTm8gZWxlbWVudCB0byBiZSBzd2l0Y2hpbmcgd2l0aCB0b2dnbGluZyBzbyB3ZSBjYW4ndCBkZXRlcm1pbmUgdGhlIGRlc2lyZWQgaGVpZ2h0IHRvIGFuaW1hdGUgdG8uXG4gIGlmICghdG9nZ2xlRWwgfHwgKDAsIF9oYXNDbGFzczIuZGVmYXVsdCkoZWwsICdzcGFyay1uby1hbmltYXRlJykpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgdG9nZ2xlQ2xhc3NOYW1lID0gcGFyYW1zLnRvZ2dsZUNsYXNzO1xuXG4gIC8vIFRoZSBzdHlsZSBwcm9wZXJ0eSB0byB1c2Ugd2hlbiB0b2dnbGluZyB2aXNpYmlsaXR5XG4gIHZhciB0b2dnbGVQcm9wZXJ0eSA9IHBhcmFtcy50b2dnbGVQcm9wZXJ0eSB8fCAnZGlzcGxheSc7XG4gIHZhciB0b2dnbGVTdHlsZXMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0b2dnbGVFbCk7XG4gIHZhciBvcmlnaW5hbFRvZ2dsZVZhbHVlID0gdG9nZ2xlU3R5bGVzW3RvZ2dsZVByb3BlcnR5XTtcbiAgdmFyIHRvZ2dsZVZhbHVlID0gcGFyYW1zLnRvZ2dsZVZhbHVlIHx8IGdldEludmVyc2VUb2dnbGVWYWx1ZSh0b2dnbGVQcm9wZXJ0eSwgb3JpZ2luYWxUb2dnbGVWYWx1ZSk7XG5cbiAgLy8gSWYgd2UgYXJlIGFscmVhZHkgYW5pbWF0aW5nLCBzdG9wIG5vdy5cbiAgdmFyIHJ1bm5pbmdJbmRleCA9IHJ1bm5pbmdBbmltYXRpb25zLmVscy5pbmRleE9mKGVsKTtcbiAgaWYgKHJ1bm5pbmdJbmRleCAhPT0gLTEpIHtcblxuICAgIHZhciBjb21wbGV0ZUNhbGxiYWNrID0gcnVubmluZ0FuaW1hdGlvbnMuY29tcGxldGVDYWxsYmFja3NbcnVubmluZ0luZGV4XTtcbiAgICBpZiAoY29tcGxldGVDYWxsYmFjaykge1xuICAgICAgY2xlYXJUaW1lb3V0KGNvbXBsZXRlQ2FsbGJhY2spO1xuICAgIH1cblxuICAgIG9uQ29tcGxldGUoe1xuICAgICAgZWw6IGVsLFxuICAgICAgdG9nZ2xlRWw6IHRvZ2dsZUVsLFxuICAgICAgb25Db21wbGV0ZTogcGFyYW1zLm9uQ29tcGxldGUgfHwgbm9vcCxcbiAgICAgIGNvbGxhcHNlOiBjb2xsYXBzZSxcbiAgICAgIHRvZ2dsZVByb3BlcnR5OiB0b2dnbGVQcm9wZXJ0eSxcbiAgICAgIHRvZ2dsZUNsYXNzTmFtZTogdG9nZ2xlQ2xhc3NOYW1lLFxuICAgICAgdG9nZ2xlVmFsdWU6IHRvZ2dsZVZhbHVlLFxuICAgICAgaGVpZ2h0QW5pbWF0aW9uQ2xhc3M6IGhlaWdodEFuaW1hdGlvbkNsYXNzXG4gICAgfSk7XG4gIH1cblxuICAvLyBTdG9yZSB0aGUgY3VycmVudCBoZWlnaHRcbiAgdmFyIG9yaWdpbmFsSGVpZ2h0ID0gKDAsIF9vdXRlckhlaWdodDIuZGVmYXVsdCkoZWwpO1xuXG4gIC8vIFRvZ2dsZSB0aGUgdmlzaWJsZSBwcm9wZXJ0eVxuICBpZiAodG9nZ2xlQ2xhc3NOYW1lKSB7XG4gICAgKDAsIF90b2dnbGVDbGFzczIuZGVmYXVsdCkoZWwsIHRvZ2dsZUNsYXNzTmFtZSwgIWNvbGxhcHNlKTtcbiAgfSBlbHNlIHtcbiAgICB0b2dnbGVFbC5zdHlsZVt0b2dnbGVQcm9wZXJ0eV0gPSB0b2dnbGVWYWx1ZTtcbiAgfVxuXG4gIC8vIFdoZW4gbWVhc3VyaW5nIHRoZSBzaXplIGZvciBhIGNvbGxhcHNlLCB3ZSBoYXZlIHRvIHdhaXQgYSB0aWMgZm9yIGl0IHRvIGJlXG4gIC8vIGFjY3VyYXRlLiBOb3Qgc3VyZSB3aHkuIFVnaC5cbiAgaWYgKGNvbGxhcHNlKSB7XG4gICAgc2V0VGltZW91dChydW5BbmltYXRpb24sIDApO1xuICB9IGVsc2Uge1xuICAgIHJ1bkFuaW1hdGlvbigpO1xuICB9XG5cbiAgZnVuY3Rpb24gcnVuQW5pbWF0aW9uKCkge1xuXG4gICAgLy8gTm93IHRoYXQgdGhlIHRvZ2dsZSBlbCBpcyB0YWtpbmcgdXAgc3BhY2UsIGdldCB0aGUgbmV3IGhlaWdodCB3aGljaCB3ZSB3aWxsIGJlIGFuaW1hdGluZyB0b1xuICAgIHZhciB0YXJnZXRFbEhlaWdodCA9ICgwLCBfb3V0ZXJIZWlnaHQyLmRlZmF1bHQpKGVsKTtcblxuICAgIC8vIFdlIG5lZWQgdG8gc3RvcmUgdGhlIG9yaWdpbmFsIGFuZCB0YXJnZXQgdG9nZ2xlIGVsZW1lbnQgaGVpZ2h0cy4gVGhleSBkaWZmZXIgZGVwZW5kaW5nIG9uXG4gICAgLy8gd2hldGhlciB3ZSBhcmUgZ29pbmcgdG8gZXhwYW5kIG9yIGNvbGxhcHNlLlxuICAgIHZhciB0YXJnZXRUb2dnbGVFbEhlaWdodCA9IHZvaWQgMDtcbiAgICB2YXIgb3JpZ2luYWxUb2dnbGVFbEhlaWdodCA9IHZvaWQgMDtcblxuICAgIC8vIElmIHdlIGFyZSBjb2xsYXBzaW5nLCByZXNldCB0aGUgdG9nZ2xlIHN0eWxlIGFuZCBzZXQgaXQgd2hlbiB3ZSdyZSBkb25lLiBTZXQgdGhlIGhlaWdodCBzb1xuICAgIC8vIHRoYXQgd2UgY2FuIGFuaW1hdGUgZG93biB0byAwIG9yIHVwIHRvIHRoZSB0YXJnZXQgaGVpZ2h0LlxuICAgIGlmIChjb2xsYXBzZSkge1xuXG4gICAgICBpZiAodG9nZ2xlQ2xhc3NOYW1lKSB7XG4gICAgICAgICgwLCBfcmVtb3ZlQ2xhc3MyLmRlZmF1bHQpKGVsLCB0b2dnbGVDbGFzc05hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9nZ2xlRWwuc3R5bGVbdG9nZ2xlUHJvcGVydHldID0gb3JpZ2luYWxUb2dnbGVWYWx1ZTtcbiAgICAgIH1cblxuICAgICAgb3JpZ2luYWxUb2dnbGVFbEhlaWdodCA9ICgwLCBfb3V0ZXJIZWlnaHQyLmRlZmF1bHQpKHRvZ2dsZUVsLCB0b2dnbGVTdHlsZXMpO1xuICAgICAgdGFyZ2V0VG9nZ2xlRWxIZWlnaHQgPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXRUb2dnbGVFbEhlaWdodCA9ICgwLCBfb3V0ZXJIZWlnaHQyLmRlZmF1bHQpKHRvZ2dsZUVsLCB0b2dnbGVTdHlsZXMpO1xuICAgICAgb3JpZ2luYWxUb2dnbGVFbEhlaWdodCA9IDA7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBvcmlnaW5hbCBoZWlnaHRcbiAgICBlbC5zdHlsZS5oZWlnaHQgPSBvcmlnaW5hbEhlaWdodCArICdweCc7XG4gICAgdG9nZ2xlRWwuc3R5bGUuaGVpZ2h0ID0gb3JpZ2luYWxUb2dnbGVFbEhlaWdodCArICdweCc7XG4gICAgdG9nZ2xlRWwuc3R5bGUubWFyZ2luQm90dG9tID0gJzBweCc7XG4gICAgdG9nZ2xlRWwuc3R5bGUubWFyZ2luVG9wID0gJzBweCc7XG5cbiAgICAvLyBBZGQgdGhlIHNwYXJrLWFuaW1hdGUtaGVpZ2h0IGNsYXNzIHdoaWNoIHdpbGwgc2V0dXAgdGhlIHRyYW5zaXRpb24tcHJvcGVydHkgYW5kIGR1cmF0aW9uXG4gICAgKDAsIF9hZGRDbGFzczIuZGVmYXVsdCkoZWwsIGhlaWdodEFuaW1hdGlvbkNsYXNzKTtcbiAgICAoMCwgX2FkZENsYXNzMi5kZWZhdWx0KSh0b2dnbGVFbCwgaGVpZ2h0QW5pbWF0aW9uQ2xhc3MpO1xuXG4gICAgcnVubmluZ0FuaW1hdGlvbnMuZWxzLnB1c2goZWwpO1xuXG4gICAgLy8gV2UgbmVlZCB0byB3YWl0IGEgdGljayB0byB0b2dnbGUgdGhlIGhlaWdodCBvciBlbHNlIHRoZSBhbmltYXRpb24gY2xhc3Mgd29uJ3QgZnVuY3Rpb25cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblxuICAgICAgLy8gU2V0IHRoZSBoZWlnaHQgdG8gdGhlIHRhcmdldCBoZWlnaHRcbiAgICAgIGVsLnN0eWxlLmhlaWdodCA9IHRhcmdldEVsSGVpZ2h0ICsgJ3B4JztcbiAgICAgIHRvZ2dsZUVsLnN0eWxlLmhlaWdodCA9IHRhcmdldFRvZ2dsZUVsSGVpZ2h0ICsgJ3B4JztcblxuICAgICAgLy8gUmVtb3ZlIGlubGluZSBzdHlsZXMgYWZ0ZXIgdGhlIGFuaW1hdGlvbiBpcyBjb21wbGV0ZVxuICAgICAgcnVubmluZ0FuaW1hdGlvbnMuY29tcGxldGVDYWxsYmFja3MucHVzaChzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgb25Db21wbGV0ZSh7XG4gICAgICAgICAgZWw6IGVsLFxuICAgICAgICAgIHRvZ2dsZUVsOiB0b2dnbGVFbCxcbiAgICAgICAgICBvbkNvbXBsZXRlOiBwYXJhbXMub25Db21wbGV0ZSB8fCBub29wLFxuICAgICAgICAgIGNvbGxhcHNlOiBjb2xsYXBzZSxcbiAgICAgICAgICB0b2dnbGVQcm9wZXJ0eTogdG9nZ2xlUHJvcGVydHksXG4gICAgICAgICAgdG9nZ2xlQ2xhc3NOYW1lOiB0b2dnbGVDbGFzc05hbWUsXG4gICAgICAgICAgdG9nZ2xlVmFsdWU6IHRvZ2dsZVZhbHVlLFxuICAgICAgICAgIGhlaWdodEFuaW1hdGlvbkNsYXNzOiBoZWlnaHRBbmltYXRpb25DbGFzc1xuICAgICAgICB9KTtcbiAgICAgIH0sIHBhcmFtcy5hbmltYXRpb25EdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gcGFyYW1zLmFuaW1hdGlvbkR1cmF0aW9uIDogMjAxKSk7XG4gICAgfSwgMCk7XG4gIH1cbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gYW5pbWF0ZUhlaWdodDtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGVpZ2h0LmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3RyaW0gPSByZXF1aXJlKCcuLi91dGlsL3RyaW0nKTtcblxudmFyIF90cmltMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RyaW0pO1xuXG52YXIgX2hhc0NsYXNzID0gcmVxdWlyZSgnLi9oYXMtY2xhc3MnKTtcblxudmFyIF9oYXNDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oYXNDbGFzcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKlxuICogIyBBZGQgQ2xhc3NcbiAqIEFkZCBhIGNsYXNzIG9uIGFuIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fEFycmF5fSBlbCBBbiBlbGVtZW50IG9yIGFycmF5IG9mIGVsZW1lbnRzIHRvIHVwZGF0ZS5cbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJuIHtFbGVtZW50fVxuICpcbiAqIEBtb2R1bGUgaGVscGVycy9kb20vYWRkLWNsYXNzLmpzXG4gKi9cblxudmFyIHdzID0gL1xccysvO1xudmFyIGNsZWFudXAgPSAvXFxzezIsfS9nO1xuXG5mdW5jdGlvbiBhZGRDbGFzcyhlbCwgbmFtZSkge1xuXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyICYmIHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJykge1xuICAgIG5hbWUgPSAoMCwgX3RyaW0yLmRlZmF1bHQpKG5hbWUpLnNwbGl0KHdzKTtcbiAgfSBlbHNlIHtcbiAgICBuYW1lID0gbmFtZSBpbnN0YW5jZW9mIEFycmF5ID8gbmFtZSA6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gIH1cblxuICAvLyBvcHRpbWl6ZSBmb3IgYmVzdCwgbW9zdCBjb21tb24gY2FzZVxuICBpZiAobmFtZS5sZW5ndGggPT09IDEgJiYgZWwuY2xhc3NMaXN0KSB7XG4gICAgaWYgKG5hbWVbMF0pIHtcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQobmFtZVswXSk7XG4gICAgfVxuICAgIHJldHVybiBlbDtcbiAgfVxuXG4gIHZhciB0b0FkZCA9IFtdO1xuICB2YXIgaSA9IDA7XG4gIHZhciBsID0gbmFtZS5sZW5ndGg7XG4gIHZhciBpdGVtID0gdm9pZCAwO1xuICB2YXIgY2xzTmFtZSA9IHR5cGVvZiBlbC5jbGFzc05hbWUgPT09ICdzdHJpbmcnID8gZWwuY2xhc3NOYW1lIDogZWwuZ2V0QXR0cmlidXRlID8gZWwuZ2V0QXR0cmlidXRlKCdjbGFzcycpIDogJyc7XG5cbiAgLy8gc2VlIGlmIHdlIGhhdmUgYW55dGhpbmcgdG8gYWRkXG4gIGZvciAoOyBpIDwgbDsgaSsrKSB7XG4gICAgaXRlbSA9IG5hbWVbaV07XG4gICAgaWYgKGl0ZW0gJiYgISgwLCBfaGFzQ2xhc3MyLmRlZmF1bHQpKGNsc05hbWUsIGl0ZW0pKSB7XG4gICAgICB0b0FkZC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0b0FkZC5sZW5ndGgpIHtcbiAgICBpZiAodHlwZW9mIGVsLmNsYXNzTmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVsLmNsYXNzTmFtZSA9ICgwLCBfdHJpbTIuZGVmYXVsdCkoKGNsc05hbWUgKyAnICcgKyB0b0FkZC5qb2luKCcgJykpLnJlcGxhY2UoY2xlYW51cCwgJyAnKSk7XG4gICAgfSBlbHNlIGlmIChlbC5zZXRBdHRyaWJ1dGUpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAoMCwgX3RyaW0yLmRlZmF1bHQpKChjbHNOYW1lICsgJyAnICsgdG9BZGQuam9pbignICcpKS5yZXBsYWNlKGNsZWFudXAsICcgJykpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZWw7XG59XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGFkZENsYXNzO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZGQtY2xhc3MuanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbi8qKlxuICogIyBCcmVha3BvaW50IEhlbHBlcnNcbiAqIEZpbmQgdGhlIGFjdGl2ZSBicmVha3BvaW50LlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB3aWR0aFxuICpcbiAqIEBtb2R1bGUgaGVscGVycy9kb20vYnJlYWtwb2ludC5qc1xuICovXG5cbi8qKlxuICogQnJlYWtwb2ludHMgYmVpbmcgdXNlZCBpbiB0aGUgQ1NTLlxuICogQHR5cGUge09iamVjdH1cbiAqL1xudmFyIGRlZmF1bHRCcmVha3BvaW50cyA9IHtcbiAgeHM6IHtcbiAgICBtaW46IDAsXG4gICAgbWF4OiA1NDNcbiAgfSxcbiAgc206IHtcbiAgICBtaW46IDU0NCxcbiAgICBtYXg6IDc5NVxuICB9LFxuICBtZDoge1xuICAgIG1pbjogNzk2LFxuICAgIG1heDogMTA0N1xuICB9LFxuICBsZzoge1xuICAgIG1pbjogMTA0OCxcbiAgICBtYXg6IDE3OTlcbiAgfSxcbiAgeGw6IHtcbiAgICBtaW46IDE4MDAsXG4gICAgbWF4OiBJbmZpbml0eVxuICB9XG59O1xuXG5mdW5jdGlvbiBnZXQod2lkdGgsIGJyZWFrcG9pbnRzKSB7XG5cbiAgYnJlYWtwb2ludHMgPSBicmVha3BvaW50cyB8fCBkZWZhdWx0QnJlYWtwb2ludHM7XG5cbiAgdmFyIGkgPSB2b2lkIDA7XG5cbiAgZm9yIChpIGluIGJyZWFrcG9pbnRzKSB7XG4gICAgaWYgKHdpZHRoID49IGJyZWFrcG9pbnRzW2ldLm1pbiAmJiB3aWR0aCA8PSBicmVha3BvaW50c1tpXS5tYXgpIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnRzLmdldCA9IGdldDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJyZWFrcG9pbnQuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuLyoqXG4gKiAjIEhhcyBDbGFzc1xuICogU2VlIGlmIGFuIGVsZW1lbnQgaGFzIGEgY2xhc3MuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fFN0cmluZ30gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICpcbiAqIEBtb2R1bGUgaGVscGVycy9kb20vaGFzLWNsYXNzLmpzXG4gKi9cbmZ1bmN0aW9uIGhhc0NsYXNzKGVsLCBuYW1lKSB7XG4gIHZhciBjTmFtZSA9ICgodHlwZW9mIGVsID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihlbCkpID09PSAnb2JqZWN0JyA/IGVsLmNsYXNzTmFtZSB8fCBlbC5nZXRBdHRyaWJ1dGUgJiYgZWwuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnIDogZWwgfHwgJycpLnJlcGxhY2UoL1tcXHRcXHJcXG5cXGZdL2csICcgJyk7XG4gIHJldHVybiAoJyAnICsgY05hbWUgKyAnICcpLmluZGV4T2YoJyAnICsgbmFtZSArICcgJykgIT09IC0xO1xufVxuXG5leHBvcnRzLmRlZmF1bHQgPSBoYXNDbGFzcztcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFzLWNsYXNzLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2VhY2ggPSByZXF1aXJlKCcuLi91dGlsL2VhY2gnKTtcblxudmFyIF9lYWNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2VhY2gpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgcHJvcHMgPSBbJ21hcmdpblRvcCcsICdtYXJnaW5Cb3R0b20nLCAnYm9yZGVyVG9wJywgJ2JvcmRlckJvdHRvbSddOyAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICMgT3V0ZXIgSGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBHZXQgdGhlIG91dGVyIGhlaWdodCBvZiBhbiBlbGVtZW50IChpbmNsdWRpbmcgbWFyZ2luIGFuZCBib3JkZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHN0eWxlcyBPcHRpb25hbCBBbHJlYWR5IGhhdmUgY29tcHV0ZWQgc3R5bGVzPyBQYXNzIHRoZW0gaW4uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIG91dGVySGVpZ2h0KGVsLCBjb21wdXRlZFN0eWxlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQG1vZHVsZSBoZWxwZXJzL291dGVyLWhlaWdodC5qc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG5cblxuZnVuY3Rpb24gb3V0ZXJIZWlnaHQoZWwsIHN0eWxlcykge1xuXG4gIHN0eWxlcyA9IHN0eWxlcyB8fCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbCk7XG5cbiAgdmFyIGhlaWdodCA9IGVsLmNsaWVudEhlaWdodDtcblxuICAoMCwgX2VhY2gyLmRlZmF1bHQpKHByb3BzLCBmdW5jdGlvbiAocHJvcCkge1xuICAgIGhlaWdodCArPSBwYXJzZUludChzdHlsZXNbcHJvcF0gfHwgMCwgMTApO1xuICB9KTtcblxuICByZXR1cm4gaGVpZ2h0O1xufVxuXG5leHBvcnRzLmRlZmF1bHQgPSBvdXRlckhlaWdodDtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3V0ZXItaGVpZ2h0LmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3RyaW0gPSByZXF1aXJlKCcuLi91dGlsL3RyaW0nKTtcblxudmFyIF90cmltMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RyaW0pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgd3MgPSAvXFxzKy87IC8qKlxuICAgICAgICAgICAgICAgICAqICMgUmVtb3ZlIENsYXNzXG4gICAgICAgICAgICAgICAgICogUmVtb3ZlIGEgY2xhc3Mgb24gYW4gZWxlbWVudC5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RWxlbWVudHxBcnJheX0gZWwgQW4gZWxlbWVudCBvciBhcnJheSBvZiBlbGVtZW50cyB0byB1cGRhdGUuXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogQG1vZHVsZSBoZWxwZXJzL2RvbS9yZW1vdmUtY2xhc3MuanNcbiAgICAgICAgICAgICAgICAgKi9cblxudmFyIGNsZWFudXAgPSAvXFxzezIsfS9nO1xuXG5mdW5jdGlvbiByZW1vdmVDbGFzcyhlbCwgbmFtZSkge1xuXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyICYmIHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJykge1xuICAgIG5hbWUgPSAoMCwgX3RyaW0yLmRlZmF1bHQpKG5hbWUpLnNwbGl0KHdzKTtcbiAgfSBlbHNlIHtcbiAgICBuYW1lID0gbmFtZSBpbnN0YW5jZW9mIEFycmF5ID8gbmFtZSA6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gIH1cblxuICAvLyBvcHRpbWl6ZSBmb3IgYmVzdCwgbW9zdCBjb21tb24gY2FzZVxuICBpZiAobmFtZS5sZW5ndGggPT09IDEgJiYgZWwuY2xhc3NMaXN0KSB7XG4gICAgaWYgKG5hbWVbMF0pIGVsLmNsYXNzTGlzdC5yZW1vdmUobmFtZVswXSk7XG4gICAgcmV0dXJuIGVsO1xuICB9XG5cbiAgLy8gc3RvcmUgdHdvIGNvcGllc1xuICB2YXIgY2xzTmFtZSA9ICcgJyArICh0eXBlb2YgZWwuY2xhc3NOYW1lID09PSAnc3RyaW5nJyA/IGVsLmNsYXNzTmFtZSA6IGVsLmdldEF0dHJpYnV0ZSA/IGVsLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSA6ICcnKSArICcgJztcbiAgdmFyIHJlc3VsdCA9IGNsc05hbWU7XG4gIHZhciBjdXJyZW50ID0gdm9pZCAwO1xuICB2YXIgc3RhcnQgPSB2b2lkIDA7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gbmFtZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBjdXJyZW50ID0gbmFtZVtpXTtcbiAgICBzdGFydCA9IGN1cnJlbnQgPyByZXN1bHQuaW5kZXhPZignICcgKyBjdXJyZW50ICsgJyAnKSA6IC0xO1xuICAgIGlmIChzdGFydCAhPT0gLTEpIHtcbiAgICAgIHN0YXJ0ICs9IDE7XG4gICAgICByZXN1bHQgPSByZXN1bHQuc2xpY2UoMCwgc3RhcnQpICsgcmVzdWx0LnNsaWNlKHN0YXJ0ICsgY3VycmVudC5sZW5ndGgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIG9ubHkgd3JpdGUgaWYgbW9kaWZpZWRcbiAgaWYgKGNsc05hbWUgIT09IHJlc3VsdCkge1xuICAgIGlmICh0eXBlb2YgZWwuY2xhc3NOYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgZWwuY2xhc3NOYW1lID0gKDAsIF90cmltMi5kZWZhdWx0KShyZXN1bHQucmVwbGFjZShjbGVhbnVwLCAnICcpKTtcbiAgICB9IGVsc2UgaWYgKGVsLnNldEF0dHJpYnV0ZSkge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsICgwLCBfdHJpbTIuZGVmYXVsdCkocmVzdWx0LnJlcGxhY2UoY2xlYW51cCwgJyAnKSkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBlbDtcbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gcmVtb3ZlQ2xhc3M7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlbW92ZS1jbGFzcy5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9oYXNDbGFzcyA9IHJlcXVpcmUoJy4vaGFzLWNsYXNzJyk7XG5cbnZhciBfaGFzQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaGFzQ2xhc3MpO1xuXG52YXIgX2FkZENsYXNzID0gcmVxdWlyZSgnLi9hZGQtY2xhc3MnKTtcblxudmFyIF9hZGRDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hZGRDbGFzcyk7XG5cbnZhciBfcmVtb3ZlQ2xhc3MgPSByZXF1aXJlKCcuL3JlbW92ZS1jbGFzcycpO1xuXG52YXIgX3JlbW92ZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlbW92ZUNsYXNzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoZWwsIG5hbWUsIGVuYWJsZSkge1xuXG4gIGlmICghZWwpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBJZiB3ZSdyZSBwYXNzZWQgYW4gYXJyYXksIHRvZ2dsZSB0aGUgY2xhc3Mgb24gZWFjaC5cbiAgaWYgKGVsIGluc3RhbmNlb2YgTm9kZUxpc3QgfHwgZWwgaW5zdGFuY2VvZiBBcnJheSkge1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGVsLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB0b2dnbGVDbGFzcyhlbFtpXSwgbmFtZSwgZW5hYmxlKTtcbiAgICB9XG5cbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgYWN0aW9uID0gdm9pZCAwO1xuICBpZiAoZW5hYmxlICE9PSB1bmRlZmluZWQpIHtcbiAgICBlbmFibGUgPSB0eXBlb2YgZW5hYmxlID09PSAnZnVuY3Rpb24nID8gZW5hYmxlLmNhbGwobnVsbCwgZWwpIDogZW5hYmxlO1xuICAgIGFjdGlvbiA9IGVuYWJsZSA/ICdhZGQnIDogJ3JlbW92ZSc7XG4gIH0gZWxzZSB7XG4gICAgYWN0aW9uID0gKDAsIF9oYXNDbGFzczIuZGVmYXVsdCkoZWwsIG5hbWUpID8gJ3JlbW92ZScgOiAnYWRkJztcbiAgfVxuXG4gIHJldHVybiAoYWN0aW9uID09PSAnYWRkJyA/IF9hZGRDbGFzczIuZGVmYXVsdCA6IF9yZW1vdmVDbGFzczIuZGVmYXVsdCkoZWwsIG5hbWUpO1xufSAvKipcbiAgICogIyBUb2dnbGUgQ2xhc3NcbiAgICogVG9nZ2xlIGEgY2xhc3Mgb24gYW4gZWxlbWVudCBnaXZlbiBhIGNvbmRpdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fEFycmF5fSBlbCBBbiBlbGVtZW50IG9yIGFycmF5IG9mIGVsZW1lbnRzIHRvIHVwZGF0ZS5cbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICogQHBhcmFtIHtCb29sZWFufSBlbmFibGVcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICpcbiAgICogQG1vZHVsZSAgaGVscGVycy9kb20vdG9nZ2xlLWNsYXNzLmpzXG4gICAqL1xuXG5leHBvcnRzLmRlZmF1bHQgPSB0b2dnbGVDbGFzcztcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9nZ2xlLWNsYXNzLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX21hdGNoZXMgPSByZXF1aXJlKCcuL21hdGNoZXMnKTtcblxudmFyIF9tYXRjaGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21hdGNoZXMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBnZXRQYXJlbnQocGFyZW50LCBxdWVyeSwgbGltaXRFbCkge1xuXG4gIGxpbWl0RWwgPSBsaW1pdEVsIGluc3RhbmNlb2YgQXJyYXkgPyBsaW1pdEVsIDogW2xpbWl0RWwgfHwgZG9jdW1lbnQuYm9keV07XG5cbiAgd2hpbGUgKHBhcmVudCkge1xuXG4gICAgaWYgKCgwLCBfbWF0Y2hlczIuZGVmYXVsdCkocGFyZW50LCBxdWVyeSkpIHtcbiAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgfVxuXG4gICAgaWYgKGxpbWl0RWwuaW5kZXhPZihwYXJlbnQpICE9PSAtMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnROb2RlO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufSAvKipcbiAgICogIyBHZXQgUGFyZW50XG4gICAqIFNlZSBpZiBhbiBlbGVtZW50IGhhcyBhbm90aGVyIGVsZW1lbnQgZm9yIGEgcGFyZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHBhcmVudFxuICAgKiBAcGFyYW0ge1N0cmluZ30gcXVlcnlcbiAgICogQHBhcmFtIHtBcnJheXxFbGVtZW50fSBsaW1pdEVsIFRoZSBsYXN0IGVsZW1lbnQgd2Ugc2hvdWxkIGNoZWNrLlxuICAgKiBAcmV0dXJuIHtCb29sZWFufEVsZW1lbnR9XG4gICAqXG4gICAqIEBtb2R1bGUgaGVscGVycy90cmF2ZXJzYWwvZ2V0LXBhcmVudC5qc1xuICAgKi9cblxuZXhwb3J0cy5kZWZhdWx0ID0gZ2V0UGFyZW50O1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXQtcGFyZW50LmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuLyoqXG4gKiAjIE1hdGNoZXNcbiAqIFNlZSBpZiBhbiBlbGVtZW50IG1hdGNoZXMgYSBxdWVyeSBzZWxlY3Rvci5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gcXVlcnlcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKlxuICogQG1vZHVsZSBoZWxwZXJzL3RyYXZlcnNhbC9tYXRjaGVzLmpzXG4gKi9cbnZhciB2ZW5kb3JNYXRjaCA9IHR5cGVvZiBFbGVtZW50ICE9PSAndW5kZWZpbmVkJyAmJiAoRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcyB8fCBFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8IEVsZW1lbnQucHJvdG90eXBlLm1vek1hdGNoZXNTZWxlY3RvciB8fCBFbGVtZW50LnByb3RvdHlwZS5tc01hdGNoZXNTZWxlY3RvciB8fCBFbGVtZW50LnByb3RvdHlwZS5vTWF0Y2hlc1NlbGVjdG9yKTtcblxuZnVuY3Rpb24gbWF0Y2hlcyhlbCwgcXVlcnkpIHtcblxuICBpZiAodmVuZG9yTWF0Y2gpIHJldHVybiB2ZW5kb3JNYXRjaC5jYWxsKGVsLCBxdWVyeSk7XG5cbiAgdmFyIG5vZGVzID0gZWwucGFyZW50Tm9kZSA/IGVsLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbChxdWVyeSkgOiBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKG5vZGVzW2ldID09PSBlbCkgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydHMuZGVmYXVsdCA9IG1hdGNoZXM7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hdGNoZXMuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG4vKipcbiAqICMgRWFjaFxuICogQXBwbHkgYSBjYWxsYmFjayBmdW5jdGlvbiB0byBhIGxpc3Qgb2YgYW55IGtpbmQ6IEFycmF5LCBOb2RlTGlzdCwgSFRNTENvbGxlY3Rpb24gb3IgT2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7QXJyYXl8Tm9kZUxpc3R8SFRNTENvbGxlY3Rpb258T2JqZWN0fSBsaXN0XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICpcbiAqIEBleGFtcGxlXG4gKiBlYWNoKFtdLCBjYWxsYmFjayk7XG4gKiBlYWNoKGVsLmNoaWxkcmVuLCBjYWxsYmFjayk7XG4gKiBlYWNoKGVsLmNoaWxkTm9kZXMsIGNhbGxiYWNrKTtcbiAqIGVhY2goe30sIGNhbGxiYWNrKTtcbiAqXG4gKiBAbW9kdWxlIGhlbHBlcnMvdXRpbC9lYWNoLmpzXG4gKi9cbmZ1bmN0aW9uIGVhY2gobGlzdCwgY2IpIHtcblxuICBpZiAoIWxpc3QpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAodHlwZW9mIGNiICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgaW52b2tlIGBlYWNoYCB3aXRob3V0IGEgY2FsbGJhY2shJyk7XG4gIH1cblxuICB2YXIgaSA9IDA7XG4gIHZhciBsZW4gPSBsaXN0Lmxlbmd0aDtcblxuICAvLyBPYmplY3RcbiAgaWYgKGxlbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZm9yIChpIGluIGxpc3QpIHtcbiAgICAgIGlmIChpICE9PSAncHJvdG90eXBlJyAmJiBsaXN0Lmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgIGNiKGksIGxpc3RbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvLyBBcnJheS1saWtlXG4gIGVsc2Uge1xuICAgICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBjYihsaXN0W2ldKTtcbiAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGVhY2g7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVhY2guanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG4vKipcbiAqICMgVHJpbVxuICogVHJpbSB3aGl0ZXNwYWNlIG9uIGEgc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqXG4gKiBAbW9kdWxlIGhlbHBlcnMvdXRpbC90cmltLmpzXG4gKi9cblxudmFyIHRyaW1SRSA9IC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZztcblxuZnVuY3Rpb24gdHJpbShzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKHRyaW1SRSwgJycpO1xufVxuXG5leHBvcnRzLmRlZmF1bHQgPSB0cmltO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmltLmpzLm1hcFxuIl19"}