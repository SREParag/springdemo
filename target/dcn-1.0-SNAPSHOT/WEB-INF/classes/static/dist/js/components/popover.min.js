/* sabre-spark - v2.2.0 - 2017-4-25 DO NOT MODIFY THIS FILE DIRECTLY OR YOU WILL NOT BE ABLE TO UPDATE YOUR VERSION OF SPARK. */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.Spark||(e.Spark={})).Popover=t()}}(function(){return function t(e,o,i){function n(s,l){if(!o[s]){if(!e[s]){var a="function"==typeof require&&require;if(!l&&a)return a(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=o[s]={exports:{}};e[s][0].call(u.exports,function(t){var o=e[s][1][t];return n(o||t)},u,u.exports,t,e,o,i)}return o[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(t,e,o){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(o,"__esModule",{value:!0});var n=t("../helpers/util/each"),r=function(t){return t&&t.__esModule?t:{default:t}}(n),s=function(){},l=function(){function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),o.elRequired&&!e||(this.setParams(this.defaults||{},!0),this.setParams(o),(this._cacheElements||s).call(this,e,o),(this._parseParams||s).call(this))}return t.prototype.remove=function(t){return this._removeEventListeners&&this._removeEventListeners(),!t&&this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.unsetParams(this.defaults),this},t.prototype.update=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._removeEventListeners&&this._removeEventListeners(),(this._cacheElements||s).call(this,t||this.el,e),(this._parseParams||s).call(this),this._addEventListeners&&this._addEventListeners(),this},t.prototype.setParams=function(t,e){var o=this;return(0,r.default)(t,function(t,i){(-1!==o._whitelistedParams.indexOf(t)||e)&&(o[t]=i)}),this},t.prototype.unsetParams=function(t,e){return t=t instanceof Array?t:Object.keys(t),e=e||this,(0,r.default)(t,function(t){delete e[t]}),this},t}();l.prototype._whitelistedParams=[],l.prototype.defaults={},o.default=l,e.exports=o.default},{"../helpers/util/each":16}],2:[function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(o,"__esModule",{value:!0});var l=t("./base"),a=i(l),c=t("../helpers/dom/add-class"),u=i(c),h=t("../helpers/dom/has-class"),d=i(h),f=t("../helpers/dom/toggle-class"),p=i(f),v=t("../helpers/manipulation/append-children"),_=i(v),g=t("../helpers/traversal/has-parent"),m=i(g),y=t("../helpers/traversal/get-parent"),E=i(y),b=t("../helpers/dom/parse-attribute"),w=t("../helpers/position/affix"),x=i(w),k=function(){},C=function(t){function e(o){var i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e);var l=r(this,t.call(this,o,s));return o?(l._bindEventListenerCallbacks(),l._addEventListeners(),l):(i=l,r(l,i))}return s(e,t),e.prototype.open=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.closeTimer&&(clearTimeout(this.closeTimer),this.closeTimer=null),this._checkFixedPosition(),this.affix?(this.affix.targetEl=t.affixTo||this.affix.targetEl,this.affix.update()):this.affix=new x.default({el:this.contentEl,targetEl:t.affixTo||this.el,caretEl:this.caretEl,anchorX:this.anchorX,anchorY:this.anchorY,isFixed:this.isFixed}),this._addWindowEventListeners(),this.isActive=!0;var e=document.createEvent("Event");return e.initEvent("spark.visible-children",!0,!0),this.contentEl.dispatchEvent(e),this._updateAttributes(),(t.complete||k)(),(this.onOpen||k)(),this},e.prototype.close=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.affix?(this.closeTimer&&(clearTimeout(this.closeTimer),this.closeTimer=null),this._removeWindowEventListeners(),this.isActive=!1,this._updateAttributes(),this.closeTimer=setTimeout(function(){t._finishClose(e)},250),this):this},e.prototype.toggle=function(){return this[this.isActive?"close":"open"]()},e.prototype.setContent=function(t,e){return e=e||{},(0,_.default)(this.contentEl,t.length?t:[t],!e.append),this},e.prototype.update=function(t){return this._removeEventListeners(),this._cacheElements(t||this.el),this._addEventListeners(),this.affix&&this.affix.update(),this},e.prototype._cacheElements=function(t){this.contentEl&&(0,u.default)(this.contentEl,"spark-popover__content"),this.el=t,this.toggleEl=this.el.querySelector('.spark-popover__toggle, [data-role="toggle"]')||this.el,this.contentEl=this.contentEl||this.el.querySelector('.spark-popover__content, [class*="spark-popover__content--"]')||this._createContentEl(),this.caretEl=this.contentEl.querySelector(".spark-popover__caret")||this._createCaretEl(),this.isActive=(0,d.default)(this.toggleEl,"popover-active")},e.prototype._parseParams=function(){this.anchorY=null!==this.anchorY?this.anchorY:(0,b.string)(this.contentEl,"data-anchor-y",null),this.anchorX=null!==this.anchorX?this.anchorX:(0,b.string)(this.contentEl,"data-anchor-x",null),this.anchorY||this.anchorX||((0,d.default)(this.contentEl,"spark-popover__content--left")?(this.anchorY="middle",this.anchorX="left"):(0,d.default)(this.contentEl,"spark-popover__content--right")?(this.anchorY="middle",this.anchorX="right"):(0,d.default)(this.contentEl,"spark-popover__content--top")?(this.anchorY="top",this.anchorX="center"):(this.anchorY="bottom",this.anchorX="center"))},e.prototype._checkFixedPosition=function(){for(var t=this.el;t&&t!==document;){if("fixed"===getComputedStyle(t).position)return this.isFixed=!0;t=t.parentNode}return this.isFixed=!1},e.prototype._updateAttributes=function(){(0,p.default)(this.el,"popover-active",this.isActive),(0,p.default)(this.contentEl,"active",this.isActive),(0,p.default)(this.toggleEl,"active",this.isActive)},e.prototype._bindEventListenerCallbacks=function(){this._onClickBound=this._onClick.bind(this),this._onContentClickBound=this._onContentClick.bind(this),this._onWindowClickBound=this._onWindowClick.bind(this)},e.prototype._addEventListeners=function(){this.el.addEventListener("click",this._onClickBound),this.contentEl.addEventListener("click",this._onContentClickBound)},e.prototype._removeEventListeners=function(){this.el.removeEventListener("click",this._onClickBound),this.contentEl.removeEventListener("click",this._onContentClickBound)},e.prototype._addWindowEventListeners=function(){this._removeWindowEventListeners(),window.addEventListener("click",this._onWindowClickBound)},e.prototype._removeWindowEventListeners=function(){window.removeEventListener("click",this._onWindowClickBound)},e.prototype._createContentEl=function(){var t=document.createElement("div");return(0,u.default)(t,"spark-popover__content"),t.setAttribute("role","tooltip"),t},e.prototype._createCaretEl=function(){var t=document.createElement("div");return t.className="spark-popover__caret",this.contentEl.appendChild(t),t},e.prototype._finishClose=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.closeTimer=null,this.el.appendChild(this.contentEl),this.affix.remove({keepEl:!0}),this.affix=null,(t.complete||k)(),(this.onClose||k)()},e.prototype._onClick=function(t){if(t.target===this.toggleEl||(0,m.default)(t.target,this.toggleEl))return t.preventDefault(),void this.toggle()},e.prototype._onContentClick=function(t){if((0,E.default)(t.target,".spark-popover__list-link",this.contentEl)||(0,E.default)(t.target,".spark-popover__close",this.contentEl))return void this.close()},e.prototype._onWindowClick=function(t){t.target===this.el||(0,m.default)(t.target,this.el)||(0,m.default)(t.target,this.contentEl)||this.close()},e}(a.default);C.prototype._whitelistedParams=["anchorX","anchorY","toggleEl","contentEl","onOpen","onClose"],C.prototype.defaults={el:null,toggleEl:null,contentEl:null,caretEl:null,affix:null,isActive:!1,isPaused:!1,isFixed:!1,anchorX:null,anchorY:null,closeTimer:null,onOpen:null,onClose:null,_onClickBound:null,_onContentClickBound:null,_onWindowClickBound:null,_onWindowResizeBound:null,_onWindowScrollBound:null},o.default=C,e.exports=o.default},{"../helpers/dom/add-class":3,"../helpers/dom/has-class":4,"../helpers/dom/parse-attribute":6,"../helpers/dom/toggle-class":8,"../helpers/manipulation/append-children":9,"../helpers/position/affix":10,"../helpers/traversal/get-parent":12,"../helpers/traversal/has-parent":13,"./base":1}],3:[function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(e=2===arguments.length&&"string"==typeof e?(0,s.default)(e).split(c):e instanceof Array?e:Array.prototype.slice.call(arguments,1),1===e.length&&t.classList)return e[0]&&t.classList.add(e[0]),t;for(var o=[],i=0,n=e.length,r=void 0,l="string"==typeof t.className?t.className:t.getAttribute?t.getAttribute("class"):"";i<n;i++)(r=e[i])&&!(0,a.default)(l,r)&&o.push(r);return o.length&&("string"==typeof t.className?t.className=(0,s.default)((l+" "+o.join(" ")).replace(u," ")):t.setAttribute&&t.setAttribute("class",(0,s.default)((l+" "+o.join(" ")).replace(u," ")))),t}Object.defineProperty(o,"__esModule",{value:!0});var r=t("../util/trim"),s=i(r),l=t("./has-class"),a=i(l),c=/\s+/,u=/\s{2,}/g;o.default=n,e.exports=o.default},{"../util/trim":17,"./has-class":4}],4:[function(t,e,o){"use strict";function i(t,e){return-1!==(" "+("object"===(void 0===t?"undefined":n(t))?t.className||t.getAttribute&&t.getAttribute("class")||"":t||"").replace(/[\t\r\n\f]/g," ")+" ").indexOf(" "+e+" ")}Object.defineProperty(o,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};o.default=i,e.exports=o.default},{}],5:[function(t,e,o){"use strict";function i(t,e){var o={top:0,left:0};if(t.getBoundingClientRect){var i=t.getBoundingClientRect();o.left=i.left,o.top=i.top,e||(o.left+=void 0!==window.scrollX?window.scrollX:window.pageXOffset,o.top+=void 0!==window.scrollY?window.scrollY:window.pageYOffset)}else{var n=0,r=0;do{n+=t.offsetLeft-(e?0:t.scrollLeft),r+=t.offsetTop-(e?0:t.scrollTop)}while(t=t.offsetParent);o.left=n,o.top=r}return o}Object.defineProperty(o,"__esModule",{value:!0}),o.default=i,e.exports=o.default},{}],6:[function(t,e,o){"use strict";function i(t,e,o){var i=t.getAttribute(e);return null===i?o:"true"===i||""===i}function n(t,e,o){var i=t.getAttribute(e);return null===i?o:parseInt(i,10)}function r(t,e,o){var i=t.getAttribute(e);return null===i?o:i}Object.defineProperty(o,"__esModule",{value:!0}),o.boolean=i,o.number=n,o.string=r},{}],7:[function(t,e,o){"use strict";function i(t,e){if(e=2===arguments.length&&"string"==typeof e?(0,r.default)(e).split(s):e instanceof Array?e:Array.prototype.slice.call(arguments,1),1===e.length&&t.classList)return e[0]&&t.classList.remove(e[0]),t;for(var o=" "+("string"==typeof t.className?t.className:t.getAttribute?t.getAttribute("class"):"")+" ",i=o,n=void 0,a=void 0,c=0,u=e.length;c<u;c++)n=e[c],-1!==(a=n?i.indexOf(" "+n+" "):-1)&&(a+=1,i=i.slice(0,a)+i.slice(a+n.length));return o!==i&&("string"==typeof t.className?t.className=(0,r.default)(i.replace(l," ")):t.setAttribute&&t.setAttribute("class",(0,r.default)(i.replace(l," ")))),t}Object.defineProperty(o,"__esModule",{value:!0});var n=t("../util/trim"),r=function(t){return t&&t.__esModule?t:{default:t}}(n),s=/\s+/,l=/\s{2,}/g;o.default=i,e.exports=o.default},{"../util/trim":17}],8:[function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e,o){if(t){if(!(t instanceof NodeList||t instanceof Array)){var i=void 0;return void 0!==o?(o="function"==typeof o?o.call(null,t):o,i=o?"add":"remove"):i=(0,s.default)(t,e)?"remove":"add",("add"===i?a.default:u.default)(t,e)}for(var r=0,l=t.length;r<l;r++)n(t[r],e,o)}}Object.defineProperty(o,"__esModule",{value:!0});var r=t("./has-class"),s=i(r),l=t("./add-class"),a=i(l),c=t("./remove-class"),u=i(c);o.default=n,e.exports=o.default},{"./add-class":3,"./has-class":4,"./remove-class":7}],9:[function(t,e,o){"use strict";function i(t,e,o){if(o=void 0!==o&&o,o&&(t.textContent=""),e instanceof window.HTMLCollection)for(;e.length;)t.appendChild(e[0]);else(0,r.default)(e,function(e){e&&t.appendChild(e)})}Object.defineProperty(o,"__esModule",{value:!0});var n=t("../util/each"),r=function(t){return t&&t.__esModule?t:{default:t}}(n);o.default=i,e.exports=o.default},{"../util/each":16}],10:[function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(o,"__esModule",{value:!0});var r=t("../dom/offset"),s=i(r),l=t("./box-position"),a=i(l),c=t("../util/debounce"),u=i(c),h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t),this.el=e.el,this.targetEl=e.targetEl,this.caretEl=e.caretEl,this.anchorY=e.anchorY||"top",this.anchorX=e.anchorX||"center",this.isFixed=e.isFixed||!1,this._addEventListeners(),this._insertEl(),this._setPosition(),this._updateDebounced=(0,u.default)(this.update.bind(this),500)}return t.prototype.remove=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).keepEl||this._removeEl(),this._removeEventListeners(),this},t.prototype.update=function(){return this._setPosition(),this},t.prototype._addEventListeners=function(){this._onResizeBound=this._onResize.bind(this),this._onScrollBound=this._onScroll.bind(this),window.addEventListener("resize",this._onResizeBound),window.addEventListener("scroll",this._onScrollBound)},t.prototype._removeEventListeners=function(){window.removeEventListener("resize",this._onResizeBound),window.removeEventListener("scroll",this._onScrollBound)},t.prototype._insertEl=function(){this.el.setAttribute("data-affixed",""),this._getRootEl().appendChild(this.el)},t.prototype._removeEl=function(){this.el.parentNode.removeChild(this.el),this.el.removeAttribute("data-affixed")},t.prototype._setPosition=function(){this.el.style.setProperty("position",this.isFixed?"fixed":"absolute","important");var t=(0,s.default)(this.targetEl,this.isFixed),e=t.top,o=t.left,i=this.targetEl.offsetWidth,n=this.targetEl.offsetHeight,r=this.el.offsetWidth,l=this.el.offsetHeight,a=document.documentElement.offsetHeight,c=document.documentElement.offsetWidth,u=this._calculatePosition({anchorX:this.anchorX,anchorY:this.anchorY,targetTop:e,targetLeft:o,elHeight:l,elWidth:r,targetHeight:n,targetWidth:i,minX:0,minY:0,maxX:c-r,maxY:Math.max(a-l,0)}),h=u.elTop,d=u.elLeft,f=this._positionCaret({elLeft:d,elTop:h,elWidth:r,elHeight:l,targetHeight:n,targetWidth:i,targetLeft:o,targetTop:e}),p=f.extraLeft,v=f.extraTop;this.el.style.left=d+p+"px",this.el.style.top=h+v+"px"},t.prototype._calculatePosition=function(t){t.previousAttempts=(t.previousAttempts||0)+1,t.previousChecks=t.previousChecks||[];var e=t.previousAttempts>3,o=void 0,i=void 0;switch(t.anchorY){case"bottom":o=t.targetTop+t.targetHeight;break;case"middle":o=t.targetTop-(t.elHeight-t.targetHeight)/2;break;default:o=t.targetTop-t.elHeight}if(o<t.minY){if(!e&&-1===t.previousChecks.indexOf("overY"))return t.previousChecks.push("underY"),t.anchorY=this._getNewAnchorY(!0,t.anchorY,t.anchorX),this._calculatePosition(t);o=t.minY}switch(t.anchorX){case"right":i=t.targetLeft+("middle"===t.anchorY||t.isOverlapping?t.targetWidth:0);break;case"center":i=t.targetLeft-(t.elWidth-t.targetWidth)/2;break;default:i=t.targetLeft-t.elWidth+("middle"!==t.anchorY?t.targetWidth:0)}if(i<t.minX){if(!e&&-1===t.previousChecks.indexOf("overX"))return t.previousChecks.push("underX"),t.anchorX=this._getNewAnchorX(!0,t.anchorX,t.anchorY),this._calculatePosition(t);i=t.minX}if(i>t.maxX){if(!e&&-1===t.previousChecks.indexOf("underX"))return t.previousChecks.push("overX"),t.anchorX=this._getNewAnchorX(!1,t.anchorX,t.anchorY),this._calculatePosition(t);i=t.maxX}if("overlap"===(0,a.default)({width:t.elWidth,height:t.elHeight,left:i,top:o},{width:t.targetWidth,height:t.targetHeight,left:t.targetLeft,top:t.targetTop})){if(t.isOverlapping=!0,!1!==t.repositionY)return t.repositionY=!t.repositionY,t.anchorY=this._getNewAnchorY(t.repositionY,"middle",t.anchorX),t.previousAttempts--,this._calculatePosition(t);if(!1!==t.repositionX)return t.repositionX=!t.repositionX,t.anchorX=this._getNewAnchorX(t.repositionX,"center",t.anchorY),t.previousAttempts--,this._calculatePosition(t)}return{elTop:o,elLeft:i,anchorX:t.anchorX,anchorY:t.anchorY}},t.prototype._getNewAnchorY=function(t,e,o){return"center"===o||"middle"===e?t?"bottom":"top":"middle"},t.prototype._getNewAnchorX=function(t,e,o){return"middle"===o||"center"===e?t?"left":"right":"center"},t.prototype._positionCaret=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.caretEl){var e=(0,a.default)({width:t.elWidth,height:t.elHeight,left:t.elLeft,top:t.elTop},{width:t.targetWidth,height:t.targetHeight,left:t.targetLeft,top:t.targetTop}),o=this.caretEl.getBoundingClientRect(),i=o.width,n=o.height,r=Math.min(t.elWidth,Math.max(0,t.targetLeft-t.elLeft+t.targetWidth/2)),s=Math.min(t.elHeight,Math.max(0,t.targetTop-t.elTop+t.targetHeight/2));this.caretEl.style.left=Math.round(r)+"px",this.caretEl.style.top=Math.round(s)+"px";var l=0,c=0;switch(this.caretEl.setAttribute("data-position",e),e){case"above":c=-i/2;break;case"below":c=i/2;break;case"left":l=-n/2;break;default:l=n/2}return{extraLeft:l,extraTop:c}}},t.prototype._getRootEl=function(){var t=document.querySelector("body > form");return t&&null===t.getAttribute("data-affixed")?t:document.body},t.prototype._onResize=function(){this.update()},t.prototype._onScroll=function(){this._updateDebounced()},t}();o.default=h,e.exports=o.default},{"../dom/offset":5,"../util/debounce":15,"./box-position":11}],11:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(t,e){var o=t.left+t.width,i=t.top+t.height,n=e.left+e.width,r=e.top+e.height;return o<=e.left?"left":t.left>=n?"right":i<=e.top?"above":t.top>=r?"below":"overlap"},e.exports=o.default},{}],12:[function(t,e,o){"use strict";function i(t,e,o){for(o=o instanceof Array?o:[o||document.body];t;){if((0,r.default)(t,e))return t;if(-1!==o.indexOf(t))return!1;t=t.parentNode}return!1}Object.defineProperty(o,"__esModule",{value:!0});var n=t("./matches"),r=function(t){return t&&t.__esModule?t:{default:t}}(n);o.default=i,e.exports=o.default},{"./matches":14}],13:[function(t,e,o){"use strict";function i(t,e){for(var o=t.parentNode;o;){if(o===e)return!0;o=o.parentNode}return!1}Object.defineProperty(o,"__esModule",{value:!0}),o.default=i,e.exports=o.default},{}],14:[function(t,e,o){"use strict";function i(t,e){if(n)return n.call(t,e);for(var o=t.parentNode?t.parentNode.querySelectorAll(e):[],i=0;i<o.length;i++)if(o[i]===t)return!0;return!1}Object.defineProperty(o,"__esModule",{value:!0});var n="undefined"!=typeof Element&&(Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector);o.default=i,e.exports=o.default},{}],15:[function(t,e,o){"use strict";function i(t,e){var o=void 0;return function(){var i=arguments;o&&window.clearTimeout(o),o=window.setTimeout(function(){t.apply(this,i)},e)}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=i,e.exports=o.default},{}],16:[function(t,e,o){"use strict";function i(t,e){if(t){if("function"!=typeof e)throw new Error("Cannot invoke `each` without a callback!");var o=0,i=t.length;if(void 0===i)for(o in t)"prototype"!==o&&t.hasOwnProperty(o)&&e(o,t[o]);else for(;o<i;o++)e(t[o])}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=i,e.exports=o.default},{}],17:[function(t,e,o){"use strict";function i(t){return t.replace(n,"")}Object.defineProperty(o,"__esModule",{value:!0});var n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;o.default=i,e.exports=o.default},{}]},{},[2])(2)});